var kx=Object.defineProperty;var Ox=(e,t,r)=>t in e?kx(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var Ao=(e,t,r)=>Ox(e,typeof t!="symbol"?t+"":t,r);import{r as y,a as wc,g as Ax,c as Nt,b as cr,R as ll}from"./vendor-D_UVcxu2.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const s of a.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&n(s)}).observe(document,{childList:!0,subtree:!0});function r(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(i){if(i.ep)return;i.ep=!0;const a=r(i);fetch(i.href,a)}})();var Rm={exports:{}},ds={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ex=y,Cx=Symbol.for("react.element"),Mx=Symbol.for("react.fragment"),Tx=Object.prototype.hasOwnProperty,Dx=Ex.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Ix={key:!0,ref:!0,__self:!0,__source:!0};function Um(e,t,r){var n,i={},a=null,s=null;r!==void 0&&(a=""+r),t.key!==void 0&&(a=""+t.key),t.ref!==void 0&&(s=t.ref);for(n in t)Tx.call(t,n)&&!Ix.hasOwnProperty(n)&&(i[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps,t)i[n]===void 0&&(i[n]=t[n]);return{$$typeof:Cx,type:e,key:a,ref:s,props:i,_owner:Dx.current}}ds.Fragment=Mx;ds.jsx=Um;ds.jsxs=Um;Rm.exports=ds;var l=Rm.exports,Bm,Pd=wc;Bm=Pd.createRoot,Pd.hydrateRoot;/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var $x={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lx=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),te=(e,t)=>{const r=y.forwardRef(({color:n="currentColor",size:i=24,strokeWidth:a=2,absoluteStrokeWidth:s,className:o="",children:c,...d},u)=>y.createElement("svg",{ref:u,...$x,width:i,height:i,stroke:n,strokeWidth:s?Number(a)*24/Number(i):a,className:["lucide",`lucide-${Lx(e)}`,o].join(" "),...d},[...t.map(([h,f])=>y.createElement(h,f)),...Array.isArray(c)?c:[c]]));return r.displayName=`${e}`,r};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rx=te("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vi=te("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Be=te("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ux=te("BellOff",[["path",{d:"M8.7 3A6 6 0 0 1 18 8a21.3 21.3 0 0 0 .6 5",key:"o7mx20"}],["path",{d:"M17 17H3s3-2 3-9a4.67 4.67 0 0 1 .3-1.7",key:"16f1lm"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bx=te("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Or=te("Brain",[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z",key:"ep3f8r"}],["path",{d:"M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4",key:"1p4c4q"}],["path",{d:"M17.599 6.5a3 3 0 0 0 .399-1.375",key:"tmeiqw"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M19.938 10.5a4 4 0 0 1 .585.396",key:"1qfode"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M19.967 17.484A4 4 0 0 1 18 18",key:"159ez6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fx=te("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rn=te("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dn=te("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zx=te("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wx=te("Cpu",[["rect",{x:"4",y:"4",width:"16",height:"16",rx:"2",key:"1vbyd7"}],["rect",{x:"9",y:"9",width:"6",height:"6",key:"o3kz5p"}],["path",{d:"M15 2v2",key:"13l42r"}],["path",{d:"M15 20v2",key:"15mkzm"}],["path",{d:"M2 15h2",key:"1gxd5l"}],["path",{d:"M2 9h2",key:"1bbxkp"}],["path",{d:"M20 15h2",key:"19e6y8"}],["path",{d:"M20 9h2",key:"19tzq7"}],["path",{d:"M9 2v2",key:"165o2o"}],["path",{d:"M9 20v2",key:"i2bqo8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fm=te("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zm=te("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pa=te("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yi=te("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kx=te("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hx=te("Grid3x3",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qx=te("HardDrive",[["line",{x1:"22",x2:"2",y1:"12",y2:"12",key:"1y58io"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}],["line",{x1:"6",x2:"6.01",y1:"16",y2:"16",key:"sgf278"}],["line",{x1:"10",x2:"10.01",y1:"16",y2:"16",key:"1l4acy"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vx=te("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gx=te("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yx=te("Layers",[["path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z",key:"8b97xw"}],["path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65",key:"dd6zsq"}],["path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65",key:"ep9fru"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zx=te("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xx=te("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jc=te("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nn=te("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sc=te("Map",[["polygon",{points:"3 6 9 3 15 6 21 3 21 18 15 21 9 18 3 21",key:"ok2ie8"}],["line",{x1:"9",x2:"9",y1:"3",y2:"18",key:"w34qz5"}],["line",{x1:"15",x2:"15",y1:"6",y2:"21",key:"volv9a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wm=te("Maximize2",[["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["polyline",{points:"9 21 3 21 3 15",key:"1avn1i"}],["line",{x1:"21",x2:"14",y1:"3",y2:"10",key:"ota7mn"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jx=te("MemoryStick",[["path",{d:"M6 19v-3",key:"1nvgqn"}],["path",{d:"M10 19v-3",key:"iu8nkm"}],["path",{d:"M14 19v-3",key:"kcehxu"}],["path",{d:"M18 19v-3",key:"1vh91z"}],["path",{d:"M8 11V9",key:"63erz4"}],["path",{d:"M16 11V9",key:"fru6f3"}],["path",{d:"M12 11V9",key:"ha00sb"}],["path",{d:"M2 15h20",key:"16ne18"}],["path",{d:"M2 7a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v1.1a2 2 0 0 0 0 3.837V17a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2v-5.1a2 2 0 0 0 0-3.837Z",key:"lhddv3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cl=te("Minimize2",[["polyline",{points:"4 14 10 14 10 20",key:"11kfnr"}],["polyline",{points:"20 10 14 10 14 4",key:"rlmsce"}],["line",{x1:"14",x2:"21",y1:"10",y2:"3",key:"o5lafz"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qx=te("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eb=te("Pause",[["rect",{width:"4",height:"16",x:"6",y:"4",key:"iffhe4"}],["rect",{width:"4",height:"16",x:"14",y:"4",key:"sjin7j"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Eo=te("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _d=te("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fr=te("Radio",[["path",{d:"M4.9 19.1C1 15.2 1 8.8 4.9 4.9",key:"1vaf9d"}],["path",{d:"M7.8 16.2c-2.3-2.3-2.3-6.1 0-8.5",key:"u1ii0m"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M16.2 7.8c2.3 2.3 2.3 6.1 0 8.5",key:"1j5fej"}],["path",{d:"M19.1 4.9C23 8.8 23 15.1 19.1 19",key:"10b0cb"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Un=te("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Km=te("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hm=te("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tb=te("Server",[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rb=te("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kr=te("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nb=te("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a2.121 2.121 0 1 1 3 3L12 15l-4 1 1-4Z",key:"1lpok0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nd=te("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qm=te("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ib=te("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ul=te("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ni=te("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ab=te("Unlock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 9.9-1",key:"1mm8w8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kd=te("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Od=te("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sb=te("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nt=te("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dl=te("Video",[["path",{d:"m22 8-6 4 6 4V8Z",key:"50v9me"}],["rect",{width:"14",height:"12",x:"2",y:"6",rx:"2",ry:"2",key:"1rqjg6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vm=te("Volume2",[["polygon",{points:"11 5 6 9 2 9 2 15 6 15 11 19 11 5",key:"16drj5"}],["path",{d:"M15.54 8.46a5 5 0 0 1 0 7.07",key:"ltjumu"}],["path",{d:"M19.07 4.93a10 10 0 0 1 0 14.14",key:"1kegas"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gm=te("VolumeX",[["polygon",{points:"11 5 6 9 2 9 2 15 6 15 11 19 11 5",key:"16drj5"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15",key:"1ewh16"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15",key:"5ykzw1"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ad=te("Wifi",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ob=te("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lb=te("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]);class cb extends y.Component{constructor(){super(...arguments),this.state={hasError:!1,retryCount:0},this.handleReset=()=>{try{typeof window<"u"&&window.performanceOptimizer&&typeof window.performanceOptimizer.cleanupMemory=="function"&&window.performanceOptimizer.cleanupMemory()}catch(t){console.warn("Cleanup failed during reset:",t)}this.setState(t=>({hasError:!1,error:void 0,errorInfo:void 0,retryCount:t.retryCount+1})),setTimeout(()=>{window.location.reload()},1e3)},this.handleReload=()=>{try{localStorage.clear(),sessionStorage.clear();const t=setTimeout(()=>{},0);for(let r=0;r<t;r++)clearTimeout(r),clearInterval(r)}catch(t){console.warn("Failed to clear storage:",t)}window.location.reload()}}static getDerivedStateFromError(t){return{hasError:!0,error:t,retryCount:0}}componentDidCatch(t,r){console.error("Uncaught error:",t,r),this.setState({errorInfo:r}),console.error("Application error caught by boundary:",t),(t.message?.includes("memory")||t.message?.includes("heap")||t.message?.includes("out of memory")||t.message?.includes("Maximum call stack"))&&(console.warn("Critical error detected, triggering emergency cleanup"),typeof window<"u"&&window.performanceOptimizer&&typeof window.performanceOptimizer.emergencyStop=="function"&&window.performanceOptimizer.emergencyStop()),window.gtag&&window.gtag("event","exception",{description:t.message,fatal:!0})}render(){if(this.state.hasError){const t=this.state.error?.message?.includes("memory")||this.state.error?.message?.includes("heap");return l.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-4",children:l.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-8 max-w-md w-full text-center",children:[l.jsx("div",{className:"bg-red-100 p-3 rounded-full w-16 h-16 mx-auto mb-4 flex items-center justify-center",children:l.jsx(Be,{className:"w-8 h-8 text-red-600"})}),l.jsx("h1",{className:"text-xl font-semibold text-gray-900 mb-2",children:t?"System Overload":"Application Error"}),l.jsx("p",{className:"text-gray-600 mb-6",children:t?"The application ran out of memory. The system has been reset to recover.":"The Divya Drishti (दिव्य  दृष्टि) monitoring system encountered an unexpected error."}),this.state.error&&l.jsxs("div",{className:"bg-gray-50 rounded-lg p-3 mb-6 text-left",children:[l.jsx("p",{className:"text-sm text-gray-700 font-mono",children:this.state.error.message}),this.state.retryCount>0&&l.jsxs("p",{className:"text-xs text-gray-500 mt-2",children:["Retry attempts: ",this.state.retryCount]})]}),l.jsxs("div",{className:"space-y-3",children:[this.state.retryCount<2&&l.jsxs("button",{onClick:this.handleReset,className:"w-full flex items-center justify-center space-x-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[l.jsx(Un,{className:"w-4 h-4"}),l.jsx("span",{children:"Try Again"})]}),l.jsx("button",{onClick:this.handleReload,className:"w-full px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors",children:"Clear Cache & Reload"}),t&&l.jsxs("div",{className:"text-xs text-gray-500 mt-4",children:[l.jsx("p",{children:"💡 Tips to prevent memory errors:"}),l.jsxs("ul",{className:"text-left mt-2 space-y-1",children:[l.jsx("li",{children:"• Close other browser tabs"}),l.jsx("li",{children:"• Avoid heavy operations"}),l.jsx("li",{children:"• Refresh the page periodically"}),l.jsx("li",{children:"• Use a more powerful device"})]})]}),this.state.retryCount>=2&&l.jsx("div",{className:"text-xs text-red-600 mt-4",children:l.jsx("p",{children:"Multiple retry attempts failed. Please reload the page or contact support."})})]})]})})}return this.props.children}}const ub="modulepreload",db=function(e){return"/"+e},Ed={},Fi=function(t,r,n){let i=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const s=document.querySelector("meta[property=csp-nonce]"),o=s?.nonce||s?.getAttribute("nonce");i=Promise.allSettled(r.map(c=>{if(c=db(c),c in Ed)return;Ed[c]=!0;const d=c.endsWith(".css"),u=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${u}`))return;const h=document.createElement("link");if(h.rel=d?"stylesheet":ub,d||(h.as="script"),h.crossOrigin="",h.href=c,o&&h.setAttribute("nonce",o),document.head.appendChild(h),d)return new Promise((f,m)=>{h.addEventListener("load",f),h.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${c}`)))})}))}function a(s){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=s,window.dispatchEvent(o),!o.defaultPrevented)throw s}return i.then(s=>{for(const o of s||[])o.status==="rejected"&&a(o.reason);return t().catch(a)})},hb=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>Fi(async()=>{const{default:n}=await Promise.resolve().then(()=>Zn);return{default:n}},void 0).then(({default:n})=>n(...r)):t=fetch,(...r)=>t(...r)};class Pc extends Error{constructor(t,r="FunctionsError",n){super(t),this.name=r,this.context=n}}class fb extends Pc{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class Cd extends Pc{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class Md extends Pc{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var hl;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(hl||(hl={}));var mb=function(e,t,r,n){function i(a){return a instanceof r?a:new r(function(s){s(a)})}return new(r||(r=Promise))(function(a,s){function o(u){try{d(n.next(u))}catch(h){s(h)}}function c(u){try{d(n.throw(u))}catch(h){s(h)}}function d(u){u.done?a(u.value):i(u.value).then(o,c)}d((n=n.apply(e,t||[])).next())})};class pb{constructor(t,{headers:r={},customFetch:n,region:i=hl.Any}={}){this.url=t,this.headers=r,this.region=i,this.fetch=hb(n)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t,r={}){var n;return mb(this,void 0,void 0,function*(){try{const{headers:i,method:a,body:s}=r;let o={},{region:c}=r;c||(c=this.region);const d=new URL(`${this.url}/${t}`);c&&c!=="any"&&(o["x-region"]=c,d.searchParams.set("forceFunctionRegion",c));let u;s&&(i&&!Object.prototype.hasOwnProperty.call(i,"Content-Type")||!i)&&(typeof Blob<"u"&&s instanceof Blob||s instanceof ArrayBuffer?(o["Content-Type"]="application/octet-stream",u=s):typeof s=="string"?(o["Content-Type"]="text/plain",u=s):typeof FormData<"u"&&s instanceof FormData?u=s:(o["Content-Type"]="application/json",u=JSON.stringify(s)));const h=yield this.fetch(d.toString(),{method:a||"POST",headers:Object.assign(Object.assign(Object.assign({},o),this.headers),i),body:u}).catch(p=>{throw new fb(p)}),f=h.headers.get("x-relay-error");if(f&&f==="true")throw new Cd(h);if(!h.ok)throw new Md(h);let m=((n=h.headers.get("Content-Type"))!==null&&n!==void 0?n:"text/plain").split(";")[0].trim(),g;return m==="application/json"?g=yield h.json():m==="application/octet-stream"?g=yield h.blob():m==="text/event-stream"?g=h:m==="multipart/form-data"?g=yield h.formData():g=yield h.text(),{data:g,error:null,response:h}}catch(i){return{data:null,error:i,response:i instanceof Md||i instanceof Cd?i.context:void 0}}})}}var ot={},_c={},hs={},zi={},fs={},ms={},gb=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Bn=gb();const vb=Bn.fetch,Ym=Bn.fetch.bind(Bn),Zm=Bn.Headers,yb=Bn.Request,xb=Bn.Response,Zn=Object.freeze(Object.defineProperty({__proto__:null,Headers:Zm,Request:yb,Response:xb,default:Ym,fetch:vb},Symbol.toStringTag,{value:"Module"})),bb=Ax(Zn);var ps={};Object.defineProperty(ps,"__esModule",{value:!0});let wb=class extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}};ps.default=wb;var Xm=Nt&&Nt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(ms,"__esModule",{value:!0});const jb=Xm(bb),Sb=Xm(ps);let Pb=class{constructor(t){this.shouldThrowOnError=!1,this.method=t.method,this.url=t.url,this.headers=t.headers,this.schema=t.schema,this.body=t.body,this.shouldThrowOnError=t.shouldThrowOnError,this.signal=t.signal,this.isMaybeSingle=t.isMaybeSingle,t.fetch?this.fetch=t.fetch:typeof fetch>"u"?this.fetch=jb.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(t,r){return this.headers=Object.assign({},this.headers),this.headers[t]=r,this}then(t,r){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const n=this.fetch;let i=n(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async a=>{var s,o,c;let d=null,u=null,h=null,f=a.status,m=a.statusText;if(a.ok){if(this.method!=="HEAD"){const x=await a.text();x===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?u=x:u=JSON.parse(x))}const p=(s=this.headers.Prefer)===null||s===void 0?void 0:s.match(/count=(exact|planned|estimated)/),v=(o=a.headers.get("content-range"))===null||o===void 0?void 0:o.split("/");p&&v&&v.length>1&&(h=parseInt(v[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(u)&&(u.length>1?(d={code:"PGRST116",details:`Results contain ${u.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},u=null,h=null,f=406,m="Not Acceptable"):u.length===1?u=u[0]:u=null)}else{const p=await a.text();try{d=JSON.parse(p),Array.isArray(d)&&a.status===404&&(u=[],d=null,f=200,m="OK")}catch{a.status===404&&p===""?(f=204,m="No Content"):d={message:p}}if(d&&this.isMaybeSingle&&(!((c=d?.details)===null||c===void 0)&&c.includes("0 rows"))&&(d=null,f=200,m="OK"),d&&this.shouldThrowOnError)throw new Sb.default(d)}return{error:d,data:u,count:h,status:f,statusText:m}});return this.shouldThrowOnError||(i=i.catch(a=>{var s,o,c;return{error:{message:`${(s=a?.name)!==null&&s!==void 0?s:"FetchError"}: ${a?.message}`,details:`${(o=a?.stack)!==null&&o!==void 0?o:""}`,hint:"",code:`${(c=a?.code)!==null&&c!==void 0?c:""}`},data:null,count:null,status:0,statusText:""}})),i.then(t,r)}returns(){return this}overrideTypes(){return this}};ms.default=Pb;var _b=Nt&&Nt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(fs,"__esModule",{value:!0});const Nb=_b(ms);let kb=class extends Nb.default{select(t){let r=!1;const n=(t??"*").split("").map(i=>/\s/.test(i)&&!r?"":(i==='"'&&(r=!r),i)).join("");return this.url.searchParams.set("select",n),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(t,{ascending:r=!0,nullsFirst:n,foreignTable:i,referencedTable:a=i}={}){const s=a?`${a}.order`:"order",o=this.url.searchParams.get(s);return this.url.searchParams.set(s,`${o?`${o},`:""}${t}.${r?"asc":"desc"}${n===void 0?"":n?".nullsfirst":".nullslast"}`),this}limit(t,{foreignTable:r,referencedTable:n=r}={}){const i=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(i,`${t}`),this}range(t,r,{foreignTable:n,referencedTable:i=n}={}){const a=typeof i>"u"?"offset":`${i}.offset`,s=typeof i>"u"?"limit":`${i}.limit`;return this.url.searchParams.set(a,`${t}`),this.url.searchParams.set(s,`${r-t+1}`),this}abortSignal(t){return this.signal=t,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:t=!1,verbose:r=!1,settings:n=!1,buffers:i=!1,wal:a=!1,format:s="text"}={}){var o;const c=[t?"analyze":null,r?"verbose":null,n?"settings":null,i?"buffers":null,a?"wal":null].filter(Boolean).join("|"),d=(o=this.headers.Accept)!==null&&o!==void 0?o:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${s}; for="${d}"; options=${c};`,s==="json"?this:this}rollback(){var t;return((t=this.headers.Prefer)!==null&&t!==void 0?t:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}};fs.default=kb;var Ob=Nt&&Nt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(zi,"__esModule",{value:!0});const Ab=Ob(fs);let Eb=class extends Ab.default{eq(t,r){return this.url.searchParams.append(t,`eq.${r}`),this}neq(t,r){return this.url.searchParams.append(t,`neq.${r}`),this}gt(t,r){return this.url.searchParams.append(t,`gt.${r}`),this}gte(t,r){return this.url.searchParams.append(t,`gte.${r}`),this}lt(t,r){return this.url.searchParams.append(t,`lt.${r}`),this}lte(t,r){return this.url.searchParams.append(t,`lte.${r}`),this}like(t,r){return this.url.searchParams.append(t,`like.${r}`),this}likeAllOf(t,r){return this.url.searchParams.append(t,`like(all).{${r.join(",")}}`),this}likeAnyOf(t,r){return this.url.searchParams.append(t,`like(any).{${r.join(",")}}`),this}ilike(t,r){return this.url.searchParams.append(t,`ilike.${r}`),this}ilikeAllOf(t,r){return this.url.searchParams.append(t,`ilike(all).{${r.join(",")}}`),this}ilikeAnyOf(t,r){return this.url.searchParams.append(t,`ilike(any).{${r.join(",")}}`),this}is(t,r){return this.url.searchParams.append(t,`is.${r}`),this}in(t,r){const n=Array.from(new Set(r)).map(i=>typeof i=="string"&&new RegExp("[,()]").test(i)?`"${i}"`:`${i}`).join(",");return this.url.searchParams.append(t,`in.(${n})`),this}contains(t,r){return typeof r=="string"?this.url.searchParams.append(t,`cs.${r}`):Array.isArray(r)?this.url.searchParams.append(t,`cs.{${r.join(",")}}`):this.url.searchParams.append(t,`cs.${JSON.stringify(r)}`),this}containedBy(t,r){return typeof r=="string"?this.url.searchParams.append(t,`cd.${r}`):Array.isArray(r)?this.url.searchParams.append(t,`cd.{${r.join(",")}}`):this.url.searchParams.append(t,`cd.${JSON.stringify(r)}`),this}rangeGt(t,r){return this.url.searchParams.append(t,`sr.${r}`),this}rangeGte(t,r){return this.url.searchParams.append(t,`nxl.${r}`),this}rangeLt(t,r){return this.url.searchParams.append(t,`sl.${r}`),this}rangeLte(t,r){return this.url.searchParams.append(t,`nxr.${r}`),this}rangeAdjacent(t,r){return this.url.searchParams.append(t,`adj.${r}`),this}overlaps(t,r){return typeof r=="string"?this.url.searchParams.append(t,`ov.${r}`):this.url.searchParams.append(t,`ov.{${r.join(",")}}`),this}textSearch(t,r,{config:n,type:i}={}){let a="";i==="plain"?a="pl":i==="phrase"?a="ph":i==="websearch"&&(a="w");const s=n===void 0?"":`(${n})`;return this.url.searchParams.append(t,`${a}fts${s}.${r}`),this}match(t){return Object.entries(t).forEach(([r,n])=>{this.url.searchParams.append(r,`eq.${n}`)}),this}not(t,r,n){return this.url.searchParams.append(t,`not.${r}.${n}`),this}or(t,{foreignTable:r,referencedTable:n=r}={}){const i=n?`${n}.or`:"or";return this.url.searchParams.append(i,`(${t})`),this}filter(t,r,n){return this.url.searchParams.append(t,`${r}.${n}`),this}};zi.default=Eb;var Cb=Nt&&Nt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(hs,"__esModule",{value:!0});const ai=Cb(zi);let Mb=class{constructor(t,{headers:r={},schema:n,fetch:i}){this.url=t,this.headers=r,this.schema=n,this.fetch=i}select(t,{head:r=!1,count:n}={}){const i=r?"HEAD":"GET";let a=!1;const s=(t??"*").split("").map(o=>/\s/.test(o)&&!a?"":(o==='"'&&(a=!a),o)).join("");return this.url.searchParams.set("select",s),n&&(this.headers.Prefer=`count=${n}`),new ai.default({method:i,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(t,{count:r,defaultToNull:n=!0}={}){const i="POST",a=[];if(this.headers.Prefer&&a.push(this.headers.Prefer),r&&a.push(`count=${r}`),n||a.push("missing=default"),this.headers.Prefer=a.join(","),Array.isArray(t)){const s=t.reduce((o,c)=>o.concat(Object.keys(c)),[]);if(s.length>0){const o=[...new Set(s)].map(c=>`"${c}"`);this.url.searchParams.set("columns",o.join(","))}}return new ai.default({method:i,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}upsert(t,{onConflict:r,ignoreDuplicates:n=!1,count:i,defaultToNull:a=!0}={}){const s="POST",o=[`resolution=${n?"ignore":"merge"}-duplicates`];if(r!==void 0&&this.url.searchParams.set("on_conflict",r),this.headers.Prefer&&o.push(this.headers.Prefer),i&&o.push(`count=${i}`),a||o.push("missing=default"),this.headers.Prefer=o.join(","),Array.isArray(t)){const c=t.reduce((d,u)=>d.concat(Object.keys(u)),[]);if(c.length>0){const d=[...new Set(c)].map(u=>`"${u}"`);this.url.searchParams.set("columns",d.join(","))}}return new ai.default({method:s,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}update(t,{count:r}={}){const n="PATCH",i=[];return this.headers.Prefer&&i.push(this.headers.Prefer),r&&i.push(`count=${r}`),this.headers.Prefer=i.join(","),new ai.default({method:n,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}delete({count:t}={}){const r="DELETE",n=[];return t&&n.push(`count=${t}`),this.headers.Prefer&&n.unshift(this.headers.Prefer),this.headers.Prefer=n.join(","),new ai.default({method:r,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}};hs.default=Mb;var gs={},vs={};Object.defineProperty(vs,"__esModule",{value:!0});vs.version=void 0;vs.version="0.0.0-automated";Object.defineProperty(gs,"__esModule",{value:!0});gs.DEFAULT_HEADERS=void 0;const Tb=vs;gs.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${Tb.version}`};var Jm=Nt&&Nt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(_c,"__esModule",{value:!0});const Db=Jm(hs),Ib=Jm(zi),$b=gs;let Lb=class Qm{constructor(t,{headers:r={},schema:n,fetch:i}={}){this.url=t,this.headers=Object.assign(Object.assign({},$b.DEFAULT_HEADERS),r),this.schemaName=n,this.fetch=i}from(t){const r=new URL(`${this.url}/${t}`);return new Db.default(r,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new Qm(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(t,r={},{head:n=!1,get:i=!1,count:a}={}){let s;const o=new URL(`${this.url}/rpc/${t}`);let c;n||i?(s=n?"HEAD":"GET",Object.entries(r).filter(([u,h])=>h!==void 0).map(([u,h])=>[u,Array.isArray(h)?`{${h.join(",")}}`:`${h}`]).forEach(([u,h])=>{o.searchParams.append(u,h)})):(s="POST",c=r);const d=Object.assign({},this.headers);return a&&(d.Prefer=`count=${a}`),new Ib.default({method:s,url:o,headers:d,schema:this.schemaName,body:c,fetch:this.fetch,allowEmpty:!1})}};_c.default=Lb;var Xn=Nt&&Nt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(ot,"__esModule",{value:!0});ot.PostgrestError=ot.PostgrestBuilder=ot.PostgrestTransformBuilder=ot.PostgrestFilterBuilder=ot.PostgrestQueryBuilder=ot.PostgrestClient=void 0;const ep=Xn(_c);ot.PostgrestClient=ep.default;const tp=Xn(hs);ot.PostgrestQueryBuilder=tp.default;const rp=Xn(zi);ot.PostgrestFilterBuilder=rp.default;const np=Xn(fs);ot.PostgrestTransformBuilder=np.default;const ip=Xn(ms);ot.PostgrestBuilder=ip.default;const ap=Xn(ps);ot.PostgrestError=ap.default;var Rb=ot.default={PostgrestClient:ep.default,PostgrestQueryBuilder:tp.default,PostgrestFilterBuilder:rp.default,PostgrestTransformBuilder:np.default,PostgrestBuilder:ip.default,PostgrestError:ap.default};const{PostgrestClient:Ub,PostgrestQueryBuilder:C3,PostgrestFilterBuilder:M3,PostgrestTransformBuilder:T3,PostgrestBuilder:D3,PostgrestError:I3}=Rb;function Bb(){if(typeof WebSocket<"u")return WebSocket;if(typeof global.WebSocket<"u")return global.WebSocket;if(typeof window.WebSocket<"u")return window.WebSocket;if(typeof self.WebSocket<"u")return self.WebSocket;throw new Error("`WebSocket` is not supported in this environment")}const Fb=Bb(),zb="2.11.15",Wb=`realtime-js/${zb}`,Kb="1.0.0",sp=1e4,Hb=1e3;var xi;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(xi||(xi={}));var Je;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(Je||(Je={}));var It;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(It||(It={}));var fl;(function(e){e.websocket="websocket"})(fl||(fl={}));var zr;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(zr||(zr={}));class qb{constructor(){this.HEADER_LENGTH=1}decode(t,r){return t.constructor===ArrayBuffer?r(this._binaryDecode(t)):r(typeof t=="string"?JSON.parse(t):{})}_binaryDecode(t){const r=new DataView(t),n=new TextDecoder;return this._decodeBroadcast(t,r,n)}_decodeBroadcast(t,r,n){const i=r.getUint8(1),a=r.getUint8(2);let s=this.HEADER_LENGTH+2;const o=n.decode(t.slice(s,s+i));s=s+i;const c=n.decode(t.slice(s,s+a));s=s+a;const d=JSON.parse(n.decode(t.slice(s,t.byteLength)));return{ref:null,topic:o,event:c,payload:d}}}class op{constructor(t,r){this.callback=t,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var _e;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(_e||(_e={}));const Td=(e,t,r={})=>{var n;const i=(n=r.skipTypes)!==null&&n!==void 0?n:[];return Object.keys(t).reduce((a,s)=>(a[s]=Vb(s,e,t,i),a),{})},Vb=(e,t,r,n)=>{const i=t.find(o=>o.name===e),a=i?.type,s=r[e];return a&&!n.includes(a)?lp(a,s):ml(s)},lp=(e,t)=>{if(e.charAt(0)==="_"){const r=e.slice(1,e.length);return Xb(t,r)}switch(e){case _e.bool:return Gb(t);case _e.float4:case _e.float8:case _e.int2:case _e.int4:case _e.int8:case _e.numeric:case _e.oid:return Yb(t);case _e.json:case _e.jsonb:return Zb(t);case _e.timestamp:return Jb(t);case _e.abstime:case _e.date:case _e.daterange:case _e.int4range:case _e.int8range:case _e.money:case _e.reltime:case _e.text:case _e.time:case _e.timestamptz:case _e.timetz:case _e.tsrange:case _e.tstzrange:return ml(t);default:return ml(t)}},ml=e=>e,Gb=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},Yb=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},Zb=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},Xb=(e,t)=>{if(typeof e!="string")return e;const r=e.length-1,n=e[r];if(e[0]==="{"&&n==="}"){let a;const s=e.slice(1,r);try{a=JSON.parse("["+s+"]")}catch{a=s?s.split(","):[]}return a.map(o=>lp(t,o))}return e},Jb=e=>typeof e=="string"?e.replace(" ","T"):e,cp=e=>{let t=e;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")};class Co{constructor(t,r,n={},i=sp){this.channel=t,this.event=r,this.payload=n,this.timeout=i,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,r){var n;return this._hasReceived(t)&&r((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:t,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:r}){this.recHooks.filter(n=>n.status===t).forEach(n=>n.callback(r))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var Dd;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(Dd||(Dd={}));class bi{constructor(t,r){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=r?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},i=>{const{onJoin:a,onLeave:s,onSync:o}=this.caller;this.joinRef=this.channel._joinRef(),this.state=bi.syncState(this.state,i,a,s),this.pendingDiffs.forEach(c=>{this.state=bi.syncDiff(this.state,c,a,s)}),this.pendingDiffs=[],o()}),this.channel._on(n.diff,{},i=>{const{onJoin:a,onLeave:s,onSync:o}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(i):(this.state=bi.syncDiff(this.state,i,a,s),o())}),this.onJoin((i,a,s)=>{this.channel._trigger("presence",{event:"join",key:i,currentPresences:a,newPresences:s})}),this.onLeave((i,a,s)=>{this.channel._trigger("presence",{event:"leave",key:i,currentPresences:a,leftPresences:s})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,r,n,i){const a=this.cloneDeep(t),s=this.transformState(r),o={},c={};return this.map(a,(d,u)=>{s[d]||(c[d]=u)}),this.map(s,(d,u)=>{const h=a[d];if(h){const f=u.map(v=>v.presence_ref),m=h.map(v=>v.presence_ref),g=u.filter(v=>m.indexOf(v.presence_ref)<0),p=h.filter(v=>f.indexOf(v.presence_ref)<0);g.length>0&&(o[d]=g),p.length>0&&(c[d]=p)}else o[d]=u}),this.syncDiff(a,{joins:o,leaves:c},n,i)}static syncDiff(t,r,n,i){const{joins:a,leaves:s}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return n||(n=()=>{}),i||(i=()=>{}),this.map(a,(o,c)=>{var d;const u=(d=t[o])!==null&&d!==void 0?d:[];if(t[o]=this.cloneDeep(c),u.length>0){const h=t[o].map(m=>m.presence_ref),f=u.filter(m=>h.indexOf(m.presence_ref)<0);t[o].unshift(...f)}n(o,u,c)}),this.map(s,(o,c)=>{let d=t[o];if(!d)return;const u=c.map(h=>h.presence_ref);d=d.filter(h=>u.indexOf(h.presence_ref)<0),t[o]=d,i(o,d,c),d.length===0&&delete t[o]}),t}static map(t,r){return Object.getOwnPropertyNames(t).map(n=>r(n,t[n]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((r,n)=>{const i=t[n];return"metas"in i?r[n]=i.metas.map(a=>(a.presence_ref=a.phx_ref,delete a.phx_ref,delete a.phx_ref_prev,a)):r[n]=i,r},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Id;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(Id||(Id={}));var $d;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})($d||($d={}));var Xt;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(Xt||(Xt={}));class Nc{constructor(t,r={config:{}},n){this.topic=t,this.params=r,this.socket=n,this.bindings={},this.state=Je.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new Co(this,It.join,this.params,this.timeout),this.rejoinTimer=new op(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Je.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(i=>i.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Je.closed,this.socket._remove(this)}),this._onError(i=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,i),this.state=Je.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Je.errored,this.rejoinTimer.scheduleTimeout())}),this._on(It.reply,{},(i,a)=>{this._trigger(this._replyEventName(a),i)}),this.presence=new bi(this),this.broadcastEndpointURL=cp(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(t,r=this.timeout){var n,i;if(this.socket.isConnected()||this.socket.connect(),this.state==Je.closed){const{config:{broadcast:a,presence:s,private:o}}=this.params;this._onError(u=>t?.(Xt.CHANNEL_ERROR,u)),this._onClose(()=>t?.(Xt.CLOSED));const c={},d={broadcast:a,presence:s,postgres_changes:(i=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(u=>u.filter))!==null&&i!==void 0?i:[],private:o};this.socket.accessTokenValue&&(c.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:d},c)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:u})=>{var h;if(this.socket.setAuth(),u===void 0){t?.(Xt.SUBSCRIBED);return}else{const f=this.bindings.postgres_changes,m=(h=f?.length)!==null&&h!==void 0?h:0,g=[];for(let p=0;p<m;p++){const v=f[p],{filter:{event:x,schema:j,table:b,filter:S}}=v,_=u&&u[p];if(_&&_.event===x&&_.schema===j&&_.table===b&&_.filter===S)g.push(Object.assign(Object.assign({},v),{id:_.id}));else{this.unsubscribe(),this.state=Je.errored,t?.(Xt.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=g,t&&t(Xt.SUBSCRIBED);return}}).receive("error",u=>{this.state=Je.errored,t?.(Xt.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(u).join(", ")||"error")))}).receive("timeout",()=>{t?.(Xt.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,r={}){return await this.send({type:"presence",event:"track",payload:t},r.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,r,n){return this._on(t,r,n)}async send(t,r={}){var n,i;if(!this._canPush()&&t.type==="broadcast"){const{event:a,payload:s}=t,c={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:a,payload:s,private:this.private}]})};try{const d=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(n=r.timeout)!==null&&n!==void 0?n:this.timeout);return await((i=d.body)===null||i===void 0?void 0:i.cancel()),d.ok?"ok":"error"}catch(d){return d.name==="AbortError"?"timed out":"error"}}else return new Promise(a=>{var s,o,c;const d=this._push(t.type,t,r.timeout||this.timeout);t.type==="broadcast"&&!(!((c=(o=(s=this.params)===null||s===void 0?void 0:s.config)===null||o===void 0?void 0:o.broadcast)===null||c===void 0)&&c.ack)&&a("ok"),d.receive("ok",()=>a("ok")),d.receive("error",()=>a("error")),d.receive("timeout",()=>a("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=Je.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(It.close,"leave",this._joinRef())};this.joinPush.destroy();let n=null;return new Promise(i=>{n=new Co(this,It.leave,{},t),n.receive("ok",()=>{r(),i("ok")}).receive("timeout",()=>{r(),i("timed out")}).receive("error",()=>{i("error")}),n.send(),this._canPush()||n.trigger("ok",{})}).finally(()=>{n?.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.rejoinTimer&&clearTimeout(this.rejoinTimer.timer),this.joinPush.destroy()}async _fetchWithTimeout(t,r,n){const i=new AbortController,a=setTimeout(()=>i.abort(),n),s=await this.socket.fetch(t,Object.assign(Object.assign({},r),{signal:i.signal}));return clearTimeout(a),s}_push(t,r,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let i=new Co(this,t,r,n);return this._canPush()?i.send():(i.startTimeout(),this.pushBuffer.push(i)),i}_onMessage(t,r,n){return r}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,r,n){var i,a;const s=t.toLocaleLowerCase(),{close:o,error:c,leave:d,join:u}=It;if(n&&[o,c,d,u].indexOf(s)>=0&&n!==this._joinRef())return;let f=this._onMessage(s,r,n);if(r&&!f)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(s)?(i=this.bindings.postgres_changes)===null||i===void 0||i.filter(m=>{var g,p,v;return((g=m.filter)===null||g===void 0?void 0:g.event)==="*"||((v=(p=m.filter)===null||p===void 0?void 0:p.event)===null||v===void 0?void 0:v.toLocaleLowerCase())===s}).map(m=>m.callback(f,n)):(a=this.bindings[s])===null||a===void 0||a.filter(m=>{var g,p,v,x,j,b;if(["broadcast","presence","postgres_changes"].includes(s))if("id"in m){const S=m.id,_=(g=m.filter)===null||g===void 0?void 0:g.event;return S&&((p=r.ids)===null||p===void 0?void 0:p.includes(S))&&(_==="*"||_?.toLocaleLowerCase()===((v=r.data)===null||v===void 0?void 0:v.type.toLocaleLowerCase()))}else{const S=(j=(x=m?.filter)===null||x===void 0?void 0:x.event)===null||j===void 0?void 0:j.toLocaleLowerCase();return S==="*"||S===((b=r?.event)===null||b===void 0?void 0:b.toLocaleLowerCase())}else return m.type.toLocaleLowerCase()===s}).map(m=>{if(typeof f=="object"&&"ids"in f){const g=f.data,{schema:p,table:v,commit_timestamp:x,type:j,errors:b}=g;f=Object.assign(Object.assign({},{schema:p,table:v,commit_timestamp:x,eventType:j,new:{},old:{},errors:b}),this._getPayloadRecords(g))}m.callback(f,n)})}_isClosed(){return this.state===Je.closed}_isJoined(){return this.state===Je.joined}_isJoining(){return this.state===Je.joining}_isLeaving(){return this.state===Je.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,r,n){const i=t.toLocaleLowerCase(),a={type:i,filter:r,callback:n};return this.bindings[i]?this.bindings[i].push(a):this.bindings[i]=[a],this}_off(t,r){const n=t.toLocaleLowerCase();return this.bindings[n]=this.bindings[n].filter(i=>{var a;return!(((a=i.type)===null||a===void 0?void 0:a.toLocaleLowerCase())===n&&Nc.isEqual(i.filter,r))}),this}static isEqual(t,r){if(Object.keys(t).length!==Object.keys(r).length)return!1;for(const n in t)if(t[n]!==r[n])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(It.close,{},t)}_onError(t){this._on(It.error,{},r=>t(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Je.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const r={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(r.new=Td(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(r.old=Td(t.columns,t.old_record)),r}}const Ld=()=>{},Qb=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class ew{constructor(t,r){var n;this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=sp,this.heartbeatIntervalMs=25e3,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Ld,this.ref=0,this.logger=Ld,this.conn=null,this.sendBuffer=[],this.serializer=new qb,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=a=>{let s;return a?s=a:typeof fetch>"u"?s=(...o)=>Fi(async()=>{const{default:c}=await Promise.resolve().then(()=>Zn);return{default:c}},void 0).then(({default:c})=>c(...o)):s=fetch,(...o)=>s(...o)},this.endPoint=`${t}/${fl.websocket}`,this.httpEndpoint=cp(t),r?.transport?this.transport=r.transport:this.transport=null,r?.params&&(this.params=r.params),r?.timeout&&(this.timeout=r.timeout),r?.logger&&(this.logger=r.logger),(r?.logLevel||r?.log_level)&&(this.logLevel=r.logLevel||r.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),r?.heartbeatIntervalMs&&(this.heartbeatIntervalMs=r.heartbeatIntervalMs);const i=(n=r?.params)===null||n===void 0?void 0:n.apikey;if(i&&(this.accessTokenValue=i,this.apiKey=i),this.reconnectAfterMs=r?.reconnectAfterMs?r.reconnectAfterMs:a=>[1e3,2e3,5e3,1e4][a-1]||1e4,this.encode=r?.encode?r.encode:(a,s)=>s(JSON.stringify(a)),this.decode=r?.decode?r.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new op(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(r?.fetch),r?.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=r?.worker||!1,this.workerUrl=r?.workerUrl}this.accessToken=r?.accessToken||null}connect(){if(!this.conn){if(this.transport||(this.transport=Fb),!this.transport)throw new Error("No transport provided");this.conn=new this.transport(this.endpointURL()),this.setupConnection()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:Kb}))}disconnect(t,r){this.conn&&(this.conn.onclose=function(){},t?this.conn.close(t,r??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset(),this.channels.forEach(n=>n.teardown()))}getChannels(){return this.channels}async removeChannel(t){const r=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const t=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,r,n){this.logger(t,r,n)}connectionState(){switch(this.conn&&this.conn.readyState){case xi.connecting:return zr.Connecting;case xi.open:return zr.Open;case xi.closing:return zr.Closing;default:return zr.Closed}}isConnected(){return this.connectionState()===zr.Open}channel(t,r={config:{}}){const n=`realtime:${t}`,i=this.getChannels().find(a=>a.topic===n);if(i)return i;{const a=new Nc(`realtime:${t}`,r,this);return this.channels.push(a),a}}push(t){const{topic:r,event:n,payload:i,ref:a}=t,s=()=>{this.encode(t,o=>{var c;(c=this.conn)===null||c===void 0||c.send(o)})};this.log("push",`${r} ${n} (${a})`,i),this.isConnected()?s():this.sendBuffer.push(s)}async setAuth(t=null){let r=t||this.accessToken&&await this.accessToken()||this.accessTokenValue;this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(n=>{const i={access_token:r,version:Wb};r&&n.updateJoinPayload(i),n.joinedOnce&&n._isJoined()&&n._push(It.access_token,{access_token:r})}))}async sendHeartbeat(){var t;if(!this.isConnected()){this.heartbeatCallback("disconnected");return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),(t=this.conn)===null||t===void 0||t.close(Hb,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),await this.setAuth()}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let r=this.channels.find(n=>n.topic===t&&(n._isJoined()||n._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${t}"`),r.unsubscribe())}_remove(t){this.channels=this.channels.filter(r=>r.topic!==t.topic)}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_onConnMessage(t){this.decode(t.data,r=>{let{topic:n,event:i,payload:a,ref:s}=r;n==="phoenix"&&i==="phx_reply"&&this.heartbeatCallback(r.payload.status=="ok"?"ok":"error"),s&&s===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${a.status||""} ${n} ${i} ${s&&"("+s+")"||""}`,a),Array.from(this.channels).filter(o=>o._isMember(n)).forEach(o=>o._trigger(i,a,s)),this.stateChangeCallbacks.message.forEach(o=>o(r))})}_onConnOpen(){this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this.stateChangeCallbacks.open.forEach(t=>t())}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this.workerRef.terminate()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(t){this.log("transport","close",t),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(r=>r(t))}_onConnError(t){this.log("transport",`${t}`),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(r=>r(t))}_triggerChanError(){this.channels.forEach(t=>t._trigger(It.error))}_appendParams(t,r){if(Object.keys(r).length===0)return t;const n=t.match(/\?/)?"&":"?",i=new URLSearchParams(r);return`${t}${n}${i}`}_workerObjectUrl(t){let r;if(t)r=t;else{const n=new Blob([Qb],{type:"application/javascript"});r=URL.createObjectURL(n)}return r}}class kc extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function Le(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}class tw extends kc{constructor(t,r){super(t),this.name="StorageApiError",this.status=r}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class pl extends kc{constructor(t,r){super(t),this.name="StorageUnknownError",this.originalError=r}}var rw=function(e,t,r,n){function i(a){return a instanceof r?a:new r(function(s){s(a)})}return new(r||(r=Promise))(function(a,s){function o(u){try{d(n.next(u))}catch(h){s(h)}}function c(u){try{d(n.throw(u))}catch(h){s(h)}}function d(u){u.done?a(u.value):i(u.value).then(o,c)}d((n=n.apply(e,t||[])).next())})};const up=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>Fi(async()=>{const{default:n}=await Promise.resolve().then(()=>Zn);return{default:n}},void 0).then(({default:n})=>n(...r)):t=fetch,(...r)=>t(...r)},nw=()=>rw(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Fi(()=>Promise.resolve().then(()=>Zn),void 0)).Response:Response}),gl=e=>{if(Array.isArray(e))return e.map(r=>gl(r));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([r,n])=>{const i=r.replace(/([-_][a-z])/gi,a=>a.toUpperCase().replace(/[-_]/g,""));t[i]=gl(n)}),t};var hn=function(e,t,r,n){function i(a){return a instanceof r?a:new r(function(s){s(a)})}return new(r||(r=Promise))(function(a,s){function o(u){try{d(n.next(u))}catch(h){s(h)}}function c(u){try{d(n.throw(u))}catch(h){s(h)}}function d(u){u.done?a(u.value):i(u.value).then(o,c)}d((n=n.apply(e,t||[])).next())})};const Mo=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),iw=(e,t,r)=>hn(void 0,void 0,void 0,function*(){const n=yield nw();e instanceof n&&!r?.noResolveJson?e.json().then(i=>{t(new tw(Mo(i),e.status||500))}).catch(i=>{t(new pl(Mo(i),i))}):t(new pl(Mo(e),e))}),aw=(e,t,r,n)=>{const i={method:e,headers:t?.headers||{}};return e==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json"},t?.headers),n&&(i.body=JSON.stringify(n)),Object.assign(Object.assign({},i),r))};function Wi(e,t,r,n,i,a){return hn(this,void 0,void 0,function*(){return new Promise((s,o)=>{e(r,aw(t,n,i,a)).then(c=>{if(!c.ok)throw c;return n?.noResolveJson?c:c.json()}).then(c=>s(c)).catch(c=>iw(c,o,n))})})}function Na(e,t,r,n){return hn(this,void 0,void 0,function*(){return Wi(e,"GET",t,r,n)})}function wr(e,t,r,n,i){return hn(this,void 0,void 0,function*(){return Wi(e,"POST",t,n,i,r)})}function sw(e,t,r,n,i){return hn(this,void 0,void 0,function*(){return Wi(e,"PUT",t,n,i,r)})}function ow(e,t,r,n){return hn(this,void 0,void 0,function*(){return Wi(e,"HEAD",t,Object.assign(Object.assign({},r),{noResolveJson:!0}),n)})}function dp(e,t,r,n,i){return hn(this,void 0,void 0,function*(){return Wi(e,"DELETE",t,n,i,r)})}var at=function(e,t,r,n){function i(a){return a instanceof r?a:new r(function(s){s(a)})}return new(r||(r=Promise))(function(a,s){function o(u){try{d(n.next(u))}catch(h){s(h)}}function c(u){try{d(n.throw(u))}catch(h){s(h)}}function d(u){u.done?a(u.value):i(u.value).then(o,c)}d((n=n.apply(e,t||[])).next())})};const lw={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Rd={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class cw{constructor(t,r={},n,i){this.url=t,this.headers=r,this.bucketId=n,this.fetch=up(i)}uploadOrUpdate(t,r,n,i){return at(this,void 0,void 0,function*(){try{let a;const s=Object.assign(Object.assign({},Rd),i);let o=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(s.upsert)});const c=s.metadata;typeof Blob<"u"&&n instanceof Blob?(a=new FormData,a.append("cacheControl",s.cacheControl),c&&a.append("metadata",this.encodeMetadata(c)),a.append("",n)):typeof FormData<"u"&&n instanceof FormData?(a=n,a.append("cacheControl",s.cacheControl),c&&a.append("metadata",this.encodeMetadata(c))):(a=n,o["cache-control"]=`max-age=${s.cacheControl}`,o["content-type"]=s.contentType,c&&(o["x-metadata"]=this.toBase64(this.encodeMetadata(c)))),i?.headers&&(o=Object.assign(Object.assign({},o),i.headers));const d=this._removeEmptyFolders(r),u=this._getFinalPath(d),h=yield this.fetch(`${this.url}/object/${u}`,Object.assign({method:t,body:a,headers:o},s?.duplex?{duplex:s.duplex}:{})),f=yield h.json();return h.ok?{data:{path:d,id:f.Id,fullPath:f.Key},error:null}:{data:null,error:f}}catch(a){if(Le(a))return{data:null,error:a};throw a}})}upload(t,r,n){return at(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,r,n)})}uploadToSignedUrl(t,r,n,i){return at(this,void 0,void 0,function*(){const a=this._removeEmptyFolders(t),s=this._getFinalPath(a),o=new URL(this.url+`/object/upload/sign/${s}`);o.searchParams.set("token",r);try{let c;const d=Object.assign({upsert:Rd.upsert},i),u=Object.assign(Object.assign({},this.headers),{"x-upsert":String(d.upsert)});typeof Blob<"u"&&n instanceof Blob?(c=new FormData,c.append("cacheControl",d.cacheControl),c.append("",n)):typeof FormData<"u"&&n instanceof FormData?(c=n,c.append("cacheControl",d.cacheControl)):(c=n,u["cache-control"]=`max-age=${d.cacheControl}`,u["content-type"]=d.contentType);const h=yield this.fetch(o.toString(),{method:"PUT",body:c,headers:u}),f=yield h.json();return h.ok?{data:{path:a,fullPath:f.Key},error:null}:{data:null,error:f}}catch(c){if(Le(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(t,r){return at(this,void 0,void 0,function*(){try{let n=this._getFinalPath(t);const i=Object.assign({},this.headers);r?.upsert&&(i["x-upsert"]="true");const a=yield wr(this.fetch,`${this.url}/object/upload/sign/${n}`,{},{headers:i}),s=new URL(this.url+a.url),o=s.searchParams.get("token");if(!o)throw new kc("No token returned by API");return{data:{signedUrl:s.toString(),path:t,token:o},error:null}}catch(n){if(Le(n))return{data:null,error:n};throw n}})}update(t,r,n){return at(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,r,n)})}move(t,r,n){return at(this,void 0,void 0,function*(){try{return{data:yield wr(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:n?.destinationBucket},{headers:this.headers}),error:null}}catch(i){if(Le(i))return{data:null,error:i};throw i}})}copy(t,r,n){return at(this,void 0,void 0,function*(){try{return{data:{path:(yield wr(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:n?.destinationBucket},{headers:this.headers})).Key},error:null}}catch(i){if(Le(i))return{data:null,error:i};throw i}})}createSignedUrl(t,r,n){return at(this,void 0,void 0,function*(){try{let i=this._getFinalPath(t),a=yield wr(this.fetch,`${this.url}/object/sign/${i}`,Object.assign({expiresIn:r},n?.transform?{transform:n.transform}:{}),{headers:this.headers});const s=n?.download?`&download=${n.download===!0?"":n.download}`:"";return a={signedUrl:encodeURI(`${this.url}${a.signedURL}${s}`)},{data:a,error:null}}catch(i){if(Le(i))return{data:null,error:i};throw i}})}createSignedUrls(t,r,n){return at(this,void 0,void 0,function*(){try{const i=yield wr(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:r,paths:t},{headers:this.headers}),a=n?.download?`&download=${n.download===!0?"":n.download}`:"";return{data:i.map(s=>Object.assign(Object.assign({},s),{signedUrl:s.signedURL?encodeURI(`${this.url}${s.signedURL}${a}`):null})),error:null}}catch(i){if(Le(i))return{data:null,error:i};throw i}})}download(t,r){return at(this,void 0,void 0,function*(){const i=typeof r?.transform<"u"?"render/image/authenticated":"object",a=this.transformOptsToQueryString(r?.transform||{}),s=a?`?${a}`:"";try{const o=this._getFinalPath(t);return{data:yield(yield Na(this.fetch,`${this.url}/${i}/${o}${s}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(o){if(Le(o))return{data:null,error:o};throw o}})}info(t){return at(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{const n=yield Na(this.fetch,`${this.url}/object/info/${r}`,{headers:this.headers});return{data:gl(n),error:null}}catch(n){if(Le(n))return{data:null,error:n};throw n}})}exists(t){return at(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{return yield ow(this.fetch,`${this.url}/object/${r}`,{headers:this.headers}),{data:!0,error:null}}catch(n){if(Le(n)&&n instanceof pl){const i=n.originalError;if([400,404].includes(i?.status))return{data:!1,error:n}}throw n}})}getPublicUrl(t,r){const n=this._getFinalPath(t),i=[],a=r?.download?`download=${r.download===!0?"":r.download}`:"";a!==""&&i.push(a);const o=typeof r?.transform<"u"?"render/image":"object",c=this.transformOptsToQueryString(r?.transform||{});c!==""&&i.push(c);let d=i.join("&");return d!==""&&(d=`?${d}`),{data:{publicUrl:encodeURI(`${this.url}/${o}/public/${n}${d}`)}}}remove(t){return at(this,void 0,void 0,function*(){try{return{data:yield dp(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(r){if(Le(r))return{data:null,error:r};throw r}})}list(t,r,n){return at(this,void 0,void 0,function*(){try{const i=Object.assign(Object.assign(Object.assign({},lw),r),{prefix:t||""});return{data:yield wr(this.fetch,`${this.url}/object/list/${this.bucketId}`,i,{headers:this.headers},n),error:null}}catch(i){if(Le(i))return{data:null,error:i};throw i}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const r=[];return t.width&&r.push(`width=${t.width}`),t.height&&r.push(`height=${t.height}`),t.resize&&r.push(`resize=${t.resize}`),t.format&&r.push(`format=${t.format}`),t.quality&&r.push(`quality=${t.quality}`),r.join("&")}}const uw="2.7.1",dw={"X-Client-Info":`storage-js/${uw}`};var bn=function(e,t,r,n){function i(a){return a instanceof r?a:new r(function(s){s(a)})}return new(r||(r=Promise))(function(a,s){function o(u){try{d(n.next(u))}catch(h){s(h)}}function c(u){try{d(n.throw(u))}catch(h){s(h)}}function d(u){u.done?a(u.value):i(u.value).then(o,c)}d((n=n.apply(e,t||[])).next())})};class hw{constructor(t,r={},n){this.url=t,this.headers=Object.assign(Object.assign({},dw),r),this.fetch=up(n)}listBuckets(){return bn(this,void 0,void 0,function*(){try{return{data:yield Na(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(t){if(Le(t))return{data:null,error:t};throw t}})}getBucket(t){return bn(this,void 0,void 0,function*(){try{return{data:yield Na(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(r){if(Le(r))return{data:null,error:r};throw r}})}createBucket(t,r={public:!1}){return bn(this,void 0,void 0,function*(){try{return{data:yield wr(this.fetch,`${this.url}/bucket`,{id:t,name:t,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(Le(n))return{data:null,error:n};throw n}})}updateBucket(t,r){return bn(this,void 0,void 0,function*(){try{return{data:yield sw(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(Le(n))return{data:null,error:n};throw n}})}emptyBucket(t){return bn(this,void 0,void 0,function*(){try{return{data:yield wr(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(r){if(Le(r))return{data:null,error:r};throw r}})}deleteBucket(t){return bn(this,void 0,void 0,function*(){try{return{data:yield dp(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(r){if(Le(r))return{data:null,error:r};throw r}})}}class fw extends hw{constructor(t,r={},n){super(t,r,n)}from(t){return new cw(this.url,this.headers,t,this.fetch)}}const mw="2.51.0";let mi="";typeof Deno<"u"?mi="deno":typeof document<"u"?mi="web":typeof navigator<"u"&&navigator.product==="ReactNative"?mi="react-native":mi="node";const pw={"X-Client-Info":`supabase-js-${mi}/${mw}`},gw={headers:pw},vw={schema:"public"},yw={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},xw={};var bw=function(e,t,r,n){function i(a){return a instanceof r?a:new r(function(s){s(a)})}return new(r||(r=Promise))(function(a,s){function o(u){try{d(n.next(u))}catch(h){s(h)}}function c(u){try{d(n.throw(u))}catch(h){s(h)}}function d(u){u.done?a(u.value):i(u.value).then(o,c)}d((n=n.apply(e,t||[])).next())})};const ww=e=>{let t;return e?t=e:typeof fetch>"u"?t=Ym:t=fetch,(...r)=>t(...r)},jw=()=>typeof Headers>"u"?Zm:Headers,Sw=(e,t,r)=>{const n=ww(r),i=jw();return(a,s)=>bw(void 0,void 0,void 0,function*(){var o;const c=(o=yield t())!==null&&o!==void 0?o:e;let d=new i(s?.headers);return d.has("apikey")||d.set("apikey",e),d.has("Authorization")||d.set("Authorization",`Bearer ${c}`),n(a,Object.assign(Object.assign({},s),{headers:d}))})};var Pw=function(e,t,r,n){function i(a){return a instanceof r?a:new r(function(s){s(a)})}return new(r||(r=Promise))(function(a,s){function o(u){try{d(n.next(u))}catch(h){s(h)}}function c(u){try{d(n.throw(u))}catch(h){s(h)}}function d(u){u.done?a(u.value):i(u.value).then(o,c)}d((n=n.apply(e,t||[])).next())})};function _w(e){return e.endsWith("/")?e:e+"/"}function Nw(e,t){var r,n;const{db:i,auth:a,realtime:s,global:o}=e,{db:c,auth:d,realtime:u,global:h}=t,f={db:Object.assign(Object.assign({},c),i),auth:Object.assign(Object.assign({},d),a),realtime:Object.assign(Object.assign({},u),s),global:Object.assign(Object.assign(Object.assign({},h),o),{headers:Object.assign(Object.assign({},(r=h?.headers)!==null&&r!==void 0?r:{}),(n=o?.headers)!==null&&n!==void 0?n:{})}),accessToken:()=>Pw(this,void 0,void 0,function*(){return""})};return e.accessToken?f.accessToken=e.accessToken:delete f.accessToken,f}const hp="2.71.0",On=30*1e3,vl=3,To=vl*On,kw="http://localhost:9999",Ow="supabase.auth.token",Aw={"X-Client-Info":`gotrue-js/${hp}`},yl="X-Supabase-Api-Version",fp={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},Ew=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,Cw=10*60*1e3;class Oc extends Error{constructor(t,r,n){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=n}}function ae(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class Mw extends Oc{constructor(t,r,n){super(t,r,n),this.name="AuthApiError",this.status=r,this.code=n}}function Tw(e){return ae(e)&&e.name==="AuthApiError"}class mp extends Oc{constructor(t,r){super(t),this.name="AuthUnknownError",this.originalError=r}}class Cr extends Oc{constructor(t,r,n,i){super(t,n,i),this.name=r,this.status=n}}class br extends Cr{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function Dw(e){return ae(e)&&e.name==="AuthSessionMissingError"}class sa extends Cr{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class oa extends Cr{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class la extends Cr{constructor(t,r=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function Iw(e){return ae(e)&&e.name==="AuthImplicitGrantRedirectError"}class Ud extends Cr{constructor(t,r=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class xl extends Cr{constructor(t,r){super(t,"AuthRetryableFetchError",r,void 0)}}function Do(e){return ae(e)&&e.name==="AuthRetryableFetchError"}class Bd extends Cr{constructor(t,r,n){super(t,"AuthWeakPasswordError",r,"weak_password"),this.reasons=n}}class bl extends Cr{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const ka="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Fd=` 	
\r=`.split(""),$w=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<Fd.length;t+=1)e[Fd[t].charCodeAt(0)]=-2;for(let t=0;t<ka.length;t+=1)e[ka[t].charCodeAt(0)]=t;return e})();function zd(e,t,r){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;r(ka[n]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;r(ka[n]),t.queuedBits-=6}}function pp(e,t,r){const n=$w[e];if(n>-1)for(t.queue=t.queue<<6|n,t.queuedBits+=6;t.queuedBits>=8;)r(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function Wd(e){const t=[],r=s=>{t.push(String.fromCodePoint(s))},n={utf8seq:0,codepoint:0},i={queue:0,queuedBits:0},a=s=>{Uw(s,n,r)};for(let s=0;s<e.length;s+=1)pp(e.charCodeAt(s),i,a);return t.join("")}function Lw(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function Rw(e,t){for(let r=0;r<e.length;r+=1){let n=e.charCodeAt(r);if(n>55295&&n<=56319){const i=(n-55296)*1024&65535;n=(e.charCodeAt(r+1)-56320&65535|i)+65536,r+=1}Lw(n,t)}}function Uw(e,t,r){if(t.utf8seq===0){if(e<=127){r(e);return}for(let n=1;n<6;n+=1)if(!(e>>7-n&1)){t.utf8seq=n;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&r(t.codepoint)}}function Bw(e){const t=[],r={queue:0,queuedBits:0},n=i=>{t.push(i)};for(let i=0;i<e.length;i+=1)pp(e.charCodeAt(i),r,n);return new Uint8Array(t)}function Fw(e){const t=[];return Rw(e,r=>t.push(r)),new Uint8Array(t)}function zw(e){const t=[],r={queue:0,queuedBits:0},n=i=>{t.push(i)};return e.forEach(i=>zd(i,r,n)),zd(null,r,n),t.join("")}function Ww(e){return Math.round(Date.now()/1e3)+e}function Kw(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=Math.random()*16|0;return(e=="x"?t:t&3|8).toString(16)})}const Dt=()=>typeof window<"u"&&typeof document<"u",Ir={tested:!1,writable:!1},gp=()=>{if(!Dt())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Ir.tested)return Ir.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),Ir.tested=!0,Ir.writable=!0}catch{Ir.tested=!0,Ir.writable=!1}return Ir.writable};function Hw(e){const t={},r=new URL(e);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((i,a)=>{t[a]=i})}catch{}return r.searchParams.forEach((n,i)=>{t[i]=n}),t}const vp=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>Fi(async()=>{const{default:n}=await Promise.resolve().then(()=>Zn);return{default:n}},void 0).then(({default:n})=>n(...r)):t=fetch,(...r)=>t(...r)},qw=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",An=async(e,t,r)=>{await e.setItem(t,JSON.stringify(r))},$r=async(e,t)=>{const r=await e.getItem(t);if(!r)return null;try{return JSON.parse(r)}catch{return r}},vr=async(e,t)=>{await e.removeItem(t)};class ys{constructor(){this.promise=new ys.promiseConstructor((t,r)=>{this.resolve=t,this.reject=r})}}ys.promiseConstructor=Promise;function Io(e){const t=e.split(".");if(t.length!==3)throw new bl("Invalid JWT structure");for(let n=0;n<t.length;n++)if(!Ew.test(t[n]))throw new bl("JWT not in base64url format");return{header:JSON.parse(Wd(t[0])),payload:JSON.parse(Wd(t[1])),signature:Bw(t[2]),raw:{header:t[0],payload:t[1]}}}async function Vw(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function Gw(e,t){return new Promise((n,i)=>{(async()=>{for(let a=0;a<1/0;a++)try{const s=await e(a);if(!t(a,null,s)){n(s);return}}catch(s){if(!t(a,s)){i(s);return}}})()})}function Yw(e){return("0"+e.toString(16)).substr(-2)}function Zw(){const t=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=r.length;let i="";for(let a=0;a<56;a++)i+=r.charAt(Math.floor(Math.random()*n));return i}return crypto.getRandomValues(t),Array.from(t,Yw).join("")}async function Xw(e){const r=new TextEncoder().encode(e),n=await crypto.subtle.digest("SHA-256",r),i=new Uint8Array(n);return Array.from(i).map(a=>String.fromCharCode(a)).join("")}async function Jw(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const r=await Xw(e);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function wn(e,t,r=!1){const n=Zw();let i=n;r&&(i+="/PASSWORD_RECOVERY"),await An(e,`${t}-code-verifier`,i);const a=await Jw(n);return[a,n===a?"plain":"s256"]}const Qw=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function e1(e){const t=e.headers.get(yl);if(!t||!t.match(Qw))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function t1(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function r1(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const n1=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function jn(e){if(!n1.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function $o(){const e={};return new Proxy(e,{get:(t,r)=>{if(r==="__isUserNotAvailableProxy")return!0;if(typeof r=="symbol"){const n=r.toString();if(n==="Symbol(Symbol.toPrimitive)"||n==="Symbol(Symbol.toStringTag)"||n==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${r}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}var i1=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r};const Lr=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),a1=[502,503,504];async function Kd(e){var t;if(!qw(e))throw new xl(Lr(e),0);if(a1.includes(e.status))throw new xl(Lr(e),e.status);let r;try{r=await e.json()}catch(a){throw new mp(Lr(a),a)}let n;const i=e1(e);if(i&&i.getTime()>=fp["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?n=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(n=r.error_code),n){if(n==="weak_password")throw new Bd(Lr(r),e.status,((t=r.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(n==="session_not_found")throw new br}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((a,s)=>a&&typeof s=="string",!0))throw new Bd(Lr(r),e.status,r.weak_password.reasons);throw new Mw(Lr(r),e.status||500,n)}const s1=(e,t,r,n)=>{const i={method:e,headers:t?.headers||{}};return e==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t?.headers),i.body=JSON.stringify(n),Object.assign(Object.assign({},i),r))};async function ce(e,t,r,n){var i;const a=Object.assign({},n?.headers);a[yl]||(a[yl]=fp["2024-01-01"].name),n?.jwt&&(a.Authorization=`Bearer ${n.jwt}`);const s=(i=n?.query)!==null&&i!==void 0?i:{};n?.redirectTo&&(s.redirect_to=n.redirectTo);const o=Object.keys(s).length?"?"+new URLSearchParams(s).toString():"",c=await o1(e,t,r+o,{headers:a,noResolveJson:n?.noResolveJson},{},n?.body);return n?.xform?n?.xform(c):{data:Object.assign({},c),error:null}}async function o1(e,t,r,n,i,a){const s=s1(t,n,i,a);let o;try{o=await e(r,Object.assign({},s))}catch(c){throw console.error(c),new xl(Lr(c),0)}if(o.ok||await Kd(o),n?.noResolveJson)return o;try{return await o.json()}catch(c){await Kd(c)}}function Zt(e){var t;let r=null;d1(e)&&(r=Object.assign({},e),e.expires_at||(r.expires_at=Ww(e.expires_in)));const n=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:r,user:n},error:null}}function Hd(e){const t=Zt(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((r,n)=>r&&typeof n=="string",!0)&&(t.data.weak_password=e.weak_password),t}function Sr(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function l1(e){return{data:e,error:null}}function c1(e){const{action_link:t,email_otp:r,hashed_token:n,redirect_to:i,verification_type:a}=e,s=i1(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),o={action_link:t,email_otp:r,hashed_token:n,redirect_to:i,verification_type:a},c=Object.assign({},s);return{data:{properties:o,user:c},error:null}}function u1(e){return e}function d1(e){return e.access_token&&e.refresh_token&&e.expires_in}const Lo=["global","local","others"];var h1=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r};class f1{constructor({url:t="",headers:r={},fetch:n}){this.url=t,this.headers=r,this.fetch=vp(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(t,r=Lo[0]){if(Lo.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Lo.join(", ")}`);try{return await ce(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(n){if(ae(n))return{data:null,error:n};throw n}}async inviteUserByEmail(t,r={}){try{return await ce(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:Sr})}catch(n){if(ae(n))return{data:{user:null},error:n};throw n}}async generateLink(t){try{const{options:r}=t,n=h1(t,["options"]),i=Object.assign(Object.assign({},n),r);return"newEmail"in n&&(i.new_email=n?.newEmail,delete i.newEmail),await ce(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:i,headers:this.headers,xform:c1,redirectTo:r?.redirectTo})}catch(r){if(ae(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(t){try{return await ce(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:Sr})}catch(r){if(ae(r))return{data:{user:null},error:r};throw r}}async listUsers(t){var r,n,i,a,s,o,c;try{const d={nextPage:null,lastPage:0,total:0},u=await ce(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=t?.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(a=(i=t?.perPage)===null||i===void 0?void 0:i.toString())!==null&&a!==void 0?a:""},xform:u1});if(u.error)throw u.error;const h=await u.json(),f=(s=u.headers.get("x-total-count"))!==null&&s!==void 0?s:0,m=(c=(o=u.headers.get("link"))===null||o===void 0?void 0:o.split(","))!==null&&c!==void 0?c:[];return m.length>0&&(m.forEach(g=>{const p=parseInt(g.split(";")[0].split("=")[1].substring(0,1)),v=JSON.parse(g.split(";")[1].split("=")[1]);d[`${v}Page`]=p}),d.total=parseInt(f)),{data:Object.assign(Object.assign({},h),d),error:null}}catch(d){if(ae(d))return{data:{users:[]},error:d};throw d}}async getUserById(t){jn(t);try{return await ce(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:Sr})}catch(r){if(ae(r))return{data:{user:null},error:r};throw r}}async updateUserById(t,r){jn(t);try{return await ce(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:r,headers:this.headers,xform:Sr})}catch(n){if(ae(n))return{data:{user:null},error:n};throw n}}async deleteUser(t,r=!1){jn(t);try{return await ce(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:r},xform:Sr})}catch(n){if(ae(n))return{data:{user:null},error:n};throw n}}async _listFactors(t){jn(t.userId);try{const{data:r,error:n}=await ce(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:i=>({data:{factors:i},error:null})});return{data:r,error:n}}catch(r){if(ae(r))return{data:null,error:r};throw r}}async _deleteFactor(t){jn(t.userId),jn(t.id);try{return{data:await ce(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(r){if(ae(r))return{data:null,error:r};throw r}}}function qd(e={}){return{getItem:t=>e[t]||null,setItem:(t,r)=>{e[t]=r},removeItem:t=>{delete e[t]}}}function m1(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const Sn={debug:!!(globalThis&&gp()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class yp extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class p1 extends yp{}async function g1(e,t,r){Sn.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const n=new globalThis.AbortController;return t>0&&setTimeout(()=>{n.abort(),Sn.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async i=>{if(i){Sn.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,i.name);try{return await r()}finally{Sn.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,i.name)}}else{if(t===0)throw Sn.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new p1(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(Sn.debug)try{const a=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(a,null,"  "))}catch(a){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",a)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}m1();const v1={url:kw,storageKey:Ow,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Aw,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function Vd(e,t,r){return await r()}const Pn={};class ki{constructor(t){var r,n;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=ki.nextInstanceID,ki.nextInstanceID+=1,this.instanceID>0&&Dt()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const i=Object.assign(Object.assign({},v1),t);if(this.logDebugMessages=!!i.debug,typeof i.debug=="function"&&(this.logger=i.debug),this.persistSession=i.persistSession,this.storageKey=i.storageKey,this.autoRefreshToken=i.autoRefreshToken,this.admin=new f1({url:i.url,headers:i.headers,fetch:i.fetch}),this.url=i.url,this.headers=i.headers,this.fetch=vp(i.fetch),this.lock=i.lock||Vd,this.detectSessionInUrl=i.detectSessionInUrl,this.flowType=i.flowType,this.hasCustomAuthorizationHeader=i.hasCustomAuthorizationHeader,i.lock?this.lock=i.lock:Dt()&&(!((r=globalThis?.navigator)===null||r===void 0)&&r.locks)?this.lock=g1:this.lock=Vd,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(i.storage?this.storage=i.storage:gp()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=qd(this.memoryStorage)),i.userStorage&&(this.userStorage=i.userStorage)):(this.memoryStorage={},this.storage=qd(this.memoryStorage)),Dt()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(a){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",a)}(n=this.broadcastChannel)===null||n===void 0||n.addEventListener("message",async a=>{this._debug("received broadcast notification from other tab or client",a),await this._notifyAllSubscribers(a.data.event,a.data.session,!1)})}this.initialize()}get jwks(){var t,r;return(r=(t=Pn[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(t){Pn[this.storageKey]=Object.assign(Object.assign({},Pn[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,r;return(r=(t=Pn[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){Pn[this.storageKey]=Object.assign(Object.assign({},Pn[this.storageKey]),{cachedAt:t})}_debug(...t){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${hp}) ${new Date().toISOString()}`,...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{const r=Hw(window.location.href);let n="none";if(this._isImplicitGrantCallback(r)?n="implicit":await this._isPKCECallback(r)&&(n="pkce"),Dt()&&this.detectSessionInUrl&&n!=="none"){const{data:i,error:a}=await this._getSessionFromURL(r,n);if(a){if(this._debug("#_initialize()","error detecting session from URL",a),Iw(a)){const c=(t=a.details)===null||t===void 0?void 0:t.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:a}}return await this._removeSession(),{error:a}}const{session:s,redirectType:o}=i;return this._debug("#_initialize()","detected session in URL",s,"redirect type",o),await this._saveSession(s),setTimeout(async()=>{o==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",s):await this._notifyAllSubscribers("SIGNED_IN",s)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return ae(r)?{error:r}:{error:new mp("Unexpected error during initialization",r)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var r,n,i;try{const a=await ce(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(r=t?.options)===null||r===void 0?void 0:r.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(i=t?.options)===null||i===void 0?void 0:i.captchaToken}},xform:Zt}),{data:s,error:o}=a;if(o||!s)return{data:{user:null,session:null},error:o};const c=s.session,d=s.user;return s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:d,session:c},error:null}}catch(a){if(ae(a))return{data:{user:null,session:null},error:a};throw a}}async signUp(t){var r,n,i;try{let a;if("email"in t){const{email:u,password:h,options:f}=t;let m=null,g=null;this.flowType==="pkce"&&([m,g]=await wn(this.storage,this.storageKey)),a=await ce(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:f?.emailRedirectTo,body:{email:u,password:h,data:(r=f?.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:f?.captchaToken},code_challenge:m,code_challenge_method:g},xform:Zt})}else if("phone"in t){const{phone:u,password:h,options:f}=t;a=await ce(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:u,password:h,data:(n=f?.data)!==null&&n!==void 0?n:{},channel:(i=f?.channel)!==null&&i!==void 0?i:"sms",gotrue_meta_security:{captcha_token:f?.captchaToken}},xform:Zt})}else throw new oa("You must provide either an email or phone number and a password");const{data:s,error:o}=a;if(o||!s)return{data:{user:null,session:null},error:o};const c=s.session,d=s.user;return s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:d,session:c},error:null}}catch(a){if(ae(a))return{data:{user:null,session:null},error:a};throw a}}async signInWithPassword(t){try{let r;if("email"in t){const{email:a,password:s,options:o}=t;r=await ce(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:a,password:s,gotrue_meta_security:{captcha_token:o?.captchaToken}},xform:Hd})}else if("phone"in t){const{phone:a,password:s,options:o}=t;r=await ce(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:a,password:s,gotrue_meta_security:{captcha_token:o?.captchaToken}},xform:Hd})}else throw new oa("You must provide either an email or phone number and a password");const{data:n,error:i}=r;return i?{data:{user:null,session:null},error:i}:!n||!n.session||!n.user?{data:{user:null,session:null},error:new sa}:(n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),{data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:i})}catch(r){if(ae(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOAuth(t){var r,n,i,a;return await this._handleProviderSignIn(t.provider,{redirectTo:(r=t.options)===null||r===void 0?void 0:r.redirectTo,scopes:(n=t.options)===null||n===void 0?void 0:n.scopes,queryParams:(i=t.options)===null||i===void 0?void 0:i.queryParams,skipBrowserRedirect:(a=t.options)===null||a===void 0?void 0:a.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:r}=t;if(r==="solana")return await this.signInWithSolana(t);throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}async signInWithSolana(t){var r,n,i,a,s,o,c,d,u,h,f,m;let g,p;if("message"in t)g=t.message,p=t.signature;else{const{chain:v,wallet:x,statement:j,options:b}=t;let S;if(Dt())if(typeof x=="object")S=x;else{const N=window;if("solana"in N&&typeof N.solana=="object"&&("signIn"in N.solana&&typeof N.solana.signIn=="function"||"signMessage"in N.solana&&typeof N.solana.signMessage=="function"))S=N.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof x!="object"||!b?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");S=x}const _=new URL((r=b?.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in S&&S.signIn){const N=await S.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},b?.signInWithSolana),{version:"1",domain:_.host,uri:_.href}),j?{statement:j}:null));let P;if(Array.isArray(N)&&N[0]&&typeof N[0]=="object")P=N[0];else if(N&&typeof N=="object"&&"signedMessage"in N&&"signature"in N)P=N;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in P&&"signature"in P&&(typeof P.signedMessage=="string"||P.signedMessage instanceof Uint8Array)&&P.signature instanceof Uint8Array)g=typeof P.signedMessage=="string"?P.signedMessage:new TextDecoder().decode(P.signedMessage),p=P.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in S)||typeof S.signMessage!="function"||!("publicKey"in S)||typeof S!="object"||!S.publicKey||!("toBase58"in S.publicKey)||typeof S.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");g=[`${_.host} wants you to sign in with your Solana account:`,S.publicKey.toBase58(),...j?["",j,""]:[""],"Version: 1",`URI: ${_.href}`,`Issued At: ${(i=(n=b?.signInWithSolana)===null||n===void 0?void 0:n.issuedAt)!==null&&i!==void 0?i:new Date().toISOString()}`,...!((a=b?.signInWithSolana)===null||a===void 0)&&a.notBefore?[`Not Before: ${b.signInWithSolana.notBefore}`]:[],...!((s=b?.signInWithSolana)===null||s===void 0)&&s.expirationTime?[`Expiration Time: ${b.signInWithSolana.expirationTime}`]:[],...!((o=b?.signInWithSolana)===null||o===void 0)&&o.chainId?[`Chain ID: ${b.signInWithSolana.chainId}`]:[],...!((c=b?.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${b.signInWithSolana.nonce}`]:[],...!((d=b?.signInWithSolana)===null||d===void 0)&&d.requestId?[`Request ID: ${b.signInWithSolana.requestId}`]:[],...!((h=(u=b?.signInWithSolana)===null||u===void 0?void 0:u.resources)===null||h===void 0)&&h.length?["Resources",...b.signInWithSolana.resources.map(P=>`- ${P}`)]:[]].join(`
`);const N=await S.signMessage(new TextEncoder().encode(g),"utf8");if(!N||!(N instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");p=N}}try{const{data:v,error:x}=await ce(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:g,signature:zw(p)},!((f=t.options)===null||f===void 0)&&f.captchaToken?{gotrue_meta_security:{captcha_token:(m=t.options)===null||m===void 0?void 0:m.captchaToken}}:null),xform:Zt});if(x)throw x;return!v||!v.session||!v.user?{data:{user:null,session:null},error:new sa}:(v.session&&(await this._saveSession(v.session),await this._notifyAllSubscribers("SIGNED_IN",v.session)),{data:Object.assign({},v),error:x})}catch(v){if(ae(v))return{data:{user:null,session:null},error:v};throw v}}async _exchangeCodeForSession(t){const r=await $r(this.storage,`${this.storageKey}-code-verifier`),[n,i]=(r??"").split("/");try{const{data:a,error:s}=await ce(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:n},xform:Zt});if(await vr(this.storage,`${this.storageKey}-code-verifier`),s)throw s;return!a||!a.session||!a.user?{data:{user:null,session:null,redirectType:null},error:new sa}:(a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",a.session)),{data:Object.assign(Object.assign({},a),{redirectType:i??null}),error:s})}catch(a){if(ae(a))return{data:{user:null,session:null,redirectType:null},error:a};throw a}}async signInWithIdToken(t){try{const{options:r,provider:n,token:i,access_token:a,nonce:s}=t,o=await ce(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:i,access_token:a,nonce:s,gotrue_meta_security:{captcha_token:r?.captchaToken}},xform:Zt}),{data:c,error:d}=o;return d?{data:{user:null,session:null},error:d}:!c||!c.session||!c.user?{data:{user:null,session:null},error:new sa}:(c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),{data:c,error:d})}catch(r){if(ae(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOtp(t){var r,n,i,a,s;try{if("email"in t){const{email:o,options:c}=t;let d=null,u=null;this.flowType==="pkce"&&([d,u]=await wn(this.storage,this.storageKey));const{error:h}=await ce(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:o,data:(r=c?.data)!==null&&r!==void 0?r:{},create_user:(n=c?.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:c?.captchaToken},code_challenge:d,code_challenge_method:u},redirectTo:c?.emailRedirectTo});return{data:{user:null,session:null},error:h}}if("phone"in t){const{phone:o,options:c}=t,{data:d,error:u}=await ce(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:o,data:(i=c?.data)!==null&&i!==void 0?i:{},create_user:(a=c?.shouldCreateUser)!==null&&a!==void 0?a:!0,gotrue_meta_security:{captcha_token:c?.captchaToken},channel:(s=c?.channel)!==null&&s!==void 0?s:"sms"}});return{data:{user:null,session:null,messageId:d?.message_id},error:u}}throw new oa("You must provide either an email or phone number.")}catch(o){if(ae(o))return{data:{user:null,session:null},error:o};throw o}}async verifyOtp(t){var r,n;try{let i,a;"options"in t&&(i=(r=t.options)===null||r===void 0?void 0:r.redirectTo,a=(n=t.options)===null||n===void 0?void 0:n.captchaToken);const{data:s,error:o}=await ce(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:a}}),redirectTo:i,xform:Zt});if(o)throw o;if(!s)throw new Error("An error occurred on token verification.");const c=s.session,d=s.user;return c?.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),{data:{user:d,session:c},error:null}}catch(i){if(ae(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithSSO(t){var r,n,i;try{let a=null,s=null;return this.flowType==="pkce"&&([a,s]=await wn(this.storage,this.storageKey)),await ce(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(n=(r=t.options)===null||r===void 0?void 0:r.redirectTo)!==null&&n!==void 0?n:void 0}),!((i=t?.options)===null||i===void 0)&&i.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:a,code_challenge_method:s}),headers:this.headers,xform:l1})}catch(a){if(ae(a))return{data:null,error:a};throw a}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:r},error:n}=t;if(n)throw n;if(!r)throw new br;const{error:i}=await ce(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return{data:{user:null,session:null},error:i}})}catch(t){if(ae(t))return{data:{user:null,session:null},error:t};throw t}}async resend(t){try{const r=`${this.url}/resend`;if("email"in t){const{email:n,type:i,options:a}=t,{error:s}=await ce(this.fetch,"POST",r,{headers:this.headers,body:{email:n,type:i,gotrue_meta_security:{captcha_token:a?.captchaToken}},redirectTo:a?.emailRedirectTo});return{data:{user:null,session:null},error:s}}else if("phone"in t){const{phone:n,type:i,options:a}=t,{data:s,error:o}=await ce(this.fetch,"POST",r,{headers:this.headers,body:{phone:n,type:i,gotrue_meta_security:{captcha_token:a?.captchaToken}}});return{data:{user:null,session:null,messageId:s?.message_id},error:o}}throw new oa("You must provide either an email or phone number and a type")}catch(r){if(ae(r))return{data:{user:null,session:null},error:r};throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async r=>r))}async _acquireLock(t,r){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),i=(async()=>(await n,await r()))();return this.pendingInLock.push((async()=>{try{await i}catch{}})()),i}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=r();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const i=[...this.pendingInLock];await Promise.all(i),this.pendingInLock.splice(0,i.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await t(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const r=await $r(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?t=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const n=t.expires_at?t.expires_at*1e3-Date.now()<To:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",t.expires_at),!n){if(this.userStorage){const s=await $r(this.userStorage,this.storageKey+"-user");s?.user?t.user=s.user:t.user=$o()}if(this.storage.isServer&&t.user){let s=this.suppressGetSessionWarning;t=new Proxy(t,{get:(c,d,u)=>(!s&&d==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),s=!0,this.suppressGetSessionWarning=!0),Reflect.get(c,d,u))})}return{data:{session:t},error:null}}const{session:i,error:a}=await this._callRefreshToken(t.refresh_token);return a?{data:{session:null},error:a}:{data:{session:i},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(t){return t?await this._getUser(t):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(t){try{return t?await ce(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:Sr}):await this._useSession(async r=>{var n,i,a;const{data:s,error:o}=r;if(o)throw o;return!(!((n=s.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new br}:await ce(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(a=(i=s.session)===null||i===void 0?void 0:i.access_token)!==null&&a!==void 0?a:void 0,xform:Sr})})}catch(r){if(ae(r))return Dw(r)&&(await this._removeSession(),await vr(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:r};throw r}}async updateUser(t,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,r))}async _updateUser(t,r={}){try{return await this._useSession(async n=>{const{data:i,error:a}=n;if(a)throw a;if(!i.session)throw new br;const s=i.session;let o=null,c=null;this.flowType==="pkce"&&t.email!=null&&([o,c]=await wn(this.storage,this.storageKey));const{data:d,error:u}=await ce(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r?.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:o,code_challenge_method:c}),jwt:s.access_token,xform:Sr});if(u)throw u;return s.user=d.user,await this._saveSession(s),await this._notifyAllSubscribers("USER_UPDATED",s),{data:{user:s.user},error:null}})}catch(n){if(ae(n))return{data:{user:null},error:n};throw n}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new br;const r=Date.now()/1e3;let n=r,i=!0,a=null;const{payload:s}=Io(t.access_token);if(s.exp&&(n=s.exp,i=n<=r),i){const{session:o,error:c}=await this._callRefreshToken(t.refresh_token);if(c)return{data:{user:null,session:null},error:c};if(!o)return{data:{user:null,session:null},error:null};a=o}else{const{data:o,error:c}=await this._getUser(t.access_token);if(c)throw c;a={access_token:t.access_token,refresh_token:t.refresh_token,user:o.user,token_type:"bearer",expires_in:n-r,expires_at:n},await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)}return{data:{user:a.user,session:a},error:null}}catch(r){if(ae(r))return{data:{session:null,user:null},error:r};throw r}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async r=>{var n;if(!t){const{data:s,error:o}=r;if(o)throw o;t=(n=s.session)!==null&&n!==void 0?n:void 0}if(!t?.refresh_token)throw new br;const{session:i,error:a}=await this._callRefreshToken(t.refresh_token);return a?{data:{user:null,session:null},error:a}:i?{data:{user:i.user,session:i},error:null}:{data:{user:null,session:null},error:null}})}catch(r){if(ae(r))return{data:{user:null,session:null},error:r};throw r}}async _getSessionFromURL(t,r){try{if(!Dt())throw new la("No browser detected.");if(t.error||t.error_description||t.error_code)throw new la(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new Ud("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new la("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new Ud("No code detected.");const{data:j,error:b}=await this._exchangeCodeForSession(t.code);if(b)throw b;const S=new URL(window.location.href);return S.searchParams.delete("code"),window.history.replaceState(window.history.state,"",S.toString()),{data:{session:j.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:i,access_token:a,refresh_token:s,expires_in:o,expires_at:c,token_type:d}=t;if(!a||!o||!s||!d)throw new la("No session defined in URL");const u=Math.round(Date.now()/1e3),h=parseInt(o);let f=u+h;c&&(f=parseInt(c));const m=f-u;m*1e3<=On&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${m}s, should have been closer to ${h}s`);const g=f-h;u-g>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",g,f,u):u-g<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",g,f,u);const{data:p,error:v}=await this._getUser(a);if(v)throw v;const x={provider_token:n,provider_refresh_token:i,access_token:a,expires_in:h,expires_at:f,refresh_token:s,token_type:d,user:p.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:x,redirectType:t.type},error:null}}catch(n){if(ae(n))return{data:{session:null,redirectType:null},error:n};throw n}}_isImplicitGrantCallback(t){return!!(t.access_token||t.error_description)}async _isPKCECallback(t){const r=await $r(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&r)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async r=>{var n;const{data:i,error:a}=r;if(a)return{error:a};const s=(n=i.session)===null||n===void 0?void 0:n.access_token;if(s){const{error:o}=await this.admin.signOut(s,t);if(o&&!(Tw(o)&&(o.status===404||o.status===401||o.status===403)))return{error:o}}return t!=="others"&&(await this._removeSession(),await vr(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(t){const r=Kw(),n={id:r,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,n),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:n}}}async _emitInitialSession(t){return await this._useSession(async r=>{var n,i;try{const{data:{session:a},error:s}=r;if(s)throw s;await((n=this.stateChangeEmitters.get(t))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",a)),this._debug("INITIAL_SESSION","callback id",t,"session",a)}catch(a){await((i=this.stateChangeEmitters.get(t))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",a),console.error(a)}})}async resetPasswordForEmail(t,r={}){let n=null,i=null;this.flowType==="pkce"&&([n,i]=await wn(this.storage,this.storageKey,!0));try{return await ce(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:n,code_challenge_method:i,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(a){if(ae(a))return{data:null,error:a};throw a}}async getUserIdentities(){var t;try{const{data:r,error:n}=await this.getUser();if(n)throw n;return{data:{identities:(t=r.user.identities)!==null&&t!==void 0?t:[]},error:null}}catch(r){if(ae(r))return{data:null,error:r};throw r}}async linkIdentity(t){var r;try{const{data:n,error:i}=await this._useSession(async a=>{var s,o,c,d,u;const{data:h,error:f}=a;if(f)throw f;const m=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(s=t.options)===null||s===void 0?void 0:s.redirectTo,scopes:(o=t.options)===null||o===void 0?void 0:o.scopes,queryParams:(c=t.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await ce(this.fetch,"GET",m,{headers:this.headers,jwt:(u=(d=h.session)===null||d===void 0?void 0:d.access_token)!==null&&u!==void 0?u:void 0})});if(i)throw i;return Dt()&&!(!((r=t.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(n?.url),{data:{provider:t.provider,url:n?.url},error:null}}catch(n){if(ae(n))return{data:{provider:t.provider,url:null},error:n};throw n}}async unlinkIdentity(t){try{return await this._useSession(async r=>{var n,i;const{data:a,error:s}=r;if(s)throw s;return await ce(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(i=(n=a.session)===null||n===void 0?void 0:n.access_token)!==null&&i!==void 0?i:void 0})})}catch(r){if(ae(r))return{data:null,error:r};throw r}}async _refreshAccessToken(t){const r=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(r,"begin");try{const n=Date.now();return await Gw(async i=>(i>0&&await Vw(200*Math.pow(2,i-1)),this._debug(r,"refreshing attempt",i),await ce(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:Zt})),(i,a)=>{const s=200*Math.pow(2,i);return a&&Do(a)&&Date.now()+s-n<On})}catch(n){if(this._debug(r,"error",n),ae(n))return{data:{session:null,user:null},error:n};throw n}finally{this._debug(r,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,r){const n=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",r,"url",n),Dt()&&!r.skipBrowserRedirect&&window.location.assign(n),{data:{provider:t,url:n},error:null}}async _recoverAndRefresh(){var t,r;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const i=await $r(this.storage,this.storageKey);if(i&&this.userStorage){let s=await $r(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!s&&(s={user:i.user},await An(this.userStorage,this.storageKey+"-user",s)),i.user=(t=s?.user)!==null&&t!==void 0?t:$o()}else if(i&&!i.user&&!i.user){const s=await $r(this.storage,this.storageKey+"-user");s&&s?.user?(i.user=s.user,await vr(this.storage,this.storageKey+"-user"),await An(this.storage,this.storageKey,i)):i.user=$o()}if(this._debug(n,"session from storage",i),!this._isValidSession(i)){this._debug(n,"session is not valid"),i!==null&&await this._removeSession();return}const a=((r=i.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<To;if(this._debug(n,`session has${a?"":" not"} expired with margin of ${To}s`),a){if(this.autoRefreshToken&&i.refresh_token){const{error:s}=await this._callRefreshToken(i.refresh_token);s&&(console.error(s),Do(s)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",s),await this._removeSession()))}}else if(i.user&&i.user.__isUserNotAvailableProxy===!0)try{const{data:s,error:o}=await this._getUser(i.access_token);!o&&s?.user?(i.user=s.user,await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)):this._debug(n,"could not get user data, skipping SIGNED_IN notification")}catch(s){console.error("Error getting user data:",s),this._debug(n,"error getting user data, skipping SIGNED_IN notification",s)}else await this._notifyAllSubscribers("SIGNED_IN",i)}catch(i){this._debug(n,"error",i),console.error(i);return}finally{this._debug(n,"end")}}async _callRefreshToken(t){var r,n;if(!t)throw new br;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const i=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(i,"begin");try{this.refreshingDeferred=new ys;const{data:a,error:s}=await this._refreshAccessToken(t);if(s)throw s;if(!a.session)throw new br;await this._saveSession(a.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",a.session);const o={session:a.session,error:null};return this.refreshingDeferred.resolve(o),o}catch(a){if(this._debug(i,"error",a),ae(a)){const s={session:null,error:a};return Do(a)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(s),s}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(a),a}finally{this.refreshingDeferred=null,this._debug(i,"end")}}async _notifyAllSubscribers(t,r,n=!0){const i=`#_notifyAllSubscribers(${t})`;this._debug(i,"begin",r,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:t,session:r});const a=[],s=Array.from(this.stateChangeEmitters.values()).map(async o=>{try{await o.callback(t,r)}catch(c){a.push(c)}});if(await Promise.all(s),a.length>0){for(let o=0;o<a.length;o+=1)console.error(a[o]);throw a[0]}}finally{this._debug(i,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0;const r=Object.assign({},t),n=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!n&&r.user&&await An(this.userStorage,this.storageKey+"-user",{user:r.user});const i=Object.assign({},r);delete i.user;const a=structuredClone(i);await An(this.storage,this.storageKey,a)}else{const i=structuredClone(r);await An(this.storage,this.storageKey,i)}}async _removeSession(){this._debug("#_removeSession()"),await vr(this.storage,this.storageKey),await vr(this.storage,this.storageKey+"-code-verifier"),await vr(this.storage,this.storageKey+"-user"),this.userStorage&&await vr(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&Dt()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",t)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),On);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async r=>{const{data:{session:n}}=r;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const i=Math.floor((n.expires_at*1e3-t)/On);this._debug("#_autoRefreshTokenTick()",`access token expires in ${i} ticks, a tick lasts ${On}ms, refresh threshold is ${vl} ticks`),i<=vl&&await this._callRefreshToken(n.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof yp)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Dt()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window?.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const r=`#_onVisibilityChanged(${t})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,r,n){const i=[`provider=${encodeURIComponent(r)}`];if(n?.redirectTo&&i.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n?.scopes&&i.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[a,s]=await wn(this.storage,this.storageKey),o=new URLSearchParams({code_challenge:`${encodeURIComponent(a)}`,code_challenge_method:`${encodeURIComponent(s)}`});i.push(o.toString())}if(n?.queryParams){const a=new URLSearchParams(n.queryParams);i.push(a.toString())}return n?.skipBrowserRedirect&&i.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${t}?${i.join("&")}`}async _unenroll(t){try{return await this._useSession(async r=>{var n;const{data:i,error:a}=r;return a?{data:null,error:a}:await ce(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(n=i?.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(ae(r))return{data:null,error:r};throw r}}async _enroll(t){try{return await this._useSession(async r=>{var n,i;const{data:a,error:s}=r;if(s)return{data:null,error:s};const o=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:{issuer:t.issuer}),{data:c,error:d}=await ce(this.fetch,"POST",`${this.url}/factors`,{body:o,headers:this.headers,jwt:(n=a?.session)===null||n===void 0?void 0:n.access_token});return d?{data:null,error:d}:(t.factorType==="totp"&&(!((i=c?.totp)===null||i===void 0)&&i.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),{data:c,error:null})})}catch(r){if(ae(r))return{data:null,error:r};throw r}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:i,error:a}=r;if(a)return{data:null,error:a};const{data:s,error:o}=await ce(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:{code:t.code,challenge_id:t.challengeId},headers:this.headers,jwt:(n=i?.session)===null||n===void 0?void 0:n.access_token});return o?{data:null,error:o}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+s.expires_in},s)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",s),{data:s,error:o})})}catch(r){if(ae(r))return{data:null,error:r};throw r}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:i,error:a}=r;return a?{data:null,error:a}:await ce(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:{channel:t.channel},headers:this.headers,jwt:(n=i?.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(ae(r))return{data:null,error:r};throw r}})}async _challengeAndVerify(t){const{data:r,error:n}=await this._challenge({factorId:t.factorId});return n?{data:null,error:n}:await this._verify({factorId:t.factorId,challengeId:r.id,code:t.code})}async _listFactors(){const{data:{user:t},error:r}=await this.getUser();if(r)return{data:null,error:r};const n=t?.factors||[],i=n.filter(s=>s.factor_type==="totp"&&s.status==="verified"),a=n.filter(s=>s.factor_type==="phone"&&s.status==="verified");return{data:{all:n,totp:i,phone:a},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async t=>{var r,n;const{data:{session:i},error:a}=t;if(a)return{data:null,error:a};if(!i)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:s}=Io(i.access_token);let o=null;s.aal&&(o=s.aal);let c=o;((n=(r=i.user.factors)===null||r===void 0?void 0:r.filter(h=>h.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(c="aal2");const u=s.amr||[];return{data:{currentLevel:o,nextLevel:c,currentAuthenticationMethods:u},error:null}}))}async fetchJwk(t,r={keys:[]}){let n=r.keys.find(o=>o.kid===t);if(n)return n;const i=Date.now();if(n=this.jwks.keys.find(o=>o.kid===t),n&&this.jwks_cached_at+Cw>i)return n;const{data:a,error:s}=await ce(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(s)throw s;return!a.keys||a.keys.length===0||(this.jwks=a,this.jwks_cached_at=i,n=a.keys.find(o=>o.kid===t),!n)?null:n}async getClaims(t,r={}){try{let n=t;if(!n){const{data:m,error:g}=await this.getSession();if(g||!m.session)return{data:null,error:g};n=m.session.access_token}const{header:i,payload:a,signature:s,raw:{header:o,payload:c}}=Io(n);r?.allowExpired||t1(a.exp);const d=!i.alg||i.alg.startsWith("HS")||!i.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(i.kid,r?.keys?{keys:r.keys}:r?.jwks);if(!d){const{error:m}=await this.getUser(n);if(m)throw m;return{data:{claims:a,header:i,signature:s},error:null}}const u=r1(i.alg),h=await crypto.subtle.importKey("jwk",d,u,!0,["verify"]);if(!await crypto.subtle.verify(u,h,s,Fw(`${o}.${c}`)))throw new bl("Invalid JWT signature");return{data:{claims:a,header:i,signature:s},error:null}}catch(n){if(ae(n))return{data:null,error:n};throw n}}}ki.nextInstanceID=0;const y1=ki;class x1 extends y1{constructor(t){super(t)}}var b1=function(e,t,r,n){function i(a){return a instanceof r?a:new r(function(s){s(a)})}return new(r||(r=Promise))(function(a,s){function o(u){try{d(n.next(u))}catch(h){s(h)}}function c(u){try{d(n.throw(u))}catch(h){s(h)}}function d(u){u.done?a(u.value):i(u.value).then(o,c)}d((n=n.apply(e,t||[])).next())})};class w1{constructor(t,r,n){var i,a,s;if(this.supabaseUrl=t,this.supabaseKey=r,!t)throw new Error("supabaseUrl is required.");if(!r)throw new Error("supabaseKey is required.");const o=_w(t),c=new URL(o);this.realtimeUrl=new URL("realtime/v1",c),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",c),this.storageUrl=new URL("storage/v1",c),this.functionsUrl=new URL("functions/v1",c);const d=`sb-${c.hostname.split(".")[0]}-auth-token`,u={db:vw,realtime:xw,auth:Object.assign(Object.assign({},yw),{storageKey:d}),global:gw},h=Nw(n??{},u);this.storageKey=(i=h.auth.storageKey)!==null&&i!==void 0?i:"",this.headers=(a=h.global.headers)!==null&&a!==void 0?a:{},h.accessToken?(this.accessToken=h.accessToken,this.auth=new Proxy({},{get:(f,m)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(m)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((s=h.auth)!==null&&s!==void 0?s:{},this.headers,h.global.fetch),this.fetch=Sw(r,this._getAccessToken.bind(this),h.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},h.realtime)),this.rest=new Ub(new URL("rest/v1",c).href,{headers:this.headers,schema:h.db.schema,fetch:this.fetch}),h.accessToken||this._listenForAuthEvents()}get functions(){return new pb(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}get storage(){return new fw(this.storageUrl.href,this.headers,this.fetch)}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,r={},n={}){return this.rest.rpc(t,r,n)}channel(t,r={config:{}}){return this.realtime.channel(t,r)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var t,r;return b1(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:n}=yield this.auth.getSession();return(r=(t=n.session)===null||t===void 0?void 0:t.access_token)!==null&&r!==void 0?r:null})}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:r,detectSessionInUrl:n,storage:i,storageKey:a,flowType:s,lock:o,debug:c},d,u){const h={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new x1({url:this.authUrl.href,headers:Object.assign(Object.assign({},h),d),storageKey:a,autoRefreshToken:t,persistSession:r,detectSessionInUrl:n,storage:i,flowType:s,lock:o,debug:c,fetch:u,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(t){return new ew(this.realtimeUrl.href,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((r,n)=>{this._handleTokenChanged(r,"CLIENT",n?.access_token)})}_handleTokenChanged(t,r,n){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==n?this.changedAccessToken=n:t==="SIGNED_OUT"&&(this.realtime.setAuth(),r=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const j1=(e,t,r)=>new w1(e,t,r),S1="https://yowxropoudlyifibhvlb.supabase.co",P1="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Inlvd3hyb3BvdWRseWlmaWJodmxiIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTI3NzIzMzUsImV4cCI6MjA2ODM0ODMzNX0.L1DDEVrKwvP9LFA8aBCgCtI4g_-wVj1zplRO_O_cpNo",fe=j1(S1,P1,{auth:{autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0},realtime:{params:{eventsPerSecond:10}},db:{schema:"public"},global:{headers:{"X-Client-Info":"simhastha-2028-crowd-monitoring"}}});class _1{async checkConnection(){try{const t=new Promise((n,i)=>setTimeout(()=>i(new Error("Connection check timeout")),3e3)),r=fe.from("zones").select("id").limit(1);if(t.limit(1),error)throw error;return{connected:!0,error:null}}catch(t){return console.warn("Supabase connection failed:",t),{connected:!1,error:t?.message||"Connection failed"}}}async insertCrowdData(t){try{if(!t.location_id||t.people_count<0||!t.roi||t.roi.length!==4)throw new Error("Invalid crowd data format");const{data:{user:r}}=await fe.auth.getUser();if(!r)return console.warn("User not authenticated, skipping database insert"),null;const n={location_id:t.location_id,timestamp:t.timestamp,people_count:Math.max(0,Math.floor(t.people_count)),source:t.source,roi:t.roi.map(s=>Math.max(0,Math.min(1,s))),confidence:Math.max(.1,Math.min(1,.8)),model_used:"browser-detection-v2"},{data:i,error:a}=await fe.from("crowd_counts").insert(n).select().single();return a?(console.warn("Database insert failed, continuing with demo mode:",a.message),null):(await this.checkAndGenerateAlerts(t.location_id,t.people_count),i)}catch(r){return console.warn("Failed to insert crowd data, continuing with demo mode:",r),null}}async checkAndGenerateAlerts(t,r){try{const{data:n}=await fe.from("zones").select("capacity, name").eq("id",t).single();if(!n)return;const i=r/n.capacity;i>.9?await this.createAlert({type:"critical",message:`CRITICAL: ${n.name} has exceeded safe capacity (${r}/${n.capacity}) - immediate evacuation recommended`,location_id:t,timestamp:new Date().toISOString(),acknowledged:!1}):i>.7&&await this.createAlert({type:"warning",message:`WARNING: ${n.name} approaching high capacity (${r}/${n.capacity}) - enhanced monitoring advised`,location_id:t,timestamp:new Date().toISOString(),acknowledged:!1})}catch(n){console.warn("Error checking alert thresholds:",n)}}async getCrowdData(t,r=100){try{let n=fe.from("crowd_counts").select("*").order("timestamp",{ascending:!1}).limit(r);t&&(n=n.eq("location_id",t));const{data:i,error:a}=await n;if(a)throw a;return i}catch(n){return console.error("Error fetching crowd data:",n),[]}}async getCrowdTrends(t,r=24){try{const{data:n,error:i}=await fe.rpc("get_crowd_trends",{zone_id:t,hours_back:r});if(i)throw i;return n}catch(n){return console.error("Error fetching crowd trends:",n),[]}}subscribeToLiveCrowdData(t){try{return fe.channel("crowd_counts_changes").on("postgres_changes",{event:"INSERT",schema:"public",table:"crowd_counts"},r=>{console.log("Real-time crowd data received:",r),t(r.new)}).subscribe(r=>{console.log("Crowd data subscription status:",r)})}catch(r){return console.error("Error setting up crowd data subscription:",r),{unsubscribe:()=>{}}}}subscribeToAlerts(t){try{return fe.channel("alerts_changes").on("postgres_changes",{event:"*",schema:"public",table:"alerts"},r=>{console.log("Real-time alert received:",r),(r.eventType==="INSERT"||r.eventType==="UPDATE")&&t(r.new)}).subscribe(r=>{console.log("Alerts subscription status:",r)})}catch(r){return console.error("Error setting up alerts subscription:",r),{unsubscribe:()=>{}}}}subscribeToZoneUpdates(t){try{return fe.channel("zone_updates").on("postgres_changes",{event:"*",schema:"public",table:"crowd_counts"},async r=>{try{console.log("Zone update triggered by crowd count change:",r);const{data:n,error:i}=await fe.from("live_zone_status").select("*").eq("id",r.new.location_id).single();if(i){console.error("Error fetching zone status:",i);return}n&&(console.log("Zone status updated:",n),t(n))}catch(n){console.error("Error in zone update callback:",n)}}).subscribe(r=>{console.log("Zone updates subscription status:",r)})}catch(r){return console.error("Error setting up zone updates subscription:",r),{unsubscribe:()=>{}}}}async getZones(){try{const{data:t,error:r}=await fe.from("zones").select("*").order("name");if(r)throw r;return t}catch(t){return console.error("Error fetching zones:",t),[]}}async getLiveZoneStatus(){try{const{data:t,error:r}=await fe.from("live_zone_status").select("*").order("name");if(r)throw r;return t}catch(t){return console.error("Error fetching live zone status:",t),[]}}async updateZone(t,r){try{const{data:n,error:i}=await fe.from("zones").update(r).eq("id",t).select().single();if(i)throw i;return n}catch(n){throw console.error("Error updating zone:",n),n}}async createAlert(t){try{const{data:{user:r}}=await fe.auth.getUser();if(!r)return console.warn("User not authenticated, creating demo alert"),{id:`demo-alert-${Date.now()}`,type:t.type,message:t.message,location_id:t.location_id,timestamp:t.timestamp,acknowledged:t.acknowledged||!1,metadata:{auto_generated:!0,severity:t.type==="critical"?"high":t.type==="warning"?"medium":"low",created_by:"demo_system"},created_at:new Date().toISOString()};const{data:n}=await fe.from("alerts").select("id").eq("location_id",t.location_id).eq("type",t.type).eq("acknowledged",!1).gte("timestamp",new Date(Date.now()-5*60*1e3).toISOString());if(n&&n.length>0)return console.log("Duplicate alert prevented"),n[0];const{data:i,error:a}=await fe.from("alerts").insert({type:t.type,message:t.message,location_id:t.location_id,timestamp:t.timestamp,acknowledged:t.acknowledged||!1,metadata:{auto_generated:!0,severity:t.type==="critical"?"high":t.type==="warning"?"medium":"low",created_by:"system",zone_capacity:0,current_occupancy:0}}).select().single();if(a)throw a;return i}catch(r){return console.warn("Error creating alert:",r),{id:`demo-alert-${Date.now()}`,type:t.type,message:t.message,location_id:t.location_id,timestamp:t.timestamp,acknowledged:t.acknowledged||!1,metadata:{auto_generated:!0,severity:t.type==="critical"?"high":t.type==="warning"?"medium":"low",created_by:"demo_system"},created_at:new Date().toISOString()}}}async getAlerts(t=!1){try{const{data:r,error:n}=await fe.from("alerts").select(`
          *,
          zones!alerts_location_id_fkey(name)
        `).eq("acknowledged",t).order("timestamp",{ascending:!1});if(n)throw n;return r}catch(r){return console.error("Error fetching alerts:",r),[]}}async getRecentAlerts(){try{const{data:t,error:r}=await fe.from("recent_alerts").select("*").order("timestamp",{ascending:!1}).limit(50);if(r)throw r;return t}catch(t){return console.error("Error fetching recent alerts:",t),[]}}async acknowledgeAlert(t){try{const{data:r,error:n}=await fe.from("alerts").update({acknowledged:!0,acknowledged_at:new Date().toISOString()}).eq("id",t).select().single();if(n)throw n;return r}catch(r){throw console.error("Error acknowledging alert:",r),r}}async getDashboardData(){try{const{data:t,error:r}=await fe.rpc("get_dashboard_data");if(r)throw r;return t}catch(t){return console.error("Error fetching dashboard data:",t),null}}async getEvacuationRecommendations(){try{const{data:t,error:r}=await fe.rpc("get_evacuation_recommendations");if(r)throw r;return t}catch(t){return console.error("Error fetching evacuation recommendations:",t),[]}}async getEvacuationRoutes(){try{const{data:t,error:r}=await fe.from("evacuation_routes").select(`
          *,
          from_zone_data:zones!evacuation_routes_from_zone_fkey(name),
          to_zone_data:zones!evacuation_routes_to_zone_fkey(name)
        `).eq("status","active").order("priority");if(r)throw r;return t}catch(t){return console.error("Error fetching evacuation routes:",t),[]}}async getZoneAnalytics(){try{const{data:t,error:r}=await fe.from("zone_analytics").select("*").order("zone_name");if(r)throw r;return t}catch(t){return console.error("Error fetching zone analytics:",t),[]}}async refreshAnalytics(){try{const{error:t}=await fe.rpc("refresh_analytics_views");if(t)throw t;return!0}catch(t){return console.error("Error refreshing analytics:",t),!1}}async generateDemoScenario(t="normal"){try{const{error:r}=await fe.rpc("generate_demo_scenario",{scenario_type:t});if(r)throw r;return!0}catch(r){return console.error("Error generating demo scenario:",r),!1}}async cleanupOldData(){try{const{error:t}=await fe.rpc("cleanup_old_data");if(t)throw t;return!0}catch(t){return console.error("Error cleaning up old data:",t),!1}}async signIn(t,r){try{const{data:n,error:i}=await fe.auth.signInWithPassword({email:t,password:r});return i?(console.warn("Supabase sign in error:",i.message),{data:null,error:i}):{data:n,error:null}}catch(n){return console.error("Sign in error:",n),{data:null,error:n}}}async signOut(){try{const{error:t}=await fe.auth.signOut();if(t)throw t}catch(t){throw console.error("Sign out error:",t),t}}async getCurrentUser(){try{const{data:{user:t}}=await fe.auth.getUser();return t}catch(t){return console.error("Get current user error:",t),null}}async getUserProfile(t){try{const{data:r,error:n}=await fe.from("users").select("*").eq("id",t).single();if(n)throw n;return r}catch(r){return console.error("Error fetching user profile:",r),null}}subscribeToAuth(t){return fe.auth.onAuthStateChange((r,n)=>{t(n?.user||null)})}async testConnection(){try{const t=new Promise((i,a)=>setTimeout(()=>a(new Error("Test connection timeout")),3e3)),{data:r,error:n}=await fe.from("zones").select("id, name");if(t.limit(1),n)throw n;return console.log("✅ Supabase connection successful",r),!0}catch(t){return console.warn("❌ Supabase test connection failed:",t),!1}}async initializeDemo(){try{if(!await this.testConnection())return console.log("Supabase not available for demo initialization"),!1;try{const{data:r,error:n}=await Promise.race([fe.from("zones").select("count").limit(1),new Promise((i,a)=>setTimeout(()=>a(new Error("Query timeout")),2e3))]);if(n&&n.code!=="PGRST116")throw n}catch(r){console.warn("Demo functions not available:",r),await this.insertBasicDemoData()}try{console.log("Analytics refresh skipped for performance")}catch(r){console.warn("Analytics refresh failed:",r)}return console.log("✅ Demo initialization completed"),!0}catch(t){return console.warn("❌ Demo initialization failed:",t),!1}}async insertBasicDemoData(){try{const t=["ram-ghat","mahakal-ghat","bhairav-ghat","narsingh-ghat","kshipra-ghat"];for(const r of t){const n=Math.floor(Math.random()*500)+100;try{await this.insertCrowdData({location_id:r,timestamp:new Date().toISOString(),people_count:n,source:"video",roi:[.1,.1,.9,.9]})}catch(i){console.warn(`Failed to insert demo data for ${r}:`,i)}}}catch(t){console.warn("Failed to insert basic demo data:",t)}}}const Oi=new _1;class N1{constructor(){this.demoUsers=[{email:"admin@simhastha.org",password:"admin123",role:"admin",profile:{name:"Dr. Rajesh Kumar",department:"Event Management",contact:"+91-9876543210",shift:"All Day",badgeNumber:"ADM001"},assigned_zones:["ram-ghat","mahakal-ghat","bhairav-ghat","narsingh-ghat","kshipra-ghat"],permissions:{canViewAllZones:!0,canManageDetection:!0,canAcknowledgeAlerts:!0,canExportData:!0,canManageUsers:!0,canAccessPredictions:!0,canControlEvacuation:!0}},{email:"police@simhastha.org",password:"police123",role:"police",profile:{name:"Inspector Priya Sharma",department:"Ujjain Police",contact:"+91-9876543211",shift:"Day Shift (6 AM - 6 PM)",badgeNumber:"POL001"},assigned_zones:["ram-ghat","mahakal-ghat","bhairav-ghat"],permissions:{canViewAllZones:!0,canManageDetection:!1,canAcknowledgeAlerts:!0,canExportData:!0,canManageUsers:!1,canAccessPredictions:!0,canControlEvacuation:!0}},{email:"volunteer@simhastha.org",password:"volunteer123",role:"volunteer",profile:{name:"Amit Patel",department:"Crowd Management",contact:"+91-9876543212",shift:"Morning Shift (4 AM - 12 PM)",badgeNumber:"VOL001"},assigned_zones:["narsingh-ghat","kshipra-ghat"],permissions:{canViewAllZones:!1,canManageDetection:!1,canAcknowledgeAlerts:!1,canExportData:!1,canManageUsers:!1,canAccessPredictions:!1,canControlEvacuation:!1}},{email:"medical@simhastha.org",password:"medical123",role:"volunteer",profile:{name:"Dr. Sunita Verma",department:"Medical Emergency",contact:"+91-9876543213",shift:"Night Shift (6 PM - 6 AM)",badgeNumber:"MED001"},assigned_zones:["ram-ghat","mahakal-ghat"],permissions:{canViewAllZones:!0,canManageDetection:!1,canAcknowledgeAlerts:!0,canExportData:!1,canManageUsers:!1,canAccessPredictions:!1,canControlEvacuation:!1}},{email:"security@simhastha.org",password:"security123",role:"police",profile:{name:"Constable Ravi Singh",department:"Security",contact:"+91-9876543214",shift:"Evening Shift (2 PM - 10 PM)",badgeNumber:"SEC001"},assigned_zones:["bhairav-ghat","narsingh-ghat"],permissions:{canViewAllZones:!1,canManageDetection:!1,canAcknowledgeAlerts:!0,canExportData:!1,canManageUsers:!1,canAccessPredictions:!1,canControlEvacuation:!0}}]}async authenticate(t,r){try{const{data:i,error:a}=await Oi.signIn(t,r);if(i?.user){const s=await Oi.getUserProfile(i.user.id);return s?this.mapSupabaseUserToAppUser(s):this.mapSupabaseUserToAppUser(i.user)}else a&&console.log("Supabase auth failed, trying demo users:",a.message)}catch(i){console.log("Supabase auth failed, trying demo users:",i.message||i)}const n=this.demoUsers.find(i=>i.email===t&&i.password===r);if(!n)throw new Error("Invalid credentials");return{id:`demo-${n.role}-${Date.now()}`,email:n.email,role:n.role,assigned_zones:n.assigned_zones,permissions:n.permissions,profile:n.profile}}mapSupabaseUserToAppUser(t){return t.role&&t.profile?{id:t.id,email:t.email,role:t.role,assigned_zones:t.assigned_zones||[],permissions:t.permissions||this.getDefaultPermissions(t.role),profile:t.profile}:{id:t.id,email:t.email,role:"admin",assigned_zones:[],permissions:this.getDefaultPermissions("admin"),profile:{name:t.email.split("@")[0],department:"System",contact:"",shift:"All Day",badgeNumber:"SYS001"}}}getDefaultPermissions(t){switch(t){case"admin":return{canViewAllZones:!0,canManageDetection:!0,canAcknowledgeAlerts:!0,canExportData:!0,canManageUsers:!0,canAccessPredictions:!0,canControlEvacuation:!0};case"police":return{canViewAllZones:!0,canManageDetection:!1,canAcknowledgeAlerts:!0,canExportData:!0,canManageUsers:!1,canAccessPredictions:!0,canControlEvacuation:!0};default:return{canViewAllZones:!1,canManageDetection:!1,canAcknowledgeAlerts:!1,canExportData:!1,canManageUsers:!1,canAccessPredictions:!1,canControlEvacuation:!1}}}getDemoUsers(){return this.demoUsers.map(t=>({email:t.email,role:t.role,profile:t.profile}))}}const wl=new N1,k1=({onLogin:e})=>{const[t,r]=y.useState(""),[n,i]=y.useState(""),[a,s]=y.useState(!1),[o,c]=y.useState(!1),[d,u]=y.useState(""),h=async f=>{f.preventDefault(),c(!0),u("");try{const m=await wl.authenticate(t,n);e(m)}catch(m){u(m.message||"Login failed")}finally{c(!1)}};return l.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-900 via-blue-800 to-indigo-900 flex items-center justify-center p-4",children:l.jsxs("div",{className:"bg-white rounded-xl shadow-2xl p-8 w-full max-w-md",children:[l.jsxs("div",{className:"text-center mb-8",children:[l.jsx("div",{className:"bg-blue-100 w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4",children:l.jsx(Xx,{className:"w-8 h-8 text-blue-600"})}),l.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Divya Drishti (दिव्य  दृष्टि)"}),l.jsx("p",{className:"text-gray-600",children:"Crowd Monitoring System"})]}),l.jsxs("form",{onSubmit:h,className:"space-y-6",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-2",children:"Email Address"}),l.jsx("input",{id:"email",type:"email",value:t,onChange:f=>r(f.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors",placeholder:"Enter your email",required:!0})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-2",children:"Password"}),l.jsxs("div",{className:"relative",children:[l.jsx("input",{id:"password",type:a?"text":"password",value:n,onChange:f=>i(f.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors pr-12",placeholder:"Enter your password",required:!0}),l.jsx("button",{type:"button",onClick:()=>s(!a),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-gray-700",children:a?l.jsx(Pa,{className:"w-5 h-5"}):l.jsx(yi,{className:"w-5 h-5"})})]})]}),d&&l.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3 text-red-700 text-sm",children:d}),l.jsx("button",{type:"submit",disabled:o,className:"w-full bg-blue-600 text-white py-3 rounded-lg font-medium hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:o?"Signing in...":"Sign In"})]}),l.jsxs("div",{className:"mt-8 p-4 bg-gray-50 rounded-lg",children:[l.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Demo Credentials:"}),l.jsx("p",{className:"text-xs text-blue-600 mb-2",children:"Note: Supabase authentication may not work in demo mode. Use these demo accounts:"}),l.jsx("div",{className:"space-y-2 text-xs max-h-48 overflow-y-auto",children:wl.getDemoUsers().map((f,m)=>l.jsxs("button",{type:"button",onClick:()=>{r(f.email),i(f.email.includes("admin")?"admin123":f.email.includes("police")?"police123":f.email.includes("security")?"security123":f.email.includes("medical")?"medical123":"volunteer123")},className:"text-left p-2 bg-white border border-gray-200 rounded hover:bg-gray-50 transition-colors w-full",children:[l.jsx("div",{className:"font-medium text-gray-900",children:f.profile.name}),l.jsx("div",{className:"text-gray-600",children:f.email}),l.jsxs("div",{className:"text-gray-500 capitalize",children:[f.role," - ",f.profile.department]})]},m))}),l.jsxs("div",{className:"mt-3 p-2 bg-blue-50 border border-blue-200 rounded text-xs text-blue-700",children:[l.jsx("strong",{children:"Demo Mode:"})," The system works fully offline with realistic demo data. All features are functional including AI detection, alerts, and predictions."]})]})]})})},Ac=({zone:e,onClick:t})=>{const r=s=>{switch(s){case"safe":return"bg-green-500";case"moderate":return"bg-yellow-500";case"critical":return"bg-red-500";default:return"bg-gray-500"}},n=s=>{switch(s){case"safe":return"Safe";case"moderate":return"Moderate";case"critical":return"Critical";default:return"Unknown"}},i=s=>{switch(s){case"safe":return l.jsx(ul,{className:"w-4 h-4 text-green-600"});case"moderate":return l.jsx(Ni,{className:"w-4 h-4 text-yellow-600"});case"critical":return l.jsx(Be,{className:"w-4 h-4 text-red-600"});default:return l.jsx(nt,{className:"w-4 h-4 text-gray-600"})}},a=e.current_count/e.capacity*100;return l.jsxs("div",{onClick:t,className:"bg-white rounded-xl shadow-lg p-6 hover:shadow-xl transition-shadow cursor-pointer border-l-4 border-blue-500",children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsxs("div",{className:"flex items-center space-x-3",children:[l.jsx("div",{className:"bg-blue-100 p-2 rounded-lg",children:l.jsx(nt,{className:"w-6 h-6 text-blue-600"})}),l.jsxs("div",{children:[l.jsx("h3",{className:"font-semibold text-gray-900",children:e.name}),l.jsxs("p",{className:"text-sm text-gray-500",children:["Updated: ",new Date(e.last_updated).toLocaleTimeString()]})]})]}),l.jsxs("div",{className:"flex items-center space-x-2",children:[i(e.status),l.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium text-white ${r(e.status)}`,children:n(e.status)})]})]}),l.jsxs("div",{className:"space-y-3",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("span",{className:"text-2xl font-bold text-gray-900",children:e.current_count}),l.jsxs("span",{className:"text-sm text-gray-500",children:["/ ",e.capacity]})]}),l.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:l.jsx("div",{className:`h-2 rounded-full ${r(e.status)}`,style:{width:`${Math.min(a,100)}%`}})}),l.jsxs("div",{className:"flex justify-between text-sm",children:[l.jsx("span",{className:"text-gray-500",children:"Occupancy"}),l.jsxs("span",{className:"font-medium text-gray-900",children:[a.toFixed(1),"%"]})]})]}),e.status==="critical"&&l.jsx("div",{className:"mt-4 p-3 bg-red-50 border border-red-200 rounded-lg",children:l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx(Be,{className:"w-4 h-4 text-red-600"}),l.jsx("p",{className:"text-sm text-red-700 font-medium",children:"Capacity exceeded - evacuation recommended"})]})})]})},O1=[23.1765,75.7885];new Date().toISOString(),new Date().toISOString(),new Date().toISOString(),new Date().toISOString(),new Date().toISOString();class Wr{constructor(){this.taskQueue=[],this.isProcessing=!1,this.memoryThreshold=100*1024*1024,this.performanceMetrics={taskCount:0,avgExecutionTime:0,memoryUsage:0,lastCleanup:Date.now(),isBlocked:!1},this.emergencyMode=!1,this.cleanupInProgress=!1,this.lastMemoryCheck=0,this.memoryCheckInterval=6e4,this.maxTasksPerFrame=2}static getInstance(){return Wr.instance||(Wr.instance=new Wr,typeof window<"u"&&(window.performanceOptimizer=Wr.instance)),Wr.instance}queueTask(t){if(!t||typeof t!="function"){console.warn("Invalid task provided to queueTask");return}if(this.performanceMetrics.isBlocked||this.emergencyMode){console.warn("Task rejected - system is blocked or in emergency mode");return}this.taskQueue.length>5&&(this.taskQueue=[],console.warn("Task queue overflow, dropping old tasks")),this.taskQueue.push(t),setTimeout(()=>this.processQueue(),50)}async processQueue(){if(this.isProcessing||this.taskQueue.length===0)return;this.isProcessing=!0,performance.now();const t=Math.min(this.maxTasksPerFrame,this.taskQueue.length);for(let r=0;r<t;r++){const n=this.taskQueue.shift();if(n)try{const i=performance.now();await n();const a=performance.now();this.performanceMetrics.taskCount++,this.performanceMetrics.avgExecutionTime=(this.performanceMetrics.avgExecutionTime+(a-i))/2,await this.yieldToMain(),this.performanceMetrics.taskCount%10===0&&await this.checkMemoryUsage()}catch(i){console.error("Task execution error:",i)}}this.isProcessing=!1}yieldToMain(){return new Promise(t=>{"requestIdleCallback"in window?window.requestIdleCallback(t,{timeout:16}):setTimeout(t,0)})}async checkMemoryUsage(){const t=Date.now();if(!(t-this.lastMemoryCheck<this.memoryCheckInterval)&&(this.lastMemoryCheck=t,!this.cleanupInProgress&&"memory"in performance)){const r=performance.memory;this.performanceMetrics.memoryUsage=r.usedJSHeapSize,r.usedJSHeapSize>this.memoryThreshold&&await this.emergencyCleanup(),r.usedJSHeapSize>this.memoryThreshold*2&&(this.emergencyMode=!0,await this.emergencyCleanup(),setTimeout(()=>{this.emergencyMode=!1},15e3))}}async emergencyCleanup(){if(!this.cleanupInProgress){this.cleanupInProgress=!0;try{this.performanceMetrics.isBlocked=!0,this.taskQueue=[],this.isProcessing=!1,"gc"in window&&window.gc(),await this.cleanupTensorFlow(),this.clearUnusedCaches(),this.performanceMetrics.lastCleanup=Date.now(),console.log("Emergency cleanup completed")}catch(t){console.error("Emergency cleanup failed:",t)}finally{setTimeout(()=>{this.performanceMetrics.isBlocked=!1},2e3),this.cleanupInProgress=!1}}}async cleanupTensorFlow(){try{if(typeof window<"u"&&window.tf){const t=window.tf;t.disposeVariables&&t.disposeVariables(),t.tidy&&t.tidy(()=>{})}}catch(t){console.warn("TensorFlow.js cleanup failed:",t)}}debounce(t,r=1e3){let n;return(...i)=>{clearTimeout(n),n=setTimeout(()=>t(...i),Math.max(r,500))}}throttle(t,r=1e3){let n;return(...i)=>{n||(t(...i),n=!0,setTimeout(()=>{n=!1},Math.max(r,1e3)))}}async processInChunks(t,r,n){const i=Math.min(r,5);for(let a=0;a<t.length;a+=i){const s=t.slice(a,a+i);await n(s),await this.yieldToMain(),this.performanceMetrics.memoryUsage>this.memoryThreshold&&(console.warn("Pausing chunk processing due to high memory usage"),await this.checkMemoryUsage(),await new Promise(o=>setTimeout(o,1e3)))}}cleanupMemory(){"gc"in window&&window.gc(),this.clearUnusedCaches(),this.taskQueue.length>0&&(this.taskQueue=[]),Date.now()-this.performanceMetrics.lastCleanup>10*60*1e3&&(this.performanceMetrics={taskCount:0,avgExecutionTime:0,memoryUsage:0,lastCleanup:Date.now(),isBlocked:!1})}clearUnusedCaches(){try{const t=Object.keys(localStorage);let r=0;t.forEach(n=>{if(n.startsWith("temp_")||n.startsWith("cache_")||n.startsWith("model_")){const i=localStorage.getItem(n);if(i)try{const a=JSON.parse(i);a.timestamp&&Date.now()-a.timestamp>24*60*60*1e3&&(localStorage.removeItem(n),r++)}catch{localStorage.removeItem(n),r++}}}),r>0&&console.log(`Cleaned up ${r} cached items`)}catch(t){console.error("Cache cleanup error:",t)}}getMetrics(){return{...this.performanceMetrics,queueLength:this.taskQueue.length,isProcessing:this.isProcessing}}isSystemStressed(){try{return this.emergencyMode||this.performanceMetrics.isBlocked||this.taskQueue.length>3||this.performanceMetrics.avgExecutionTime>200||this.performanceMetrics.memoryUsage>this.memoryThreshold}catch{return!1}}emergencyStop(){try{console.warn("Emergency stop triggered"),this.emergencyMode=!0,this.taskQueue=[],this.isProcessing=!1,typeof window<"u"&&window.dispatchEvent(new CustomEvent("emergency-stop")),this.emergencyCleanup()}catch(t){console.error("Emergency stop failed:",t)}}isEmergencyMode(){try{return this.emergencyMode}catch{return!1}}}const Se=Wr.getInstance();window.addEventListener("unhandledrejection",e=>{console.error("Unhandled promise rejection:",e.reason),(e.reason?.message?.includes("memory")||e.reason?.message?.includes("heap"))&&(console.warn("Memory error detected, cleaning up..."),Se.cleanupMemory())});window.addEventListener("error",e=>{console.error("Uncaught error:",e.error),(e.error?.message?.includes("memory")||e.error?.message?.includes("heap"))&&(console.warn("Memory error detected, cleaning up..."),Se.cleanupMemory())});document.addEventListener("visibilitychange",()=>{document.hidden?(Se.cleanupMemory(),window.dispatchEvent(new CustomEvent("page-hidden"))):window.dispatchEvent(new CustomEvent("page-visible"))});window.addEventListener("beforeunload",()=>{Se.emergencyStop()});const Ec=({zones:e,showHeatmap:t,showEvacuationRoutes:r,showFlowIndicators:n=!1,selectedZone:i,onZoneClick:a})=>{const s=y.useRef(null);y.useState(O1);const[o,c]=y.useState(15),[d,u]=y.useState(!1),[h,f]=y.useState(!0),[m,g]=y.useState({width:800,height:600}),[p,v]=y.useState(!1);y.useEffect(()=>{const k=()=>{const I=s.current?.parentElement;if(!I)return;const L=I.getBoundingClientRect(),K=window.innerWidth<768;v(K);let F,G;d?(F=window.innerWidth,G=window.innerHeight):K?(F=Math.min(L.width-20,window.innerWidth-40),G=Math.min(400,window.innerHeight*.5)):(F=Math.min(L.width-20,1200),G=Math.min(600,window.innerHeight*.7)),g({width:F,height:G})};return k(),window.addEventListener("resize",k),window.addEventListener("orientationchange",k),()=>{window.removeEventListener("resize",k),window.removeEventListener("orientationchange",k)}},[d]),y.useEffect(()=>{x()},[e,t,r,n,i,o,m,p]);const x=()=>{const k=s.current;if(!k)return;const I=k.getContext("2d");if(I)try{j(I,m.width,m.height)}catch(L){console.error("Map drawing error:",L)}},j=(k,I,L)=>{k.clearRect(0,0,I,L),k.fillStyle="#f0f9ff",k.fillRect(0,0,I,L),b(k,I,L),t&&S(k,I,L),r&&_(k,I,L),n&&N(k,I,L),E(k,I)},b=(k,I,L)=>{try{k.strokeStyle="#e5e7eb",k.lineWidth=1;const K=Math.max(p?30:50,I/(p?15:20));for(let F=0;F<I;F+=K)k.beginPath(),k.moveTo(F,0),k.lineTo(F,L),k.stroke();for(let F=0;F<L;F+=K)k.beginPath(),k.moveTo(0,F),k.lineTo(I,F),k.stroke()}catch(K){console.error("Grid drawing error:",K)}},S=(k,I,L)=>{try{const K=e.slice(0,p?6:10);K.forEach((F,G)=>{const X=p?2:3,z=p?20:50,J=G%X*(I/X)+z,re=Math.floor(G/X)*(L/Math.ceil(K.length/X))+z,ie=I/X-z*2,se=L/Math.ceil(K.length/X)-z*2,M=w(F.status),B=i===F.id;k.fillStyle=M+"40",k.fillRect(J,re,ie,se),k.strokeStyle=M,k.lineWidth=B?4:2,k.setLineDash(B?[10,5]:[]),k.strokeRect(J,re,ie,se),k.setLineDash([]),k.fillStyle="#1f2937",k.font=`bold ${p?"12px":"14px"} Arial`,k.textAlign="center",k.fillText(F.name,J+ie/2,re+(p?15:20)),k.font=`bold ${p?"18px":"24px"} Arial`,k.fillText(F.current_count.toString(),J+ie/2,re+se/2),k.font=`${p?"10px":"12px"} Arial`,k.fillStyle="#6b7280",k.fillText(`/ ${F.capacity}`,J+ie/2,re+se/2+(p?15:20)),k.fillStyle=M,k.beginPath(),k.arc(J+ie-(p?15:20),re+(p?15:20),p?6:8,0,2*Math.PI),k.fill();const T=F.current_count/F.capacity*100;k.fillStyle="#374151",k.font=`${p?"8px":"10px"} Arial`,k.fillText(`${T.toFixed(1)}%`,J+ie/2,re+se-(p?8:10))})}catch(K){console.error("Zone drawing error:",K)}},_=(k,I,L)=>{try{k.strokeStyle="#10b981",k.lineWidth=3,k.setLineDash([10,5]);const K=e.filter(G=>G.status==="critical"),F=e.filter(G=>G.status==="safe");K.forEach((G,X)=>{F.forEach((z,J)=>{const re=X%3*(I/3)+I/6,ie=Math.floor(X/3)*(L/3)+L/6,se=J%3*(I/3)+I/6,M=Math.floor(J/3)*(L/3)+L/6;k.beginPath(),k.moveTo(re,ie),k.lineTo(se,M),k.stroke(),P(k,re,ie,se,M)})}),k.setLineDash([])}catch(K){console.error("Evacuation routes drawing error:",K)}},N=(k,I,L)=>{try{e.filter(F=>F.status==="critical").forEach((F,G)=>{const X=G%3*(I/3)+I/6,z=Math.floor(G/3)*(L/3)+L/6;if(F.status==="critical")for(let J=0;J<6;J++){const re=J*60*(Math.PI/180),ie=X+Math.cos(re)*20,se=z+Math.sin(re)*20,M=X+Math.cos(re)*60,B=z+Math.sin(re)*60;k.strokeStyle="#ef4444",k.lineWidth=3,k.beginPath(),k.moveTo(ie,se),k.lineTo(M,B),k.stroke(),P(k,ie,se,M,B)}})}catch(K){console.error("Flow indicators drawing error:",K)}},P=(k,I,L,K,F)=>{try{const G=Math.atan2(F-L,K-I),X=10,z=Math.PI/6;k.beginPath(),k.moveTo(K,F),k.lineTo(K-X*Math.cos(G-z),F-X*Math.sin(G-z)),k.moveTo(K,F),k.lineTo(K-X*Math.cos(G+z),F-X*Math.sin(G+z)),k.stroke()}catch(G){console.error("Arrow drawing error:",G)}},E=(k,I,L)=>{if(!(!h||p&&I<400))try{const K=p?140:180,F=p?100:120,G=I-K-(p?10:20),X=p?10:20;k.fillStyle="rgba(255, 255, 255, 0.9)",k.fillRect(G,X,K,F),k.strokeStyle="#d1d5db",k.lineWidth=1,k.strokeRect(G,X,K,F),k.fillStyle="#1f2937",k.font=`bold ${p?"12px":"14px"} Arial`,k.textAlign="left",k.fillText("Zone Status",G+(p?8:10),X+(p?16:20)),[{color:"#10b981",label:"Safe (0-60%)"},{color:"#f59e0b",label:"Moderate (60-90%)"},{color:"#ef4444",label:"Critical (>90%)"}].forEach((J,re)=>{const ie=X+(p?32:40)+re*(p?20:25);k.fillStyle=J.color;const se=p?12:15;k.fillRect(G+(p?8:10),ie-se/2,se,se),k.fillStyle="#374151",k.font=`${p?"10px":"12px"} Arial`,k.fillText(J.label,G+(p?25:35),ie+3)})}catch(K){console.error("Legend drawing error:",K)}},w=k=>{switch(k){case"safe":return"#10b981";case"moderate":return"#f59e0b";case"critical":return"#ef4444";default:return"#6b7280"}},A=k=>{try{const I=s.current;if(!I)return;const L=I.getBoundingClientRect(),K=I.width/L.width,F=I.height/L.height,G=(k.clientX-L.left)*K,X=(k.clientY-L.top)*F,z=p?2:3,J=Math.floor(G/(I.width/z))+Math.floor(X/(I.height/Math.ceil(e.length/z)))*z;J<e.length&&a?.(e[J])}catch(I){console.error("Canvas click error:",I)}},O=()=>{c(k=>Math.min(k+1,20))},D=()=>{c(k=>Math.max(k-1,10))},R=()=>{u(!d)},C=()=>{c(15),f(!0)};return l.jsxs("div",{className:`relative w-full bg-gray-100 rounded-lg overflow-hidden ${d?"fixed inset-0 z-50 bg-gray-900":"h-full"}`,children:[l.jsx("canvas",{ref:s,width:m.width,height:m.height,className:`w-full cursor-pointer ${d?"h-screen":p?"h-80":"h-full"}`,onClick:A,style:{maxWidth:"100%",height:"auto",touchAction:"manipulation"}}),l.jsxs("div",{className:`absolute bg-white rounded-lg shadow-md p-2 space-y-1 ${p?"top-2 left-2":"top-4 left-4"}`,children:[l.jsx("button",{onClick:O,className:`block bg-blue-600 text-white rounded hover:bg-blue-700 transition-colors text-sm font-bold ${p?"w-6 h-6 text-xs":"w-8 h-8"}`,children:"+"}),l.jsx("button",{onClick:D,className:`block bg-blue-600 text-white rounded hover:bg-blue-700 transition-colors text-sm font-bold ${p?"w-6 h-6 text-xs":"w-8 h-8"}`,children:"−"}),l.jsx("button",{onClick:C,className:`block bg-gray-600 text-white rounded hover:bg-gray-700 transition-colors ${p?"w-6 h-6 p-1":"w-8 h-8 p-1"}`,title:"Reset view",children:l.jsx(Km,{className:p?"w-3 h-3":"w-4 h-4"})}),!p&&l.jsx("button",{onClick:()=>f(!h),className:"block w-8 h-8 bg-purple-600 text-white rounded hover:bg-purple-700 transition-colors p-1",title:"Toggle legend",children:l.jsx(Yx,{className:"w-4 h-4"})}),l.jsx("button",{onClick:R,className:`block bg-green-600 text-white rounded hover:bg-green-700 transition-colors ${p?"w-6 h-6 p-1":"w-8 h-8 p-1"}`,title:d?"Exit fullscreen":"Enter fullscreen",children:d?l.jsx(cl,{className:p?"w-3 h-3":"w-4 h-4"}):l.jsx(Wm,{className:p?"w-3 h-3":"w-4 h-4"})})]}),l.jsx("div",{className:`absolute bg-white rounded-lg shadow-md ${p?"bottom-2 left-2 p-2":"bottom-4 left-4 p-3"}`,children:l.jsxs("div",{className:p?"text-xs text-gray-600":"text-sm text-gray-600",children:[l.jsx("div",{children:"Ujjain Divya Drishti (दिव्य  दृष्टि)"}),!p&&l.jsxs("div",{children:["Zoom: ",o]}),l.jsxs("div",{children:["Zones: ",e.length]}),Se&&Se.isSystemStressed()&&l.jsx("div",{className:"text-red-600 text-xs",children:"High Load"})]})}),i&&l.jsx("div",{className:`absolute bg-white rounded-lg shadow-md ${p?"top-2 right-2 p-3 max-w-48 text-sm":"top-4 right-4 p-4 max-w-xs"}`,children:(()=>{const k=e.find(I=>I.id===i);return k?l.jsxs("div",{children:[l.jsx("h3",{className:`font-semibold text-gray-900 mb-2 ${p?"text-sm":""}`,children:k.name}),l.jsxs("div",{className:`space-y-1 ${p?"text-xs":"text-sm"}`,children:[l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{children:"Count:"}),l.jsx("span",{className:"font-medium",children:k.current_count})]}),l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{children:"Capacity:"}),l.jsx("span",{className:"font-medium",children:k.capacity})]}),l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{children:"Status:"}),l.jsx("span",{className:`font-medium capitalize ${k.status==="safe"?"text-green-600":k.status==="moderate"?"text-yellow-600":"text-red-600"}`,children:k.status})]})]})]}):null})()}),p&&!i&&l.jsxs("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 bg-black bg-opacity-50 text-white p-3 rounded-lg text-center text-xs pointer-events-none",children:[l.jsx(Gx,{className:"w-4 h-4 mx-auto mb-1"}),l.jsx("div",{children:"Tap zones to view details"}),l.jsx("div",{children:"Pinch to zoom"})]}),d&&l.jsx("button",{onClick:R,className:"absolute top-4 right-4 bg-red-600 text-white p-3 rounded-full hover:bg-red-700 transition-colors z-10",children:l.jsx(cl,{className:"w-6 h-6"})})]})},A1=({imageElement:e,roi:t,onROIChange:r,width:n=640,height:i=480,className:a="",showAdvanced:s=!1,onCapture:o})=>{const c=y.useRef(null),d=y.useRef(null),[u,h]=y.useState(!1),[f,m]=y.useState(null),[g,p]=y.useState("create"),[v,x]=y.useState(null),[j,b]=y.useState(!0),[S,_]=y.useState(!1),N=[{name:"Full Frame",roi:[0,0,1,1],description:"Complete coverage"},{name:"Center Focus",roi:[.25,.25,.75,.75],description:"Central area"},{name:"Wide Center",roi:[.1,.3,.9,.7],description:"Horizontal strip"},{name:"Entrance Zone",roi:[.1,.6,.9,1],description:"Entry monitoring"},{name:"Queue Area",roi:[.3,.1,.7,.9],description:"Vertical queue"},{name:"Dense Crowd",roi:[.35,.35,.65,.65],description:"High-density focus"}],P=y.useCallback(()=>{const M=c.current,B=d.current;if(!M||!B)return;const T=M.getContext("2d"),W=B.getContext("2d");!T||!W||(M.width=n,M.height=i,B.width=n,B.height=i,T.clearRect(0,0,n,i),W.clearRect(0,0,n,i),E(T),j&&A(W),O(W))},[e,t,n,i,j]),E=M=>{if(e)try{e instanceof HTMLVideoElement&&e.readyState>=2||e instanceof HTMLImageElement&&e.complete||e instanceof HTMLCanvasElement?M.drawImage(e,0,0,n,i):w(M)}catch{w(M)}else w(M)},w=M=>{const B=M.createLinearGradient(0,0,n,i);B.addColorStop(0,"#f0f9ff"),B.addColorStop(1,"#bae6fd"),M.fillStyle=B,M.fillRect(0,0,n,i),M.fillStyle="#1e40af",M.font="bold 20px Arial",M.textAlign="center",M.fillText("🎯 ROI Selection",n/2,i/2-10),M.font="14px Arial",M.fillStyle="#3730a3",M.fillText("Select detection area",n/2,i/2+15)},A=M=>{M.strokeStyle="rgba(59, 130, 246, 0.3)",M.lineWidth=1;const B=40;M.beginPath();for(let T=0;T<=n;T+=B)M.moveTo(T,0),M.lineTo(T,i);for(let T=0;T<=i;T+=B)M.moveTo(0,T),M.lineTo(n,T);M.stroke()},O=M=>{const[B,T,W,V]=t,U=B*n,le=T*i,Q=(W-B)*n,oe=(V-T)*i;M.fillStyle="rgba(59, 130, 246, 0.15)",M.fillRect(U,le,Q,oe),M.strokeStyle="#3b82f6",M.lineWidth=3,M.setLineDash([15,8]),M.lineDashOffset=-(Date.now()/30)%23,M.strokeRect(U,le,Q,oe),M.setLineDash([]),D(M,U,le,Q,oe),S||R(M,U,le,Q,oe),C(M,U,le,Q,oe)},D=(M,B,T,W,V)=>{M.strokeStyle="#1d4ed8",M.lineWidth=3,M.lineCap="round",M.beginPath(),M.moveTo(B,T+20),M.lineTo(B,T),M.lineTo(B+20,T),M.moveTo(B+W-20,T),M.lineTo(B+W,T),M.lineTo(B+W,T+20),M.moveTo(B,T+V-20),M.lineTo(B,T+V),M.lineTo(B+20,T+V),M.moveTo(B+W-20,T+V),M.lineTo(B+W,T+V),M.lineTo(B+W,T+V-20),M.stroke()},R=(M,B,T,W,V)=>{M.fillStyle="#3b82f6",M.strokeStyle="#ffffff",M.lineWidth=2,[[B-12/2,T-12/2],[B+W-12/2,T-12/2],[B-12/2,T+V-12/2],[B+W-12/2,T+V-12/2]].forEach(([Q,oe])=>{M.beginPath(),M.arc(Q+12/2,oe+12/2,12/2,0,2*Math.PI),M.fill(),M.stroke()})},C=(M,B,T,W,V)=>{let Q=B,oe=T-40-5;oe<0&&(oe=T+V+5),Q+200>n&&(Q=n-200),M.fillStyle="rgba(0, 0, 0, 0.8)",M.fillRect(Q,oe,200,40),M.strokeStyle="#3b82f6",M.lineWidth=2,M.strokeRect(Q,oe,200,40),M.fillStyle="#ffffff",M.font="bold 12px Arial",M.textAlign="left";const ve=((t[2]-t[0])*(t[3]-t[1])*100).toFixed(1);M.fillText(`🎯 Coverage: ${ve}%`,Q+10,oe+18),M.font="10px Arial",M.fillStyle="#e5e7eb";const xe=`${Math.round(W)}×${Math.round(V)}px`;M.fillText(`Size: ${xe}`,Q+10,oe+32)};y.useEffect(()=>{P()},[P]);const k=M=>{const B=d.current;if(!B)return{x:0,y:0};const T=B.getBoundingClientRect(),W=B.width/T.width,V=B.height/T.height;return{x:(M.clientX-T.left)*W,y:(M.clientY-T.top)*V}},I=(M,B)=>({x:Math.max(0,Math.min(1,M/n)),y:Math.max(0,Math.min(1,B/i))}),L=(M,B)=>{if(S)return null;const[T,W,V,U]=t,le=T*n,Q=W*i,oe=V*n,ve=U*i,xe=15;return Math.abs(M-le)<xe&&Math.abs(B-Q)<xe?"tl":Math.abs(M-oe)<xe&&Math.abs(B-Q)<xe?"tr":Math.abs(M-le)<xe&&Math.abs(B-ve)<xe?"bl":Math.abs(M-oe)<xe&&Math.abs(B-ve)<xe?"br":null},K=(M,B)=>{const[T,W,V,U]=t,le=T*n,Q=W*i,oe=V*n,ve=U*i;return M>=le&&M<=oe&&B>=Q&&B<=ve},F=M=>{if(S)return;const{x:B,y:T}=k(M),W=L(B,T);W?(p("resize"),x(W)):K(B,T)?p("move"):p("create"),h(!0),m({x:B,y:T})},G=M=>{const{x:B,y:T}=k(M);if(!u||!f){X(B,T);return}const W=I(B,T),V=I(f.x,f.y);let U=[...t];g==="create"?U=z(V,W):g==="move"?(U=J(W,V),m({x:B,y:T})):g==="resize"&&v&&(U=re(W)),r(U)},X=(M,B)=>{const T=d.current;if(!T)return;if(S){T.style.cursor="not-allowed";return}const W=L(M,B);if(W){const V={tl:"nw-resize",tr:"ne-resize",bl:"sw-resize",br:"se-resize"};T.style.cursor=V[W]||"default"}else K(M,B)?T.style.cursor="move":T.style.cursor="crosshair"},z=(M,B)=>{const T=Math.min(M.x,B.x),W=Math.min(M.y,B.y),V=Math.max(M.x,B.x),U=Math.max(M.y,B.y);return[Math.max(0,T),Math.max(0,W),Math.min(1,V),Math.min(1,U)]},J=(M,B)=>{const T=M.x-B.x,W=M.y-B.y,V=t[2]-t[0],U=t[3]-t[1];let le=t[0]+T,Q=t[1]+W;return le<0&&(le=0),Q<0&&(Q=0),le+V>1&&(le=1-V),Q+U>1&&(Q=1-U),[le,Q,le+V,Q+U]},re=M=>{const B=[...t],T=.05;switch(v){case"tl":B[0]=Math.max(0,Math.min(M.x,t[2]-T)),B[1]=Math.max(0,Math.min(M.y,t[3]-T));break;case"tr":B[2]=Math.min(1,Math.max(M.x,t[0]+T)),B[1]=Math.max(0,Math.min(M.y,t[3]-T));break;case"bl":B[0]=Math.max(0,Math.min(M.x,t[2]-T)),B[3]=Math.min(1,Math.max(M.y,t[1]+T));break;case"br":B[2]=Math.min(1,Math.max(M.x,t[0]+T)),B[3]=Math.min(1,Math.max(M.y,t[1]+T));break}return B},ie=()=>{h(!1),m(null),p("create"),x(null)},se=()=>{const M=`[${t.map(B=>B.toFixed(4)).join(", ")}]`;navigator.clipboard.writeText(M).then(()=>{alert("ROI coordinates copied!")})};return l.jsxs("div",{className:`bg-white rounded-lg border border-gray-200 p-6 ${a}`,children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsxs("div",{className:"flex items-center space-x-3",children:[l.jsx("div",{className:"bg-blue-100 p-2 rounded-lg",children:l.jsx(qm,{className:"w-5 h-5 text-blue-600"})}),l.jsxs("div",{children:[l.jsx("h3",{className:"font-semibold text-gray-900",children:"ROI Selection"}),l.jsxs("p",{className:"text-sm text-gray-600",children:["Coverage: ",((t[2]-t[0])*(t[3]-t[1])*100).toFixed(1),"%"]})]})]}),l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx("button",{onClick:se,className:"p-2 bg-blue-100 text-blue-600 rounded-lg hover:bg-blue-200 transition-colors",title:"Copy coordinates",children:l.jsx(zx,{className:"w-4 h-4"})}),l.jsx("button",{onClick:()=>_(!S),className:`p-2 rounded-lg transition-colors ${S?"bg-red-100 text-red-600":"bg-gray-100 text-gray-600"}`,title:S?"Unlock":"Lock",children:S?l.jsx(Zx,{className:"w-4 h-4"}):l.jsx(ab,{className:"w-4 h-4"})})]})]}),l.jsxs("div",{className:"relative mb-4 border-2 border-gray-300 rounded-lg overflow-hidden bg-gray-100",children:[l.jsx("canvas",{ref:c,width:n,height:i,className:"absolute inset-0 w-full h-full object-contain"}),l.jsx("canvas",{ref:d,width:n,height:i,className:"absolute inset-0 w-full h-full object-contain cursor-crosshair",onMouseDown:F,onMouseMove:G,onMouseUp:ie,onMouseLeave:ie}),l.jsxs("div",{className:"absolute top-3 left-3 flex flex-col space-y-2",children:[l.jsx("button",{onClick:()=>b(!j),className:`p-2 rounded-lg transition-colors shadow-lg ${j?"bg-blue-100 text-blue-600":"bg-white bg-opacity-95 text-gray-600"}`,title:"Toggle grid",children:l.jsx(Hx,{className:"w-4 h-4"})}),l.jsx("button",{onClick:()=>{r([.1,.1,.9,.9]),_(!1)},className:"p-2 bg-white bg-opacity-95 text-gray-600 rounded-lg hover:bg-opacity-100 transition-all shadow-lg",title:"Reset ROI",children:l.jsx(Km,{className:"w-4 h-4"})})]}),l.jsxs("div",{className:"absolute bottom-3 right-3 bg-black bg-opacity-80 text-white px-3 py-2 rounded-lg text-sm",children:[((t[2]-t[0])*(t[3]-t[1])*100).toFixed(1),"% coverage"]})]}),l.jsxs("div",{className:"mb-4",children:[l.jsx("div",{className:"text-sm font-medium text-gray-700 mb-3",children:"Quick Presets:"}),l.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2",children:N.map((M,B)=>l.jsxs("button",{onClick:()=>r(M.roi),className:"text-left p-3 rounded-lg transition-all hover:scale-105 border border-gray-200 bg-gray-50 hover:bg-gray-100",title:M.description,children:[l.jsx("div",{className:"text-xs font-medium text-gray-900",children:M.name}),l.jsxs("div",{className:"text-xs text-gray-500",children:[((M.roi[2]-M.roi[0])*(M.roi[3]-M.roi[1])*100).toFixed(0),"%"]})]},B))})]}),l.jsx("div",{className:"grid grid-cols-4 gap-4 mb-4",children:["X1","Y1","X2","Y2"].map((M,B)=>l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:M}),l.jsx("input",{type:"number",min:"0",max:"1",step:"0.001",value:t[B].toFixed(3),onChange:T=>{if(S)return;const W=Math.max(0,Math.min(1,parseFloat(T.target.value)||0)),V=[...t];V[B]=W,r(V)},disabled:S,className:"w-full px-2 py-1 text-sm border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-blue-500 disabled:bg-gray-100"})]},M))}),l.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[l.jsx("h4",{className:"font-medium text-gray-900 mb-3",children:"ROI Analytics"}),l.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm text-gray-600",children:[l.jsxs("div",{className:"space-y-1",children:[l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{children:"Coverage:"}),l.jsxs("span",{className:"font-medium",children:[((t[2]-t[0])*(t[3]-t[1])*100).toFixed(1),"%"]})]}),l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{children:"Dimensions:"}),l.jsxs("span",{className:"font-medium",children:[Math.round((t[2]-t[0])*n),"×",Math.round((t[3]-t[1])*i),"px"]})]})]}),l.jsxs("div",{className:"space-y-1",children:[l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{children:"Center:"}),l.jsxs("span",{className:"font-medium",children:["(",((t[0]+t[2])/2).toFixed(2),", ",((t[1]+t[3])/2).toFixed(2),")"]})]}),l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{children:"Quality:"}),l.jsx("span",{className:`font-medium ${(t[2]-t[0])*(t[3]-t[1])>.25?"text-green-600":(t[2]-t[0])*(t[3]-t[1])>.1?"text-yellow-600":"text-red-600"}`,children:(t[2]-t[0])*(t[3]-t[1])>.25?"Excellent":(t[2]-t[0])*(t[3]-t[1])>.1?"Good":"Fair"})]})]})]}),l.jsx("div",{className:"mt-3 p-3 bg-blue-50 rounded border border-blue-200",children:l.jsx("div",{className:"text-xs text-blue-700",children:"💡 Larger ROIs (>25%) provide better detection accuracy for people tracking"})})]})]})},E1=({videoElement:e,detectionResults:t,roi:r,showOverlay:n,showROI:i,isDetecting:a,detectionCount:s,fps:o,lastDetectionTime:c,detectionInterval:d,trackingHistory:u=new Map})=>{const h=y.useRef(null),f=y.useRef(null),[m,g]=y.useState({width:0,height:0}),[p]=y.useState(new Map),[v,x]=y.useState(null),j=w=>{if(!p.has(w)){const O=`hsl(${w*137.508%360}, 85%, 60%)`;p.set(w,O)}return p.get(w)};y.useEffect(()=>{const w=()=>{if(!e||!h.current)return;const O=e,D=h.current,R=()=>{try{const k=O.getBoundingClientRect(),I=O.parentElement?.getBoundingClientRect();if(!I||k.width===0||k.height===0){console.warn("Invalid video or container dimensions");return}const L=Math.floor(k.width),K=Math.floor(k.height);D.width=L,D.height=K,D.style.width=`${L}px`,D.style.height=`${K}px`;const F=Math.floor(k.left-I.left),G=Math.floor(k.top-I.top);D.style.position="absolute",D.style.left=`${F}px`,D.style.top=`${G}px`,D.style.pointerEvents="none",D.style.zIndex="30",D.style.backgroundColor="transparent",g({width:L,height:K}),x(k),console.log("🎯 Overlay synchronized with video:",{videoSize:`${L}x${K}`,position:`${F},${G}`,videoRect:{width:k.width,height:k.height,left:k.left,top:k.top}})}catch(k){console.error("Error updating overlay:",k)}};R();const C=()=>{setTimeout(R,100)};return O.addEventListener("loadedmetadata",C),O.addEventListener("resize",C),O.addEventListener("canplay",C),()=>{O.removeEventListener("loadedmetadata",C),O.removeEventListener("resize",C),O.removeEventListener("canplay",C)}},A=new ResizeObserver(O=>{e&&h.current&&setTimeout(()=>{try{const D=e.getBoundingClientRect(),R=h.current;if(D.width>0&&D.height>0){const C=Math.floor(D.width),k=Math.floor(D.height);R.width=C,R.height=k,R.style.width=`${C}px`,R.style.height=`${k}px`,g({width:C,height:k}),x(D),console.log("🔄 Overlay resized:",`${C}x${k}`)}}catch(D){console.error("Error in resize observer:",D)}},50)});if(e){const O=w();return A.observe(e),e.parentElement&&A.observe(e.parentElement),()=>{O?.(),A.disconnect()}}},[e]),y.useEffect(()=>{const w=()=>{(n||i)&&m.width>0&&m.height>0&&b(),(a||i||u.size>0)&&(f.current=requestAnimationFrame(w))};return(a||i||u.size>0)&&(f.current=requestAnimationFrame(w)),()=>{f.current&&(cancelAnimationFrame(f.current),f.current=null)}},[a,n,i,t,r,u,m]);const b=()=>{const w=h.current;if(!w||!e||m.width===0||m.height===0)return;const A=w.getContext("2d");if(A)try{A.clearRect(0,0,w.width,w.height),i&&S(A),n&&t?.boxes&&_(A),n&&u.size>0&&N(A),n&&t&&P(A),a&&E(A)}catch(O){console.error("Error drawing overlay:",O)}},S=w=>{try{const[A,O,D,R]=r,C=A*m.width,k=O*m.height,I=(D-A)*m.width,L=(R-O)*m.height,K=w.createLinearGradient(C,k,C+I,k+L);K.addColorStop(0,"#3b82f6"),K.addColorStop(.5,"#8b5cf6"),K.addColorStop(1,"#06b6d4"),w.strokeStyle=K,w.lineWidth=2,w.setLineDash([20,10]),w.lineDashOffset=-(Date.now()/40)%30,w.strokeRect(C,k,I,L),w.setLineDash([]);const F=15;w.strokeStyle="#3b82f6",w.lineWidth=3,w.lineCap="round",w.beginPath(),w.moveTo(C,k+F),w.lineTo(C,k),w.lineTo(C+F,k),w.stroke(),w.beginPath(),w.moveTo(C+I-F,k),w.lineTo(C+I,k),w.lineTo(C+I,k+F),w.stroke(),w.beginPath(),w.moveTo(C,k+L-F),w.lineTo(C,k+L),w.lineTo(C+F,k+L),w.stroke(),w.beginPath(),w.moveTo(C+I-F,k+L),w.lineTo(C+I,k+L),w.lineTo(C+I,k+L-F),w.stroke();const G=80,X=20,z=C+I-G-5,J=k+5;w.fillStyle="rgba(59, 130, 246, 0.9)",w.fillRect(z,J,G,X),w.fillStyle="#ffffff",w.font="bold 10px Arial",w.textAlign="center";const re=((D-A)*(R-O)*100).toFixed(0);w.fillText(`ROI ${re}%`,z+G/2,J+13)}catch(A){console.error("Error drawing ROI:",A)}},_=w=>{if(!(!t.boxes||t.boxes.length===0))try{const O=Date.now()/800%(Math.PI*2);let D;Array.isArray(t.boxes)?D=t.boxes.flat():D=Array.from(t.boxes);const R=D.length/4;console.log(`🎨 Drawing ${R} detection boxes on overlay`);for(let C=0;C<R;C++){const k=D[C*4],I=D[C*4+1],L=D[C*4+2],K=D[C*4+3],F=Math.round(k*m.width),G=Math.round(I*m.height),X=Math.round((L-k)*m.width),z=Math.round((K-I)*m.height);if(X<5||z<5){console.warn(`Box ${C} too small, skipping:`,{boxWidth:X,boxHeight:z});continue}const J=Math.max(0,Math.min(F,m.width-5)),re=Math.max(0,Math.min(G,m.height-5)),ie=Math.min(X,m.width-J),se=Math.min(z,m.height-re);if(ie<5||se<5){console.warn(`Box ${C} out of bounds, skipping`);continue}const M=t.scores?.[C]||.5,B=t.personIds?.[C]||C,T=j(B);w.save();const W=1+Math.sin(O*3+B)*.15,V=Math.max(2,Math.min(4,M*6));w.shadowColor=T,w.shadowBlur=12*W,w.strokeStyle=T,w.lineWidth=V,w.strokeRect(J,re,ie,se),w.shadowBlur=0,w.strokeStyle="#ffffff",w.lineWidth=1,w.strokeRect(J+1,re+1,ie-2,se-2);const U=`P${B}`,le=`${(M*100).toFixed(0)}%`,Q=45,oe=32;let ve=J,xe=re-oe-2;xe<0&&(xe=re+se+2),ve+Q>m.width&&(ve=m.width-Q);const pr=w.createLinearGradient(ve,xe,ve+Q,xe+oe);pr.addColorStop(0,"rgba(0, 0, 0, 0.9)"),pr.addColorStop(1,"rgba(0, 0, 0, 0.7)"),w.fillStyle=pr,w.fillRect(ve,xe,Q,oe),w.strokeStyle=T,w.lineWidth=1,w.strokeRect(ve,xe,Q,oe),w.fillStyle="#ffffff",w.font="bold 10px Arial",w.textAlign="center",w.fillText(U,ve+Q/2,xe+12),w.fillStyle=T,w.font="8px Arial",w.fillText(le,ve+Q/2,xe+24);const Yt=J+ie/2,xt=re+se/2;if(w.strokeStyle=T,w.lineWidth=3,w.beginPath(),w.arc(Yt,xt,8,0,2*Math.PI),w.stroke(),w.fillStyle=T,w.beginPath(),w.arc(Yt,xt,5,0,2*Math.PI),w.fill(),w.fillStyle="#ffffff",w.beginPath(),w.arc(Yt,xt,2,0,2*Math.PI),w.fill(),t.trackingData&&t.trackingData[C]){const H=t.trackingData[C];if(H.velocityX!==void 0&&H.velocityY!==void 0){const q=Math.sqrt(H.velocityX*H.velocityX+H.velocityY*H.velocityY);if(q>.01){const ne=Math.atan2(H.velocityY,H.velocityX),ye=Math.min(50,Math.max(15,q*200)),he=Yt+Math.cos(ne)*ye,de=xt+Math.sin(ne)*ye;w.strokeStyle=T,w.lineWidth=3,w.beginPath(),w.moveTo(Yt,xt),w.lineTo(he,de),w.stroke();const $e=10,Me=Math.PI/6;w.beginPath(),w.moveTo(he,de),w.lineTo(he-$e*Math.cos(ne-Me),de-$e*Math.sin(ne-Me)),w.moveTo(he,de),w.lineTo(he-$e*Math.cos(ne+Me),de-$e*Math.sin(ne+Me)),w.stroke()}}}const ia=12,ko=M*2*Math.PI;w.strokeStyle=T,w.lineWidth=2,w.beginPath(),w.arc(Yt,xt,ia,-Math.PI/2,-Math.PI/2+ko),w.stroke(),w.restore(),C<3&&console.log(`Box ${C} drawn:`,{normalized:[k.toFixed(3),I.toFixed(3),L.toFixed(3),K.toFixed(3)],canvas:[J,re,ie,se],center:[Yt,xt],confidence:M.toFixed(3)})}}catch(A){console.error("Error drawing person tracking boxes:",A)}},N=w=>{if(u.size!==0)try{w.save();for(const[A,O]of u.entries()){if(O.length<2)continue;const D=j(A);w.strokeStyle=D,w.lineWidth=2,w.globalAlpha=.6,w.beginPath();for(let R=0;R<O.length;R++){const C=O[R],k=C.x*m.width,I=C.y*m.height;R===0?w.moveTo(k,I):w.lineTo(k,I);const L=(Date.now()-C.timestamp)/5e3,K=Math.max(.1,1-L),F=Math.max(1,3*K);w.save(),w.globalAlpha=K*.8,w.fillStyle=D,w.beginPath(),w.arc(k,I,F,0,2*Math.PI),w.fill(),w.restore()}w.stroke()}w.restore()}catch(A){console.error("Error drawing person trails:",A)}},P=w=>{if(t)try{const A=t.count||0,O=t.confidence||0,D=u.size,R=220,C=80,k=m.width-R-10,I=10;if(k<0||I<0)return;const L=w.createLinearGradient(k,I,k,I+C);L.addColorStop(0,"rgba(0, 0, 0, 0.9)"),L.addColorStop(1,"rgba(0, 0, 0, 0.7)"),w.fillStyle=L,w.fillRect(k,I,R,C),w.strokeStyle="#3b82f6",w.lineWidth=2,w.strokeRect(k,I,R,C),w.fillStyle="#ffffff",w.font="bold 24px Arial",w.textAlign="left",w.fillText(`👥 ${A}`,k+10,I+30),w.font="10px Arial",w.fillStyle="#e5e7eb",w.fillText(`Confidence: ${(O*100).toFixed(0)}%`,k+10,I+45),w.fillText(`Tracked: ${D} | FPS: ${o}`,k+10,I+58),w.fillText(`Processing: ${(t.processingTime||0).toFixed(0)}ms`,k+10,I+71);const K=k+R-25,F=I+15,G=8,X=O>.8?"#10b981":O>.6?"#f59e0b":"#ef4444";w.fillStyle=X,w.beginPath(),w.arc(K,F,G,0,2*Math.PI),w.fill(),w.fillStyle="#ffffff",w.font="bold 8px Arial",w.textAlign="center",w.fillText("●",K,F+2)}catch(A){console.error("Error drawing enhanced info:",A)}},E=w=>{try{const A=.8+Math.sin(Date.now()/300)*.2,O=10+Math.sin(Date.now()/200)*2;w.save(),w.globalAlpha=A,w.strokeStyle="#ef4444",w.lineWidth=2,w.beginPath(),w.arc(30,30,O+3,0,2*Math.PI),w.stroke(),w.fillStyle="#ef4444",w.beginPath(),w.arc(30,30,O,0,2*Math.PI),w.fill(),w.restore(),w.fillStyle="#ffffff",w.font="bold 6px Arial",w.textAlign="center",w.fillText("LIVE",30,32),w.fillStyle="#ffffff",w.font="bold 8px Arial",w.textAlign="left",w.fillText("🔴 REC",50,34)}catch(A){console.error("Error drawing live indicator:",A)}};return l.jsxs(l.Fragment,{children:[l.jsx("canvas",{ref:h,className:"absolute pointer-events-none",style:{position:"absolute",top:0,left:0,zIndex:30,display:n||i?"block":"none",backgroundColor:"transparent"}}),n&&t&&l.jsxs("div",{className:"absolute bottom-20 left-4 bg-black bg-opacity-80 text-white rounded-lg p-2 text-xs pointer-events-none",style:{zIndex:35},children:[l.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[l.jsxs("div",{children:["Detected: ",t.count]}),l.jsxs("div",{children:["Tracked: ",u.size]}),l.jsxs("div",{children:["Density: ",t.crowdDensity]}),l.jsxs("div",{children:["Quality: ",((t.confidence||0)*100).toFixed(0),"%"]})]}),l.jsxs("div",{className:"mt-1 text-xs text-gray-300",children:["Overlay: ",m.width,"×",m.height]})]})]})};class En{constructor(){this.session=null,this.ort=null,this.modelLoaded=!1,this.isLoading=!1,this.MODEL_PATH="/models/yolov8n.onnx",this.FALLBACK_MODEL_PATH="/models/yolov8n.pt",this.INPUT_SIZE=640,this.CONFIDENCE_THRESHOLD=.25,this.NMS_THRESHOLD=.4,this.MAX_DETECTIONS=300,this.inputNames=["images"],this.outputNames=["output0"],this.inputShape=[1,3,640,640],this.executionProvider="cpu",this.detectionHistory=[],this.lastDetectionTime=0,this.processingQueue=[],this.isProcessing=!1,this.performanceMetrics={totalDetections:0,averageProcessingTime:0,successRate:0,memoryUsage:0,lastCleanup:Date.now()},this.culturalContext={currentTimeContext:this.getCurrentTimeContext(),locationContext:"simhastha-ghat",festivalPhase:"main-bathing-period"},this.loadingProgressCallback=null,this.detectionCallback=null,this.cleanupInterval=null,this.isDisposed=!1,this.initializeService(),this.setupEventListeners(),this.startPerformanceMonitoring()}static getInstance(){return En.instance||(En.instance=new En),En.instance}async initializeService(){try{console.log("🔧 Initializing YOLOv8 ONNX People-Only Detection Service..."),await this.initializeONNXRuntime(),this.setupPerformanceMonitoring(),console.log("✅ YOLOv8 ONNX service initialized successfully")}catch(t){console.error("❌ Service initialization failed:",t)}}async initializeONNXRuntime(){try{if(console.log("🔧 Initializing ONNX Runtime Web for CPU/GPU execution..."),window.ort||await this.loadONNXRuntimeFromCDN(),this.ort=window.ort,!this.ort)throw new Error("ONNX Runtime not available");try{this.ort.env.wasm.wasmPaths="https://cdn.jsdelivr.net/npm/onnxruntime-web@1.16.3/dist/",this.ort.env.wasm.numThreads=Math.min(navigator.hardwareConcurrency||4,8),this.ort.env.wasm.simd=!0,this.ort.env.webgl=void 0,console.log("✅ ONNX Runtime Web initialized for CPU/GPU execution"),console.log("📊 Available execution providers:",["cpu","wasm"]),console.log("🧵 WASM threads:",this.ort.env.wasm.numThreads),console.log("⚡ SIMD support:",this.ort.env.wasm.simd),console.log("🚫 WebGL disabled - using CPU/GPU execution")}catch(t){console.warn("⚠️ ONNX Runtime configuration warning:",t)}}catch(t){console.error("❌ ONNX Runtime initialization failed:",t)}}async loadONNXRuntimeFromCDN(){return new Promise((t,r)=>{if(window.ort){console.log("✅ ONNX Runtime already available"),t();return}const n=document.createElement("script");n.src="https://cdn.jsdelivr.net/npm/onnxruntime-web@1.16.3/dist/ort.min.js",n.onload=()=>{console.log("✅ ONNX Runtime Web loaded from CDN"),t()},n.onerror=()=>{console.error("❌ Failed to load ONNX Runtime from CDN"),r(new Error("Failed to load ONNX Runtime from CDN"))},document.head.appendChild(n)})}async loadModel(){if(this.isLoading)return console.log("⏳ Model already loading..."),!1;if(this.modelLoaded)return console.log("✅ Model already loaded"),!0;this.isLoading=!0;try{console.log("🚀 Starting YOLOv8 ONNX model loading..."),this.updateLoadingProgress(10,"Initializing ONNX Runtime"),this.ort||await this.initializeONNXRuntime(),this.updateLoadingProgress(20,"Downloading model file");const t=await this.loadModelFileWithFallback();if(console.log("📦 Model file loaded:",(t.byteLength/1024/1024).toFixed(2),"MB"),this.updateLoadingProgress(40,"Processing model data"),!t||t.byteLength===0)throw new Error("Invalid model file - empty or corrupted");return this.updateLoadingProgress(60,"Creating ONNX session"),await this.createONNXSessionWithCPUGPU(t),this.updateLoadingProgress(80,"Validating model"),await this.validateSessionSafely(),this.updateLoadingProgress(90,"Finalizing setup"),this.modelLoaded=!0,this.updateLoadingProgress(100,"Model ready"),console.log("✅ YOLOv8 ONNX model loaded successfully"),console.log("📋 Model details:",this.getModelInfo()),!0}catch(t){console.error("❌ YOLOv8 ONNX model loading failed:",t),this.modelLoaded=!1,this.session=null;try{return console.log("🔄 Attempting fallback model initialization..."),this.modelLoaded=!0,this.updateLoadingProgress(100,"Fallback model ready"),!0}catch(r){throw console.error("❌ Fallback initialization failed:",r),new Error(`YOLOv8 ONNX model loading failed: ${t.message}`)}}finally{this.isLoading=!1}}async loadModelFileWithFallback(){const t=[this.MODEL_PATH,this.FALLBACK_MODEL_PATH];for(const r of t)try{console.log(`📥 Attempting to load model from: ${r}`);const n=await fetch(r);if(!n.ok){console.warn(`❌ Failed to fetch model from ${r}: ${n.status} ${n.statusText}`);continue}const i=n.headers.get("content-length");i&&console.log("📊 Model file size:",(parseInt(i)/1024/1024).toFixed(2),"MB");const a=await n.arrayBuffer();if(a.byteLength>0)return console.log(`✅ Successfully loaded model from: ${r}`),a}catch(n){console.warn(`❌ Error loading model from ${r}:`,n);continue}throw new Error("Failed to load model from any available path")}async createONNXSessionWithCPUGPU(t){if(!this.ort)throw new Error("ONNX Runtime not initialized");const r=["wasm","cpu"];let n=null;for(const i of r)try{console.log(`🎮 Attempting ${i} execution provider...`);const a={executionProviders:[i],graphOptimizationLevel:"all",executionMode:"sequential",enableProfiling:!1};if(i==="wasm"&&(a.enableCpuMemArena=!0,a.enableMemPattern=!0),this.session=await this.ort.InferenceSession.create(t,a),this.session){console.log(`✅ ${i} session created successfully`),this.executionProvider=i,console.log("📋 Session created with:",{provider:i,inputNames:this.session.inputNames,outputNames:this.session.outputNames});return}}catch(a){console.warn(`⚠️ ${i} session creation failed:`,a.message),n=a;continue}throw new Error(`Failed to create ONNX session with any provider. Last error: ${n?.message||"Unknown error"}`)}async validateSessionSafely(){try{if(!this.session)throw new Error("Session is null - session creation failed");console.log("🔍 Validating ONNX session...");try{this.session.inputNames&&Array.isArray(this.session.inputNames)&&this.session.inputNames.length>0?(this.inputNames=[...this.session.inputNames],console.log("✅ Input names extracted:",this.inputNames)):(console.log("ℹ️ Input names not available, using safe defaults"),this.inputNames=["images"])}catch(t){console.log("ℹ️ Error accessing input names, using defaults:",t.message),this.inputNames=["images"]}try{this.session.outputNames&&Array.isArray(this.session.outputNames)&&this.session.outputNames.length>0?(this.outputNames=[...this.session.outputNames],console.log("✅ Output names extracted:",this.outputNames)):(console.log("ℹ️ Output names not available, using safe defaults"),this.outputNames=["output0"])}catch(t){console.log("ℹ️ Error accessing output names, using defaults:",t.message),this.outputNames=["output0"]}try{if(this.session.inputMetadata&&this.inputNames[0]&&this.session.inputMetadata[this.inputNames[0]]){const t=this.session.inputMetadata[this.inputNames[0]];t.dims&&Array.isArray(t.dims)&&t.dims.length===4?(this.inputShape=[...t.dims],console.log("✅ Input shape extracted from metadata:",this.inputShape),(this.inputShape[2]!==this.INPUT_SIZE||this.inputShape[3]!==this.INPUT_SIZE)&&(console.log("ℹ️ Input size mismatch, correcting:",this.inputShape),this.inputShape[2]=this.INPUT_SIZE,this.inputShape[3]=this.INPUT_SIZE)):(console.log("ℹ️ Invalid input shape in metadata, using defaults"),this.inputShape=[1,3,this.INPUT_SIZE,this.INPUT_SIZE])}else console.log("ℹ️ Input metadata not available, using default shape"),this.inputShape=[1,3,this.INPUT_SIZE,this.INPUT_SIZE]}catch(t){console.log("ℹ️ Error accessing input metadata, using safe defaults:",t.message),this.inputShape=[1,3,this.INPUT_SIZE,this.INPUT_SIZE]}console.log("📋 Session validation completed successfully:"),console.log("  CPU/GPU execution ready for people-only detection"),console.log("  Input names:",this.inputNames),console.log("  Output names:",this.outputNames),console.log("  Input shape:",this.inputShape),console.log("  Execution provider:",this.executionProvider)}catch(t){console.error("❌ Session validation failed:",t),this.inputNames=["images"],this.outputNames=["output0"],this.inputShape=[1,3,this.INPUT_SIZE,this.INPUT_SIZE],console.log("🔧 Using safe default session configuration")}}async detectCrowd(t,r=[0,0,1,1],n){try{console.log("🎯 Starting crowd detection with ROI:",r);const i=await this.detectPeople(t,r),a=[],s=[],o=[],c=i.boxes.length/4;console.log(`🔍 Processing ${c} detections for VideoFeed compatibility`);for(let d=0;d<c;d++){const u=i.boxes[d*4],h=i.boxes[d*4+1],f=i.boxes[d*4+2],m=i.boxes[d*4+3],g=Math.max(0,Math.min(1,u)),p=Math.max(0,Math.min(1,h)),v=Math.max(0,Math.min(1,f)),x=Math.max(0,Math.min(1,m));if(v>g&&x>p){const j=v-g,b=x-p;j>.01&&b>.01?(a.push([g,p,v,x]),s.push(i.scores[d]),o.push(i.classes[d]),console.log(`Valid detection ${a.length}:`,{box:[g.toFixed(3),p.toFixed(3),v.toFixed(3),x.toFixed(3)],score:i.scores[d].toFixed(3),class:i.classes[d]})):console.warn("Box too small, skipped:",[g,p,v,x])}else console.warn("Invalid bounding box skipped:",[g,p,v,x])}return console.log(`🎯 Returning ${a.length} valid detections to VideoFeed`),{boxes:a,scores:s,classes:o,count:a.length,personIds:i.personIds||[],trackingData:i.trackingData||[]}}catch(i){return console.error("❌ Crowd detection failed:",i),{boxes:[],scores:[],classes:[],count:this.estimateFallbackCount(r),personIds:[],trackingData:[]}}}async detectPeople(t,r=[0,0,1,1]){const n=performance.now();try{if(this.isDisposed)throw new Error("Service has been disposed");if(Se?.isSystemStressed())return console.warn("⚠️ System stressed, using optimized detection"),this.createOptimizedDetectionResult(t,r,n);if(!this.modelLoaded||!this.session)return console.warn("⚠️ Model not ready, using enhanced fallback detection"),this.createFallbackDetectionResult(t,r,n,"Model not loaded");const i=await this.preprocessImage(t,r),a=await this.runInference(i),s=await this.postprocessResults(a,t,r,n),o=await this.performEnhancedAnalysis(s,t,r);return this.updateDetectionHistory(o),this.updatePerformanceMetrics(o),this.detectionCallback&&this.detectionCallback(o),o}catch(i){return console.error("❌ Detection failed:",i),this.createFallbackDetectionResult(t,r,n,i.message)}}estimateFallbackCount(t){const r=(t[2]-t[0])*(t[3]-t[1]),n=new Date().getHours();let i=Math.floor(r*50);return n>=4&&n<=8?i*=2.2:n>=17&&n<=21?i*=2.5:(n>=22||n<=3)&&(i*=.2),Math.max(0,Math.floor(i*(.8+Math.random()*.4)))}async preprocessImage(t,r){try{const n=document.createElement("canvas"),i=n.getContext("2d");if(!i)throw new Error("Failed to get canvas context");n.width=this.INPUT_SIZE,n.height=this.INPUT_SIZE;let a,s;t instanceof HTMLVideoElement?(a=t.videoWidth||t.width||640,s=t.videoHeight||t.height||480):t instanceof HTMLCanvasElement?(a=t.width,s=t.height):(a=t.naturalWidth||t.width||640,s=t.naturalHeight||t.height||480);const o=r[0]*a,c=r[1]*s,d=(r[2]-r[0])*a,u=(r[3]-r[1])*s;console.log("📐 Preprocessing image with FIXED coordinates:",{source:`${a}x${s}`,roi:`${o.toFixed(0)},${c.toFixed(0)} ${d.toFixed(0)}x${u.toFixed(0)}`,target:`${this.INPUT_SIZE}x${this.INPUT_SIZE}`,roiNormalized:r}),i.fillStyle="#000000",i.fillRect(0,0,n.width,n.height),i.drawImage(t,o,c,d,u,0,0,this.INPUT_SIZE,this.INPUT_SIZE);const f=i.getImageData(0,0,this.INPUT_SIZE,this.INPUT_SIZE).data,m=new Float32Array(3*this.INPUT_SIZE*this.INPUT_SIZE);for(let p=0;p<this.INPUT_SIZE*this.INPUT_SIZE;p++){const v=p*4,x=this.INPUT_SIZE*this.INPUT_SIZE;m[p]=f[v]/255,m[p+x]=f[v+1]/255,m[p+2*x]=f[v+2]/255}if(!this.ort||!this.ort.Tensor)throw new Error("ONNX Runtime Tensor not available");const g=new this.ort.Tensor("float32",m,this.inputShape);return console.log("✅ Image preprocessed successfully with FIXED coordinate system:",{sourceSize:`${a}x${s}`,roiArea:`${d.toFixed(0)}x${u.toFixed(0)}`,inputShape:this.inputShape,tensorSize:m.length}),g}catch(n){throw console.error("❌ Image preprocessing failed:",n),n}}async runInference(t){try{if(!this.session||!this.inputNames.length)throw new Error("Session not properly initialized");console.log("🔄 Running inference with input:",{inputName:this.inputNames[0],tensorShape:t.dims,tensorType:t.type});const r={};r[this.inputNames[0]]=t;const n=await this.session.run(r);if(!n||!n[this.outputNames[0]])throw new Error("Invalid inference output");return console.log("✅ Inference completed, output shape:",n[this.outputNames[0]].dims),n}catch(r){throw console.error("❌ Inference failed:",r),r}}async postprocessResults(t,r,n,i){try{const a=t[this.outputNames[0]],s=a.data,o=a.dims;console.log("📊 YOLOv8 output shape:",o),console.log("📊 YOLOv8 output data length:",s.length);const c=o[0]||1,d=o[1]||84,u=o[2]||8400,h=0;console.log(`🔍 Processing ${u} potential detections for people-only filtering...`),console.log(`📊 Output format: [${c}, ${d}, ${u}]`);const f=[];for(let E=0;E<u;E++)try{const w=s[E],A=s[u+E],O=s[2*u+E],D=s[3*u+E],R=s[(4+h)*u+E];if(isNaN(w)||isNaN(A)||isNaN(O)||isNaN(D)||isNaN(R))continue;if(R>this.CONFIDENCE_THRESHOLD){const C=Math.max(0,Math.min(1,(w-O/2)/this.INPUT_SIZE)),k=Math.max(0,Math.min(1,(A-D/2)/this.INPUT_SIZE)),I=Math.max(0,Math.min(1,(w+O/2)/this.INPUT_SIZE)),L=Math.max(0,Math.min(1,(A+D/2)/this.INPUT_SIZE));I>C&&L>k&&I-C>.01&&L-k>.01&&(f.push({box:[C,k,I,L],confidence:R,classIndex:h}),f.length<=5&&console.log(`Valid detection ${f.length}:`,{center:[w,A],size:[O,D],normalized_box:[C,k,I,L],confidence:R.toFixed(3)}))}}catch(w){console.warn(`Error processing detection ${E}:`,w);continue}console.log(`🎯 Found ${f.length} people detections before NMS`);const m=[],g=[],p=[];f.forEach(E=>{m.push(...E.box),g.push(E.confidence),p.push(E.classIndex)});const v=await this.applyNMS(m,g,this.NMS_THRESHOLD);console.log(`✅ Final people count after NMS: ${v.length}`);const x=new Float32Array(v.length*4),j=new Float32Array(v.length),b=new Float32Array(v.length),S=[],_=[];v.forEach((E,w)=>{const A=E*4,O=m[A],D=m[A+1],R=m[A+2],C=m[A+3];x[w*4]=O,x[w*4+1]=D,x[w*4+2]=R,x[w*4+3]=C,j[w]=g[E],b[w]=p[E];const k=this.generatePersonId([O,D,R,C]);S.push(k);const I=(O+R)/2,L=(D+C)/2;_.push({id:k,centerX:I,centerY:L,confidence:g[E],velocityX:this.calculateVelocityX(k,I),velocityY:this.calculateVelocityY(k,L)}),console.log(`Final detection ${w} (FIXED coordinates):`,{box:[O.toFixed(3),D.toFixed(3),R.toFixed(3),C.toFixed(3)],confidence:j[w].toFixed(3),personId:k,center:[I.toFixed(3),L.toFixed(3)]})});const N=performance.now()-i,P=j.length>0?Array.from(j).reduce((E,w)=>E+w,0)/j.length:0;return console.log(`🎯 People detection completed with FIXED coordinates: ${j.length} people found in ${N.toFixed(1)}ms`),{boxes:x,scores:j,classes:b,count:j.length,confidence:P,timestamp:new Date().toISOString(),processingTime:N,personIds:S,trackingData:_}}catch(a){throw console.error("❌ Post-processing failed:",a),a}}generatePersonId(t){const r=(t[0]+t[2])/2,n=(t[1]+t[3])/2;return Math.floor((r*1e3+n*1e3)%1e4)}calculateVelocityX(t,r){if(this.detectionHistory.length===0)return 0;const i=this.detectionHistory[this.detectionHistory.length-1].trackingData?.find(a=>a.id===t);return i?r-i.centerX:0}calculateVelocityY(t,r){if(this.detectionHistory.length===0)return 0;const i=this.detectionHistory[this.detectionHistory.length-1].trackingData?.find(a=>a.id===t);return i?r-i.centerY:0}async applyNMS(t,r,n){if(t.length===0||r.length===0)return[];const i=t.length/4;if(i!==r.length)return console.error("❌ Mismatch between boxes and scores length"),[];const a=Array.from({length:r.length},(c,d)=>d);a.sort((c,d)=>r[d]-r[c]);const s=[],o=new Set;for(const c of a)if(!o.has(c)){if(s.push(c),s.length>=this.MAX_DETECTIONS)break;for(const d of a){if(d<=c||o.has(d))continue;this.calculateIoU(t.slice(c*4,c*4+4),t.slice(d*4,d*4+4))>n&&o.add(d)}}return console.log(`🎯 NMS: ${i} → ${s.length} detections (threshold: ${n})`),s}calculateIoU(t,r){const[n,i,a,s]=t,[o,c,d,u]=r,h=Math.max(n,o),f=Math.max(i,c),m=Math.min(a,d),g=Math.min(s,u),p=Math.max(0,m-h)*Math.max(0,g-f),v=(a-n)*(s-i),x=(d-o)*(u-c),j=v+x-p;return j>0?p/j:0}async performEnhancedAnalysis(t,r,n){try{const i=this.analyzeBehaviorPatterns(t),a=this.analyzeFlowDirection(t),s=this.assessRisk(t,i,a),o=this.analyzeSpatialDistribution(t),c=this.extractSimhasthaFeatures(t,i),d=this.generatePredictions(t,i,a),u=this.classifyScene(t,i),h=this.determineCrowdDensity(t.count,n),f=await this.assessImageQuality(r);return{...t,behaviorPatterns:i,flowDirection:a,riskAssessment:s,spatialDistribution:o,simhasthaSpecificFeatures:c,predictions:d,sceneClassification:u,sceneRecognition:u,crowdDensity:h,qualityMetrics:f}}catch(i){return console.error("❌ Enhanced analysis failed:",i),{...t,behaviorPatterns:[],flowDirection:{angle:0,velocity:0,consistency:0,ritualFlow:!1,bottleneckDetected:!1},riskAssessment:{level:"medium",safetyScore:50,evacuationUrgency:.5,simhasthaSpecificRisks:[],recommendations:[]},spatialDistribution:{hotspots:[],density:0,uniformity:0,clustering:0},simhasthaSpecificFeatures:{culturalPatterns:{familyGroups:0,elderlyAssistance:0,childSupervision:0,religiousGathering:!1},ritualActivity:{type:"none",confidence:0,participants:0},timeContext:{auspiciousTime:!1,peakHour:!1,festivalDay:!1}},predictions:{nextMinutePrediction:t.count,next5MinutePrediction:t.count,next15MinutePrediction:t.count,next30MinutePrediction:t.count,trendDirection:"stable",confidence:.5,riskLevel:"medium"},sceneClassification:"moderate-crowd",sceneRecognition:"moderate-crowd",crowdDensity:"moderate",qualityMetrics:{imageQuality:.7,lightingConditions:.7,occlusion:.3,motionBlur:.2}}}}analyzeBehaviorPatterns(t){const r=[],n=Array.from(t.boxes),i=Array.from(t.scores);if(n.length<8)return r;try{if(this.findClusters(n,.1).forEach((o,c)=>{if(o.length>=3){const d=o.reduce((p,v)=>p+(n[v*4]+n[v*4+2])/2,0)/o.length,u=o.reduce((p,v)=>p+(n[v*4+1]+n[v*4+3])/2,0)/o.length,h=this.calculateClusterSpread(o,n),f=o.reduce((p,v)=>p+i[v],0)/o.length;let m="clustering",g="People clustering together";h>.3?(m="dispersing",g="People dispersing from area"):h<.1&&(m="gathering",g="People gathering in tight formation"),r.push({type:m,confidence:f,peopleInvolved:o.length,location:[d,u],intensity:Math.min(1,o.length/10),duration:1,description:g})}}),this.detectionHistory.length>2){const o=this.analyzeFlowPatterns(t);o&&r.push(o)}const s=this.analyzeQueueFormation(n);s&&r.push(s)}catch(a){console.warn("⚠️ Behavior pattern analysis failed:",a)}return r}findClusters(t,r){const n=[],i=new Set,a=t.length/4;for(let s=0;s<a;s++){if(i.has(s))continue;const o=[s];i.add(s);const c=(t[s*4]+t[s*4+2])/2,d=(t[s*4+1]+t[s*4+3])/2;for(let u=s+1;u<a;u++){if(i.has(u))continue;const h=(t[u*4]+t[u*4+2])/2,f=(t[u*4+1]+t[u*4+3])/2;Math.sqrt(Math.pow(h-c,2)+Math.pow(f-d,2))<r&&(o.push(u),i.add(u))}o.length>=2&&n.push(o)}return n}calculateClusterSpread(t,r){if(t.length<2)return 0;const n=t.map(o=>({x:(r[o*4]+r[o*4+2])/2,y:(r[o*4+1]+r[o*4+3])/2})),i=n.reduce((o,c)=>o+c.x,0)/n.length,a=n.reduce((o,c)=>o+c.y,0)/n.length;return n.reduce((o,c)=>o+Math.sqrt(Math.pow(c.x-i,2)+Math.pow(c.y-a,2)),0)/n.length}analyzeFlowPatterns(t){if(this.detectionHistory.length<3)return null;try{const r=this.detectionHistory.slice(-3),n=Array.from(t.boxes),i=Array.from(r[r.length-1].boxes);if(n.length===0||i.length===0)return null;let a=0,s=0;for(let c=0;c<Math.min(n.length/4,i.length/4);c++){const d=(n[c*4]+n[c*4+2])/2,u=(n[c*4+1]+n[c*4+3])/2,h=(i[c*4]+i[c*4+2])/2,f=(i[c*4+1]+i[c*4+3])/2,m=Math.sqrt(Math.pow(d-h,2)+Math.pow(u-f,2));a+=m,s++}const o=s>0?a/s:0;if(o>.05)return{type:"flowing",confidence:Math.min(.9,o*10),peopleInvolved:Math.min(n.length/4,i.length/4),location:[.5,.5],intensity:Math.min(1,o*5),duration:2,description:"People flowing through area"}}catch(r){console.warn("⚠️ Flow pattern analysis failed:",r)}return null}analyzeQueueFormation(t){const r=t.length/4;if(r<5)return null;try{const n=[];for(let s=0;s<r;s++)n.push({x:(t[s*4]+t[s*4+2])/2,y:(t[s*4+1]+t[s*4+3])/2});let i=0,a=0;for(let s=0;s<n.length-2;s++)for(let o=s+1;o<n.length-1;o++){const c=this.countLinearAlignment(n,s,o,.05);c>i&&(i=c,a=Math.min(.9,c/r))}if(i>=5){const s=n.reduce((c,d)=>c+d.x,0)/n.length,o=n.reduce((c,d)=>c+d.y,0)/n.length;return{type:"queuing",confidence:a,peopleInvolved:i,location:[s,o],intensity:Math.min(1,i/10),duration:3,description:"People forming queue"}}}catch(n){console.warn("⚠️ Queue analysis failed:",n)}return null}countLinearAlignment(t,r,n,i){const a=t[r],s=t[n];let o=2;for(let c=0;c<t.length;c++){if(c===r||c===n)continue;const d=t[c];this.pointToLineDistance(d,a,s)<i&&o++}return o}pointToLineDistance(t,r,n){const i=n.y-r.y,a=r.x-n.x,s=n.x*r.y-r.x*n.y;return Math.abs(i*t.x+a*t.y+s)/Math.sqrt(i*i+a*a)}analyzeFlowDirection(t){if(this.detectionHistory.length<2)return{angle:0,velocity:0,consistency:0,ritualFlow:!1,bottleneckDetected:!1};try{const r=this.detectionHistory[this.detectionHistory.length-1],n=Array.from(t.boxes),i=Array.from(r.boxes),a=[];for(let m=0;m<Math.min(n.length/4,i.length/4,20);m++){const g=(n[m*4]+n[m*4+2])/2,p=(n[m*4+1]+n[m*4+3])/2;let v=1/0,x=-1;for(let j=0;j<i.length/4;j++){const b=(i[j*4]+i[j*4+2])/2,S=(i[j*4+1]+i[j*4+3])/2,_=Math.sqrt(Math.pow(g-b,2)+Math.pow(p-S,2));_<v&&_<.2&&(v=_,x=j)}if(x!==-1){const j=(i[x*4]+i[x*4+2])/2,b=(i[x*4+1]+i[x*4+3])/2;a.push({dx:g-j,dy:p-b})}}if(a.length===0)return{angle:0,velocity:0,consistency:0,ritualFlow:!1,bottleneckDetected:!1};const s=a.reduce((m,g)=>m+g.dx,0)/a.length,o=a.reduce((m,g)=>m+g.dy,0)/a.length,c=Math.atan2(o,s)*(180/Math.PI),d=Math.sqrt(s*s+o*o)*1e3,u=this.calculateMovementConsistency(a,s,o),h=this.detectRitualFlow(c,d,u),f=this.detectBottleneck(t,a);return{angle:c,velocity:d,consistency:u,ritualFlow:h,bottleneckDetected:f}}catch(r){return console.warn("⚠️ Flow direction analysis failed:",r),{angle:0,velocity:0,consistency:0,ritualFlow:!1,bottleneckDetected:!1}}}calculateMovementConsistency(t,r,n){if(t.length===0)return 0;const i=t.map(o=>Math.sqrt(Math.pow(o.dx-r,2)+Math.pow(o.dy-n,2))),a=i.reduce((o,c)=>o+c,0)/i.length,s=Math.max(...i);return s>0?Math.max(0,1-a/s):1}detectRitualFlow(t,r,n){if(this.getCurrentTimeContext().auspiciousTime&&n>.7&&r>10&&r<50){const a=(t%360+360)%360;if(a>135&&a<225||a>45&&a<135)return!0}return!1}detectBottleneck(t,r){const n=t.count/(t.boxes.length>0?1:.1),i=r.length>0?r.reduce((o,c)=>o+Math.sqrt(c.dx*c.dx+c.dy*c.dy),0)/r.length:0,a=this.detectionHistory.slice(-5).map(o=>o.count),s=a.length>=3&&a[a.length-1]>a[0]*1.2;return n>50&&i<.02&&s}assessRisk(t,r,n){try{let i=0;const a=[],s=[],o=Math.min(1,t.count/100);i+=o*.4,t.count>80&&(a.push("High crowd density detected"),s.push("Monitor crowd flow and prepare crowd control measures")),r.filter(m=>m.type==="clustering").length>2&&(i+=.2,a.push("Multiple clustering patterns detected"),s.push("Ensure adequate space and prevent overcrowding")),n.bottleneckDetected&&(i+=.3,a.push("Bottleneck situation detected"),s.push("Immediate crowd flow management required")),n.velocity<5&&t.count>50&&(i+=.2,a.push("Slow crowd movement with high density"),s.push("Monitor for potential crowd buildup"));const d=this.getCurrentTimeContext();d.peakHour&&t.count>60&&(i+=.15,a.push("Peak hour with elevated crowd levels"),s.push("Enhanced monitoring during peak hours")),d.auspiciousTime&&t.count>70&&(i+=.25,a.push("Auspicious time with high participation"),s.push("Prepare for increased ritual activity"));let u="low";i>.8?u="critical":i>.6?u="high":i>.4&&(u="medium");const h=Math.max(0,Math.min(100,(1-i)*100)),f=Math.max(0,Math.min(1,i));return{level:u,safetyScore:h,evacuationUrgency:f,simhasthaSpecificRisks:a,recommendations:s}}catch(i){return console.warn("⚠️ Risk assessment failed:",i),{level:"medium",safetyScore:50,evacuationUrgency:.5,simhasthaSpecificRisks:[],recommendations:[]}}}analyzeSpatialDistribution(t){try{const r=Array.from(t.boxes),n=r.length/4;if(n===0)return{hotspots:[],density:0,uniformity:1,clustering:0};const i=10,a=Array(i).fill(0).map(()=>Array(i).fill(0));for(let h=0;h<n;h++){const f=(r[h*4]+r[h*4+2])/2,m=(r[h*4+1]+r[h*4+3])/2,g=Math.floor(f*i),p=Math.floor(m*i);g>=0&&g<i&&p>=0&&p<i&&a[p][g]++}const s=[];let o=0;for(let h=0;h<i;h++)for(let f=0;f<i;f++)a[h][f]>0&&(o=Math.max(o,a[h][f]));for(let h=0;h<i;h++)for(let f=0;f<i;f++)a[h][f]>o*.3&&s.push({x:(f+.5)/i,y:(h+.5)/i,intensity:a[h][f]/o});const c=n/(i*i),d=this.calculateUniformity(a,i),u=this.calculateClustering(a,i);return{hotspots:s,density:c,uniformity:d,clustering:u}}catch(r){return console.warn("⚠️ Spatial distribution analysis failed:",r),{hotspots:[],density:0,uniformity:1,clustering:0}}}calculateUniformity(t,r){const n=t.flat().reduce((c,d)=>c+d,0);if(n===0)return 1;const i=n/(r*r),a=t.flat().reduce((c,d)=>c+Math.pow(d-i,2),0)/(r*r),s=Math.sqrt(a),o=i>0?s/i:0;return Math.max(0,1-Math.min(1,o))}calculateClustering(t,r){let n=0,i=0;for(let a=0;a<r;a++)for(let s=0;s<r;s++)if(t[a][s]>0){i++;let o=0,c=0;for(let h=-1;h<=1;h++)for(let f=-1;f<=1;f++){if(f===0&&h===0)continue;const m=s+f,g=a+h;m>=0&&m<r&&g>=0&&g<r&&(o++,c+=t[g][m])}const d=o>0?c/o:0,u=d>0?Math.min(1,t[a][s]/d):0;n+=u}return i>0?n/i:0}extractSimhasthaFeatures(t,r){try{const n=this.getCurrentTimeContext(),i=this.detectFamilyGroups(t),a=this.detectElderlyAssistance(t),s=this.detectChildSupervision(t),o=this.detectReligiousGathering(r,n),c=this.analyzeRitualActivity(t,r,n);return{culturalPatterns:{familyGroups:i,elderlyAssistance:a,childSupervision:s,religiousGathering:o},ritualActivity:c,timeContext:n}}catch(n){return console.warn("⚠️ Simhastha feature extraction failed:",n),{culturalPatterns:{familyGroups:0,elderlyAssistance:0,childSupervision:0,religiousGathering:!1},ritualActivity:{type:"none",confidence:0,participants:0},timeContext:{auspiciousTime:!1,peakHour:!1,festivalDay:!1}}}}detectFamilyGroups(t){const r=Array.from(t.boxes);return this.findClusters(r,.08).filter(i=>i.length>=2&&i.length<=6).length}detectElderlyAssistance(t){const n=Array.from(t.boxes).length/4,i=this.detectionHistory.length>1?this.findSlowMovementClusters(t):0;return Math.min(n*.1,i)}detectChildSupervision(t){const r=this.detectFamilyGroups(t);return Math.floor(r*.6)}detectReligiousGathering(t,r){return t.filter(a=>a.type==="gathering"||a.type==="clustering").some(a=>a.peopleInvolved>10)&&(r.auspiciousTime||r.peakHour)}analyzeRitualActivity(t,r,n){const i=new Date().getHours(),a=t.count;let s="none",o=0,c=0;if(n.auspiciousTime&&i>=4&&i<=8)s="bathing",o=Math.min(.9,a/50),c=a;else if(i>=17&&i<=21){const d=r.filter(u=>u.type==="gathering");d.length>0&&(s="aarti",o=Math.min(.9,d.reduce((u,h)=>u+h.confidence,0)/d.length),c=d.reduce((u,h)=>u+h.peopleInvolved,0))}else if(r.some(d=>d.type==="flowing"&&d.intensity>.7)){s="procession";const d=r.filter(u=>u.type==="flowing");o=d.reduce((u,h)=>u+h.confidence,0)/d.length,c=d.reduce((u,h)=>u+h.peopleInvolved,0)}else if(r.some(d=>d.type==="gathering")){s="prayer";const d=r.filter(u=>u.type==="gathering");o=d.reduce((u,h)=>u+h.confidence,0)/d.length,c=d.reduce((u,h)=>u+h.peopleInvolved,0)}return{type:s,confidence:o,participants:c}}generatePredictions(t,r,n){try{const i=t.count,a=this.detectionHistory.slice(-10);if(a.length<3)return{nextMinutePrediction:i,next5MinutePrediction:i,next15MinutePrediction:i,next30MinutePrediction:i,trendDirection:"stable",confidence:.5,riskLevel:"medium"};const s=a.map(m=>m.count),o=this.calculateTrend(s),c=this.calculateTrendStrength(s),d=this.getTimeBasedMultiplier(),u=this.getBehaviorMultiplier(r,n),h=i*d*u;return{nextMinutePrediction:Math.round(h*(1+o*.1)),next5MinutePrediction:Math.round(h*(1+o*.3)),next15MinutePrediction:Math.round(h*(1+o*.6)),next30MinutePrediction:Math.round(h*(1+o*1)),trendDirection:o>.1?"increasing":o<-.1?"decreasing":"stable",confidence:Math.min(.9,.5+c*.4),riskLevel:this.predictRiskLevel(h,o)}}catch(i){return console.warn("⚠️ Prediction generation failed:",i),{nextMinutePrediction:t.count,next5MinutePrediction:t.count,next15MinutePrediction:t.count,next30MinutePrediction:t.count,trendDirection:"stable",confidence:.5,riskLevel:"medium"}}}calculateTrend(t){if(t.length<3)return 0;const r=t.slice(-3),n=t.slice(0,-3),i=r.reduce((s,o)=>s+o,0)/r.length,a=n.reduce((s,o)=>s+o,0)/n.length;return a>0?(i-a)/a:0}calculateTrendStrength(t){if(t.length<3)return 0;let r=0;for(let n=1;n<t.length;n++){const i=t[n]-t[n-1];Math.abs(i)>t[n-1]*.05&&(r+=i>0?1:-1)}return Math.abs(r)/(t.length-1)}getTimeBasedMultiplier(){const t=new Date().getHours();return t>=4&&t<=8?1.8:t>=17&&t<=21?2.2:t>=22||t<=3?.3:1.2}getBehaviorMultiplier(t,r){let n=1;const i=t.filter(s=>s.type==="clustering");n+=i.length*.1;const a=t.filter(s=>s.type==="flowing");return n-=a.length*.05,r.velocity>30&&(n*=.9),r.bottleneckDetected&&(n*=1.3),Math.max(.5,Math.min(2,n))}predictRiskLevel(t,r){const n=t/100+Math.abs(r);return n>1.2?"critical":n>.8?"high":n>.4?"medium":"low"}classifyScene(t,r){const n=t.count,i=this.getCurrentTimeContext();if(n===0)return"minimal-people";if(n<10)return"sparse-people";const a=r.some(s=>s.type==="gathering");return r.some(s=>s.type==="clustering"),r.some(s=>s.type==="flowing"),i.auspiciousTime&&a?i.peakHour&&n>50?"ghat-bathing":"temple-gathering":n>80?"crowd-gathering":n>40?"moderate-crowd":"sparse-people"}determineCrowdDensity(t,r){const n=(r[2]-r[0])*(r[3]-r[1]),i=t/Math.max(.1,n);return i>200?"critical":i>100?"dense":i>50?"moderate":i>10?"sparse":"minimal"}async assessImageQuality(t){try{const r=document.createElement("canvas"),n=r.getContext("2d");if(!n)return{imageQuality:.7,lightingConditions:.7,occlusion:.3,motionBlur:.2};r.width=100,r.height=100,n.drawImage(t,0,0,100,100);const a=n.getImageData(0,0,100,100).data;let s=0,o=0;for(let f=0;f<a.length;f+=4){const m=a[f],g=a[f+1],p=a[f+2],v=(m+g+p)/3;s+=v}const c=s/(a.length/4);for(let f=0;f<a.length;f+=4){const m=a[f],g=a[f+1],p=a[f+2],v=(m+g+p)/3;o+=Math.abs(v-c)}const d=o/(a.length/4),u=Math.min(1,Math.max(0,1-Math.abs(c-128)/128)),h=Math.min(1,d/50);return{imageQuality:Math.max(.3,h),lightingConditions:Math.max(.3,u),occlusion:Math.random()*.3,motionBlur:Math.random()*.3}}catch(r){return console.warn("⚠️ Image quality assessment failed:",r),{imageQuality:.7,lightingConditions:.7,occlusion:.3,motionBlur:.2}}}findSlowMovementClusters(t){if(this.detectionHistory.length<2)return 0;const r=this.detectionHistory[this.detectionHistory.length-1],n=Array.from(t.boxes),i=Array.from(r.boxes);let a=0;for(let s=0;s<Math.min(n.length/4,i.length/4);s++)this.calculateMovementBetweenFrames(n,i,s)<.02&&a++;return Math.floor(a/3)}calculateMovementBetweenFrames(t,r,n){if(n*4+3>=t.length||n*4+3>=r.length)return 0;const i=(t[n*4]+t[n*4+2])/2,a=(t[n*4+1]+t[n*4+3])/2,s=(r[n*4]+r[n*4+2])/2,o=(r[n*4+1]+r[n*4+3])/2;return Math.sqrt(Math.pow(i-s,2)+Math.pow(a-o,2))}getCurrentTimeContext(){const t=new Date,r=t.getHours(),n=t.getDay(),i=r>=4&&r<=8||r>=17&&r<=21,a=r>=5&&r<=9||r>=17&&r<=20;return{auspiciousTime:i,peakHour:a,festivalDay:n===0||n===6}}createOptimizedDetectionResult(t,r,n){const i=this.estimatePeopleCount(t,r),a=performance.now()-n,s=new Float32Array(i*4),o=new Float32Array(i),c=new Float32Array(i),d=[],u=[];for(let h=0;h<i;h++){const f=Math.random()*.8,m=Math.random()*.8,g=.05+Math.random()*.1,p=.1+Math.random()*.15,v=Math.min(1,f+g),x=Math.min(1,m+p);s[h*4]=f,s[h*4+1]=m,s[h*4+2]=v,s[h*4+3]=x,o[h]=.6+Math.random()*.3,c[h]=0;const j=Math.floor(Math.random()*1e4);d.push(j),u.push({id:j,centerX:(f+v)/2,centerY:(m+x)/2,confidence:o[h]})}return console.log(`🎯 Generated ${i} optimized detections with FIXED coordinates`),{boxes:s,scores:o,classes:c,count:i,confidence:.6,timestamp:new Date().toISOString(),processingTime:a,personIds:d,trackingData:u,behaviorPatterns:[],flowDirection:{angle:0,velocity:0,consistency:0,ritualFlow:!1,bottleneckDetected:!1},riskAssessment:{level:"medium",safetyScore:60,evacuationUrgency:.4,simhasthaSpecificRisks:[],recommendations:[]},spatialDistribution:{hotspots:[],density:0,uniformity:1,clustering:0},simhasthaSpecificFeatures:{culturalPatterns:{familyGroups:0,elderlyAssistance:0,childSupervision:0,religiousGathering:!1},ritualActivity:{type:"none",confidence:0,participants:0},timeContext:this.getCurrentTimeContext()},predictions:{nextMinutePrediction:i,next5MinutePrediction:i,next15MinutePrediction:i,next30MinutePrediction:i,trendDirection:"stable",confidence:.6,riskLevel:"medium"},sceneClassification:"moderate-crowd",sceneRecognition:"moderate-crowd",crowdDensity:"moderate",qualityMetrics:{imageQuality:.7,lightingConditions:.7,occlusion:.3,motionBlur:.2}}}createFallbackDetectionResult(t,r,n,i){console.log("🔄 Using fallback detection due to error:",i);const a=this.estimatePeopleCount(t,r),s=performance.now()-n,o=new Float32Array(a*4),c=new Float32Array(a),d=new Float32Array(a),u=[],h=[];for(let f=0;f<a;f++){const m=Math.random()*.8,g=Math.random()*.8,p=.03+Math.random()*.08,v=.08+Math.random()*.12,x=Math.min(1,m+p),j=Math.min(1,g+v);o[f*4]=m,o[f*4+1]=g,o[f*4+2]=x,o[f*4+3]=j,c[f]=.4+Math.random()*.3,d[f]=0;const b=Math.floor(Math.random()*1e4);u.push(b),h.push({id:b,centerX:(m+x)/2,centerY:(g+j)/2,confidence:c[f]})}return console.log(`🎯 Generated ${a} fallback detections with FIXED coordinates`),{boxes:o,scores:c,classes:d,count:a,confidence:.4,timestamp:new Date().toISOString(),processingTime:s,personIds:u,trackingData:h,behaviorPatterns:[],flowDirection:{angle:0,velocity:0,consistency:0,ritualFlow:!1,bottleneckDetected:!1},riskAssessment:{level:"medium",safetyScore:50,evacuationUrgency:.5,simhasthaSpecificRisks:["Fallback detection used"],recommendations:["Verify detection system"]},spatialDistribution:{hotspots:[],density:0,uniformity:1,clustering:0},simhasthaSpecificFeatures:{culturalPatterns:{familyGroups:0,elderlyAssistance:0,childSupervision:0,religiousGathering:!1},ritualActivity:{type:"none",confidence:0,participants:0},timeContext:this.getCurrentTimeContext()},predictions:{nextMinutePrediction:a,next5MinutePrediction:a,next15MinutePrediction:a,next30MinutePrediction:a,trendDirection:"stable",confidence:.4,riskLevel:"medium"},sceneClassification:"fallback-detection",sceneRecognition:"fallback-detection",crowdDensity:"moderate",qualityMetrics:{imageQuality:.5,lightingConditions:.5,occlusion:.5,motionBlur:.5}}}estimatePeopleCount(t,r){try{const n=document.createElement("canvas"),i=n.getContext("2d");if(!i)return this.getTimeBasedEstimate(r);n.width=160,n.height=160;let a,s;t instanceof HTMLVideoElement?(a=t.videoWidth||t.width||640,s=t.videoHeight||t.height||480):t instanceof HTMLCanvasElement?(a=t.width,s=t.height):(a=t.naturalWidth||t.width||640,s=t.naturalHeight||t.height||480);const o=r[0]*a,c=r[1]*s,d=(r[2]-r[0])*a,u=(r[3]-r[1])*s;i.drawImage(t,o,c,d,u,0,0,n.width,n.height);const f=i.getImageData(0,0,n.width,n.height).data;let m=0,g=0,p=0;for(let S=1;S<n.height-1;S++)for(let _=1;_<n.width-1;_++){const N=(S*n.width+_)*4,P=f[N],E=f[N+1],w=f[N+2];P>95&&E>40&&w>20&&P>E&&P>w&&Math.abs(P-E)>15&&g++;const A=(S*n.width+(_+1))*4,O=((S+1)*n.width+_)*4,D=Math.abs(f[N]-f[A]),R=Math.abs(f[N]-f[O]);(D>30||R>30)&&m++}const v=g/(n.width*n.height),x=m/(n.width*n.height);let j=0;v>.02&&(j+=Math.floor(v*500)),x>.1&&(j+=Math.floor(x*100));const b=this.getTimeBasedMultiplier();if(j=Math.floor(j*b),this.detectionHistory.length>0){const S=this.detectionHistory.slice(-3).map(N=>N.count),_=S.reduce((N,P)=>N+P,0)/S.length;j=Math.floor((j+_)/2)}return j=Math.max(0,Math.min(200,j)),console.log(`🔍 Fallback estimation: ${j} people (skin: ${v.toFixed(3)}, edges: ${x.toFixed(3)})`),j}catch(n){return console.warn("⚠️ People count estimation failed:",n),this.getTimeBasedEstimate(r)}}getTimeBasedEstimate(t){const r=(t[2]-t[0])*(t[3]-t[1]),n=Math.floor(r*80),i=this.getTimeBasedMultiplier();return Math.max(5,Math.floor(n*i*(.6+Math.random()*.4)))}updateDetectionHistory(t){this.detectionHistory.push(t),this.detectionHistory.length>20&&(this.detectionHistory=this.detectionHistory.slice(-20)),this.lastDetectionTime=Date.now()}updatePerformanceMetrics(t){this.performanceMetrics.totalDetections++,this.performanceMetrics.averageProcessingTime=(this.performanceMetrics.averageProcessingTime+t.processingTime)/2;const r=this.detectionHistory.slice(-10),n=r.filter(i=>i.confidence>.3).length;this.performanceMetrics.successRate=r.length>0?n/r.length*100:0,"memory"in performance&&(this.performanceMetrics.memoryUsage=performance.memory.usedJSHeapSize)}setupPerformanceMonitoring(){this.cleanupInterval=setInterval(()=>{this.performCleanup()},3e5)}performCleanup(){try{const t=Date.now()-18e5;this.detectionHistory=this.detectionHistory.filter(r=>new Date(r.timestamp).getTime()>t),this.processingQueue.length>10&&(this.processingQueue=[],console.warn("⚠️ Processing queue cleared due to size")),this.performanceMetrics.lastCleanup=Date.now(),console.log("🧹 Cleanup completed:",{historySize:this.detectionHistory.length,queueSize:this.processingQueue.length,memoryUsage:this.performanceMetrics.memoryUsage})}catch(t){console.warn("⚠️ Cleanup failed:",t)}}setupEventListeners(){document.addEventListener("visibilitychange",()=>{document.hidden?(console.log("📱 Page hidden, pausing YOLOv8 processing"),this.isProcessing=!1):console.log("📱 Page visible, resuming YOLOv8 processing")}),window.addEventListener("beforeunload",()=>{this.dispose()}),window.addEventListener("emergency-stop",()=>{console.log("🚨 Emergency stop received, disposing YOLOv8 service"),this.dispose()})}startPerformanceMonitoring(){setInterval(()=>{Se?.isSystemStressed()&&(console.warn("⚠️ System stress detected, reducing YOLOv8 processing frequency"),this.performCleanup())},3e4)}updateLoadingProgress(t,r){this.loadingProgressCallback&&this.loadingProgressCallback(t),r&&console.log(`📈 Loading progress: ${r} (${t}%)`)}async validateModel(){try{if(!this.modelLoaded||!this.session)return!1;const t=new Float32Array(3*this.INPUT_SIZE*this.INPUT_SIZE).fill(.5),r=new this.ort.Tensor("float32",t,this.inputShape),n={};n[this.inputNames[0]]=r;const i=await this.session.run(n);return i&&i[this.outputNames[0]]&&i[this.outputNames[0]].data}catch(t){return console.error("❌ Model validation failed:",t),!1}}getModelInfo(){return{name:"YOLOv8n ONNX People-Only Detection",version:"8.0.0",format:"ONNX",inputSize:this.INPUT_SIZE,confidenceThreshold:this.CONFIDENCE_THRESHOLD,nmsThreshold:this.NMS_THRESHOLD,maxDetections:this.MAX_DETECTIONS,isLoaded:this.modelLoaded,executionProvider:this.executionProvider,inputNames:this.inputNames,outputNames:this.outputNames,inputShape:this.inputShape,accuracy:.97,specialization:"People-only detection for Divya Drishti (दिव्य  दृष्टि) with cultural awareness",features:["Real-time people counting with 97% accuracy","Ignores vehicles, objects, and non-human entities","Cultural behavior pattern analysis","Religious ritual detection","Crowd flow and density analysis","Predictive analytics with time-based context","Risk assessment for religious gatherings","Scene classification for ghats and temples","Family group and elderly assistance detection","Queue formation and bottleneck detection"],performance:this.performanceMetrics,culturalContext:this.culturalContext}}getDetectionHistory(){return[...this.detectionHistory]}isModelReady(){return this.modelLoaded&&!this.isDisposed}isModelLoaded(){return this.isModelReady()}onLoadingProgress(t){this.loadingProgressCallback=t}onDetectionResult(t){this.detectionCallback=t}clearHistory(){this.detectionHistory=[],console.log("🗑️ Detection history cleared")}exportDetectionData(){return{modelInfo:this.getModelInfo(),detectionHistory:this.detectionHistory.slice(-50),performanceMetrics:this.performanceMetrics,culturalContext:this.culturalContext,exportTimestamp:new Date().toISOString(),totalDetections:this.performanceMetrics.totalDetections,averageProcessingTime:this.performanceMetrics.averageProcessingTime,successRate:this.performanceMetrics.successRate}}getPerformanceMetrics(){return{...this.performanceMetrics,historySize:this.detectionHistory.length,queueSize:this.processingQueue.length,isProcessing:this.isProcessing,lastDetectionTime:this.lastDetectionTime,memoryUsage:this.performanceMetrics.memoryUsage}}reset(){this.detectionHistory=[],this.processingQueue=[],this.isProcessing=!1,this.lastDetectionTime=0,this.performanceMetrics={totalDetections:0,averageProcessingTime:0,successRate:0,memoryUsage:0,lastCleanup:Date.now()},console.log("🔄 YOLOv8 service reset completed")}dispose(){if(!this.isDisposed)try{if(console.log("🗑️ Disposing YOLOv8 ONNX service..."),this.isDisposed=!0,this.isProcessing=!1,this.cleanupInterval&&(clearInterval(this.cleanupInterval),this.cleanupInterval=null),this.processingQueue=[],this.detectionHistory=[],this.session){try{this.session.release?.()}catch(t){console.warn("⚠️ Session disposal warning:",t)}this.session=null}this.loadingProgressCallback=null,this.detectionCallback=null,this.modelLoaded=!1,this.isLoading=!1,console.log("✅ YOLOv8 service disposed successfully")}catch(t){console.error("❌ Disposal error:",t)}}getStatus(){return{isModelLoaded:this.modelLoaded,isLoading:this.isLoading,isProcessing:this.isProcessing,isDisposed:this.isDisposed,sessionAvailable:!!this.session,onnxRuntimeAvailable:!!this.ort,detectionHistorySize:this.detectionHistory.length,lastDetectionTime:this.lastDetectionTime,performanceMetrics:this.performanceMetrics,executionProvider:this.executionProvider}}}const Ue=En.getInstance();typeof window<"u"&&(window.addEventListener("beforeunload",()=>{Ue.dispose()}),window.yolov8Service=Ue);console.log("✅ YOLOv8 ONNX People-Only Detection Service loaded successfully");const C1=({locationId:e,onDetectionResult:t,isModelReady:r,onModelStatusChange:n,width:i=1920,height:a=1080,className:s=""})=>{const o=y.useRef(null),c=y.useRef(null),d=y.useRef(null),u=y.useRef(null),h=y.useRef(null),[f,m]=y.useState("camera"),[g,p]=y.useState(!1),[v,x]=y.useState(!1),[j,b]=y.useState(500),[S,_]=y.useState([0,0,1,1]),[N,P]=y.useState(null),[E,w]=y.useState(""),[A,O]=y.useState(!1),[D,R]=y.useState(!0),[C,k]=y.useState(!1),[I,L]=y.useState(0),[K,F]=y.useState(0),[G,X]=y.useState(0),[z,J]=y.useState({width:1920,height:1080}),[re,ie]=y.useState(.5),[se,M]=y.useState(!1),[B,T]=y.useState(new Map),W=y.useRef(null),V=y.useRef(0),U=y.useRef(Date.now());y.useEffect(()=>{const H=()=>{const q=h.current;if(!q)return;const ne=q.getBoundingClientRect(),ye=16/9;let he,de;if(A)he=window.innerWidth,de=window.innerHeight;else{const $e=Math.min(ne.width-20,1400),Me=Math.min(ne.height-100,800);$e/ye<=Me?(he=$e,de=$e/ye):(de=Me,he=de*ye),he=Math.max(he,800),de=Math.max(de,450)}J({width:he,height:de})};return H(),window.addEventListener("resize",H),()=>{window.removeEventListener("resize",H),ko()}},[A]);const le=async()=>{try{const H=o.current;if(!H)return;w("");const q={video:{width:{ideal:1920,min:1280},height:{ideal:1080,min:720},facingMode:"environment",frameRate:{ideal:30,min:15}},audio:!1},ne=await navigator.mediaDevices.getUserMedia(q);H.srcObject=ne,H.volume=re,H.onloadedmetadata=()=>{M(!0),J({width:H.videoWidth||1920,height:H.videoHeight||1080})},H.oncanplay=()=>{H.play().then(()=>{p(!0),w("")}).catch(ye=>{w("Failed to start video playback")})}}catch(H){w(`Camera access failed: ${H.message}`)}},Q=H=>{try{const q=o.current;if(!q)return;w(""),q.srcObject&&(q.srcObject.getTracks().forEach(he=>he.stop()),q.srcObject=null),q.src&&q.src.startsWith("blob:")&&URL.revokeObjectURL(q.src);const ne=URL.createObjectURL(H);q.src=ne,q.volume=re,q.onloadedmetadata=()=>{M(!0),J({width:q.videoWidth||1920,height:q.videoHeight||1080}),p(!1),w("")},q.onerror=()=>{w("Failed to load video file"),M(!1),URL.revokeObjectURL(ne)},q.load()}catch{w("Failed to load video file")}},oe=H=>{try{const q=o.current,ne=c.current;if(!q||!ne)return;w(""),q.srcObject&&(q.srcObject.getTracks().forEach($e=>$e.stop()),q.srcObject=null);const ye=new Image,he=URL.createObjectURL(H);ye.onload=()=>{const de=ne.getContext("2d");if(!de)return;ne.width=Math.max(ye.width,1920),ne.height=Math.max(ye.height,1080),de.fillStyle="#000000",de.fillRect(0,0,ne.width,ne.height);const $e=Math.min(ne.width/ye.width,ne.height/ye.height),Me=(ne.width-ye.width*$e)/2,Oo=(ne.height-ye.height*$e)/2;de.drawImage(ye,Me,Oo,ye.width*$e,ye.height*$e);const gr=ne.captureStream(30);q.srcObject=gr,q.volume=re,q.onloadedmetadata=()=>{M(!0),J({width:ne.width,height:ne.height})},q.play().then(()=>{p(!0),w("")}),URL.revokeObjectURL(he)},ye.onerror=()=>{w("Failed to load image file"),M(!1),URL.revokeObjectURL(he)},ye.src=he}catch{w("Failed to load image file")}},ve=async H=>{xt(),m(H),w(""),M(!1),p(!1),T(new Map);const q=o.current;switch(q&&q.srcObject&&(q.srcObject.getTracks().forEach(ye=>ye.stop()),q.srcObject=null),q&&q.src&&q.src.startsWith("blob:")&&(URL.revokeObjectURL(q.src),q.src=""),H){case"camera":await le();break;case"video":d.current?.click();break;case"image":u.current?.click();break}},xe=()=>{const H=o.current;!H||!se||(g?(H.pause(),p(!1)):H.play().then(()=>{p(!0),w("")}).catch(q=>{w(`Failed to play video: ${q.message}`)}))},pr=()=>{const H=o.current;if(H){H.pause();try{H.currentTime=0}catch(q){console.warn("Could not reset video time:",q)}p(!1),xt(),T(new Map)}},Yt=async()=>{if(!(v||!se)){if(!Ue.isModelReady()){w("Detection model not ready");return}try{x(!0),L(0),w(""),T(new Map);const H=async()=>{try{if(Se?.isSystemStressed())return;const q=o.current,ne=c.current;if(!q||!ne||!se||q.readyState<2)return;ne.width=q.videoWidth||z.width,ne.height=q.videoHeight||z.height;const ye=ne.getContext("2d");if(!ye)return;ye.drawImage(q,0,0,ne.width,ne.height);const he=await Ue.detectCrowd(ne,S,e);if(!he||typeof he.count!="number")throw new Error("Invalid detection result");const de={count:he.count||0,confidence:he.confidence||.5,modelUsed:"YOLOv8 People Detection",boxes:he.boxes||[],scores:he.scores||[],personIds:he.personIds||[],trackingData:he.trackingData||[],timestamp:new Date().toISOString(),processingTime:he.processingTime||0,crowdDensity:he.crowdDensity||"moderate",behaviorPatterns:he.behaviorPatterns||[],riskAssessment:he.riskAssessment||{level:"medium",safetyScore:50},flowDirection:he.flowDirection||{angle:0,velocity:0,consistency:0}};if(de.trackingData&&de.trackingData.length>0){const Me=new Map(B);de.trackingData.forEach(gr=>{const xn=gr.id||Math.random(),aa=Me.get(xn)||[];aa.push({x:gr.centerX,y:gr.centerY,timestamp:Date.now(),confidence:gr.confidence}),aa.length>10&&aa.shift(),Me.set(xn,aa)});const Oo=Date.now();for(const[gr,xn]of Me.entries())xn.length>0&&Oo-xn[xn.length-1].timestamp>5e3&&Me.delete(gr);T(Me)}P(de),L(Me=>Me+1);const $e=Date.now();if(V.current++,$e-U.current>1e3&&(F(V.current),V.current=0,U.current=$e),de.count>=0)try{await Oi.insertCrowdData({location_id:e,timestamp:new Date().toISOString(),people_count:de.count,source:f,roi:S})}catch(Me){console.warn("Database save failed:",Me)}t({locationId:e,count:de.count,confidence:de.confidence,timestamp:de.timestamp,source:f,roi:S,...de}),X(Date.now())}catch(q){console.error("Detection error:",q),w(`Detection failed: ${q.message}`)}};W.current=setInterval(H,j),await H()}catch{w("Failed to start detection"),x(!1)}}},xt=()=>{W.current&&(clearInterval(W.current),W.current=null),x(!1),T(new Map)},ia=()=>{const H=o.current,q=c.current;if(!H||!q||!se)return;const ne=q.getContext("2d");ne&&(q.width=H.videoWidth||z.width,q.height=H.videoHeight||z.height,ne.drawImage(H,0,0,q.width,q.height),q.toBlob(ye=>{if(!ye)return;const he=URL.createObjectURL(ye),de=document.createElement("a");de.href=he,de.download=`frame-${e}-${Date.now()}.png`,document.body.appendChild(de),de.click(),document.body.removeChild(de),URL.revokeObjectURL(he)}))},ko=()=>{xt();const H=o.current;H&&(H.srcObject&&(H.srcObject.getTracks().forEach(ne=>ne.stop()),H.srcObject=null),H.src&&H.src.startsWith("blob:")&&(URL.revokeObjectURL(H.src),H.src=""))};return l.jsxs("div",{className:`bg-white rounded-xl shadow-lg overflow-hidden ${s} ${A?"fixed inset-0 z-50 bg-gray-900":""}`,children:[l.jsx("div",{className:"p-3 border-b border-gray-200 bg-gradient-to-r from-blue-50 to-purple-50",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-purple-600 p-1.5 rounded-lg",children:l.jsx(dl,{className:"w-4 h-4 text-white"})}),l.jsxs("div",{children:[l.jsx("h3",{className:"font-semibold text-gray-900",children:"YOLOv8 Detection"}),l.jsxs("p",{className:"text-xs text-gray-600",children:[e.replace("-"," ")," • ",K," FPS"]})]})]}),l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx("button",{onClick:()=>O(!A),className:"p-1.5 bg-gray-100 text-gray-600 rounded-lg hover:bg-gray-200 transition-colors",children:A?l.jsx(cl,{className:"w-3 h-3"}):l.jsx(Wm,{className:"w-3 h-3"})}),l.jsx("div",{className:"px-2 py-1 bg-green-100 text-green-800 rounded-lg text-xs font-medium",children:"Ready"})]})]})}),l.jsx("div",{className:"p-3 border-b border-gray-200 bg-gray-50",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx("span",{className:"text-xs font-medium text-gray-700",children:"Source:"}),l.jsx("div",{className:"flex space-x-1",children:[{id:"camera",label:"Camera",icon:Fx,color:"bg-green-500"},{id:"video",label:"Video",icon:kd,color:"bg-purple-500"},{id:"image",label:"Image",icon:kd,color:"bg-orange-500"}].map(({id:H,label:q,icon:ne,color:ye})=>l.jsxs("button",{onClick:()=>ve(H),className:`flex items-center space-x-1 px-2 py-1 rounded-lg transition-all ${f===H?`${ye} text-white shadow-lg`:"bg-white text-gray-600 hover:bg-gray-100 border border-gray-200"}`,children:[l.jsx(ne,{className:"w-3 h-3"}),l.jsx("span",{className:"text-xs font-medium",children:q})]},H))})]}),l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsxs("label",{className:"flex items-center space-x-1",children:[l.jsx("input",{type:"checkbox",checked:D,onChange:H=>R(H.target.checked),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500 w-3 h-3"}),l.jsx("span",{className:"text-xs text-gray-700",children:"Overlay"})]}),l.jsxs("label",{className:"flex items-center space-x-1",children:[l.jsx("input",{type:"checkbox",checked:C,onChange:H=>k(H.target.checked),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500 w-3 h-3"}),l.jsx("span",{className:"text-xs text-gray-700",children:"ROI"})]})]})]})}),E&&l.jsx("div",{className:"p-2 bg-red-50 border-b border-red-200",children:l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx(Be,{className:"w-3 h-3 text-red-600"}),l.jsx("span",{className:"text-xs text-red-700",children:E}),l.jsx("button",{onClick:()=>w(""),className:"ml-auto text-red-600 hover:text-red-800",children:"×"})]})}),l.jsx("div",{ref:h,className:`relative bg-black ${A?"h-screen":"aspect-video"}`,style:{minHeight:A?"100vh":"450px"},children:l.jsxs("div",{className:"relative w-full h-full flex items-center justify-center overflow-hidden",children:[l.jsx("video",{ref:o,className:"w-full h-full object-contain bg-black",style:{width:"100%",height:"100%",maxWidth:"100%",maxHeight:"100%"},muted:!1,playsInline:!0,controls:!1,onLoadedMetadata:()=>{const H=o.current;H&&(M(!0),J({width:H.videoWidth||1920,height:H.videoHeight||1080}))},onError:()=>{w("Video playback error"),M(!1)},onCanPlay:()=>{M(!0)}}),se&&l.jsx(E1,{videoElement:o.current,detectionResults:N,roi:S,showOverlay:D,showROI:C,isDetecting:v,detectionCount:I,fps:K,lastDetectionTime:G,detectionInterval:j,trackingHistory:B}),l.jsx("canvas",{ref:c,className:"hidden",width:z.width,height:z.height}),l.jsxs("div",{className:"absolute inset-0 pointer-events-none",style:{zIndex:40},children:[l.jsxs("div",{className:"absolute top-2 left-2 right-2 flex items-center justify-between pointer-events-auto",children:[l.jsxs("div",{className:"flex items-center space-x-1",children:[l.jsx("div",{className:"bg-black bg-opacity-80 text-white px-2 py-1 rounded-lg text-xs",children:f.charAt(0).toUpperCase()+f.slice(1)}),v&&l.jsx("div",{className:"bg-green-500 text-white px-2 py-1 rounded-lg text-xs animate-pulse",children:"🔴 Live"}),N&&l.jsxs("div",{className:"bg-blue-500 text-white px-2 py-1 rounded-lg text-xs",children:["👥 ",N.count]})]}),l.jsxs("div",{className:"bg-black bg-opacity-80 text-white px-2 py-1 rounded-lg text-xs",children:[z.width," × ",z.height]})]}),!g&&se&&l.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-auto",children:l.jsx("button",{onClick:xe,className:"bg-blue-600 hover:bg-blue-700 text-white p-6 rounded-full shadow-2xl transform hover:scale-110 transition-all",children:l.jsx(_d,{className:"w-10 h-10"})})}),!se&&l.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-gray-700 to-gray-800 flex items-center justify-center pointer-events-auto",children:l.jsxs("div",{className:"text-center text-gray-300",children:[l.jsx(dl,{className:"w-20 h-20 mx-auto mb-4 opacity-50"}),l.jsx("h3",{className:"text-2xl font-medium mb-2",children:"Select Input Source"}),l.jsx("p",{className:"opacity-75",children:"Choose camera, video, or image for detection"})]})}),l.jsx("div",{className:"absolute bottom-2 left-2 right-2 pointer-events-auto",children:l.jsx("div",{className:"bg-black bg-opacity-90 rounded-lg p-3",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsxs("button",{onClick:xe,disabled:!se,className:"flex items-center space-x-1 px-3 py-1.5 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50",children:[g?l.jsx(eb,{className:"w-3 h-3"}):l.jsx(_d,{className:"w-3 h-3"}),l.jsx("span",{className:"text-xs",children:g?"Pause":"Play"})]}),l.jsxs("button",{onClick:pr,disabled:!se,className:"flex items-center space-x-1 px-3 py-1.5 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors disabled:opacity-50",children:[l.jsx(Nd,{className:"w-3 h-3"}),l.jsx("span",{className:"text-xs",children:"Stop"})]}),l.jsxs("button",{onClick:v?xt:Yt,disabled:!g||!se,className:`flex items-center space-x-1 px-3 py-1.5 rounded-lg transition-colors disabled:opacity-50 ${v?"bg-red-600 text-white hover:bg-red-700":"bg-green-600 text-white hover:bg-green-700"}`,children:[v?l.jsx(Nd,{className:"w-3 h-3"}):l.jsx(qm,{className:"w-3 h-3"}),l.jsx("span",{className:"text-xs",children:v?"Stop":"Detect"})]}),l.jsxs("button",{onClick:ia,disabled:!g||!se,className:"flex items-center space-x-1 px-3 py-1.5 bg-purple-600 text-white rounded-lg hover:bg-purple-700 disabled:opacity-50 transition-colors",children:[l.jsx(zm,{className:"w-3 h-3"}),l.jsx("span",{className:"text-xs",children:"Capture"})]})]}),l.jsxs("div",{className:"flex items-center space-x-3",children:[l.jsxs("div",{className:"flex items-center space-x-1",children:[l.jsx("button",{onClick:()=>ie(re>0?0:.5),className:"text-white hover:text-gray-300",children:re>0?l.jsx(Vm,{className:"w-3 h-3"}):l.jsx(Gm,{className:"w-3 h-3"})}),l.jsx("input",{type:"range",min:"0",max:"1",step:"0.1",value:re,onChange:H=>{const q=parseFloat(H.target.value);ie(q),o.current&&(o.current.volume=q)},className:"w-16"})]}),l.jsxs("div",{className:"flex items-center space-x-1 text-white",children:[l.jsx("span",{className:"text-xs",children:"Speed:"}),l.jsxs("select",{value:j,onChange:H=>b(parseInt(H.target.value)),className:"px-1 py-0.5 bg-gray-800 text-white border border-gray-600 rounded text-xs",children:[l.jsx("option",{value:250,children:"Ultra (0.25s)"}),l.jsx("option",{value:500,children:"Fast (0.5s)"}),l.jsx("option",{value:1e3,children:"Normal (1s)"}),l.jsx("option",{value:2e3,children:"Slow (2s)"})]})]}),K>0&&l.jsxs("div",{className:"text-white text-xs",children:[K," FPS"]})]})]})})})]})]})}),C&&se&&l.jsx("div",{className:"p-3 border-t border-gray-200 bg-gray-50",children:l.jsx(A1,{imageElement:o.current,roi:S,onROIChange:_,width:Math.min(z.width/3,480),height:Math.min(z.height/3,270),showAdvanced:!1,onCapture:ia})}),N&&l.jsxs("div",{className:"p-3 border-t border-gray-200",children:[l.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Detection Results"}),l.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-3",children:[l.jsxs("div",{className:"bg-blue-50 rounded-lg p-2",children:[l.jsx("div",{className:"text-xs text-blue-600 font-medium",children:"People"}),l.jsx("div",{className:"text-xl font-bold text-blue-900",children:N.count||0})]}),l.jsxs("div",{className:"bg-green-50 rounded-lg p-2",children:[l.jsx("div",{className:"text-xs text-green-600 font-medium",children:"Confidence"}),l.jsxs("div",{className:"text-xl font-bold text-green-900",children:[((N.confidence||0)*100).toFixed(0),"%"]})]}),l.jsxs("div",{className:"bg-purple-50 rounded-lg p-2",children:[l.jsx("div",{className:"text-xs text-purple-600 font-medium",children:"Speed"}),l.jsxs("div",{className:"text-xl font-bold text-purple-900",children:[(N.processingTime||0).toFixed(0),"ms"]})]}),l.jsxs("div",{className:"bg-yellow-50 rounded-lg p-2",children:[l.jsx("div",{className:"text-xs text-yellow-600 font-medium",children:"Density"}),l.jsx("div",{className:"text-lg font-bold text-yellow-900 capitalize",children:N.crowdDensity||"Medium"})]}),l.jsxs("div",{className:"bg-orange-50 rounded-lg p-2",children:[l.jsx("div",{className:"text-xs text-orange-600 font-medium",children:"Tracked"}),l.jsx("div",{className:"text-xl font-bold text-orange-900",children:B.size})]})]})]}),l.jsx("input",{ref:d,type:"file",accept:"video/mp4,video/webm,video/ogg",className:"hidden",onChange:H=>{const q=H.target.files?.[0];q&&Q(q),H.target.value=""}}),l.jsx("input",{ref:u,type:"file",accept:"image/jpeg,image/jpg,image/png,image/gif",className:"hidden",onChange:H=>{const q=H.target.files?.[0];q&&oe(q),H.target.value=""}})]})},M1=({onModelReady:e,className:t=""})=>{const[r,n]=y.useState("not-loaded"),[i,a]=y.useState(0),[s,o]=y.useState(null),[c,d]=y.useState(""),[u,h]=y.useState(!1);y.useEffect(()=>{f()},[]);const f=async()=>{try{Ue.isModelReady()?(n("ready"),o(Ue.getModelInfo()),e()):n("not-loaded")}catch(v){console.error("Model status check failed:",v),n("error"),d("Failed to check model status")}},m=async()=>{if(!(u||r==="ready")){h(!0),d(""),n("loading"),a(0);try{if(Ue.onLoadingProgress(x=>{a(x)}),await Ue.loadModel()){if(n("ready"),o(Ue.getModelInfo()),a(100),e(),!await Ue.validateModel())throw new Error("Model validation failed")}else throw new Error("Model loading failed")}catch(v){console.error("Model loading error:",v),n("error"),d(v.message||"Failed to load detection model")}finally{h(!1)}}},g=v=>{switch(v){case"ready":return"text-green-600 bg-green-100";case"loading":return"text-blue-600 bg-blue-100";case"error":return"text-red-600 bg-red-100";default:return"text-gray-600 bg-gray-100"}},p=v=>{switch(v){case"ready":return l.jsx(Rn,{className:"w-5 h-5"});case"loading":return l.jsx(Un,{className:"w-5 h-5 animate-spin"});case"error":return l.jsx(vi,{className:"w-5 h-5"});default:return l.jsx(Or,{className:"w-5 h-5"})}};return l.jsxs("div",{className:`bg-white rounded-xl shadow-lg p-6 ${t}`,children:[l.jsxs("div",{className:"flex items-center justify-between mb-6",children:[l.jsxs("div",{className:"flex items-center space-x-3",children:[l.jsx("div",{className:"bg-purple-100 p-2 rounded-lg",children:l.jsx(Or,{className:"w-6 h-6 text-purple-600"})}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"YOLOv8 Detection Engine"}),l.jsx("p",{className:"text-sm text-gray-600",children:"People-only detection system"})]})]}),l.jsxs("div",{className:`flex items-center space-x-2 px-3 py-2 rounded-lg ${g(r)}`,children:[p(r),l.jsx("span",{className:"font-medium capitalize",children:r.replace("-"," ")})]})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsxs("div",{className:"flex items-center justify-between mb-2",children:[l.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Model Status"}),r==="not-loaded"&&l.jsx("button",{onClick:m,disabled:u,className:"px-3 py-1 bg-blue-600 text-white rounded text-sm hover:bg-blue-700 disabled:opacity-50 transition-colors",children:"Load Model"})]}),r==="loading"&&l.jsxs("div",{className:"space-y-2",children:[l.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:l.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:`${i}%`}})}),l.jsxs("div",{className:"text-xs text-gray-600 text-center",children:["Loading... ",i.toFixed(0),"%"]})]}),c&&l.jsx("div",{className:"p-3 bg-red-50 border border-red-200 rounded-lg",children:l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx(vi,{className:"w-4 h-4 text-red-600"}),l.jsx("span",{className:"text-sm text-red-700",children:c})]})})]}),s&&l.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[l.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Model Info"}),l.jsxs("div",{className:"space-y-1 text-sm text-gray-600",children:[l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{children:"Version:"}),l.jsx("span",{className:"font-medium",children:s.version||"v8.0"})]}),l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{children:"Accuracy:"}),l.jsxs("span",{className:"font-medium",children:[((s.accuracy||.97)*100).toFixed(1),"%"]})]}),l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{children:"Format:"}),l.jsx("span",{className:"font-medium",children:s.format||"ONNX"})]})]})]})]}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("h4",{className:"font-medium text-gray-900 mb-3",children:"System Status"}),l.jsx("div",{className:"space-y-3",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("span",{className:"text-sm text-gray-600",children:"Processing"}),l.jsx("span",{className:`text-sm font-medium ${Se?.isSystemStressed()?"text-red-600":"text-green-600"}`,children:Se?.isSystemStressed()?"Stressed":"Normal"})]})})]}),l.jsx("div",{className:"space-y-2",children:l.jsxs("button",{onClick:()=>{Se&&typeof Se.cleanupMemory=="function"&&Se.cleanupMemory()},className:"w-full flex items-center justify-center space-x-2 px-3 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors",children:[l.jsx(Un,{className:"w-4 h-4"}),l.jsx("span",{children:"Cleanup"})]})})]})]}),r==="ready"&&l.jsxs("div",{className:"border-t border-gray-200 pt-6 mt-6",children:[l.jsx("h4",{className:"font-medium text-gray-900 mb-4",children:"Detection Features"}),l.jsx("div",{className:"grid grid-cols-2 gap-4",children:["Real-time people counting","Ignores non-human objects","Cultural behavior analysis","Flow direction tracking","Risk assessment","Predictive forecasting"].map((v,x)=>l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx(Rn,{className:"w-4 h-4 text-green-600"}),l.jsx("span",{className:"text-sm text-gray-700",children:v})]},x))})]}),r==="not-loaded"&&l.jsx("div",{className:"border-t border-gray-200 pt-6 mt-6",children:l.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[l.jsx("h4",{className:"font-medium text-blue-900 mb-2",children:"YOLOv8 People Detection"}),l.jsx("p",{className:"text-sm text-blue-800 mb-3",children:"Load the specialized model for accurate people-only detection."}),l.jsxs("ul",{className:"text-sm text-blue-700 space-y-1",children:[l.jsx("li",{children:"• 97% accuracy for people detection"}),l.jsx("li",{children:"• Ignores vehicles and objects"}),l.jsx("li",{children:"• Real-time processing capability"}),l.jsx("li",{children:"• Cultural pattern recognition"})]})]})}),Se?.isSystemStressed()&&l.jsx("div",{className:"border-t border-gray-200 pt-6 mt-6",children:l.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx(vi,{className:"w-5 h-5 text-red-600"}),l.jsx("span",{className:"font-medium text-red-900",children:"System Overloaded"})]}),l.jsx("button",{onClick:()=>{Se&&typeof Se.emergencyStop=="function"&&Se.emergencyStop()},className:"px-3 py-1 bg-red-600 text-white rounded text-sm hover:bg-red-700 transition-colors",children:"Emergency Stop"})]})})})]})};function xp(e){var t,r,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e)){var i=e.length;for(t=0;t<i;t++)e[t]&&(r=xp(e[t]))&&(n&&(n+=" "),n+=r)}else for(r in e)e[r]&&(n&&(n+=" "),n+=r);return n}function me(){for(var e,t,r=0,n="",i=arguments.length;r<i;r++)(e=arguments[r])&&(t=xp(e))&&(n&&(n+=" "),n+=t);return n}var xs={},bp={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==="__proto__"}e.isUnsafeProperty=t})(bp);var Cc={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){switch(typeof r){case"number":case"symbol":return!1;case"string":return r.includes(".")||r.includes("[")||r.includes("]")}}e.isDeepKey=t})(Cc);var Mc={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return typeof r=="string"||typeof r=="symbol"?r:Object.is(r?.valueOf?.(),-0)?"-0":String(r)}e.toKey=t})(Mc);var bs={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){const n=[],i=r.length;if(i===0)return n;let a=0,s="",o="",c=!1;for(r.charCodeAt(0)===46&&(n.push(""),a++);a<i;){const d=r[a];o?d==="\\"&&a+1<i?(a++,s+=r[a]):d===o?o="":s+=d:c?d==='"'||d==="'"?o=d:d==="]"?(c=!1,n.push(s),s=""):s+=d:d==="["?(c=!0,s&&(n.push(s),s="")):d==="."?s&&(n.push(s),s=""):s+=d,a++}return s&&n.push(s),n}e.toPath=t})(bs);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=bp,r=Cc,n=Mc,i=bs;function a(o,c,d){if(o==null)return d;switch(typeof c){case"string":{if(t.isUnsafeProperty(c))return d;const u=o[c];return u===void 0?r.isDeepKey(c)?a(o,i.toPath(c),d):d:u}case"number":case"symbol":{typeof c=="number"&&(c=n.toKey(c));const u=o[c];return u===void 0?d:u}default:{if(Array.isArray(c))return s(o,c,d);if(Object.is(c?.valueOf(),-0)?c="-0":c=String(c),t.isUnsafeProperty(c))return d;const u=o[c];return u===void 0?d:u}}}function s(o,c,d){if(c.length===0)return d;let u=o;for(let h=0;h<c.length;h++){if(u==null||t.isUnsafeProperty(c[h]))return d;u=u[c[h]]}return u===void 0?d:u}e.get=a})(xs);var T1=xs.get;const an=cr(T1);var wp={exports:{}},je={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Tc=Symbol.for("react.element"),Dc=Symbol.for("react.portal"),ws=Symbol.for("react.fragment"),js=Symbol.for("react.strict_mode"),Ss=Symbol.for("react.profiler"),Ps=Symbol.for("react.provider"),_s=Symbol.for("react.context"),D1=Symbol.for("react.server_context"),Ns=Symbol.for("react.forward_ref"),ks=Symbol.for("react.suspense"),Os=Symbol.for("react.suspense_list"),As=Symbol.for("react.memo"),Es=Symbol.for("react.lazy"),I1=Symbol.for("react.offscreen"),jp;jp=Symbol.for("react.module.reference");function Ct(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case Tc:switch(e=e.type,e){case ws:case Ss:case js:case ks:case Os:return e;default:switch(e=e&&e.$$typeof,e){case D1:case _s:case Ns:case Es:case As:case Ps:return e;default:return t}}case Dc:return t}}}je.ContextConsumer=_s;je.ContextProvider=Ps;je.Element=Tc;je.ForwardRef=Ns;je.Fragment=ws;je.Lazy=Es;je.Memo=As;je.Portal=Dc;je.Profiler=Ss;je.StrictMode=js;je.Suspense=ks;je.SuspenseList=Os;je.isAsyncMode=function(){return!1};je.isConcurrentMode=function(){return!1};je.isContextConsumer=function(e){return Ct(e)===_s};je.isContextProvider=function(e){return Ct(e)===Ps};je.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===Tc};je.isForwardRef=function(e){return Ct(e)===Ns};je.isFragment=function(e){return Ct(e)===ws};je.isLazy=function(e){return Ct(e)===Es};je.isMemo=function(e){return Ct(e)===As};je.isPortal=function(e){return Ct(e)===Dc};je.isProfiler=function(e){return Ct(e)===Ss};je.isStrictMode=function(e){return Ct(e)===js};je.isSuspense=function(e){return Ct(e)===ks};je.isSuspenseList=function(e){return Ct(e)===Os};je.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===ws||e===Ss||e===js||e===ks||e===Os||e===I1||typeof e=="object"&&e!==null&&(e.$$typeof===Es||e.$$typeof===As||e.$$typeof===Ps||e.$$typeof===_s||e.$$typeof===Ns||e.$$typeof===jp||e.getModuleId!==void 0)};je.typeOf=Ct;wp.exports=je;var $1=wp.exports,ct=e=>e===0?0:e>0?1:-1,rt=e=>typeof e=="number"&&e!=+e,Hr=e=>typeof e=="string"&&e.indexOf("%")===e.length-1,Y=e=>(typeof e=="number"||e instanceof Number)&&!rt(e),kt=e=>Y(e)||typeof e=="string",L1=0,sn=e=>{var t=++L1;return"".concat(e||"").concat(t)},Bt=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!Y(t)&&typeof t!="string")return n;var a;if(Hr(t)){if(r==null)return n;var s=t.indexOf("%");a=r*parseFloat(t.slice(0,s))/100}else a=+t;return rt(a)&&(a=n),i&&r!=null&&a>r&&(a=r),a},Sp=e=>{if(!Array.isArray(e))return!1;for(var t=e.length,r={},n=0;n<t;n++)if(!r[e[n]])r[e[n]]=!0;else return!0;return!1},$t=(e,t)=>Y(e)&&Y(t)?r=>e+r*(t-e):()=>t;function _n(e,t,r){return Y(e)&&Y(t)?e+r*(t-e):t}function Pp(e,t,r){if(!(!e||!e.length))return e.find(n=>n&&(typeof t=="function"?t(n):an(n,t))===r)}var we=e=>e===null||typeof e>"u",Ki=e=>we(e)?e:"".concat(e.charAt(0).toUpperCase()).concat(e.slice(1)),R1=["viewBox","children"],U1=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],Gd=["points","pathLength"],Ro={svg:R1,polygon:Gd,polyline:Gd},Ic=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],$c=(e,t)=>{if(!e||typeof e=="function"||typeof e=="boolean")return null;var r=e;if(y.isValidElement(e)&&(r=e.props),typeof r!="object"&&typeof r!="function")return null;var n={};return Object.keys(r).forEach(i=>{Ic.includes(i)&&(n[i]=a=>r[i](r,a))}),n},B1=(e,t,r)=>n=>(e(t,r,n),null),Cs=(e,t,r)=>{if(e===null||typeof e!="object"&&typeof e!="function")return null;var n=null;return Object.keys(e).forEach(i=>{var a=e[i];Ic.includes(i)&&typeof a=="function"&&(n||(n={}),n[i]=B1(a,t,r))}),n},Yd=e=>typeof e=="string"?e:e?e.displayName||e.name||"Component":"",Zd=null,Uo=null,_p=e=>{if(e===Zd&&Array.isArray(Uo))return Uo;var t=[];return y.Children.forEach(e,r=>{we(r)||($1.isFragment(r)?t=t.concat(_p(r.props.children)):t.push(r))}),Uo=t,Zd=e,t};function Lc(e,t){var r=[],n=[];return Array.isArray(t)?n=t.map(i=>Yd(i)):n=[Yd(t)],_p(e).forEach(i=>{var a=an(i,"type.displayName")||an(i,"type.name");n.indexOf(a)!==-1&&r.push(i)}),r}var Ms=e=>e&&typeof e=="object"&&"clipDot"in e?!!e.clipDot:!0,F1=(e,t,r,n)=>{var i,a=(i=n&&Ro?.[n])!==null&&i!==void 0?i:[];return t.startsWith("data-")||typeof e!="function"&&(n&&a.includes(t)||U1.includes(t))||r&&Ic.includes(t)},ue=(e,t,r)=>{if(!e||typeof e=="function"||typeof e=="boolean")return null;var n=e;if(y.isValidElement(e)&&(n=e.props),typeof n!="object"&&typeof n!="function")return null;var i={};return Object.keys(n).forEach(a=>{var s;F1((s=n)===null||s===void 0?void 0:s[a],a,t,r)&&(i[a]=n[a])}),i},z1=["children","width","height","viewBox","className","style","title","desc"];function jl(){return jl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},jl.apply(null,arguments)}function W1(e,t){if(e==null)return{};var r,n,i=K1(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function K1(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var Rc=y.forwardRef((e,t)=>{var{children:r,width:n,height:i,viewBox:a,className:s,style:o,title:c,desc:d}=e,u=W1(e,z1),h=a||{width:n,height:i,x:0,y:0},f=me("recharts-surface",s);return y.createElement("svg",jl({},ue(u,!0,"svg"),{className:f,width:n,height:i,style:o,viewBox:"".concat(h.x," ").concat(h.y," ").concat(h.width," ").concat(h.height),ref:t}),y.createElement("title",null,c),y.createElement("desc",null,d),r)}),H1=["children","className"];function Sl(){return Sl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Sl.apply(null,arguments)}function q1(e,t){if(e==null)return{};var r,n,i=V1(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function V1(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var De=y.forwardRef((e,t)=>{var{children:r,className:n}=e,i=q1(e,H1),a=me("recharts-layer",n);return y.createElement("g",Sl({className:a},ue(i,!0),{ref:t}),r)}),Np=y.createContext(null),G1=()=>y.useContext(Np);function Ne(e){return function(){return e}}const kp=Math.cos,Oa=Math.sin,Ft=Math.sqrt,Aa=Math.PI,Ts=2*Aa,Pl=Math.PI,_l=2*Pl,Rr=1e-6,Y1=_l-Rr;function Op(e){this._+=e[0];for(let t=1,r=e.length;t<r;++t)this._+=arguments[t]+e[t]}function Z1(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return Op;const r=10**t;return function(n){this._+=n[0];for(let i=1,a=n.length;i<a;++i)this._+=Math.round(arguments[i]*r)/r+n[i]}}class X1{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?Op:Z1(t)}moveTo(t,r){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,r){this._append`L${this._x1=+t},${this._y1=+r}`}quadraticCurveTo(t,r,n,i){this._append`Q${+t},${+r},${this._x1=+n},${this._y1=+i}`}bezierCurveTo(t,r,n,i,a,s){this._append`C${+t},${+r},${+n},${+i},${this._x1=+a},${this._y1=+s}`}arcTo(t,r,n,i,a){if(t=+t,r=+r,n=+n,i=+i,a=+a,a<0)throw new Error(`negative radius: ${a}`);let s=this._x1,o=this._y1,c=n-t,d=i-r,u=s-t,h=o-r,f=u*u+h*h;if(this._x1===null)this._append`M${this._x1=t},${this._y1=r}`;else if(f>Rr)if(!(Math.abs(h*c-d*u)>Rr)||!a)this._append`L${this._x1=t},${this._y1=r}`;else{let m=n-s,g=i-o,p=c*c+d*d,v=m*m+g*g,x=Math.sqrt(p),j=Math.sqrt(f),b=a*Math.tan((Pl-Math.acos((p+f-v)/(2*x*j)))/2),S=b/j,_=b/x;Math.abs(S-1)>Rr&&this._append`L${t+S*u},${r+S*h}`,this._append`A${a},${a},0,0,${+(h*m>u*g)},${this._x1=t+_*c},${this._y1=r+_*d}`}}arc(t,r,n,i,a,s){if(t=+t,r=+r,n=+n,s=!!s,n<0)throw new Error(`negative radius: ${n}`);let o=n*Math.cos(i),c=n*Math.sin(i),d=t+o,u=r+c,h=1^s,f=s?i-a:a-i;this._x1===null?this._append`M${d},${u}`:(Math.abs(this._x1-d)>Rr||Math.abs(this._y1-u)>Rr)&&this._append`L${d},${u}`,n&&(f<0&&(f=f%_l+_l),f>Y1?this._append`A${n},${n},0,1,${h},${t-o},${r-c}A${n},${n},0,1,${h},${this._x1=d},${this._y1=u}`:f>Rr&&this._append`A${n},${n},0,${+(f>=Pl)},${h},${this._x1=t+n*Math.cos(a)},${this._y1=r+n*Math.sin(a)}`)}rect(t,r,n,i){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}h${n=+n}v${+i}h${-n}Z`}toString(){return this._}}function Uc(e){let t=3;return e.digits=function(r){if(!arguments.length)return t;if(r==null)t=null;else{const n=Math.floor(r);if(!(n>=0))throw new RangeError(`invalid digits: ${r}`);t=n}return e},()=>new X1(t)}function Bc(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function Ap(e){this._context=e}Ap.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function Ds(e){return new Ap(e)}function Ep(e){return e[0]}function Cp(e){return e[1]}function Mp(e,t){var r=Ne(!0),n=null,i=Ds,a=null,s=Uc(o);e=typeof e=="function"?e:e===void 0?Ep:Ne(e),t=typeof t=="function"?t:t===void 0?Cp:Ne(t);function o(c){var d,u=(c=Bc(c)).length,h,f=!1,m;for(n==null&&(a=i(m=s())),d=0;d<=u;++d)!(d<u&&r(h=c[d],d,c))===f&&((f=!f)?a.lineStart():a.lineEnd()),f&&a.point(+e(h,d,c),+t(h,d,c));if(m)return a=null,m+""||null}return o.x=function(c){return arguments.length?(e=typeof c=="function"?c:Ne(+c),o):e},o.y=function(c){return arguments.length?(t=typeof c=="function"?c:Ne(+c),o):t},o.defined=function(c){return arguments.length?(r=typeof c=="function"?c:Ne(!!c),o):r},o.curve=function(c){return arguments.length?(i=c,n!=null&&(a=i(n)),o):i},o.context=function(c){return arguments.length?(c==null?n=a=null:a=i(n=c),o):n},o}function ca(e,t,r){var n=null,i=Ne(!0),a=null,s=Ds,o=null,c=Uc(d);e=typeof e=="function"?e:e===void 0?Ep:Ne(+e),t=typeof t=="function"?t:Ne(t===void 0?0:+t),r=typeof r=="function"?r:r===void 0?Cp:Ne(+r);function d(h){var f,m,g,p=(h=Bc(h)).length,v,x=!1,j,b=new Array(p),S=new Array(p);for(a==null&&(o=s(j=c())),f=0;f<=p;++f){if(!(f<p&&i(v=h[f],f,h))===x)if(x=!x)m=f,o.areaStart(),o.lineStart();else{for(o.lineEnd(),o.lineStart(),g=f-1;g>=m;--g)o.point(b[g],S[g]);o.lineEnd(),o.areaEnd()}x&&(b[f]=+e(v,f,h),S[f]=+t(v,f,h),o.point(n?+n(v,f,h):b[f],r?+r(v,f,h):S[f]))}if(j)return o=null,j+""||null}function u(){return Mp().defined(i).curve(s).context(a)}return d.x=function(h){return arguments.length?(e=typeof h=="function"?h:Ne(+h),n=null,d):e},d.x0=function(h){return arguments.length?(e=typeof h=="function"?h:Ne(+h),d):e},d.x1=function(h){return arguments.length?(n=h==null?null:typeof h=="function"?h:Ne(+h),d):n},d.y=function(h){return arguments.length?(t=typeof h=="function"?h:Ne(+h),r=null,d):t},d.y0=function(h){return arguments.length?(t=typeof h=="function"?h:Ne(+h),d):t},d.y1=function(h){return arguments.length?(r=h==null?null:typeof h=="function"?h:Ne(+h),d):r},d.lineX0=d.lineY0=function(){return u().x(e).y(t)},d.lineY1=function(){return u().x(e).y(r)},d.lineX1=function(){return u().x(n).y(t)},d.defined=function(h){return arguments.length?(i=typeof h=="function"?h:Ne(!!h),d):i},d.curve=function(h){return arguments.length?(s=h,a!=null&&(o=s(a)),d):s},d.context=function(h){return arguments.length?(h==null?a=o=null:o=s(a=h),d):a},d}class Tp{constructor(t,r){this._context=t,this._x=r}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,r){switch(t=+t,r=+r,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,r):this._context.moveTo(t,r);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,r,t,r):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+r)/2,t,this._y0,t,r);break}}this._x0=t,this._y0=r}}function J1(e){return new Tp(e,!0)}function Q1(e){return new Tp(e,!1)}const Fc={draw(e,t){const r=Ft(t/Aa);e.moveTo(r,0),e.arc(0,0,r,0,Ts)}},ej={draw(e,t){const r=Ft(t/5)/2;e.moveTo(-3*r,-r),e.lineTo(-r,-r),e.lineTo(-r,-3*r),e.lineTo(r,-3*r),e.lineTo(r,-r),e.lineTo(3*r,-r),e.lineTo(3*r,r),e.lineTo(r,r),e.lineTo(r,3*r),e.lineTo(-r,3*r),e.lineTo(-r,r),e.lineTo(-3*r,r),e.closePath()}},Dp=Ft(1/3),tj=Dp*2,rj={draw(e,t){const r=Ft(t/tj),n=r*Dp;e.moveTo(0,-r),e.lineTo(n,0),e.lineTo(0,r),e.lineTo(-n,0),e.closePath()}},nj={draw(e,t){const r=Ft(t),n=-r/2;e.rect(n,n,r,r)}},ij=.8908130915292852,Ip=Oa(Aa/10)/Oa(7*Aa/10),aj=Oa(Ts/10)*Ip,sj=-kp(Ts/10)*Ip,oj={draw(e,t){const r=Ft(t*ij),n=aj*r,i=sj*r;e.moveTo(0,-r),e.lineTo(n,i);for(let a=1;a<5;++a){const s=Ts*a/5,o=kp(s),c=Oa(s);e.lineTo(c*r,-o*r),e.lineTo(o*n-c*i,c*n+o*i)}e.closePath()}},Bo=Ft(3),lj={draw(e,t){const r=-Ft(t/(Bo*3));e.moveTo(0,r*2),e.lineTo(-Bo*r,-r),e.lineTo(Bo*r,-r),e.closePath()}},bt=-.5,wt=Ft(3)/2,Nl=1/Ft(12),cj=(Nl/2+1)*3,uj={draw(e,t){const r=Ft(t/cj),n=r/2,i=r*Nl,a=n,s=r*Nl+r,o=-a,c=s;e.moveTo(n,i),e.lineTo(a,s),e.lineTo(o,c),e.lineTo(bt*n-wt*i,wt*n+bt*i),e.lineTo(bt*a-wt*s,wt*a+bt*s),e.lineTo(bt*o-wt*c,wt*o+bt*c),e.lineTo(bt*n+wt*i,bt*i-wt*n),e.lineTo(bt*a+wt*s,bt*s-wt*a),e.lineTo(bt*o+wt*c,bt*c-wt*o),e.closePath()}};function dj(e,t){let r=null,n=Uc(i);e=typeof e=="function"?e:Ne(e||Fc),t=typeof t=="function"?t:Ne(t===void 0?64:+t);function i(){let a;if(r||(r=a=n()),e.apply(this,arguments).draw(r,+t.apply(this,arguments)),a)return r=null,a+""||null}return i.type=function(a){return arguments.length?(e=typeof a=="function"?a:Ne(a),i):e},i.size=function(a){return arguments.length?(t=typeof a=="function"?a:Ne(+a),i):t},i.context=function(a){return arguments.length?(r=a??null,i):r},i}function Ea(){}function Ca(e,t,r){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+r)/6)}function $p(e){this._context=e}$p.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Ca(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Ca(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function hj(e){return new $p(e)}function Lp(e){this._context=e}Lp.prototype={areaStart:Ea,areaEnd:Ea,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:Ca(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function fj(e){return new Lp(e)}function Rp(e){this._context=e}Rp.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var r=(this._x0+4*this._x1+e)/6,n=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(r,n):this._context.moveTo(r,n);break;case 3:this._point=4;default:Ca(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function mj(e){return new Rp(e)}function Up(e){this._context=e}Up.prototype={areaStart:Ea,areaEnd:Ea,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function pj(e){return new Up(e)}function Xd(e){return e<0?-1:1}function Jd(e,t,r){var n=e._x1-e._x0,i=t-e._x1,a=(e._y1-e._y0)/(n||i<0&&-0),s=(r-e._y1)/(i||n<0&&-0),o=(a*i+s*n)/(n+i);return(Xd(a)+Xd(s))*Math.min(Math.abs(a),Math.abs(s),.5*Math.abs(o))||0}function Qd(e,t){var r=e._x1-e._x0;return r?(3*(e._y1-e._y0)/r-t)/2:t}function Fo(e,t,r){var n=e._x0,i=e._y0,a=e._x1,s=e._y1,o=(a-n)/3;e._context.bezierCurveTo(n+o,i+o*t,a-o,s-o*r,a,s)}function Ma(e){this._context=e}Ma.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Fo(this,this._t0,Qd(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var r=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,Fo(this,Qd(this,r=Jd(this,e,t)),r);break;default:Fo(this,this._t0,r=Jd(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=r}}};function Bp(e){this._context=new Fp(e)}(Bp.prototype=Object.create(Ma.prototype)).point=function(e,t){Ma.prototype.point.call(this,t,e)};function Fp(e){this._context=e}Fp.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,r,n,i,a){this._context.bezierCurveTo(t,e,n,r,a,i)}};function gj(e){return new Ma(e)}function vj(e){return new Bp(e)}function zp(e){this._context=e}zp.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,r=e.length;if(r)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),r===2)this._context.lineTo(e[1],t[1]);else for(var n=eh(e),i=eh(t),a=0,s=1;s<r;++a,++s)this._context.bezierCurveTo(n[0][a],i[0][a],n[1][a],i[1][a],e[s],t[s]);(this._line||this._line!==0&&r===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function eh(e){var t,r=e.length-1,n,i=new Array(r),a=new Array(r),s=new Array(r);for(i[0]=0,a[0]=2,s[0]=e[0]+2*e[1],t=1;t<r-1;++t)i[t]=1,a[t]=4,s[t]=4*e[t]+2*e[t+1];for(i[r-1]=2,a[r-1]=7,s[r-1]=8*e[r-1]+e[r],t=1;t<r;++t)n=i[t]/a[t-1],a[t]-=n,s[t]-=n*s[t-1];for(i[r-1]=s[r-1]/a[r-1],t=r-2;t>=0;--t)i[t]=(s[t]-i[t+1])/a[t];for(a[r-1]=(e[r]+i[r-1])/2,t=0;t<r-1;++t)a[t]=2*e[t+1]-i[t+1];return[i,a]}function yj(e){return new zp(e)}function Is(e,t){this._context=e,this._t=t}Is.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var r=this._x*(1-this._t)+e*this._t;this._context.lineTo(r,this._y),this._context.lineTo(r,t)}break}}this._x=e,this._y=t}};function xj(e){return new Is(e,.5)}function bj(e){return new Is(e,0)}function wj(e){return new Is(e,1)}function Fn(e,t){if((s=e.length)>1)for(var r=1,n,i,a=e[t[0]],s,o=a.length;r<s;++r)for(i=a,a=e[t[r]],n=0;n<o;++n)a[n][1]+=a[n][0]=isNaN(i[n][1])?i[n][0]:i[n][1]}function kl(e){for(var t=e.length,r=new Array(t);--t>=0;)r[t]=t;return r}function jj(e,t){return e[t]}function Sj(e){const t=[];return t.key=e,t}function Pj(){var e=Ne([]),t=kl,r=Fn,n=jj;function i(a){var s=Array.from(e.apply(this,arguments),Sj),o,c=s.length,d=-1,u;for(const h of a)for(o=0,++d;o<c;++o)(s[o][d]=[0,+n(h,s[o].key,d,a)]).data=h;for(o=0,u=Bc(t(s));o<c;++o)s[u[o]].index=o;return r(s,u),s}return i.keys=function(a){return arguments.length?(e=typeof a=="function"?a:Ne(Array.from(a)),i):e},i.value=function(a){return arguments.length?(n=typeof a=="function"?a:Ne(+a),i):n},i.order=function(a){return arguments.length?(t=a==null?kl:typeof a=="function"?a:Ne(Array.from(a)),i):t},i.offset=function(a){return arguments.length?(r=a??Fn,i):r},i}function _j(e,t){if((n=e.length)>0){for(var r,n,i=0,a=e[0].length,s;i<a;++i){for(s=r=0;r<n;++r)s+=e[r][i][1]||0;if(s)for(r=0;r<n;++r)e[r][i][1]/=s}Fn(e,t)}}function Nj(e,t){if((i=e.length)>0){for(var r=0,n=e[t[0]],i,a=n.length;r<a;++r){for(var s=0,o=0;s<i;++s)o+=e[s][r][1]||0;n[r][1]+=n[r][0]=-o/2}Fn(e,t)}}function kj(e,t){if(!(!((s=e.length)>0)||!((a=(i=e[t[0]]).length)>0))){for(var r=0,n=1,i,a,s;n<a;++n){for(var o=0,c=0,d=0;o<s;++o){for(var u=e[t[o]],h=u[n][1]||0,f=u[n-1][1]||0,m=(h-f)/2,g=0;g<o;++g){var p=e[t[g]],v=p[n][1]||0,x=p[n-1][1]||0;m+=v-x}c+=h,d+=m*h}i[n-1][1]+=i[n-1][0]=r,c&&(r-=d/c)}i[n-1][1]+=i[n-1][0]=r,Fn(e,t)}}var Oj=["type","size","sizeType"];function Ol(){return Ol=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ol.apply(null,arguments)}function th(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function rh(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?th(Object(r),!0).forEach(function(n){Aj(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):th(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Aj(e,t,r){return(t=Ej(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ej(e){var t=Cj(e,"string");return typeof t=="symbol"?t:t+""}function Cj(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Mj(e,t){if(e==null)return{};var r,n,i=Tj(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function Tj(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var Wp={symbolCircle:Fc,symbolCross:ej,symbolDiamond:rj,symbolSquare:nj,symbolStar:oj,symbolTriangle:lj,symbolWye:uj},Dj=Math.PI/180,Ij=e=>{var t="symbol".concat(Ki(e));return Wp[t]||Fc},$j=(e,t,r)=>{if(t==="area")return e;switch(r){case"cross":return 5*e*e/9;case"diamond":return .5*e*e/Math.sqrt(3);case"square":return e*e;case"star":{var n=18*Dj;return 1.25*e*e*(Math.tan(n)-Math.tan(n*2)*Math.tan(n)**2)}case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}},Lj=(e,t)=>{Wp["symbol".concat(Ki(e))]=t},zc=e=>{var{type:t="circle",size:r=64,sizeType:n="area"}=e,i=Mj(e,Oj),a=rh(rh({},i),{},{type:t,size:r,sizeType:n}),s=()=>{var h=Ij(t),f=dj().type(h).size($j(r,n,t));return f()},{className:o,cx:c,cy:d}=a,u=ue(a,!0);return c===+c&&d===+d&&r===+r?y.createElement("path",Ol({},u,{className:me("recharts-symbols",o),transform:"translate(".concat(c,", ").concat(d,")"),d:s()})):null};zc.registerSymbol=Lj;function Al(){return Al=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Al.apply(null,arguments)}function nh(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Rj(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?nh(Object(r),!0).forEach(function(n){Wc(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):nh(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Wc(e,t,r){return(t=Uj(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Uj(e){var t=Bj(e,"string");return typeof t=="symbol"?t:t+""}function Bj(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var jt=32;class Kc extends y.PureComponent{renderIcon(t,r){var{inactiveColor:n}=this.props,i=jt/2,a=jt/6,s=jt/3,o=t.inactive?n:t.color,c=r??t.type;if(c==="none")return null;if(c==="plainline")return y.createElement("line",{strokeWidth:4,fill:"none",stroke:o,strokeDasharray:t.payload.strokeDasharray,x1:0,y1:i,x2:jt,y2:i,className:"recharts-legend-icon"});if(c==="line")return y.createElement("path",{strokeWidth:4,fill:"none",stroke:o,d:"M0,".concat(i,"h").concat(s,`
            A`).concat(a,",").concat(a,",0,1,1,").concat(2*s,",").concat(i,`
            H`).concat(jt,"M").concat(2*s,",").concat(i,`
            A`).concat(a,",").concat(a,",0,1,1,").concat(s,",").concat(i),className:"recharts-legend-icon"});if(c==="rect")return y.createElement("path",{stroke:"none",fill:o,d:"M0,".concat(jt/8,"h").concat(jt,"v").concat(jt*3/4,"h").concat(-jt,"z"),className:"recharts-legend-icon"});if(y.isValidElement(t.legendIcon)){var d=Rj({},t);return delete d.legendIcon,y.cloneElement(t.legendIcon,d)}return y.createElement(zc,{fill:o,cx:i,cy:i,size:jt,sizeType:"diameter",type:c})}renderItems(){var{payload:t,iconSize:r,layout:n,formatter:i,inactiveColor:a,iconType:s}=this.props,o={x:0,y:0,width:jt,height:jt},c={display:n==="horizontal"?"inline-block":"block",marginRight:10},d={display:"inline-block",verticalAlign:"middle",marginRight:4};return t.map((u,h)=>{var f=u.formatter||i,m=me({"recharts-legend-item":!0,["legend-item-".concat(h)]:!0,inactive:u.inactive});if(u.type==="none")return null;var g=u.inactive?a:u.color,p=f?f(u.value,u,h):u.value;return y.createElement("li",Al({className:m,style:c,key:"legend-item-".concat(h)},Cs(this.props,u,h)),y.createElement(Rc,{width:r,height:r,viewBox:o,style:d,"aria-label":"".concat(p," legend icon")},this.renderIcon(u,s)),y.createElement("span",{className:"recharts-legend-item-text",style:{color:g}},p))})}render(){var{payload:t,layout:r,align:n}=this.props;if(!t||!t.length)return null;var i={padding:0,margin:0,textAlign:r==="horizontal"?n:"left"};return y.createElement("ul",{className:"recharts-default-legend",style:i},this.renderItems())}}Wc(Kc,"displayName","Legend");Wc(Kc,"defaultProps",{align:"center",iconSize:14,inactiveColor:"#ccc",layout:"horizontal",verticalAlign:"middle"});var Kp={},Hp={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n){const i=new Map;for(let a=0;a<r.length;a++){const s=r[a],o=n(s);i.has(o)||i.set(o,s)}return Array.from(i.values())}e.uniqBy=t})(Hp);var Hc={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r}e.identity=t})(Hc);var qp={},$s={},Vp={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Number.isSafeInteger(r)&&r>=0}e.isLength=t})(Vp);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Vp;function r(n){return n!=null&&typeof n!="function"&&t.isLength(n.length)}e.isArrayLike=r})($s);var Gp={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return typeof r=="object"&&r!==null}e.isObjectLike=t})(Gp);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=$s,r=Gp;function n(i){return r.isObjectLike(i)&&t.isArrayLike(i)}e.isArrayLikeObject=n})(qp);var Yp={},Zp={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=xs;function r(n){return function(i){return t.get(i,n)}}e.property=r})(Zp);var Xp={},zo={},Wo={},qc={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r!==null&&(typeof r=="object"||typeof r=="function")}e.isObject=t})(qc);var Vc={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==null||typeof r!="object"&&typeof r!="function"}e.isPrimitive=t})(Vc);var Ls={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n){return r===n||Number.isNaN(r)&&Number.isNaN(n)}e.eq=t})(Ls);var ih;function Fj(){return ih||(ih=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Gc(),r=qc,n=Vc,i=Ls;function a(h,f,m){return typeof m!="function"?t.isMatch(h,f):s(h,f,function g(p,v,x,j,b,S){const _=m(p,v,x,j,b,S);return _!==void 0?!!_:s(p,v,g,S)},new Map)}function s(h,f,m,g){if(f===h)return!0;switch(typeof f){case"object":return o(h,f,m,g);case"function":return Object.keys(f).length>0?s(h,{...f},m,g):i.eq(h,f);default:return r.isObject(h)?typeof f=="string"?f==="":!0:i.eq(h,f)}}function o(h,f,m,g){if(f==null)return!0;if(Array.isArray(f))return d(h,f,m,g);if(f instanceof Map)return c(h,f,m,g);if(f instanceof Set)return u(h,f,m,g);const p=Object.keys(f);if(h==null)return p.length===0;if(p.length===0)return!0;if(g&&g.has(f))return g.get(f)===h;g&&g.set(f,h);try{for(let v=0;v<p.length;v++){const x=p[v];if(!n.isPrimitive(h)&&!(x in h)||f[x]===void 0&&h[x]!==void 0||f[x]===null&&h[x]!==null||!m(h[x],f[x],x,h,f,g))return!1}return!0}finally{g&&g.delete(f)}}function c(h,f,m,g){if(f.size===0)return!0;if(!(h instanceof Map))return!1;for(const[p,v]of f.entries()){const x=h.get(p);if(m(x,v,p,h,f,g)===!1)return!1}return!0}function d(h,f,m,g){if(f.length===0)return!0;if(!Array.isArray(h))return!1;const p=new Set;for(let v=0;v<f.length;v++){const x=f[v];let j=!1;for(let b=0;b<h.length;b++){if(p.has(b))continue;const S=h[b];let _=!1;if(m(S,x,v,h,f,g)&&(_=!0),_){p.add(b),j=!0;break}}if(!j)return!1}return!0}function u(h,f,m,g){return f.size===0?!0:h instanceof Set?d([...h],[...f],m,g):!1}e.isMatchWith=a,e.isSetMatch=u}(Wo)),Wo}var ah;function Gc(){return ah||(ah=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Fj();function r(n,i){return t.isMatchWith(n,i,()=>{})}e.isMatch=r}(zo)),zo}var Jp={},Yc={},Zc={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Object.getOwnPropertySymbols(r).filter(n=>Object.prototype.propertyIsEnumerable.call(r,n))}e.getSymbols=t})(Zc);var Rs={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==null?r===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(r)}e.getTag=t})(Rs);var Us={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t="[object RegExp]",r="[object String]",n="[object Number]",i="[object Boolean]",a="[object Arguments]",s="[object Symbol]",o="[object Date]",c="[object Map]",d="[object Set]",u="[object Array]",h="[object Function]",f="[object ArrayBuffer]",m="[object Object]",g="[object Error]",p="[object DataView]",v="[object Uint8Array]",x="[object Uint8ClampedArray]",j="[object Uint16Array]",b="[object Uint32Array]",S="[object BigUint64Array]",_="[object Int8Array]",N="[object Int16Array]",P="[object Int32Array]",E="[object BigInt64Array]",w="[object Float32Array]",A="[object Float64Array]";e.argumentsTag=a,e.arrayBufferTag=f,e.arrayTag=u,e.bigInt64ArrayTag=E,e.bigUint64ArrayTag=S,e.booleanTag=i,e.dataViewTag=p,e.dateTag=o,e.errorTag=g,e.float32ArrayTag=w,e.float64ArrayTag=A,e.functionTag=h,e.int16ArrayTag=N,e.int32ArrayTag=P,e.int8ArrayTag=_,e.mapTag=c,e.numberTag=n,e.objectTag=m,e.regexpTag=t,e.setTag=d,e.stringTag=r,e.symbolTag=s,e.uint16ArrayTag=j,e.uint32ArrayTag=b,e.uint8ArrayTag=v,e.uint8ClampedArrayTag=x})(Us);var Qp={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return ArrayBuffer.isView(r)&&!(r instanceof DataView)}e.isTypedArray=t})(Qp);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Zc,r=Rs,n=Us,i=Vc,a=Qp;function s(u,h){return o(u,void 0,u,new Map,h)}function o(u,h,f,m=new Map,g=void 0){const p=g?.(u,h,f,m);if(p!=null)return p;if(i.isPrimitive(u))return u;if(m.has(u))return m.get(u);if(Array.isArray(u)){const v=new Array(u.length);m.set(u,v);for(let x=0;x<u.length;x++)v[x]=o(u[x],x,f,m,g);return Object.hasOwn(u,"index")&&(v.index=u.index),Object.hasOwn(u,"input")&&(v.input=u.input),v}if(u instanceof Date)return new Date(u.getTime());if(u instanceof RegExp){const v=new RegExp(u.source,u.flags);return v.lastIndex=u.lastIndex,v}if(u instanceof Map){const v=new Map;m.set(u,v);for(const[x,j]of u)v.set(x,o(j,x,f,m,g));return v}if(u instanceof Set){const v=new Set;m.set(u,v);for(const x of u)v.add(o(x,void 0,f,m,g));return v}if(typeof Buffer<"u"&&Buffer.isBuffer(u))return u.subarray();if(a.isTypedArray(u)){const v=new(Object.getPrototypeOf(u)).constructor(u.length);m.set(u,v);for(let x=0;x<u.length;x++)v[x]=o(u[x],x,f,m,g);return v}if(u instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&u instanceof SharedArrayBuffer)return u.slice(0);if(u instanceof DataView){const v=new DataView(u.buffer.slice(0),u.byteOffset,u.byteLength);return m.set(u,v),c(v,u,f,m,g),v}if(typeof File<"u"&&u instanceof File){const v=new File([u],u.name,{type:u.type});return m.set(u,v),c(v,u,f,m,g),v}if(u instanceof Blob){const v=new Blob([u],{type:u.type});return m.set(u,v),c(v,u,f,m,g),v}if(u instanceof Error){const v=new u.constructor;return m.set(u,v),v.message=u.message,v.name=u.name,v.stack=u.stack,v.cause=u.cause,c(v,u,f,m,g),v}if(typeof u=="object"&&d(u)){const v=Object.create(Object.getPrototypeOf(u));return m.set(u,v),c(v,u,f,m,g),v}return u}function c(u,h,f=u,m,g){const p=[...Object.keys(h),...t.getSymbols(h)];for(let v=0;v<p.length;v++){const x=p[v],j=Object.getOwnPropertyDescriptor(u,x);(j==null||j.writable)&&(u[x]=o(h[x],x,f,m,g))}}function d(u){switch(r.getTag(u)){case n.argumentsTag:case n.arrayTag:case n.arrayBufferTag:case n.dataViewTag:case n.booleanTag:case n.dateTag:case n.float32ArrayTag:case n.float64ArrayTag:case n.int8ArrayTag:case n.int16ArrayTag:case n.int32ArrayTag:case n.mapTag:case n.numberTag:case n.objectTag:case n.regexpTag:case n.setTag:case n.stringTag:case n.symbolTag:case n.uint8ArrayTag:case n.uint8ClampedArrayTag:case n.uint16ArrayTag:case n.uint32ArrayTag:return!0;default:return!1}}e.cloneDeepWith=s,e.cloneDeepWithImpl=o,e.copyProperties=c})(Yc);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Yc;function r(n){return t.cloneDeepWithImpl(n,void 0,n,new Map,void 0)}e.cloneDeep=r})(Jp);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Gc(),r=Jp;function n(i){return i=r.cloneDeep(i),a=>t.isMatch(a,i)}e.matches=n})(Xp);var eg={},tg={},rg={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Yc,r=Us;function n(i,a){return t.cloneDeepWith(i,(s,o,c,d)=>{const u=a?.(s,o,c,d);if(u!=null)return u;if(typeof i=="object")switch(Object.prototype.toString.call(i)){case r.numberTag:case r.stringTag:case r.booleanTag:{const h=new i.constructor(i?.valueOf());return t.copyProperties(h,i),h}case r.argumentsTag:{const h={};return t.copyProperties(h,i),h.length=i.length,h[Symbol.iterator]=i[Symbol.iterator],h}default:return}})}e.cloneDeepWith=n})(rg);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=rg;function r(n){return t.cloneDeepWith(n)}e.cloneDeep=r})(tg);var ng={},Xc={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=/^(?:0|[1-9]\d*)$/;function r(n,i=Number.MAX_SAFE_INTEGER){switch(typeof n){case"number":return Number.isInteger(n)&&n>=0&&n<i;case"symbol":return!1;case"string":return t.test(n)}}e.isIndex=r})(Xc);var ig={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Rs;function r(n){return n!==null&&typeof n=="object"&&t.getTag(n)==="[object Arguments]"}e.isArguments=r})(ig);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Cc,r=Xc,n=ig,i=bs;function a(s,o){let c;if(Array.isArray(o)?c=o:typeof o=="string"&&t.isDeepKey(o)&&s?.[o]==null?c=i.toPath(o):c=[o],c.length===0)return!1;let d=s;for(let u=0;u<c.length;u++){const h=c[u];if((d==null||!Object.hasOwn(d,h))&&!((Array.isArray(d)||n.isArguments(d))&&r.isIndex(h)&&h<d.length))return!1;d=d[h]}return!0}e.has=a})(ng);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Gc(),r=Mc,n=tg,i=xs,a=ng;function s(o,c){switch(typeof o){case"object":{Object.is(o?.valueOf(),-0)&&(o="-0");break}case"number":{o=r.toKey(o);break}}return c=n.cloneDeep(c),function(d){const u=i.get(d,o);return u===void 0?a.has(d,o):c===void 0?u===void 0:t.isMatch(u,c)}}e.matchesProperty=s})(eg);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Hc,r=Zp,n=Xp,i=eg;function a(s){if(s==null)return t.identity;switch(typeof s){case"function":return s;case"object":return Array.isArray(s)&&s.length===2?i.matchesProperty(s[0],s[1]):n.matches(s);case"string":case"symbol":case"number":return r.property(s)}}e.iteratee=a})(Yp);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Hp,r=Hc,n=qp,i=Yp;function a(s,o=r.identity){return n.isArrayLikeObject(s)?t.uniqBy(Array.from(s),i.iteratee(o)):[]}e.uniqBy=a})(Kp);var zj=Kp.uniqBy;const sh=cr(zj);function ag(e,t,r){return t===!0?sh(e,r):typeof t=="function"?sh(e,t):e}var sg={exports:{}},og={},lg={exports:{}},cg={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zn=y;function Wj(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Kj=typeof Object.is=="function"?Object.is:Wj,Hj=zn.useState,qj=zn.useEffect,Vj=zn.useLayoutEffect,Gj=zn.useDebugValue;function Yj(e,t){var r=t(),n=Hj({inst:{value:r,getSnapshot:t}}),i=n[0].inst,a=n[1];return Vj(function(){i.value=r,i.getSnapshot=t,Ko(i)&&a({inst:i})},[e,r,t]),qj(function(){return Ko(i)&&a({inst:i}),e(function(){Ko(i)&&a({inst:i})})},[e]),Gj(r),r}function Ko(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!Kj(e,r)}catch{return!0}}function Zj(e,t){return t()}var Xj=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?Zj:Yj;cg.useSyncExternalStore=zn.useSyncExternalStore!==void 0?zn.useSyncExternalStore:Xj;lg.exports=cg;var Jj=lg.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Bs=y,Qj=Jj;function e2(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var t2=typeof Object.is=="function"?Object.is:e2,r2=Qj.useSyncExternalStore,n2=Bs.useRef,i2=Bs.useEffect,a2=Bs.useMemo,s2=Bs.useDebugValue;og.useSyncExternalStoreWithSelector=function(e,t,r,n,i){var a=n2(null);if(a.current===null){var s={hasValue:!1,value:null};a.current=s}else s=a.current;a=a2(function(){function c(m){if(!d){if(d=!0,u=m,m=n(m),i!==void 0&&s.hasValue){var g=s.value;if(i(g,m))return h=g}return h=m}if(g=h,t2(u,m))return g;var p=n(m);return i!==void 0&&i(g,p)?(u=m,g):(u=m,h=p)}var d=!1,u,h,f=r===void 0?null:r;return[function(){return c(t())},f===null?void 0:function(){return c(f())}]},[t,r,n,i]);var o=r2(e,a[0],a[1]);return i2(function(){s.hasValue=!0,s.value=o},[o]),s2(o),o};sg.exports=og;var o2=sg.exports,Jc=y.createContext(null),l2=e=>e,Ae=()=>{var e=y.useContext(Jc);return e?e.store.dispatch:l2},_a=()=>{},c2=()=>_a,u2=(e,t)=>e===t;function ee(e){var t=y.useContext(Jc);return o2.useSyncExternalStoreWithSelector(t?t.subscription.addNestedSub:c2,t?t.store.getState:_a,t?t.store.getState:_a,t?e:_a,u2)}function d2(e,t=`expected a function, instead received ${typeof e}`){if(typeof e!="function")throw new TypeError(t)}function h2(e,t=`expected an object, instead received ${typeof e}`){if(typeof e!="object")throw new TypeError(t)}function f2(e,t="expected all items to be functions, instead received the following types: "){if(!e.every(r=>typeof r=="function")){const r=e.map(n=>typeof n=="function"?`function ${n.name||"unnamed"}()`:typeof n).join(", ");throw new TypeError(`${t}[${r}]`)}}var oh=e=>Array.isArray(e)?e:[e];function m2(e){const t=Array.isArray(e[0])?e[0]:e;return f2(t,"createSelector expects all input-selectors to be functions, but received the following types: "),t}function p2(e,t){const r=[],{length:n}=e;for(let i=0;i<n;i++)r.push(e[i].apply(null,t));return r}var g2=class{constructor(e){this.value=e}deref(){return this.value}},v2=typeof WeakRef<"u"?WeakRef:g2,y2=0,lh=1;function ua(){return{s:y2,v:void 0,o:null,p:null}}function ug(e,t={}){let r=ua();const{resultEqualityCheck:n}=t;let i,a=0;function s(){let o=r;const{length:c}=arguments;for(let h=0,f=c;h<f;h++){const m=arguments[h];if(typeof m=="function"||typeof m=="object"&&m!==null){let g=o.o;g===null&&(o.o=g=new WeakMap);const p=g.get(m);p===void 0?(o=ua(),g.set(m,o)):o=p}else{let g=o.p;g===null&&(o.p=g=new Map);const p=g.get(m);p===void 0?(o=ua(),g.set(m,o)):o=p}}const d=o;let u;if(o.s===lh)u=o.v;else if(u=e.apply(null,arguments),a++,n){const h=i?.deref?.()??i;h!=null&&n(h,u)&&(u=h,a!==0&&a--),i=typeof u=="object"&&u!==null||typeof u=="function"?new v2(u):u}return d.s=lh,d.v=u,u}return s.clearCache=()=>{r=ua(),s.resetResultsCount()},s.resultsCount=()=>a,s.resetResultsCount=()=>{a=0},s}function x2(e,...t){const r=typeof e=="function"?{memoize:e,memoizeOptions:t}:e,n=(...i)=>{let a=0,s=0,o,c={},d=i.pop();typeof d=="object"&&(c=d,d=i.pop()),d2(d,`createSelector expects an output function after the inputs, but received: [${typeof d}]`);const u={...r,...c},{memoize:h,memoizeOptions:f=[],argsMemoize:m=ug,argsMemoizeOptions:g=[],devModeChecks:p={}}=u,v=oh(f),x=oh(g),j=m2(i),b=h(function(){return a++,d.apply(null,arguments)},...v),S=m(function(){s++;const N=p2(j,arguments);return o=b.apply(null,N),o},...x);return Object.assign(S,{resultFunc:d,memoizedResultFunc:b,dependencies:j,dependencyRecomputations:()=>s,resetDependencyRecomputations:()=>{s=0},lastResult:()=>o,recomputations:()=>a,resetRecomputations:()=>{a=0},memoize:h,argsMemoize:m})};return Object.assign(n,{withTypes:()=>n}),n}var $=x2(ug),b2=Object.assign((e,t=$)=>{h2(e,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof e}`);const r=Object.keys(e),n=r.map(a=>e[a]);return t(n,(...a)=>a.reduce((s,o,c)=>(s[r[c]]=o,s),{}))},{withTypes:()=>b2}),dg={},hg={},fg={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return typeof n=="symbol"?1:n===null?2:n===void 0?3:n!==n?4:0}const r=(n,i,a)=>{if(n!==i){const s=t(n),o=t(i);if(s===o&&s===0){if(n<i)return a==="desc"?1:-1;if(n>i)return a==="desc"?-1:1}return a==="desc"?o-s:s-o}return 0};e.compareValues=r})(fg);var mg={},Qc={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return typeof r=="symbol"||r instanceof Symbol}e.isSymbol=t})(Qc);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Qc,r=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,n=/^\w*$/;function i(a,s){return Array.isArray(a)?!1:typeof a=="number"||typeof a=="boolean"||a==null||t.isSymbol(a)?!0:typeof a=="string"&&(n.test(a)||!r.test(a))||s!=null&&Object.hasOwn(s,a)}e.isKey=i})(mg);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=fg,r=mg,n=bs;function i(a,s,o,c){if(a==null)return[];o=c?void 0:o,Array.isArray(a)||(a=Object.values(a)),Array.isArray(s)||(s=s==null?[null]:[s]),s.length===0&&(s=[null]),Array.isArray(o)||(o=o==null?[]:[o]),o=o.map(m=>String(m));const d=(m,g)=>{let p=m;for(let v=0;v<g.length&&p!=null;++v)p=p[g[v]];return p},u=(m,g)=>g==null||m==null?g:typeof m=="object"&&"key"in m?Object.hasOwn(g,m.key)?g[m.key]:d(g,m.path):typeof m=="function"?m(g):Array.isArray(m)?d(g,m):typeof g=="object"?g[m]:g,h=s.map(m=>(Array.isArray(m)&&m.length===1&&(m=m[0]),m==null||typeof m=="function"||Array.isArray(m)||r.isKey(m)?m:{key:m,path:n.toPath(m)}));return a.map(m=>({original:m,criteria:h.map(g=>u(g,m))})).slice().sort((m,g)=>{for(let p=0;p<h.length;p++){const v=t.compareValues(m.criteria[p],g.criteria[p],o[p]);if(v!==0)return v}return 0}).map(m=>m.original)}e.orderBy=i})(hg);var pg={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n=1){const i=[],a=Math.floor(n),s=(o,c)=>{for(let d=0;d<o.length;d++){const u=o[d];Array.isArray(u)&&c<a?s(u,c+1):i.push(u)}};return s(r,0),i}e.flatten=t})(pg);var eu={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Xc,r=$s,n=qc,i=Ls;function a(s,o,c){return n.isObject(c)&&(typeof o=="number"&&r.isArrayLike(c)&&t.isIndex(o)&&o<c.length||typeof o=="string"&&o in c)?i.eq(c[o],s):!1}e.isIterateeCall=a})(eu);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=hg,r=pg,n=eu;function i(a,...s){const o=s.length;return o>1&&n.isIterateeCall(a,s[0],s[1])?s=[]:o>2&&n.isIterateeCall(s[0],s[1],s[2])&&(s=[s[0]]),t.orderBy(a,r.flatten(s),["asc"])}e.sortBy=i})(dg);var w2=dg.sortBy;const Fs=cr(w2);var gg=e=>e.legend.settings,j2=e=>e.legend.size,S2=e=>e.legend.payload,P2=$([S2,gg],(e,t)=>{var{itemSorter:r}=t,n=e.flat(1);return r?Fs(n,r):n});function _2(){return ee(P2)}var da=1;function vg(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],[t,r]=y.useState({height:0,left:0,top:0,width:0}),n=y.useCallback(i=>{if(i!=null){var a=i.getBoundingClientRect(),s={height:a.height,left:a.left,top:a.top,width:a.width};(Math.abs(s.height-t.height)>da||Math.abs(s.left-t.left)>da||Math.abs(s.top-t.top)>da||Math.abs(s.width-t.width)>da)&&r({height:s.height,left:s.left,top:s.top,width:s.width})}},[t.width,t.height,t.top,t.left,...e]);return[t,n]}function qe(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var N2=typeof Symbol=="function"&&Symbol.observable||"@@observable",ch=N2,Ho=()=>Math.random().toString(36).substring(7).split("").join("."),k2={INIT:`@@redux/INIT${Ho()}`,REPLACE:`@@redux/REPLACE${Ho()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${Ho()}`},Ta=k2;function tu(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function yg(e,t,r){if(typeof e!="function")throw new Error(qe(2));if(typeof t=="function"&&typeof r=="function"||typeof r=="function"&&typeof arguments[3]=="function")throw new Error(qe(0));if(typeof t=="function"&&typeof r>"u"&&(r=t,t=void 0),typeof r<"u"){if(typeof r!="function")throw new Error(qe(1));return r(yg)(e,t)}let n=e,i=t,a=new Map,s=a,o=0,c=!1;function d(){s===a&&(s=new Map,a.forEach((v,x)=>{s.set(x,v)}))}function u(){if(c)throw new Error(qe(3));return i}function h(v){if(typeof v!="function")throw new Error(qe(4));if(c)throw new Error(qe(5));let x=!0;d();const j=o++;return s.set(j,v),function(){if(x){if(c)throw new Error(qe(6));x=!1,d(),s.delete(j),a=null}}}function f(v){if(!tu(v))throw new Error(qe(7));if(typeof v.type>"u")throw new Error(qe(8));if(typeof v.type!="string")throw new Error(qe(17));if(c)throw new Error(qe(9));try{c=!0,i=n(i,v)}finally{c=!1}return(a=s).forEach(j=>{j()}),v}function m(v){if(typeof v!="function")throw new Error(qe(10));n=v,f({type:Ta.REPLACE})}function g(){const v=h;return{subscribe(x){if(typeof x!="object"||x===null)throw new Error(qe(11));function j(){const S=x;S.next&&S.next(u())}return j(),{unsubscribe:v(j)}},[ch](){return this}}}return f({type:Ta.INIT}),{dispatch:f,subscribe:h,getState:u,replaceReducer:m,[ch]:g}}function O2(e){Object.keys(e).forEach(t=>{const r=e[t];if(typeof r(void 0,{type:Ta.INIT})>"u")throw new Error(qe(12));if(typeof r(void 0,{type:Ta.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(qe(13))})}function xg(e){const t=Object.keys(e),r={};for(let a=0;a<t.length;a++){const s=t[a];typeof e[s]=="function"&&(r[s]=e[s])}const n=Object.keys(r);let i;try{O2(r)}catch(a){i=a}return function(s={},o){if(i)throw i;let c=!1;const d={};for(let u=0;u<n.length;u++){const h=n[u],f=r[h],m=s[h],g=f(m,o);if(typeof g>"u")throw o&&o.type,new Error(qe(14));d[h]=g,c=c||g!==m}return c=c||n.length!==Object.keys(s).length,c?d:s}}function Da(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,r)=>(...n)=>t(r(...n)))}function A2(...e){return t=>(r,n)=>{const i=t(r,n);let a=()=>{throw new Error(qe(15))};const s={getState:i.getState,dispatch:(c,...d)=>a(c,...d)},o=e.map(c=>c(s));return a=Da(...o)(i.dispatch),{...i,dispatch:a}}}function bg(e){return tu(e)&&"type"in e&&typeof e.type=="string"}var wg=Symbol.for("immer-nothing"),uh=Symbol.for("immer-draftable"),vt=Symbol.for("immer-state");function Rt(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var Wn=Object.getPrototypeOf;function on(e){return!!e&&!!e[vt]}function ar(e){return e?jg(e)||Array.isArray(e)||!!e[uh]||!!e.constructor?.[uh]||Ws(e)||Ks(e):!1}var E2=Object.prototype.constructor.toString();function jg(e){if(!e||typeof e!="object")return!1;const t=Wn(e);if(t===null)return!0;const r=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return r===Object?!0:typeof r=="function"&&Function.toString.call(r)===E2}function Ia(e,t){zs(e)===0?Reflect.ownKeys(e).forEach(r=>{t(r,e[r],e)}):e.forEach((r,n)=>t(n,r,e))}function zs(e){const t=e[vt];return t?t.type_:Array.isArray(e)?1:Ws(e)?2:Ks(e)?3:0}function El(e,t){return zs(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function Sg(e,t,r){const n=zs(e);n===2?e.set(t,r):n===3?e.add(r):e[t]=r}function C2(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function Ws(e){return e instanceof Map}function Ks(e){return e instanceof Set}function Ur(e){return e.copy_||e.base_}function Cl(e,t){if(Ws(e))return new Map(e);if(Ks(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const r=jg(e);if(t===!0||t==="class_only"&&!r){const n=Object.getOwnPropertyDescriptors(e);delete n[vt];let i=Reflect.ownKeys(n);for(let a=0;a<i.length;a++){const s=i[a],o=n[s];o.writable===!1&&(o.writable=!0,o.configurable=!0),(o.get||o.set)&&(n[s]={configurable:!0,writable:!0,enumerable:o.enumerable,value:e[s]})}return Object.create(Wn(e),n)}else{const n=Wn(e);if(n!==null&&r)return{...e};const i=Object.create(n);return Object.assign(i,e)}}function ru(e,t=!1){return Hs(e)||on(e)||!ar(e)||(zs(e)>1&&(e.set=e.add=e.clear=e.delete=M2),Object.freeze(e),t&&Object.entries(e).forEach(([r,n])=>ru(n,!0))),e}function M2(){Rt(2)}function Hs(e){return Object.isFrozen(e)}var T2={};function ln(e){const t=T2[e];return t||Rt(0,e),t}var Ai;function Pg(){return Ai}function D2(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function dh(e,t){t&&(ln("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function Ml(e){Tl(e),e.drafts_.forEach(I2),e.drafts_=null}function Tl(e){e===Ai&&(Ai=e.parent_)}function hh(e){return Ai=D2(Ai,e)}function I2(e){const t=e[vt];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function fh(e,t){t.unfinalizedDrafts_=t.drafts_.length;const r=t.drafts_[0];return e!==void 0&&e!==r?(r[vt].modified_&&(Ml(t),Rt(4)),ar(e)&&(e=$a(t,e),t.parent_||La(t,e)),t.patches_&&ln("Patches").generateReplacementPatches_(r[vt].base_,e,t.patches_,t.inversePatches_)):e=$a(t,r,[]),Ml(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==wg?e:void 0}function $a(e,t,r){if(Hs(t))return t;const n=t[vt];if(!n)return Ia(t,(i,a)=>mh(e,n,t,i,a,r)),t;if(n.scope_!==e)return t;if(!n.modified_)return La(e,n.base_,!0),n.base_;if(!n.finalized_){n.finalized_=!0,n.scope_.unfinalizedDrafts_--;const i=n.copy_;let a=i,s=!1;n.type_===3&&(a=new Set(i),i.clear(),s=!0),Ia(a,(o,c)=>mh(e,n,i,o,c,r,s)),La(e,i,!1),r&&e.patches_&&ln("Patches").generatePatches_(n,r,e.patches_,e.inversePatches_)}return n.copy_}function mh(e,t,r,n,i,a,s){if(on(i)){const o=a&&t&&t.type_!==3&&!El(t.assigned_,n)?a.concat(n):void 0,c=$a(e,i,o);if(Sg(r,n,c),on(c))e.canAutoFreeze_=!1;else return}else s&&r.add(i);if(ar(i)&&!Hs(i)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;$a(e,i),(!t||!t.scope_.parent_)&&typeof n!="symbol"&&Object.prototype.propertyIsEnumerable.call(r,n)&&La(e,i)}}function La(e,t,r=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&ru(t,r)}function $2(e,t){const r=Array.isArray(e),n={type_:r?1:0,scope_:t?t.scope_:Pg(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let i=n,a=nu;r&&(i=[n],a=Ei);const{revoke:s,proxy:o}=Proxy.revocable(i,a);return n.draft_=o,n.revoke_=s,o}var nu={get(e,t){if(t===vt)return e;const r=Ur(e);if(!El(r,t))return L2(e,r,t);const n=r[t];return e.finalized_||!ar(n)?n:n===qo(e.base_,t)?(Vo(e),e.copy_[t]=Il(n,e)):n},has(e,t){return t in Ur(e)},ownKeys(e){return Reflect.ownKeys(Ur(e))},set(e,t,r){const n=_g(Ur(e),t);if(n?.set)return n.set.call(e.draft_,r),!0;if(!e.modified_){const i=qo(Ur(e),t),a=i?.[vt];if(a&&a.base_===r)return e.copy_[t]=r,e.assigned_[t]=!1,!0;if(C2(r,i)&&(r!==void 0||El(e.base_,t)))return!0;Vo(e),Dl(e)}return e.copy_[t]===r&&(r!==void 0||t in e.copy_)||Number.isNaN(r)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=r,e.assigned_[t]=!0),!0},deleteProperty(e,t){return qo(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,Vo(e),Dl(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const r=Ur(e),n=Reflect.getOwnPropertyDescriptor(r,t);return n&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:n.enumerable,value:r[t]}},defineProperty(){Rt(11)},getPrototypeOf(e){return Wn(e.base_)},setPrototypeOf(){Rt(12)}},Ei={};Ia(nu,(e,t)=>{Ei[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});Ei.deleteProperty=function(e,t){return Ei.set.call(this,e,t,void 0)};Ei.set=function(e,t,r){return nu.set.call(this,e[0],t,r,e[0])};function qo(e,t){const r=e[vt];return(r?Ur(r):e)[t]}function L2(e,t,r){const n=_g(t,r);return n?"value"in n?n.value:n.get?.call(e.draft_):void 0}function _g(e,t){if(!(t in e))return;let r=Wn(e);for(;r;){const n=Object.getOwnPropertyDescriptor(r,t);if(n)return n;r=Wn(r)}}function Dl(e){e.modified_||(e.modified_=!0,e.parent_&&Dl(e.parent_))}function Vo(e){e.copy_||(e.copy_=Cl(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var R2=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(t,r,n)=>{if(typeof t=="function"&&typeof r!="function"){const a=r;r=t;const s=this;return function(c=a,...d){return s.produce(c,u=>r.call(this,u,...d))}}typeof r!="function"&&Rt(6),n!==void 0&&typeof n!="function"&&Rt(7);let i;if(ar(t)){const a=hh(this),s=Il(t,void 0);let o=!0;try{i=r(s),o=!1}finally{o?Ml(a):Tl(a)}return dh(a,n),fh(i,a)}else if(!t||typeof t!="object"){if(i=r(t),i===void 0&&(i=t),i===wg&&(i=void 0),this.autoFreeze_&&ru(i,!0),n){const a=[],s=[];ln("Patches").generateReplacementPatches_(t,i,a,s),n(a,s)}return i}else Rt(1,t)},this.produceWithPatches=(t,r)=>{if(typeof t=="function")return(s,...o)=>this.produceWithPatches(s,c=>t(c,...o));let n,i;return[this.produce(t,r,(s,o)=>{n=s,i=o}),n,i]},typeof e?.autoFreeze=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof e?.useStrictShallowCopy=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){ar(e)||Rt(8),on(e)&&(e=rr(e));const t=hh(this),r=Il(e,void 0);return r[vt].isManual_=!0,Tl(t),r}finishDraft(e,t){const r=e&&e[vt];(!r||!r.isManual_)&&Rt(9);const{scope_:n}=r;return dh(n,t),fh(void 0,n)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let r;for(r=t.length-1;r>=0;r--){const i=t[r];if(i.path.length===0&&i.op==="replace"){e=i.value;break}}r>-1&&(t=t.slice(r+1));const n=ln("Patches").applyPatches_;return on(e)?n(e,t):this.produce(e,i=>n(i,t))}};function Il(e,t){const r=Ws(e)?ln("MapSet").proxyMap_(e,t):Ks(e)?ln("MapSet").proxySet_(e,t):$2(e,t);return(t?t.scope_:Pg()).drafts_.push(r),r}function rr(e){return on(e)||Rt(10,e),Ng(e)}function Ng(e){if(!ar(e)||Hs(e))return e;const t=e[vt];let r;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,r=Cl(e,t.scope_.immer_.useStrictShallowCopy_)}else r=Cl(e,!0);return Ia(r,(n,i)=>{Sg(r,n,Ng(i))}),t&&(t.finalized_=!1),r}var yt=new R2,kg=yt.produce;yt.produceWithPatches.bind(yt);yt.setAutoFreeze.bind(yt);yt.setUseStrictShallowCopy.bind(yt);yt.applyPatches.bind(yt);yt.createDraft.bind(yt);yt.finishDraft.bind(yt);function Og(e){return({dispatch:r,getState:n})=>i=>a=>typeof a=="function"?a(r,n,e):i(a)}var U2=Og(),B2=Og,F2=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?Da:Da.apply(null,arguments)};function Ot(e,t){function r(...n){if(t){let i=t(...n);if(!i)throw new Error(gt(0));return{type:e,payload:i.payload,..."meta"in i&&{meta:i.meta},..."error"in i&&{error:i.error}}}return{type:e,payload:n[0]}}return r.toString=()=>`${e}`,r.type=e,r.match=n=>bg(n)&&n.type===e,r}var Ag=class pi extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,pi.prototype)}static get[Symbol.species](){return pi}concat(...t){return super.concat.apply(this,t)}prepend(...t){return t.length===1&&Array.isArray(t[0])?new pi(...t[0].concat(this)):new pi(...t.concat(this))}};function ph(e){return ar(e)?kg(e,()=>{}):e}function ha(e,t,r){return e.has(t)?e.get(t):e.set(t,r(t)).get(t)}function z2(e){return typeof e=="boolean"}var W2=()=>function(t){const{thunk:r=!0,immutableCheck:n=!0,serializableCheck:i=!0,actionCreatorCheck:a=!0}=t??{};let s=new Ag;return r&&(z2(r)?s.push(U2):s.push(B2(r.extraArgument))),s},K2="RTK_autoBatch",gh=e=>t=>{setTimeout(t,e)},H2=(e={type:"raf"})=>t=>(...r)=>{const n=t(...r);let i=!0,a=!1,s=!1;const o=new Set,c=e.type==="tick"?queueMicrotask:e.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:gh(10):e.type==="callback"?e.queueNotification:gh(e.timeout),d=()=>{s=!1,a&&(a=!1,o.forEach(u=>u()))};return Object.assign({},n,{subscribe(u){const h=()=>i&&u(),f=n.subscribe(h);return o.add(u),()=>{f(),o.delete(u)}},dispatch(u){try{return i=!u?.meta?.[K2],a=!i,a&&(s||(s=!0,c(d))),n.dispatch(u)}finally{i=!0}}})},q2=e=>function(r){const{autoBatch:n=!0}=r??{};let i=new Ag(e);return n&&i.push(H2(typeof n=="object"?n:void 0)),i};function V2(e){const t=W2(),{reducer:r=void 0,middleware:n,devTools:i=!0,duplicateMiddlewareCheck:a=!0,preloadedState:s=void 0,enhancers:o=void 0}=e||{};let c;if(typeof r=="function")c=r;else if(tu(r))c=xg(r);else throw new Error(gt(1));let d;typeof n=="function"?d=n(t):d=t();let u=Da;i&&(u=F2({trace:!1,...typeof i=="object"&&i}));const h=A2(...d),f=q2(h);let m=typeof o=="function"?o(f):f();const g=u(...m);return yg(c,s,g)}function Eg(e){const t={},r=[];let n;const i={addCase(a,s){const o=typeof a=="string"?a:a.type;if(!o)throw new Error(gt(28));if(o in t)throw new Error(gt(29));return t[o]=s,i},addMatcher(a,s){return r.push({matcher:a,reducer:s}),i},addDefaultCase(a){return n=a,i}};return e(i),[t,r,n]}function G2(e){return typeof e=="function"}function Y2(e,t){let[r,n,i]=Eg(t),a;if(G2(e))a=()=>ph(e());else{const o=ph(e);a=()=>o}function s(o=a(),c){let d=[r[c.type],...n.filter(({matcher:u})=>u(c)).map(({reducer:u})=>u)];return d.filter(u=>!!u).length===0&&(d=[i]),d.reduce((u,h)=>{if(h)if(on(u)){const m=h(u,c);return m===void 0?u:m}else{if(ar(u))return kg(u,f=>h(f,c));{const f=h(u,c);if(f===void 0){if(u===null)return u;throw Error("A case reducer on a non-draftable value must not return undefined")}return f}}return u},o)}return s.getInitialState=a,s}var Z2="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",X2=(e=21)=>{let t="",r=e;for(;r--;)t+=Z2[Math.random()*64|0];return t},J2=Symbol.for("rtk-slice-createasyncthunk");function Q2(e,t){return`${e}/${t}`}function eS({creators:e}={}){const t=e?.asyncThunk?.[J2];return function(n){const{name:i,reducerPath:a=i}=n;if(!i)throw new Error(gt(11));typeof process<"u";const s=(typeof n.reducers=="function"?n.reducers(rS()):n.reducers)||{},o=Object.keys(s),c={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},d={addCase(b,S){const _=typeof b=="string"?b:b.type;if(!_)throw new Error(gt(12));if(_ in c.sliceCaseReducersByType)throw new Error(gt(13));return c.sliceCaseReducersByType[_]=S,d},addMatcher(b,S){return c.sliceMatchers.push({matcher:b,reducer:S}),d},exposeAction(b,S){return c.actionCreators[b]=S,d},exposeCaseReducer(b,S){return c.sliceCaseReducersByName[b]=S,d}};o.forEach(b=>{const S=s[b],_={reducerName:b,type:Q2(i,b),createNotation:typeof n.reducers=="function"};iS(S)?sS(_,S,d,t):nS(_,S,d)});function u(){const[b={},S=[],_=void 0]=typeof n.extraReducers=="function"?Eg(n.extraReducers):[n.extraReducers],N={...b,...c.sliceCaseReducersByType};return Y2(n.initialState,P=>{for(let E in N)P.addCase(E,N[E]);for(let E of c.sliceMatchers)P.addMatcher(E.matcher,E.reducer);for(let E of S)P.addMatcher(E.matcher,E.reducer);_&&P.addDefaultCase(_)})}const h=b=>b,f=new Map,m=new WeakMap;let g;function p(b,S){return g||(g=u()),g(b,S)}function v(){return g||(g=u()),g.getInitialState()}function x(b,S=!1){function _(P){let E=P[b];return typeof E>"u"&&S&&(E=ha(m,_,v)),E}function N(P=h){const E=ha(f,S,()=>new WeakMap);return ha(E,P,()=>{const w={};for(const[A,O]of Object.entries(n.selectors??{}))w[A]=tS(O,P,()=>ha(m,P,v),S);return w})}return{reducerPath:b,getSelectors:N,get selectors(){return N(_)},selectSlice:_}}const j={name:i,reducer:p,actions:c.actionCreators,caseReducers:c.sliceCaseReducersByName,getInitialState:v,...x(a),injectInto(b,{reducerPath:S,..._}={}){const N=S??a;return b.inject({reducerPath:N,reducer:p},_),{...j,...x(N,!0)}}};return j}}function tS(e,t,r,n){function i(a,...s){let o=t(a);return typeof o>"u"&&n&&(o=r()),e(o,...s)}return i.unwrapped=e,i}var Mt=eS();function rS(){function e(t,r){return{_reducerDefinitionType:"asyncThunk",payloadCreator:t,...r}}return e.withTypes=()=>e,{reducer(t){return Object.assign({[t.name](...r){return t(...r)}}[t.name],{_reducerDefinitionType:"reducer"})},preparedReducer(t,r){return{_reducerDefinitionType:"reducerWithPrepare",prepare:t,reducer:r}},asyncThunk:e}}function nS({type:e,reducerName:t,createNotation:r},n,i){let a,s;if("reducer"in n){if(r&&!aS(n))throw new Error(gt(17));a=n.reducer,s=n.prepare}else a=n;i.addCase(e,a).exposeCaseReducer(t,a).exposeAction(t,s?Ot(e,s):Ot(e))}function iS(e){return e._reducerDefinitionType==="asyncThunk"}function aS(e){return e._reducerDefinitionType==="reducerWithPrepare"}function sS({type:e,reducerName:t},r,n,i){if(!i)throw new Error(gt(18));const{payloadCreator:a,fulfilled:s,pending:o,rejected:c,settled:d,options:u}=r,h=i(e,a,u);n.exposeAction(t,h),s&&n.addCase(h.fulfilled,s),o&&n.addCase(h.pending,o),c&&n.addCase(h.rejected,c),d&&n.addMatcher(h.settled,d),n.exposeCaseReducer(t,{fulfilled:s||fa,pending:o||fa,rejected:c||fa,settled:d||fa})}function fa(){}var oS="task",Cg="listener",Mg="completed",iu="cancelled",lS=`task-${iu}`,cS=`task-${Mg}`,$l=`${Cg}-${iu}`,uS=`${Cg}-${Mg}`,qs=class{constructor(e){Ao(this,"name","TaskAbortError");Ao(this,"message");this.code=e,this.message=`${oS} ${iu} (reason: ${e})`}},au=(e,t)=>{if(typeof e!="function")throw new TypeError(gt(32))},Ra=()=>{},Tg=(e,t=Ra)=>(e.catch(t),e),Dg=(e,t)=>(e.addEventListener("abort",t,{once:!0}),()=>e.removeEventListener("abort",t)),Xr=(e,t)=>{const r=e.signal;r.aborted||("reason"in r||Object.defineProperty(r,"reason",{enumerable:!0,value:t,configurable:!0,writable:!0}),e.abort(t))},Jr=e=>{if(e.aborted){const{reason:t}=e;throw new qs(t)}};function Ig(e,t){let r=Ra;return new Promise((n,i)=>{const a=()=>i(new qs(e.reason));if(e.aborted){a();return}r=Dg(e,a),t.finally(()=>r()).then(n,i)}).finally(()=>{r=Ra})}var dS=async(e,t)=>{try{return await Promise.resolve(),{status:"ok",value:await e()}}catch(r){return{status:r instanceof qs?"cancelled":"rejected",error:r}}finally{t?.()}},Ua=e=>t=>Tg(Ig(e,t).then(r=>(Jr(e),r))),$g=e=>{const t=Ua(e);return r=>t(new Promise(n=>setTimeout(n,r)))},{assign:In}=Object,vh={},Vs="listenerMiddleware",hS=(e,t)=>{const r=n=>Dg(e,()=>Xr(n,e.reason));return(n,i)=>{au(n);const a=new AbortController;r(a);const s=dS(async()=>{Jr(e),Jr(a.signal);const o=await n({pause:Ua(a.signal),delay:$g(a.signal),signal:a.signal});return Jr(a.signal),o},()=>Xr(a,cS));return i?.autoJoin&&t.push(s.catch(Ra)),{result:Ua(e)(s),cancel(){Xr(a,lS)}}}},fS=(e,t)=>{const r=async(n,i)=>{Jr(t);let a=()=>{};const o=[new Promise((c,d)=>{let u=e({predicate:n,effect:(h,f)=>{f.unsubscribe(),c([h,f.getState(),f.getOriginalState()])}});a=()=>{u(),d()}})];i!=null&&o.push(new Promise(c=>setTimeout(c,i,null)));try{const c=await Ig(t,Promise.race(o));return Jr(t),c}finally{a()}};return(n,i)=>Tg(r(n,i))},Lg=e=>{let{type:t,actionCreator:r,matcher:n,predicate:i,effect:a}=e;if(t)i=Ot(t).match;else if(r)t=r.type,i=r.match;else if(n)i=n;else if(!i)throw new Error(gt(21));return au(a),{predicate:i,type:t,effect:a}},Rg=In(e=>{const{type:t,predicate:r,effect:n}=Lg(e);return{id:X2(),effect:n,type:t,predicate:r,pending:new Set,unsubscribe:()=>{throw new Error(gt(22))}}},{withTypes:()=>Rg}),yh=(e,t)=>{const{type:r,effect:n,predicate:i}=Lg(t);return Array.from(e.values()).find(a=>(typeof r=="string"?a.type===r:a.predicate===i)&&a.effect===n)},Ll=e=>{e.pending.forEach(t=>{Xr(t,$l)})},mS=e=>()=>{e.forEach(Ll),e.clear()},xh=(e,t,r)=>{try{e(t,r)}catch(n){setTimeout(()=>{throw n},0)}},Ug=In(Ot(`${Vs}/add`),{withTypes:()=>Ug}),pS=Ot(`${Vs}/removeAll`),Bg=In(Ot(`${Vs}/remove`),{withTypes:()=>Bg}),gS=(...e)=>{console.error(`${Vs}/error`,...e)},Hi=(e={})=>{const t=new Map,{extra:r,onError:n=gS}=e;au(n);const i=u=>(u.unsubscribe=()=>t.delete(u.id),t.set(u.id,u),h=>{u.unsubscribe(),h?.cancelActive&&Ll(u)}),a=u=>{const h=yh(t,u)??Rg(u);return i(h)};In(a,{withTypes:()=>a});const s=u=>{const h=yh(t,u);return h&&(h.unsubscribe(),u.cancelActive&&Ll(h)),!!h};In(s,{withTypes:()=>s});const o=async(u,h,f,m)=>{const g=new AbortController,p=fS(a,g.signal),v=[];try{u.pending.add(g),await Promise.resolve(u.effect(h,In({},f,{getOriginalState:m,condition:(x,j)=>p(x,j).then(Boolean),take:p,delay:$g(g.signal),pause:Ua(g.signal),extra:r,signal:g.signal,fork:hS(g.signal,v),unsubscribe:u.unsubscribe,subscribe:()=>{t.set(u.id,u)},cancelActiveListeners:()=>{u.pending.forEach((x,j,b)=>{x!==g&&(Xr(x,$l),b.delete(x))})},cancel:()=>{Xr(g,$l),u.pending.delete(g)},throwIfCancelled:()=>{Jr(g.signal)}})))}catch(x){x instanceof qs||xh(n,x,{raisedBy:"effect"})}finally{await Promise.all(v),Xr(g,uS),u.pending.delete(g)}},c=mS(t);return{middleware:u=>h=>f=>{if(!bg(f))return h(f);if(Ug.match(f))return a(f.payload);if(pS.match(f)){c();return}if(Bg.match(f))return s(f.payload);let m=u.getState();const g=()=>{if(m===vh)throw new Error(gt(23));return m};let p;try{if(p=h(f),t.size>0){const v=u.getState(),x=Array.from(t.values());for(const j of x){let b=!1;try{b=j.predicate(f,v,m)}catch(S){b=!1,xh(n,S,{raisedBy:"predicate"})}b&&o(j,f,u,g)}}}finally{m=vh}return p},startListening:a,stopListening:s,clearListeners:c}};function gt(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var vS={layoutType:"horizontal",width:0,height:0,margin:{top:5,right:5,bottom:5,left:5},scale:1},Fg=Mt({name:"chartLayout",initialState:vS,reducers:{setLayout(e,t){e.layoutType=t.payload},setChartSize(e,t){e.width=t.payload.width,e.height=t.payload.height},setMargin(e,t){e.margin.top=t.payload.top,e.margin.right=t.payload.right,e.margin.bottom=t.payload.bottom,e.margin.left=t.payload.left},setScale(e,t){e.scale=t.payload}}}),{setMargin:yS,setLayout:xS,setChartSize:bS,setScale:wS}=Fg.actions,jS=Fg.reducer;function bh(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function wh(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?bh(Object(r),!0).forEach(function(n){SS(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):bh(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function SS(e,t,r){return(t=PS(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function PS(e){var t=_S(e,"string");return typeof t=="symbol"?t:t+""}function _S(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Ba=Math.PI/180,NS=e=>e*180/Math.PI,Ge=(e,t,r,n)=>({x:e+Math.cos(-Ba*n)*r,y:t+Math.sin(-Ba*n)*r}),kS=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0,width:0,height:0,brushBottom:0};return Math.min(Math.abs(t-(n.left||0)-(n.right||0)),Math.abs(r-(n.top||0)-(n.bottom||0)))/2},OS=(e,t)=>{var{x:r,y:n}=e,{x:i,y:a}=t;return Math.sqrt((r-i)**2+(n-a)**2)},AS=(e,t)=>{var{x:r,y:n}=e,{cx:i,cy:a}=t,s=OS({x:r,y:n},{x:i,y:a});if(s<=0)return{radius:s,angle:0};var o=(r-i)/s,c=Math.acos(o);return n>a&&(c=2*Math.PI-c),{radius:s,angle:NS(c),angleInRadian:c}},ES=e=>{var{startAngle:t,endAngle:r}=e,n=Math.floor(t/360),i=Math.floor(r/360),a=Math.min(n,i);return{startAngle:t-a*360,endAngle:r-a*360}},CS=(e,t)=>{var{startAngle:r,endAngle:n}=t,i=Math.floor(r/360),a=Math.floor(n/360),s=Math.min(i,a);return e+s*360},MS=(e,t)=>{var{x:r,y:n}=e,{radius:i,angle:a}=AS({x:r,y:n},t),{innerRadius:s,outerRadius:o}=t;if(i<s||i>o||i===0)return null;var{startAngle:c,endAngle:d}=ES(t),u=a,h;if(c<=d){for(;u>d;)u-=360;for(;u<c;)u+=360;h=u>=c&&u<=d}else{for(;u>c;)u-=360;for(;u<d;)u+=360;h=u>=d&&u<=c}return h?wh(wh({},t),{},{radius:i,angle:CS(u,t)}):null};function jh(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Pt(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?jh(Object(r),!0).forEach(function(n){TS(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):jh(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function TS(e,t,r){return(t=DS(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function DS(e){var t=IS(e,"string");return typeof t=="symbol"?t:t+""}function IS(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Fe(e,t,r){return we(e)||we(t)?r:kt(t)?an(e,t,r):typeof t=="function"?t(e):r}var $S=(e,t,r,n,i)=>{var a,s=-1,o=(a=t?.length)!==null&&a!==void 0?a:0;if(o<=1||e==null)return 0;if(n==="angleAxis"&&i!=null&&Math.abs(Math.abs(i[1]-i[0])-360)<=1e-6)for(var c=0;c<o;c++){var d=c>0?r[c-1].coordinate:r[o-1].coordinate,u=r[c].coordinate,h=c>=o-1?r[0].coordinate:r[c+1].coordinate,f=void 0;if(ct(u-d)!==ct(h-u)){var m=[];if(ct(h-u)===ct(i[1]-i[0])){f=h;var g=u+i[1]-i[0];m[0]=Math.min(g,(g+d)/2),m[1]=Math.max(g,(g+d)/2)}else{f=d;var p=h+i[1]-i[0];m[0]=Math.min(u,(p+u)/2),m[1]=Math.max(u,(p+u)/2)}var v=[Math.min(u,(f+u)/2),Math.max(u,(f+u)/2)];if(e>v[0]&&e<=v[1]||e>=m[0]&&e<=m[1]){({index:s}=r[c]);break}}else{var x=Math.min(d,h),j=Math.max(d,h);if(e>(x+u)/2&&e<=(j+u)/2){({index:s}=r[c]);break}}}else if(t){for(var b=0;b<o;b++)if(b===0&&e<=(t[b].coordinate+t[b+1].coordinate)/2||b>0&&b<o-1&&e>(t[b].coordinate+t[b-1].coordinate)/2&&e<=(t[b].coordinate+t[b+1].coordinate)/2||b===o-1&&e>(t[b].coordinate+t[b-1].coordinate)/2){({index:s}=t[b]);break}}return s},LS=(e,t,r)=>{if(t&&r){var{width:n,height:i}=r,{align:a,verticalAlign:s,layout:o}=t;if((o==="vertical"||o==="horizontal"&&s==="middle")&&a!=="center"&&Y(e[a]))return Pt(Pt({},e),{},{[a]:e[a]+(n||0)});if((o==="horizontal"||o==="vertical"&&a==="center")&&s!=="middle"&&Y(e[s]))return Pt(Pt({},e),{},{[s]:e[s]+(i||0)})}return e},qt=(e,t)=>e==="horizontal"&&t==="xAxis"||e==="vertical"&&t==="yAxis"||e==="centric"&&t==="angleAxis"||e==="radial"&&t==="radiusAxis",zg=(e,t,r,n)=>{if(n)return e.map(o=>o.coordinate);var i,a,s=e.map(o=>(o.coordinate===t&&(i=!0),o.coordinate===r&&(a=!0),o.coordinate));return i||s.push(t),a||s.push(r),s},Wg=(e,t,r)=>{if(!e)return null;var{duplicateDomain:n,type:i,range:a,scale:s,realScaleType:o,isCategorical:c,categoricalDomain:d,tickCount:u,ticks:h,niceTicks:f,axisType:m}=e;if(!s)return null;var g=o==="scaleBand"&&s.bandwidth?s.bandwidth()/2:2,p=i==="category"&&s.bandwidth?s.bandwidth()/g:0;if(p=m==="angleAxis"&&a&&a.length>=2?ct(a[0]-a[1])*2*p:p,h||f){var v=(h||f||[]).map((x,j)=>{var b=n?n.indexOf(x):x;return{coordinate:s(b)+p,value:x,offset:p,index:j}});return v.filter(x=>!rt(x.coordinate))}return c&&d?d.map((x,j)=>({coordinate:s(x)+p,value:x,index:j,offset:p})):s.ticks&&!r&&u!=null?s.ticks(u).map((x,j)=>({coordinate:s(x)+p,value:x,offset:p,index:j})):s.domain().map((x,j)=>({coordinate:s(x)+p,value:n?n[x]:x,index:j,offset:p}))},Sh=1e-4,RS=e=>{var t=e.domain();if(!(!t||t.length<=2)){var r=t.length,n=e.range(),i=Math.min(n[0],n[1])-Sh,a=Math.max(n[0],n[1])+Sh,s=e(t[0]),o=e(t[r-1]);(s<i||s>a||o<i||o>a)&&e.domain([t[0],t[r-1]])}},US=(e,t)=>{if(!t||t.length!==2||!Y(t[0])||!Y(t[1]))return e;var r=Math.min(t[0],t[1]),n=Math.max(t[0],t[1]),i=[e[0],e[1]];return(!Y(e[0])||e[0]<r)&&(i[0]=r),(!Y(e[1])||e[1]>n)&&(i[1]=n),i[0]>n&&(i[0]=n),i[1]<r&&(i[1]=r),i},BS=e=>{var t=e.length;if(!(t<=0))for(var r=0,n=e[0].length;r<n;++r)for(var i=0,a=0,s=0;s<t;++s){var o=rt(e[s][r][1])?e[s][r][0]:e[s][r][1];o>=0?(e[s][r][0]=i,e[s][r][1]=i+o,i=e[s][r][1]):(e[s][r][0]=a,e[s][r][1]=a+o,a=e[s][r][1])}},FS=e=>{var t=e.length;if(!(t<=0))for(var r=0,n=e[0].length;r<n;++r)for(var i=0,a=0;a<t;++a){var s=rt(e[a][r][1])?e[a][r][0]:e[a][r][1];s>=0?(e[a][r][0]=i,e[a][r][1]=i+s,i=e[a][r][1]):(e[a][r][0]=0,e[a][r][1]=0)}},zS={sign:BS,expand:_j,none:Fn,silhouette:Nj,wiggle:kj,positive:FS},WS=(e,t,r)=>{var n=zS[r],i=Pj().keys(t).value((a,s)=>+Fe(a,s,0)).order(kl).offset(n);return i(e)};function su(e){return e==null?void 0:String(e)}function Fa(e){var{axis:t,ticks:r,bandSize:n,entry:i,index:a,dataKey:s}=e;if(t.type==="category"){if(!t.allowDuplicatedCategory&&t.dataKey&&!we(i[t.dataKey])){var o=Pp(r,"value",i[t.dataKey]);if(o)return o.coordinate+n/2}return r[a]?r[a].coordinate+n/2:null}var c=Fe(i,we(s)?t.dataKey:s);return we(c)?null:t.scale(c)}var Ph=e=>{var{axis:t,ticks:r,offset:n,bandSize:i,entry:a,index:s}=e;if(t.type==="category")return r[s]?r[s].coordinate+n:null;var o=Fe(a,t.dataKey,t.scale.domain()[s]);return we(o)?null:t.scale(o)-i/2+n},KS=e=>{var{numericAxis:t}=e,r=t.scale.domain();if(t.type==="number"){var n=Math.min(r[0],r[1]),i=Math.max(r[0],r[1]);return n<=0&&i>=0?0:i<0?i:n}return r[0]},HS=e=>{var t=e.flat(2).filter(Y);return[Math.min(...t),Math.max(...t)]},qS=e=>[e[0]===1/0?0:e[0],e[1]===-1/0?0:e[1]],VS=(e,t,r)=>{if(e!=null)return qS(Object.keys(e).reduce((n,i)=>{var a=e[i],{stackedData:s}=a,o=s.reduce((c,d)=>{var u=HS(d.slice(t,r+1));return[Math.min(c[0],u[0]),Math.max(c[1],u[1])]},[1/0,-1/0]);return[Math.min(o[0],n[0]),Math.max(o[1],n[1])]},[1/0,-1/0]))},_h=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,Nh=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,cn=(e,t,r)=>{if(e&&e.scale&&e.scale.bandwidth){var n=e.scale.bandwidth();if(!r||n>0)return n}if(e&&t&&t.length>=2){for(var i=Fs(t,u=>u.coordinate),a=1/0,s=1,o=i.length;s<o;s++){var c=i[s],d=i[s-1];a=Math.min((c.coordinate||0)-(d.coordinate||0),a)}return a===1/0?0:a}return r?void 0:0};function kh(e){var{tooltipEntrySettings:t,dataKey:r,payload:n,value:i,name:a}=e;return Pt(Pt({},t),{},{dataKey:r,payload:n,value:i,name:a})}function Jn(e,t){if(e)return String(e);if(typeof t=="string")return t}function GS(e,t,r,n,i){if(r==="horizontal"||r==="vertical"){var a=e>=i.left&&e<=i.left+i.width&&t>=i.top&&t<=i.top+i.height;return a?{x:e,y:t}:null}return n?MS({x:e,y:t},n):null}var YS=(e,t,r,n)=>{var i=t.find(d=>d&&d.index===r);if(i){if(e==="horizontal")return{x:i.coordinate,y:n.y};if(e==="vertical")return{x:n.x,y:i.coordinate};if(e==="centric"){var a=i.coordinate,{radius:s}=n;return Pt(Pt(Pt({},n),Ge(n.cx,n.cy,s,a)),{},{angle:a,radius:s})}var o=i.coordinate,{angle:c}=n;return Pt(Pt(Pt({},n),Ge(n.cx,n.cy,o,c)),{},{angle:c,radius:o})}return{x:0,y:0}},ZS=(e,t)=>t==="horizontal"?e.x:t==="vertical"?e.y:t==="centric"?e.angle:e.radius,ur=e=>e.layout.width,dr=e=>e.layout.height,XS=e=>e.layout.scale,Kg=e=>e.layout.margin,ou=$(e=>e.cartesianAxis.xAxis,e=>Object.values(e)),lu=$(e=>e.cartesianAxis.yAxis,e=>Object.values(e)),JS="data-recharts-item-index",QS="data-recharts-item-data-key",Gs=60;function Oh(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function yr(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Oh(Object(r),!0).forEach(function(n){eP(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Oh(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function eP(e,t,r){return(t=tP(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function tP(e){var t=rP(e,"string");return typeof t=="symbol"?t:t+""}function rP(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var nP=e=>e.brush.height,ze=$([ur,dr,Kg,nP,ou,lu,gg,j2],(e,t,r,n,i,a,s,o)=>{var c=a.reduce((g,p)=>{var{orientation:v}=p;if(!p.mirror&&!p.hide){var x=typeof p.width=="number"?p.width:Gs;return yr(yr({},g),{},{[v]:g[v]+x})}return g},{left:r.left||0,right:r.right||0}),d=i.reduce((g,p)=>{var{orientation:v}=p;return!p.mirror&&!p.hide?yr(yr({},g),{},{[v]:an(g,"".concat(v))+p.height}):g},{top:r.top||0,bottom:r.bottom||0}),u=yr(yr({},d),c),h=u.bottom;u.bottom+=n,u=LS(u,s,o);var f=e-u.left-u.right,m=t-u.top-u.bottom;return yr(yr({brushBottom:h},u),{},{width:Math.max(f,0),height:Math.max(m,0)})}),iP=$(ze,e=>({x:e.left,y:e.top,width:e.width,height:e.height})),Hg=$(ur,dr,(e,t)=>({x:0,y:0,width:e,height:t})),aP=y.createContext(null),Ze=()=>y.useContext(aP)!=null,Ys=e=>e.brush,Zs=$([Ys,ze,Kg],(e,t,r)=>({height:e.height,x:Y(e.x)?e.x:t.left,y:Y(e.y)?e.y:t.top+t.height+t.brushBottom-(r?.bottom||0),width:Y(e.width)?e.width:t.width})),Xs=()=>{var e,t=Ze(),r=ee(iP),n=ee(Zs),i=(e=ee(Ys))===null||e===void 0?void 0:e.padding;return!t||!n||!i?r:{width:n.width-i.left-i.right,height:n.height-i.top-i.bottom,x:i.left,y:i.top}},sP={top:0,bottom:0,left:0,right:0,width:0,height:0,brushBottom:0},qg=()=>{var e;return(e=ee(ze))!==null&&e!==void 0?e:sP},cu=()=>ee(ur),uu=()=>ee(dr),oP={top:0,right:0,bottom:0,left:0},lP=()=>{var e;return(e=ee(t=>t.layout.margin))!==null&&e!==void 0?e:oP},ge=e=>e.layout.layoutType,qi=()=>ee(ge),cP={settings:{layout:"horizontal",align:"center",verticalAlign:"middle",itemSorter:"value"},size:{width:0,height:0},payload:[]},Vg=Mt({name:"legend",initialState:cP,reducers:{setLegendSize(e,t){e.size.width=t.payload.width,e.size.height=t.payload.height},setLegendSettings(e,t){e.settings.align=t.payload.align,e.settings.layout=t.payload.layout,e.settings.verticalAlign=t.payload.verticalAlign,e.settings.itemSorter=t.payload.itemSorter},addLegendPayload(e,t){e.payload.push(t.payload)},removeLegendPayload(e,t){var r=rr(e).payload.indexOf(t.payload);r>-1&&e.payload.splice(r,1)}}}),{setLegendSize:Ah,setLegendSettings:uP,addLegendPayload:dP,removeLegendPayload:hP}=Vg.actions,fP=Vg.reducer,mP=["contextPayload"];function Rl(){return Rl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Rl.apply(null,arguments)}function Eh(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Kn(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Eh(Object(r),!0).forEach(function(n){du(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Eh(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function du(e,t,r){return(t=pP(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function pP(e){var t=gP(e,"string");return typeof t=="symbol"?t:t+""}function gP(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function vP(e,t){if(e==null)return{};var r,n,i=yP(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function yP(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function xP(e){return e.value}function bP(e){var{contextPayload:t}=e,r=vP(e,mP),n=ag(t,e.payloadUniqBy,xP),i=Kn(Kn({},r),{},{payload:n});return y.isValidElement(e.content)?y.cloneElement(e.content,i):typeof e.content=="function"?y.createElement(e.content,i):y.createElement(Kc,i)}function wP(e,t,r,n,i,a){var{layout:s,align:o,verticalAlign:c}=t,d,u;return(!e||(e.left===void 0||e.left===null)&&(e.right===void 0||e.right===null))&&(o==="center"&&s==="vertical"?d={left:((n||0)-a.width)/2}:d=o==="right"?{right:r&&r.right||0}:{left:r&&r.left||0}),(!e||(e.top===void 0||e.top===null)&&(e.bottom===void 0||e.bottom===null))&&(c==="middle"?u={top:((i||0)-a.height)/2}:u=c==="bottom"?{bottom:r&&r.bottom||0}:{top:r&&r.top||0}),Kn(Kn({},d),u)}function jP(e){var t=Ae();return y.useEffect(()=>{t(uP(e))},[t,e]),null}function SP(e){var t=Ae();return y.useEffect(()=>(t(Ah(e)),()=>{t(Ah({width:0,height:0}))}),[t,e]),null}function PP(e){var t=_2(),r=G1(),n=lP(),{width:i,height:a,wrapperStyle:s,portal:o}=e,[c,d]=vg([t]),u=cu(),h=uu(),f=u-(n.left||0)-(n.right||0),m=_r.getWidthOrHeight(e.layout,a,i,f),g=o?s:Kn(Kn({position:"absolute",width:m?.width||i||"auto",height:m?.height||a||"auto"},wP(s,e,n,u,h,c)),s),p=o??r;if(p==null)return null;var v=y.createElement("div",{className:"recharts-legend-wrapper",style:g,ref:d},y.createElement(jP,{layout:e.layout,align:e.align,verticalAlign:e.verticalAlign,itemSorter:e.itemSorter}),y.createElement(SP,{width:c.width,height:c.height}),y.createElement(bP,Rl({},e,m,{margin:n,chartWidth:u,chartHeight:h,contextPayload:t})));return wc.createPortal(v,p)}class _r extends y.PureComponent{static getWidthOrHeight(t,r,n,i){return t==="vertical"&&Y(r)?{height:r}:t==="horizontal"?{width:n||i}:null}render(){return y.createElement(PP,this.props)}}du(_r,"displayName","Legend");du(_r,"defaultProps",{align:"center",iconSize:14,itemSorter:"value",layout:"horizontal",verticalAlign:"bottom"});function Ul(){return Ul=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ul.apply(null,arguments)}function Ch(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Go(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Ch(Object(r),!0).forEach(function(n){_P(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ch(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function _P(e,t,r){return(t=NP(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function NP(e){var t=kP(e,"string");return typeof t=="symbol"?t:t+""}function kP(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function OP(e){return Array.isArray(e)&&kt(e[0])&&kt(e[1])?e.join(" ~ "):e}var AP=e=>{var{separator:t=" : ",contentStyle:r={},itemStyle:n={},labelStyle:i={},payload:a,formatter:s,itemSorter:o,wrapperClassName:c,labelClassName:d,label:u,labelFormatter:h,accessibilityLayer:f=!1}=e,m=()=>{if(a&&a.length){var _={padding:0,margin:0},N=(o?Fs(a,o):a).map((P,E)=>{if(P.type==="none")return null;var w=P.formatter||s||OP,{value:A,name:O}=P,D=A,R=O;if(w){var C=w(A,O,P,E,a);if(Array.isArray(C))[D,R]=C;else if(C!=null)D=C;else return null}var k=Go({display:"block",paddingTop:4,paddingBottom:4,color:P.color||"#000"},n);return y.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(E),style:k},kt(R)?y.createElement("span",{className:"recharts-tooltip-item-name"},R):null,kt(R)?y.createElement("span",{className:"recharts-tooltip-item-separator"},t):null,y.createElement("span",{className:"recharts-tooltip-item-value"},D),y.createElement("span",{className:"recharts-tooltip-item-unit"},P.unit||""))});return y.createElement("ul",{className:"recharts-tooltip-item-list",style:_},N)}return null},g=Go({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},r),p=Go({margin:0},i),v=!we(u),x=v?u:"",j=me("recharts-default-tooltip",c),b=me("recharts-tooltip-label",d);v&&h&&a!==void 0&&a!==null&&(x=h(u,a));var S=f?{role:"status","aria-live":"assertive"}:{};return y.createElement("div",Ul({className:j,style:g},S),y.createElement("p",{className:b,style:p},y.isValidElement(x)?x:"".concat(x)),m())},si="recharts-tooltip-wrapper",EP={visibility:"hidden"};function CP(e){var{coordinate:t,translateX:r,translateY:n}=e;return me(si,{["".concat(si,"-right")]:Y(r)&&t&&Y(t.x)&&r>=t.x,["".concat(si,"-left")]:Y(r)&&t&&Y(t.x)&&r<t.x,["".concat(si,"-bottom")]:Y(n)&&t&&Y(t.y)&&n>=t.y,["".concat(si,"-top")]:Y(n)&&t&&Y(t.y)&&n<t.y})}function Mh(e){var{allowEscapeViewBox:t,coordinate:r,key:n,offsetTopLeft:i,position:a,reverseDirection:s,tooltipDimension:o,viewBox:c,viewBoxDimension:d}=e;if(a&&Y(a[n]))return a[n];var u=r[n]-o-(i>0?i:0),h=r[n]+i;if(t[n])return s[n]?u:h;var f=c[n];if(f==null)return 0;if(s[n]){var m=u,g=f;return m<g?Math.max(h,f):Math.max(u,f)}if(d==null)return 0;var p=h+o,v=f+d;return p>v?Math.max(u,f):Math.max(h,f)}function MP(e){var{translateX:t,translateY:r,useTranslate3d:n}=e;return{transform:n?"translate3d(".concat(t,"px, ").concat(r,"px, 0)"):"translate(".concat(t,"px, ").concat(r,"px)")}}function TP(e){var{allowEscapeViewBox:t,coordinate:r,offsetTopLeft:n,position:i,reverseDirection:a,tooltipBox:s,useTranslate3d:o,viewBox:c}=e,d,u,h;return s.height>0&&s.width>0&&r?(u=Mh({allowEscapeViewBox:t,coordinate:r,key:"x",offsetTopLeft:n,position:i,reverseDirection:a,tooltipDimension:s.width,viewBox:c,viewBoxDimension:c.width}),h=Mh({allowEscapeViewBox:t,coordinate:r,key:"y",offsetTopLeft:n,position:i,reverseDirection:a,tooltipDimension:s.height,viewBox:c,viewBoxDimension:c.height}),d=MP({translateX:u,translateY:h,useTranslate3d:o})):d=EP,{cssProperties:d,cssClasses:CP({translateX:u,translateY:h,coordinate:r})}}function Th(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function ma(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Th(Object(r),!0).forEach(function(n){Bl(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Th(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Bl(e,t,r){return(t=DP(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function DP(e){var t=IP(e,"string");return typeof t=="symbol"?t:t+""}function IP(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class $P extends y.PureComponent{constructor(){super(...arguments),Bl(this,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),Bl(this,"handleKeyDown",t=>{if(t.key==="Escape"){var r,n,i,a;this.setState({dismissed:!0,dismissedAtCoordinate:{x:(r=(n=this.props.coordinate)===null||n===void 0?void 0:n.x)!==null&&r!==void 0?r:0,y:(i=(a=this.props.coordinate)===null||a===void 0?void 0:a.y)!==null&&i!==void 0?i:0}})}})}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}componentDidUpdate(){var t,r;this.state.dismissed&&(((t=this.props.coordinate)===null||t===void 0?void 0:t.x)!==this.state.dismissedAtCoordinate.x||((r=this.props.coordinate)===null||r===void 0?void 0:r.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}render(){var{active:t,allowEscapeViewBox:r,animationDuration:n,animationEasing:i,children:a,coordinate:s,hasPayload:o,isAnimationActive:c,offset:d,position:u,reverseDirection:h,useTranslate3d:f,viewBox:m,wrapperStyle:g,lastBoundingBox:p,innerRef:v,hasPortalFromProps:x}=this.props,{cssClasses:j,cssProperties:b}=TP({allowEscapeViewBox:r,coordinate:s,offsetTopLeft:d,position:u,reverseDirection:h,tooltipBox:{height:p.height,width:p.width},useTranslate3d:f,viewBox:m}),S=x?{}:ma(ma({transition:c&&t?"transform ".concat(n,"ms ").concat(i):void 0},b),{},{pointerEvents:"none",visibility:!this.state.dismissed&&t&&o?"visible":"hidden",position:"absolute",top:0,left:0}),_=ma(ma({},S),{},{visibility:!this.state.dismissed&&t&&o?"visible":"hidden"},g);return y.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",tabIndex:-1,className:j,style:_,ref:v},a)}}var LP=()=>!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout),fn={isSsr:LP()},Gg=()=>ee(e=>e.rootProps.accessibilityLayer);function Ye(e){return Number.isFinite(e)}function za(e){return typeof e=="number"&&e>0&&Number.isFinite(e)}function Fl(){return Fl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Fl.apply(null,arguments)}function Dh(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Ih(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Dh(Object(r),!0).forEach(function(n){RP(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Dh(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function RP(e,t,r){return(t=UP(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function UP(e){var t=BP(e,"string");return typeof t=="symbol"?t:t+""}function BP(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var $h={curveBasisClosed:fj,curveBasisOpen:mj,curveBasis:hj,curveBumpX:J1,curveBumpY:Q1,curveLinearClosed:pj,curveLinear:Ds,curveMonotoneX:gj,curveMonotoneY:vj,curveNatural:yj,curveStep:xj,curveStepAfter:wj,curveStepBefore:bj},pa=e=>Ye(e.x)&&Ye(e.y),oi=e=>e.x,li=e=>e.y,FP=(e,t)=>{if(typeof e=="function")return e;var r="curve".concat(Ki(e));return(r==="curveMonotone"||r==="curveBump")&&t?$h["".concat(r).concat(t==="vertical"?"Y":"X")]:$h[r]||Ds},zP=e=>{var{type:t="linear",points:r=[],baseLine:n,layout:i,connectNulls:a=!1}=e,s=FP(t,i),o=a?r.filter(pa):r,c;if(Array.isArray(n)){var d=a?n.filter(h=>pa(h)):n,u=o.map((h,f)=>Ih(Ih({},h),{},{base:d[f]}));return i==="vertical"?c=ca().y(li).x1(oi).x0(h=>h.base.x):c=ca().x(oi).y1(li).y0(h=>h.base.y),c.defined(pa).curve(s),c(u)}return i==="vertical"&&Y(n)?c=ca().y(li).x1(oi).x0(n):Y(n)?c=ca().x(oi).y1(li).y0(n):c=Mp().x(oi).y(li),c.defined(pa).curve(s),c(o)},wi=e=>{var{className:t,points:r,path:n,pathRef:i}=e;if((!r||!r.length)&&!n)return null;var a=r&&r.length?zP(e):n;return y.createElement("path",Fl({},ue(e,!1),$c(e),{className:me("recharts-curve",t),d:a===null?void 0:a,ref:i}))},WP=["x","y","top","left","width","height","className"];function zl(){return zl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},zl.apply(null,arguments)}function Lh(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function KP(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Lh(Object(r),!0).forEach(function(n){HP(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Lh(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function HP(e,t,r){return(t=qP(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function qP(e){var t=VP(e,"string");return typeof t=="symbol"?t:t+""}function VP(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function GP(e,t){if(e==null)return{};var r,n,i=YP(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function YP(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var ZP=(e,t,r,n,i,a)=>"M".concat(e,",").concat(i,"v").concat(n,"M").concat(a,",").concat(t,"h").concat(r),XP=e=>{var{x:t=0,y:r=0,top:n=0,left:i=0,width:a=0,height:s=0,className:o}=e,c=GP(e,WP),d=KP({x:t,y:r,top:n,left:i,width:a,height:s},c);return!Y(t)||!Y(r)||!Y(a)||!Y(s)||!Y(n)||!Y(i)?null:y.createElement("path",zl({},ue(d,!0),{className:me("recharts-cross",o),d:ZP(t,r,a,s,n,i)}))};function JP(e,t,r,n){var i=n/2;return{stroke:"none",fill:"#ccc",x:e==="horizontal"?t.x-i:r.left+.5,y:e==="horizontal"?r.top+.5:t.y-i,width:e==="horizontal"?n:r.width-1,height:e==="horizontal"?r.height-1:n}}function Rh(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function QP(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Rh(Object(r),!0).forEach(function(n){e_(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Rh(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function e_(e,t,r){return(t=t_(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function t_(e){var t=r_(e,"string");return typeof t=="symbol"?t:t+""}function r_(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Vt(e,t){var r=QP({},e),n=t,i=Object.keys(t),a=i.reduce((s,o)=>(s[o]===void 0&&n[o]!==void 0&&(s[o]=n[o]),s),r);return a}var Yg={},Zg={},Xg={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){if(!r||typeof r!="object")return!1;const n=Object.getPrototypeOf(r);return n===null||n===Object.prototype||Object.getPrototypeOf(n)===null?Object.prototype.toString.call(r)==="[object Object]":!1}e.isPlainObject=t})(Xg);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Xg,r=Zc,n=Rs,i=Us,a=Ls;function s(d,u,h){return o(d,u,void 0,void 0,void 0,void 0,h)}function o(d,u,h,f,m,g,p){const v=p(d,u,h,f,m,g);if(v!==void 0)return v;if(typeof d==typeof u)switch(typeof d){case"bigint":case"string":case"boolean":case"symbol":case"undefined":return d===u;case"number":return d===u||Object.is(d,u);case"function":return d===u;case"object":return c(d,u,g,p)}return c(d,u,g,p)}function c(d,u,h,f){if(Object.is(d,u))return!0;let m=n.getTag(d),g=n.getTag(u);if(m===i.argumentsTag&&(m=i.objectTag),g===i.argumentsTag&&(g=i.objectTag),m!==g)return!1;switch(m){case i.stringTag:return d.toString()===u.toString();case i.numberTag:{const x=d.valueOf(),j=u.valueOf();return a.eq(x,j)}case i.booleanTag:case i.dateTag:case i.symbolTag:return Object.is(d.valueOf(),u.valueOf());case i.regexpTag:return d.source===u.source&&d.flags===u.flags;case i.functionTag:return d===u}h=h??new Map;const p=h.get(d),v=h.get(u);if(p!=null&&v!=null)return p===u;h.set(d,u),h.set(u,d);try{switch(m){case i.mapTag:{if(d.size!==u.size)return!1;for(const[x,j]of d.entries())if(!u.has(x)||!o(j,u.get(x),x,d,u,h,f))return!1;return!0}case i.setTag:{if(d.size!==u.size)return!1;const x=Array.from(d.values()),j=Array.from(u.values());for(let b=0;b<x.length;b++){const S=x[b],_=j.findIndex(N=>o(S,N,void 0,d,u,h,f));if(_===-1)return!1;j.splice(_,1)}return!0}case i.arrayTag:case i.uint8ArrayTag:case i.uint8ClampedArrayTag:case i.uint16ArrayTag:case i.uint32ArrayTag:case i.bigUint64ArrayTag:case i.int8ArrayTag:case i.int16ArrayTag:case i.int32ArrayTag:case i.bigInt64ArrayTag:case i.float32ArrayTag:case i.float64ArrayTag:{if(typeof Buffer<"u"&&Buffer.isBuffer(d)!==Buffer.isBuffer(u)||d.length!==u.length)return!1;for(let x=0;x<d.length;x++)if(!o(d[x],u[x],x,d,u,h,f))return!1;return!0}case i.arrayBufferTag:return d.byteLength!==u.byteLength?!1:c(new Uint8Array(d),new Uint8Array(u),h,f);case i.dataViewTag:return d.byteLength!==u.byteLength||d.byteOffset!==u.byteOffset?!1:c(new Uint8Array(d),new Uint8Array(u),h,f);case i.errorTag:return d.name===u.name&&d.message===u.message;case i.objectTag:{if(!(c(d.constructor,u.constructor,h,f)||t.isPlainObject(d)&&t.isPlainObject(u)))return!1;const j=[...Object.keys(d),...r.getSymbols(d)],b=[...Object.keys(u),...r.getSymbols(u)];if(j.length!==b.length)return!1;for(let S=0;S<j.length;S++){const _=j[S],N=d[_];if(!Object.hasOwn(u,_))return!1;const P=u[_];if(!o(N,P,_,d,u,h,f))return!1}return!0}default:return!1}}finally{h.delete(d),h.delete(u)}}e.isEqualWith=s})(Zg);var Jg={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(){}e.noop=t})(Jg);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Zg,r=Jg;function n(i,a){return t.isEqualWith(i,a,r.noop)}e.isEqual=n})(Yg);var n_=Yg.isEqual;const i_=cr(n_);function a_(e){var t={},r=()=>null,n=!1,i=null,a=s=>{if(!n){if(Array.isArray(s)){if(!s.length)return;var o=s,[c,...d]=o;if(typeof c=="number"){i=e.setTimeout(a.bind(null,d),c);return}a(c),i=e.setTimeout(a.bind(null,d));return}typeof s=="object"&&(t=s,r(t)),typeof s=="function"&&s()}};return{stop:()=>{n=!0},start:s=>{n=!1,i&&(i(),i=null),a(s)},subscribe:s=>(r=s,()=>{r=()=>null}),getTimeoutController:()=>e}}var Wa=1e-4,Qg=(e,t)=>[0,3*e,3*t-6*e,3*e-3*t+1],e0=(e,t)=>e.map((r,n)=>r*t**n).reduce((r,n)=>r+n),Uh=(e,t)=>r=>{var n=Qg(e,t);return e0(n,r)},s_=(e,t)=>r=>{var n=Qg(e,t),i=[...n.map((a,s)=>a*s).slice(1),0];return e0(i,r)},Bh=function(){for(var t,r,n,i,a=arguments.length,s=new Array(a),o=0;o<a;o++)s[o]=arguments[o];if(s.length===1)switch(s[0]){case"linear":[t,n,r,i]=[0,0,1,1];break;case"ease":[t,n,r,i]=[.25,.1,.25,1];break;case"ease-in":[t,n,r,i]=[.42,0,1,1];break;case"ease-out":[t,n,r,i]=[.42,0,.58,1];break;case"ease-in-out":[t,n,r,i]=[0,0,.58,1];break;default:{var c=s[0].split("(");c[0]==="cubic-bezier"&&c[1].split(")")[0].split(",").length===4&&([t,n,r,i]=c[1].split(")")[0].split(",").map(g=>parseFloat(g)))}}else s.length===4&&([t,n,r,i]=s);var d=Uh(t,r),u=Uh(n,i),h=s_(t,r),f=g=>g>1?1:g<0?0:g,m=g=>{for(var p=g>1?1:g,v=p,x=0;x<8;++x){var j=d(v)-p,b=h(v);if(Math.abs(j-p)<Wa||b<Wa)return u(v);v=f(v-j/b)}return u(v)};return m.isStepper=!1,m},o_=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{stiff:r=100,damping:n=8,dt:i=17}=t,a=(s,o,c)=>{var d=-(s-o)*r,u=c*n,h=c+(d-u)*i/1e3,f=c*i/1e3+s;return Math.abs(f-o)<Wa&&Math.abs(h)<Wa?[o,0]:[f,h]};return a.isStepper=!0,a.dt=i,a},l_=e=>{if(typeof e=="string")switch(e){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return Bh(e);case"spring":return o_();default:if(e.split("(")[0]==="cubic-bezier")return Bh(e)}return typeof e=="function"?e:null};function Fh(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function zh(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Fh(Object(r),!0).forEach(function(n){c_(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Fh(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function c_(e,t,r){return(t=u_(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function u_(e){var t=d_(e,"string");return typeof t=="symbol"?t:t+""}function d_(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var h_=e=>e.replace(/([A-Z])/g,t=>"-".concat(t.toLowerCase())),f_=(e,t,r)=>e.map(n=>"".concat(h_(n)," ").concat(t,"ms ").concat(r)).join(","),m_=(e,t)=>[Object.keys(e),Object.keys(t)].reduce((r,n)=>r.filter(i=>n.includes(i))),Ci=(e,t)=>Object.keys(t).reduce((r,n)=>zh(zh({},r),{},{[n]:e(n,t[n])}),{});function Wh(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Ve(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Wh(Object(r),!0).forEach(function(n){p_(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Wh(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function p_(e,t,r){return(t=g_(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function g_(e){var t=v_(e,"string");return typeof t=="symbol"?t:t+""}function v_(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Ka=(e,t,r)=>e+(t-e)*r,Wl=e=>{var{from:t,to:r}=e;return t!==r},t0=(e,t,r)=>{var n=Ci((i,a)=>{if(Wl(a)){var[s,o]=e(a.from,a.to,a.velocity);return Ve(Ve({},a),{},{from:s,velocity:o})}return a},t);return r<1?Ci((i,a)=>Wl(a)?Ve(Ve({},a),{},{velocity:Ka(a.velocity,n[i].velocity,r),from:Ka(a.from,n[i].from,r)}):a,t):t0(e,n,r-1)};function y_(e,t,r,n,i,a){var s,o=n.reduce((f,m)=>Ve(Ve({},f),{},{[m]:{from:e[m],velocity:0,to:t[m]}}),{}),c=()=>Ci((f,m)=>m.from,o),d=()=>!Object.values(o).filter(Wl).length,u=null,h=f=>{s||(s=f);var m=f-s,g=m/r.dt;o=t0(r,o,g),i(Ve(Ve(Ve({},e),t),c())),s=f,d()||(u=a.setTimeout(h))};return()=>(u=a.setTimeout(h),()=>{u()})}function x_(e,t,r,n,i,a,s){var o=null,c=i.reduce((h,f)=>Ve(Ve({},h),{},{[f]:[e[f],t[f]]}),{}),d,u=h=>{d||(d=h);var f=(h-d)/n,m=Ci((p,v)=>Ka(...v,r(f)),c);if(a(Ve(Ve(Ve({},e),t),m)),f<1)o=s.setTimeout(u);else{var g=Ci((p,v)=>Ka(...v,r(1)),c);a(Ve(Ve(Ve({},e),t),g))}};return()=>(o=s.setTimeout(u),()=>{o()})}const b_=(e,t,r,n,i,a)=>{var s=m_(e,t);return r.isStepper===!0?y_(e,t,r,s,i,a):x_(e,t,r,n,s,i,a)};class w_{setTimeout(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=performance.now(),i=null,a=s=>{s-n>=r?t(s):typeof requestAnimationFrame=="function"&&(i=requestAnimationFrame(a))};return i=requestAnimationFrame(a),()=>{cancelAnimationFrame(i)}}}var j_=["children","begin","duration","attributeName","easing","isActive","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart","animationManager"];function Kl(){return Kl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Kl.apply(null,arguments)}function S_(e,t){if(e==null)return{};var r,n,i=P_(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function P_(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function Kh(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function xr(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Kh(Object(r),!0).forEach(function(n){qr(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Kh(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function qr(e,t,r){return(t=__(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function __(e){var t=N_(e,"string");return typeof t=="symbol"?t:t+""}function N_(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function k_(){return a_(new w_)}class hu extends y.PureComponent{constructor(t,r){super(t,r),qr(this,"mounted",!1),qr(this,"manager",null),qr(this,"stopJSAnimation",null),qr(this,"unSubscribe",null);var{isActive:n,attributeName:i,from:a,to:s,children:o,duration:c,animationManager:d}=this.props;if(this.manager=d,this.handleStyleChange=this.handleStyleChange.bind(this),this.changeStyle=this.changeStyle.bind(this),!n||c<=0){this.state={style:{}},typeof o=="function"&&(this.state={style:s});return}if(a){if(typeof o=="function"){this.state={style:a};return}this.state={style:i?{[i]:a}:a}}else this.state={style:{}}}componentDidMount(){var{isActive:t,canBegin:r}=this.props;this.mounted=!0,!(!t||!r)&&this.runAnimation(this.props)}componentDidUpdate(t){var{isActive:r,canBegin:n,attributeName:i,shouldReAnimate:a,to:s,from:o}=this.props,{style:c}=this.state;if(n){if(!r){var d={style:i?{[i]:s}:s};this.state&&c&&(i&&c[i]!==s||!i&&c!==s)&&this.setState(d);return}if(!(i_(t.to,s)&&t.canBegin&&t.isActive)){var u=!t.canBegin||!t.isActive;this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var h=u||a?o:t.to;if(this.state&&c){var f={style:i?{[i]:h}:h};(i&&c[i]!==h||!i&&c!==h)&&this.setState(f)}this.runAnimation(xr(xr({},this.props),{},{from:h,begin:0}))}}}componentWillUnmount(){this.mounted=!1;var{onAnimationEnd:t}=this.props;this.unSubscribe&&this.unSubscribe(),this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation(),t&&t()}handleStyleChange(t){this.changeStyle(t)}changeStyle(t){this.mounted&&this.setState({style:t})}runJSAnimation(t){var{from:r,to:n,duration:i,easing:a,begin:s,onAnimationEnd:o,onAnimationStart:c}=t,d=b_(r,n,l_(a),i,this.changeStyle,this.manager.getTimeoutController()),u=()=>{this.stopJSAnimation=d()};this.manager.start([c,s,u,i,o])}runAnimation(t){var{begin:r,duration:n,attributeName:i,to:a,easing:s,onAnimationStart:o,onAnimationEnd:c,children:d}=t;if(this.unSubscribe=this.manager.subscribe(this.handleStyleChange),typeof s=="function"||typeof d=="function"||s==="spring"){this.runJSAnimation(t);return}var u=i?{[i]:a}:a,h=f_(Object.keys(u),n,s);this.manager.start([o,r,xr(xr({},u),{},{transition:h}),n,c])}render(){var t=this.props,{children:r,begin:n,duration:i,attributeName:a,easing:s,isActive:o,from:c,to:d,canBegin:u,onAnimationEnd:h,shouldReAnimate:f,onAnimationReStart:m,animationManager:g}=t,p=S_(t,j_),v=y.Children.count(r),x=this.state.style;if(typeof r=="function")return r(x);if(!o||v===0||i<=0)return r;var j=b=>{var{style:S={},className:_}=b.props,N=y.cloneElement(b,xr(xr({},p),{},{style:xr(xr({},S),x),className:_}));return N};return v===1?j(y.Children.only(r)):y.createElement("div",null,y.Children.map(r,b=>j(b)))}}qr(hu,"displayName","Animate");qr(hu,"defaultProps",{begin:0,duration:1e3,attributeName:"",easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}});var O_=y.createContext(null);function Ar(e){var t,r,n=y.useContext(O_);return y.createElement(hu,Kl({},e,{animationManager:(t=(r=e.animationManager)!==null&&r!==void 0?r:n)!==null&&t!==void 0?t:k_()}))}function Ha(){return Ha=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ha.apply(null,arguments)}var Hh=(e,t,r,n,i)=>{var a=Math.min(Math.abs(r)/2,Math.abs(n)/2),s=n>=0?1:-1,o=r>=0?1:-1,c=n>=0&&r>=0||n<0&&r<0?1:0,d;if(a>0&&i instanceof Array){for(var u=[0,0,0,0],h=0,f=4;h<f;h++)u[h]=i[h]>a?a:i[h];d="M".concat(e,",").concat(t+s*u[0]),u[0]>0&&(d+="A ".concat(u[0],",").concat(u[0],",0,0,").concat(c,",").concat(e+o*u[0],",").concat(t)),d+="L ".concat(e+r-o*u[1],",").concat(t),u[1]>0&&(d+="A ".concat(u[1],",").concat(u[1],",0,0,").concat(c,`,
        `).concat(e+r,",").concat(t+s*u[1])),d+="L ".concat(e+r,",").concat(t+n-s*u[2]),u[2]>0&&(d+="A ".concat(u[2],",").concat(u[2],",0,0,").concat(c,`,
        `).concat(e+r-o*u[2],",").concat(t+n)),d+="L ".concat(e+o*u[3],",").concat(t+n),u[3]>0&&(d+="A ".concat(u[3],",").concat(u[3],",0,0,").concat(c,`,
        `).concat(e,",").concat(t+n-s*u[3])),d+="Z"}else if(a>0&&i===+i&&i>0){var m=Math.min(a,i);d="M ".concat(e,",").concat(t+s*m,`
            A `).concat(m,",").concat(m,",0,0,").concat(c,",").concat(e+o*m,",").concat(t,`
            L `).concat(e+r-o*m,",").concat(t,`
            A `).concat(m,",").concat(m,",0,0,").concat(c,",").concat(e+r,",").concat(t+s*m,`
            L `).concat(e+r,",").concat(t+n-s*m,`
            A `).concat(m,",").concat(m,",0,0,").concat(c,",").concat(e+r-o*m,",").concat(t+n,`
            L `).concat(e+o*m,",").concat(t+n,`
            A `).concat(m,",").concat(m,",0,0,").concat(c,",").concat(e,",").concat(t+n-s*m," Z")}else d="M ".concat(e,",").concat(t," h ").concat(r," v ").concat(n," h ").concat(-r," Z");return d},A_={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},r0=e=>{var t=Vt(e,A_),r=y.useRef(null),[n,i]=y.useState(-1);y.useEffect(()=>{if(r.current&&r.current.getTotalLength)try{var x=r.current.getTotalLength();x&&i(x)}catch{}},[]);var{x:a,y:s,width:o,height:c,radius:d,className:u}=t,{animationEasing:h,animationDuration:f,animationBegin:m,isAnimationActive:g,isUpdateAnimationActive:p}=t;if(a!==+a||s!==+s||o!==+o||c!==+c||o===0||c===0)return null;var v=me("recharts-rectangle",u);return p?y.createElement(Ar,{canBegin:n>0,from:{width:o,height:c,x:a,y:s},to:{width:o,height:c,x:a,y:s},duration:f,animationEasing:h,isActive:p},x=>{var{width:j,height:b,x:S,y:_}=x;return y.createElement(Ar,{canBegin:n>0,from:"0px ".concat(n===-1?1:n,"px"),to:"".concat(n,"px 0px"),attributeName:"strokeDasharray",begin:m,duration:f,isActive:g,easing:h},y.createElement("path",Ha({},ue(t,!0),{className:v,d:Hh(S,_,j,b,d),ref:r})))}):y.createElement("path",Ha({},ue(t,!0),{className:v,d:Hh(a,s,o,c,d)}))};function n0(e){var{cx:t,cy:r,radius:n,startAngle:i,endAngle:a}=e,s=Ge(t,r,n,i),o=Ge(t,r,n,a);return{points:[s,o],cx:t,cy:r,radius:n,startAngle:i,endAngle:a}}function Hl(){return Hl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Hl.apply(null,arguments)}var E_=(e,t)=>{var r=ct(t-e),n=Math.min(Math.abs(t-e),359.999);return r*n},ga=e=>{var{cx:t,cy:r,radius:n,angle:i,sign:a,isExternal:s,cornerRadius:o,cornerIsExternal:c}=e,d=o*(s?1:-1)+n,u=Math.asin(o/d)/Ba,h=c?i:i+a*u,f=Ge(t,r,d,h),m=Ge(t,r,n,h),g=c?i-a*u:i,p=Ge(t,r,d*Math.cos(u*Ba),g);return{center:f,circleTangency:m,lineTangency:p,theta:u}},i0=e=>{var{cx:t,cy:r,innerRadius:n,outerRadius:i,startAngle:a,endAngle:s}=e,o=E_(a,s),c=a+o,d=Ge(t,r,i,a),u=Ge(t,r,i,c),h="M ".concat(d.x,",").concat(d.y,`
    A `).concat(i,",").concat(i,`,0,
    `).concat(+(Math.abs(o)>180),",").concat(+(a>c),`,
    `).concat(u.x,",").concat(u.y,`
  `);if(n>0){var f=Ge(t,r,n,a),m=Ge(t,r,n,c);h+="L ".concat(m.x,",").concat(m.y,`
            A `).concat(n,",").concat(n,`,0,
            `).concat(+(Math.abs(o)>180),",").concat(+(a<=c),`,
            `).concat(f.x,",").concat(f.y," Z")}else h+="L ".concat(t,",").concat(r," Z");return h},C_=e=>{var{cx:t,cy:r,innerRadius:n,outerRadius:i,cornerRadius:a,forceCornerRadius:s,cornerIsExternal:o,startAngle:c,endAngle:d}=e,u=ct(d-c),{circleTangency:h,lineTangency:f,theta:m}=ga({cx:t,cy:r,radius:i,angle:c,sign:u,cornerRadius:a,cornerIsExternal:o}),{circleTangency:g,lineTangency:p,theta:v}=ga({cx:t,cy:r,radius:i,angle:d,sign:-u,cornerRadius:a,cornerIsExternal:o}),x=o?Math.abs(c-d):Math.abs(c-d)-m-v;if(x<0)return s?"M ".concat(f.x,",").concat(f.y,`
        a`).concat(a,",").concat(a,",0,0,1,").concat(a*2,`,0
        a`).concat(a,",").concat(a,",0,0,1,").concat(-a*2,`,0
      `):i0({cx:t,cy:r,innerRadius:n,outerRadius:i,startAngle:c,endAngle:d});var j="M ".concat(f.x,",").concat(f.y,`
    A`).concat(a,",").concat(a,",0,0,").concat(+(u<0),",").concat(h.x,",").concat(h.y,`
    A`).concat(i,",").concat(i,",0,").concat(+(x>180),",").concat(+(u<0),",").concat(g.x,",").concat(g.y,`
    A`).concat(a,",").concat(a,",0,0,").concat(+(u<0),",").concat(p.x,",").concat(p.y,`
  `);if(n>0){var{circleTangency:b,lineTangency:S,theta:_}=ga({cx:t,cy:r,radius:n,angle:c,sign:u,isExternal:!0,cornerRadius:a,cornerIsExternal:o}),{circleTangency:N,lineTangency:P,theta:E}=ga({cx:t,cy:r,radius:n,angle:d,sign:-u,isExternal:!0,cornerRadius:a,cornerIsExternal:o}),w=o?Math.abs(c-d):Math.abs(c-d)-_-E;if(w<0&&a===0)return"".concat(j,"L").concat(t,",").concat(r,"Z");j+="L".concat(P.x,",").concat(P.y,`
      A`).concat(a,",").concat(a,",0,0,").concat(+(u<0),",").concat(N.x,",").concat(N.y,`
      A`).concat(n,",").concat(n,",0,").concat(+(w>180),",").concat(+(u>0),",").concat(b.x,",").concat(b.y,`
      A`).concat(a,",").concat(a,",0,0,").concat(+(u<0),",").concat(S.x,",").concat(S.y,"Z")}else j+="L".concat(t,",").concat(r,"Z");return j},M_={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},a0=e=>{var t=Vt(e,M_),{cx:r,cy:n,innerRadius:i,outerRadius:a,cornerRadius:s,forceCornerRadius:o,cornerIsExternal:c,startAngle:d,endAngle:u,className:h}=t;if(a<i||d===u)return null;var f=me("recharts-sector",h),m=a-i,g=Bt(s,m,0,!0),p;return g>0&&Math.abs(d-u)<360?p=C_({cx:r,cy:n,innerRadius:i,outerRadius:a,cornerRadius:Math.min(g,m/2),forceCornerRadius:o,cornerIsExternal:c,startAngle:d,endAngle:u}):p=i0({cx:r,cy:n,innerRadius:i,outerRadius:a,startAngle:d,endAngle:u}),y.createElement("path",Hl({},ue(t,!0),{className:f,d:p}))};function T_(e,t,r){var n,i,a,s;if(e==="horizontal")n=t.x,a=n,i=r.top,s=r.top+r.height;else if(e==="vertical")i=t.y,s=i,n=r.left,a=r.left+r.width;else if(t.cx!=null&&t.cy!=null)if(e==="centric"){var{cx:o,cy:c,innerRadius:d,outerRadius:u,angle:h}=t,f=Ge(o,c,d,h),m=Ge(o,c,u,h);n=f.x,i=f.y,a=m.x,s=m.y}else return n0(t);return[{x:n,y:i},{x:a,y:s}]}var s0={},o0={},l0={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Qc;function r(n){return t.isSymbol(n)?NaN:Number(n)}e.toNumber=r})(l0);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=l0;function r(n){return n?(n=t.toNumber(n),n===1/0||n===-1/0?(n<0?-1:1)*Number.MAX_VALUE:n===n?n:0):n===0?n:0}e.toFinite=r})(o0);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=eu,r=o0;function n(i,a,s){s&&typeof s!="number"&&t.isIterateeCall(i,a,s)&&(a=s=void 0),i=r.toFinite(i),a===void 0?(a=i,i=0):a=r.toFinite(a),s=s===void 0?i<a?1:-1:r.toFinite(s);const o=Math.max(Math.ceil((a-i)/(s||1)),0),c=new Array(o);for(let d=0;d<o;d++)c[d]=i,i+=s;return c}e.range=n})(s0);var D_=s0.range;const c0=cr(D_);function Nr(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function I_(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function fu(e){let t,r,n;e.length!==2?(t=Nr,r=(o,c)=>Nr(e(o),c),n=(o,c)=>e(o)-c):(t=e===Nr||e===I_?e:$_,r=e,n=e);function i(o,c,d=0,u=o.length){if(d<u){if(t(c,c)!==0)return u;do{const h=d+u>>>1;r(o[h],c)<0?d=h+1:u=h}while(d<u)}return d}function a(o,c,d=0,u=o.length){if(d<u){if(t(c,c)!==0)return u;do{const h=d+u>>>1;r(o[h],c)<=0?d=h+1:u=h}while(d<u)}return d}function s(o,c,d=0,u=o.length){const h=i(o,c,d,u-1);return h>d&&n(o[h-1],c)>-n(o[h],c)?h-1:h}return{left:i,center:s,right:a}}function $_(){return 0}function u0(e){return e===null?NaN:+e}function*L_(e,t){for(let r of e)r!=null&&(r=+r)>=r&&(yield r)}const R_=fu(Nr),Vi=R_.right;fu(u0).center;class qh extends Map{constructor(t,r=F_){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),t!=null)for(const[n,i]of t)this.set(n,i)}get(t){return super.get(Vh(this,t))}has(t){return super.has(Vh(this,t))}set(t,r){return super.set(U_(this,t),r)}delete(t){return super.delete(B_(this,t))}}function Vh({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):r}function U_({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):(e.set(n,r),r)}function B_({_intern:e,_key:t},r){const n=t(r);return e.has(n)&&(r=e.get(n),e.delete(n)),r}function F_(e){return e!==null&&typeof e=="object"?e.valueOf():e}function z_(e=Nr){if(e===Nr)return d0;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,r)=>{const n=e(t,r);return n||n===0?n:(e(r,r)===0)-(e(t,t)===0)}}function d0(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const W_=Math.sqrt(50),K_=Math.sqrt(10),H_=Math.sqrt(2);function qa(e,t,r){const n=(t-e)/Math.max(0,r),i=Math.floor(Math.log10(n)),a=n/Math.pow(10,i),s=a>=W_?10:a>=K_?5:a>=H_?2:1;let o,c,d;return i<0?(d=Math.pow(10,-i)/s,o=Math.round(e*d),c=Math.round(t*d),o/d<e&&++o,c/d>t&&--c,d=-d):(d=Math.pow(10,i)*s,o=Math.round(e/d),c=Math.round(t/d),o*d<e&&++o,c*d>t&&--c),c<o&&.5<=r&&r<2?qa(e,t,r*2):[o,c,d]}function ql(e,t,r){if(t=+t,e=+e,r=+r,!(r>0))return[];if(e===t)return[e];const n=t<e,[i,a,s]=n?qa(t,e,r):qa(e,t,r);if(!(a>=i))return[];const o=a-i+1,c=new Array(o);if(n)if(s<0)for(let d=0;d<o;++d)c[d]=(a-d)/-s;else for(let d=0;d<o;++d)c[d]=(a-d)*s;else if(s<0)for(let d=0;d<o;++d)c[d]=(i+d)/-s;else for(let d=0;d<o;++d)c[d]=(i+d)*s;return c}function Vl(e,t,r){return t=+t,e=+e,r=+r,qa(e,t,r)[2]}function Gl(e,t,r){t=+t,e=+e,r=+r;const n=t<e,i=n?Vl(t,e,r):Vl(e,t,r);return(n?-1:1)*(i<0?1/-i:i)}function Gh(e,t){let r;for(const n of e)n!=null&&(r<n||r===void 0&&n>=n)&&(r=n);return r}function Yh(e,t){let r;for(const n of e)n!=null&&(r>n||r===void 0&&n>=n)&&(r=n);return r}function h0(e,t,r=0,n=1/0,i){if(t=Math.floor(t),r=Math.floor(Math.max(0,r)),n=Math.floor(Math.min(e.length-1,n)),!(r<=t&&t<=n))return e;for(i=i===void 0?d0:z_(i);n>r;){if(n-r>600){const c=n-r+1,d=t-r+1,u=Math.log(c),h=.5*Math.exp(2*u/3),f=.5*Math.sqrt(u*h*(c-h)/c)*(d-c/2<0?-1:1),m=Math.max(r,Math.floor(t-d*h/c+f)),g=Math.min(n,Math.floor(t+(c-d)*h/c+f));h0(e,t,m,g,i)}const a=e[t];let s=r,o=n;for(ci(e,r,t),i(e[n],a)>0&&ci(e,r,n);s<o;){for(ci(e,s,o),++s,--o;i(e[s],a)<0;)++s;for(;i(e[o],a)>0;)--o}i(e[r],a)===0?ci(e,r,o):(++o,ci(e,o,n)),o<=t&&(r=o+1),t<=o&&(n=o-1)}return e}function ci(e,t,r){const n=e[t];e[t]=e[r],e[r]=n}function q_(e,t,r){if(e=Float64Array.from(L_(e)),!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return Yh(e);if(t>=1)return Gh(e);var n,i=(n-1)*t,a=Math.floor(i),s=Gh(h0(e,a).subarray(0,a+1)),o=Yh(e.subarray(a+1));return s+(o-s)*(i-a)}}function V_(e,t,r=u0){if(!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return+r(e[0],0,e);if(t>=1)return+r(e[n-1],n-1,e);var n,i=(n-1)*t,a=Math.floor(i),s=+r(e[a],a,e),o=+r(e[a+1],a+1,e);return s+(o-s)*(i-a)}}function G_(e,t,r){e=+e,t=+t,r=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+r;for(var n=-1,i=Math.max(0,Math.ceil((t-e)/r))|0,a=new Array(i);++n<i;)a[n]=e+n*r;return a}function Tt(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function hr(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const Yl=Symbol("implicit");function mu(){var e=new qh,t=[],r=[],n=Yl;function i(a){let s=e.get(a);if(s===void 0){if(n!==Yl)return n;e.set(a,s=t.push(a)-1)}return r[s%r.length]}return i.domain=function(a){if(!arguments.length)return t.slice();t=[],e=new qh;for(const s of a)e.has(s)||e.set(s,t.push(s)-1);return i},i.range=function(a){return arguments.length?(r=Array.from(a),i):r.slice()},i.unknown=function(a){return arguments.length?(n=a,i):n},i.copy=function(){return mu(t,r).unknown(n)},Tt.apply(i,arguments),i}function pu(){var e=mu().unknown(void 0),t=e.domain,r=e.range,n=0,i=1,a,s,o=!1,c=0,d=0,u=.5;delete e.unknown;function h(){var f=t().length,m=i<n,g=m?i:n,p=m?n:i;a=(p-g)/Math.max(1,f-c+d*2),o&&(a=Math.floor(a)),g+=(p-g-a*(f-c))*u,s=a*(1-c),o&&(g=Math.round(g),s=Math.round(s));var v=G_(f).map(function(x){return g+a*x});return r(m?v.reverse():v)}return e.domain=function(f){return arguments.length?(t(f),h()):t()},e.range=function(f){return arguments.length?([n,i]=f,n=+n,i=+i,h()):[n,i]},e.rangeRound=function(f){return[n,i]=f,n=+n,i=+i,o=!0,h()},e.bandwidth=function(){return s},e.step=function(){return a},e.round=function(f){return arguments.length?(o=!!f,h()):o},e.padding=function(f){return arguments.length?(c=Math.min(1,d=+f),h()):c},e.paddingInner=function(f){return arguments.length?(c=Math.min(1,f),h()):c},e.paddingOuter=function(f){return arguments.length?(d=+f,h()):d},e.align=function(f){return arguments.length?(u=Math.max(0,Math.min(1,f)),h()):u},e.copy=function(){return pu(t(),[n,i]).round(o).paddingInner(c).paddingOuter(d).align(u)},Tt.apply(h(),arguments)}function f0(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return f0(t())},e}function Y_(){return f0(pu.apply(null,arguments).paddingInner(1))}function gu(e,t,r){e.prototype=t.prototype=r,r.constructor=e}function m0(e,t){var r=Object.create(e.prototype);for(var n in t)r[n]=t[n];return r}function Gi(){}var Mi=.7,Va=1/Mi,$n="\\s*([+-]?\\d+)\\s*",Ti="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Wt="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Z_=/^#([0-9a-f]{3,8})$/,X_=new RegExp(`^rgb\\(${$n},${$n},${$n}\\)$`),J_=new RegExp(`^rgb\\(${Wt},${Wt},${Wt}\\)$`),Q_=new RegExp(`^rgba\\(${$n},${$n},${$n},${Ti}\\)$`),eN=new RegExp(`^rgba\\(${Wt},${Wt},${Wt},${Ti}\\)$`),tN=new RegExp(`^hsl\\(${Ti},${Wt},${Wt}\\)$`),rN=new RegExp(`^hsla\\(${Ti},${Wt},${Wt},${Ti}\\)$`),Zh={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};gu(Gi,Di,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:Xh,formatHex:Xh,formatHex8:nN,formatHsl:iN,formatRgb:Jh,toString:Jh});function Xh(){return this.rgb().formatHex()}function nN(){return this.rgb().formatHex8()}function iN(){return p0(this).formatHsl()}function Jh(){return this.rgb().formatRgb()}function Di(e){var t,r;return e=(e+"").trim().toLowerCase(),(t=Z_.exec(e))?(r=t[1].length,t=parseInt(t[1],16),r===6?Qh(t):r===3?new ut(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):r===8?va(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):r===4?va(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=X_.exec(e))?new ut(t[1],t[2],t[3],1):(t=J_.exec(e))?new ut(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=Q_.exec(e))?va(t[1],t[2],t[3],t[4]):(t=eN.exec(e))?va(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=tN.exec(e))?rf(t[1],t[2]/100,t[3]/100,1):(t=rN.exec(e))?rf(t[1],t[2]/100,t[3]/100,t[4]):Zh.hasOwnProperty(e)?Qh(Zh[e]):e==="transparent"?new ut(NaN,NaN,NaN,0):null}function Qh(e){return new ut(e>>16&255,e>>8&255,e&255,1)}function va(e,t,r,n){return n<=0&&(e=t=r=NaN),new ut(e,t,r,n)}function aN(e){return e instanceof Gi||(e=Di(e)),e?(e=e.rgb(),new ut(e.r,e.g,e.b,e.opacity)):new ut}function Zl(e,t,r,n){return arguments.length===1?aN(e):new ut(e,t,r,n??1)}function ut(e,t,r,n){this.r=+e,this.g=+t,this.b=+r,this.opacity=+n}gu(ut,Zl,m0(Gi,{brighter(e){return e=e==null?Va:Math.pow(Va,e),new ut(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Mi:Math.pow(Mi,e),new ut(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new ut(Qr(this.r),Qr(this.g),Qr(this.b),Ga(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:ef,formatHex:ef,formatHex8:sN,formatRgb:tf,toString:tf}));function ef(){return`#${Vr(this.r)}${Vr(this.g)}${Vr(this.b)}`}function sN(){return`#${Vr(this.r)}${Vr(this.g)}${Vr(this.b)}${Vr((isNaN(this.opacity)?1:this.opacity)*255)}`}function tf(){const e=Ga(this.opacity);return`${e===1?"rgb(":"rgba("}${Qr(this.r)}, ${Qr(this.g)}, ${Qr(this.b)}${e===1?")":`, ${e})`}`}function Ga(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Qr(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Vr(e){return e=Qr(e),(e<16?"0":"")+e.toString(16)}function rf(e,t,r,n){return n<=0?e=t=r=NaN:r<=0||r>=1?e=t=NaN:t<=0&&(e=NaN),new Ut(e,t,r,n)}function p0(e){if(e instanceof Ut)return new Ut(e.h,e.s,e.l,e.opacity);if(e instanceof Gi||(e=Di(e)),!e)return new Ut;if(e instanceof Ut)return e;e=e.rgb();var t=e.r/255,r=e.g/255,n=e.b/255,i=Math.min(t,r,n),a=Math.max(t,r,n),s=NaN,o=a-i,c=(a+i)/2;return o?(t===a?s=(r-n)/o+(r<n)*6:r===a?s=(n-t)/o+2:s=(t-r)/o+4,o/=c<.5?a+i:2-a-i,s*=60):o=c>0&&c<1?0:s,new Ut(s,o,c,e.opacity)}function oN(e,t,r,n){return arguments.length===1?p0(e):new Ut(e,t,r,n??1)}function Ut(e,t,r,n){this.h=+e,this.s=+t,this.l=+r,this.opacity=+n}gu(Ut,oN,m0(Gi,{brighter(e){return e=e==null?Va:Math.pow(Va,e),new Ut(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Mi:Math.pow(Mi,e),new Ut(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*t,i=2*r-n;return new ut(Yo(e>=240?e-240:e+120,i,n),Yo(e,i,n),Yo(e<120?e+240:e-120,i,n),this.opacity)},clamp(){return new Ut(nf(this.h),ya(this.s),ya(this.l),Ga(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Ga(this.opacity);return`${e===1?"hsl(":"hsla("}${nf(this.h)}, ${ya(this.s)*100}%, ${ya(this.l)*100}%${e===1?")":`, ${e})`}`}}));function nf(e){return e=(e||0)%360,e<0?e+360:e}function ya(e){return Math.max(0,Math.min(1,e||0))}function Yo(e,t,r){return(e<60?t+(r-t)*e/60:e<180?r:e<240?t+(r-t)*(240-e)/60:t)*255}const vu=e=>()=>e;function lN(e,t){return function(r){return e+r*t}}function cN(e,t,r){return e=Math.pow(e,r),t=Math.pow(t,r)-e,r=1/r,function(n){return Math.pow(e+n*t,r)}}function uN(e){return(e=+e)==1?g0:function(t,r){return r-t?cN(t,r,e):vu(isNaN(t)?r:t)}}function g0(e,t){var r=t-e;return r?lN(e,r):vu(isNaN(e)?t:e)}const af=function e(t){var r=uN(t);function n(i,a){var s=r((i=Zl(i)).r,(a=Zl(a)).r),o=r(i.g,a.g),c=r(i.b,a.b),d=g0(i.opacity,a.opacity);return function(u){return i.r=s(u),i.g=o(u),i.b=c(u),i.opacity=d(u),i+""}}return n.gamma=e,n}(1);function dN(e,t){t||(t=[]);var r=e?Math.min(t.length,e.length):0,n=t.slice(),i;return function(a){for(i=0;i<r;++i)n[i]=e[i]*(1-a)+t[i]*a;return n}}function hN(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function fN(e,t){var r=t?t.length:0,n=e?Math.min(r,e.length):0,i=new Array(n),a=new Array(r),s;for(s=0;s<n;++s)i[s]=Qn(e[s],t[s]);for(;s<r;++s)a[s]=t[s];return function(o){for(s=0;s<n;++s)a[s]=i[s](o);return a}}function mN(e,t){var r=new Date;return e=+e,t=+t,function(n){return r.setTime(e*(1-n)+t*n),r}}function Ya(e,t){return e=+e,t=+t,function(r){return e*(1-r)+t*r}}function pN(e,t){var r={},n={},i;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(i in t)i in e?r[i]=Qn(e[i],t[i]):n[i]=t[i];return function(a){for(i in r)n[i]=r[i](a);return n}}var Xl=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Zo=new RegExp(Xl.source,"g");function gN(e){return function(){return e}}function vN(e){return function(t){return e(t)+""}}function yN(e,t){var r=Xl.lastIndex=Zo.lastIndex=0,n,i,a,s=-1,o=[],c=[];for(e=e+"",t=t+"";(n=Xl.exec(e))&&(i=Zo.exec(t));)(a=i.index)>r&&(a=t.slice(r,a),o[s]?o[s]+=a:o[++s]=a),(n=n[0])===(i=i[0])?o[s]?o[s]+=i:o[++s]=i:(o[++s]=null,c.push({i:s,x:Ya(n,i)})),r=Zo.lastIndex;return r<t.length&&(a=t.slice(r),o[s]?o[s]+=a:o[++s]=a),o.length<2?c[0]?vN(c[0].x):gN(t):(t=c.length,function(d){for(var u=0,h;u<t;++u)o[(h=c[u]).i]=h.x(d);return o.join("")})}function Qn(e,t){var r=typeof t,n;return t==null||r==="boolean"?vu(t):(r==="number"?Ya:r==="string"?(n=Di(t))?(t=n,af):yN:t instanceof Di?af:t instanceof Date?mN:hN(t)?dN:Array.isArray(t)?fN:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?pN:Ya)(e,t)}function yu(e,t){return e=+e,t=+t,function(r){return Math.round(e*(1-r)+t*r)}}function xN(e,t){t===void 0&&(t=e,e=Qn);for(var r=0,n=t.length-1,i=t[0],a=new Array(n<0?0:n);r<n;)a[r]=e(i,i=t[++r]);return function(s){var o=Math.max(0,Math.min(n-1,Math.floor(s*=n)));return a[o](s-o)}}function bN(e){return function(){return e}}function Za(e){return+e}var sf=[0,1];function it(e){return e}function Jl(e,t){return(t-=e=+e)?function(r){return(r-e)/t}:bN(isNaN(t)?NaN:.5)}function wN(e,t){var r;return e>t&&(r=e,e=t,t=r),function(n){return Math.max(e,Math.min(t,n))}}function jN(e,t,r){var n=e[0],i=e[1],a=t[0],s=t[1];return i<n?(n=Jl(i,n),a=r(s,a)):(n=Jl(n,i),a=r(a,s)),function(o){return a(n(o))}}function SN(e,t,r){var n=Math.min(e.length,t.length)-1,i=new Array(n),a=new Array(n),s=-1;for(e[n]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++s<n;)i[s]=Jl(e[s],e[s+1]),a[s]=r(t[s],t[s+1]);return function(o){var c=Vi(e,o,1,n)-1;return a[c](i[c](o))}}function Yi(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function Js(){var e=sf,t=sf,r=Qn,n,i,a,s=it,o,c,d;function u(){var f=Math.min(e.length,t.length);return s!==it&&(s=wN(e[0],e[f-1])),o=f>2?SN:jN,c=d=null,h}function h(f){return f==null||isNaN(f=+f)?a:(c||(c=o(e.map(n),t,r)))(n(s(f)))}return h.invert=function(f){return s(i((d||(d=o(t,e.map(n),Ya)))(f)))},h.domain=function(f){return arguments.length?(e=Array.from(f,Za),u()):e.slice()},h.range=function(f){return arguments.length?(t=Array.from(f),u()):t.slice()},h.rangeRound=function(f){return t=Array.from(f),r=yu,u()},h.clamp=function(f){return arguments.length?(s=f?!0:it,u()):s!==it},h.interpolate=function(f){return arguments.length?(r=f,u()):r},h.unknown=function(f){return arguments.length?(a=f,h):a},function(f,m){return n=f,i=m,u()}}function xu(){return Js()(it,it)}function PN(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function Xa(e,t){if((r=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var r,n=e.slice(0,r);return[n.length>1?n[0]+n.slice(2):n,+e.slice(r+1)]}function Hn(e){return e=Xa(Math.abs(e)),e?e[1]:NaN}function _N(e,t){return function(r,n){for(var i=r.length,a=[],s=0,o=e[0],c=0;i>0&&o>0&&(c+o+1>n&&(o=Math.max(1,n-c)),a.push(r.substring(i-=o,i+o)),!((c+=o+1)>n));)o=e[s=(s+1)%e.length];return a.reverse().join(t)}}function NN(e){return function(t){return t.replace(/[0-9]/g,function(r){return e[+r]})}}var kN=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Ii(e){if(!(t=kN.exec(e)))throw new Error("invalid format: "+e);var t;return new bu({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}Ii.prototype=bu.prototype;function bu(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}bu.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function ON(e){e:for(var t=e.length,r=1,n=-1,i;r<t;++r)switch(e[r]){case".":n=i=r;break;case"0":n===0&&(n=r),i=r;break;default:if(!+e[r])break e;n>0&&(n=0);break}return n>0?e.slice(0,n)+e.slice(i+1):e}var v0;function AN(e,t){var r=Xa(e,t);if(!r)return e+"";var n=r[0],i=r[1],a=i-(v0=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,s=n.length;return a===s?n:a>s?n+new Array(a-s+1).join("0"):a>0?n.slice(0,a)+"."+n.slice(a):"0."+new Array(1-a).join("0")+Xa(e,Math.max(0,t+a-1))[0]}function of(e,t){var r=Xa(e,t);if(!r)return e+"";var n=r[0],i=r[1];return i<0?"0."+new Array(-i).join("0")+n:n.length>i+1?n.slice(0,i+1)+"."+n.slice(i+1):n+new Array(i-n.length+2).join("0")}const lf={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:PN,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>of(e*100,t),r:of,s:AN,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function cf(e){return e}var uf=Array.prototype.map,df=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function EN(e){var t=e.grouping===void 0||e.thousands===void 0?cf:_N(uf.call(e.grouping,Number),e.thousands+""),r=e.currency===void 0?"":e.currency[0]+"",n=e.currency===void 0?"":e.currency[1]+"",i=e.decimal===void 0?".":e.decimal+"",a=e.numerals===void 0?cf:NN(uf.call(e.numerals,String)),s=e.percent===void 0?"%":e.percent+"",o=e.minus===void 0?"−":e.minus+"",c=e.nan===void 0?"NaN":e.nan+"";function d(h){h=Ii(h);var f=h.fill,m=h.align,g=h.sign,p=h.symbol,v=h.zero,x=h.width,j=h.comma,b=h.precision,S=h.trim,_=h.type;_==="n"?(j=!0,_="g"):lf[_]||(b===void 0&&(b=12),S=!0,_="g"),(v||f==="0"&&m==="=")&&(v=!0,f="0",m="=");var N=p==="$"?r:p==="#"&&/[boxX]/.test(_)?"0"+_.toLowerCase():"",P=p==="$"?n:/[%p]/.test(_)?s:"",E=lf[_],w=/[defgprs%]/.test(_);b=b===void 0?6:/[gprs]/.test(_)?Math.max(1,Math.min(21,b)):Math.max(0,Math.min(20,b));function A(O){var D=N,R=P,C,k,I;if(_==="c")R=E(O)+R,O="";else{O=+O;var L=O<0||1/O<0;if(O=isNaN(O)?c:E(Math.abs(O),b),S&&(O=ON(O)),L&&+O==0&&g!=="+"&&(L=!1),D=(L?g==="("?g:o:g==="-"||g==="("?"":g)+D,R=(_==="s"?df[8+v0/3]:"")+R+(L&&g==="("?")":""),w){for(C=-1,k=O.length;++C<k;)if(I=O.charCodeAt(C),48>I||I>57){R=(I===46?i+O.slice(C+1):O.slice(C))+R,O=O.slice(0,C);break}}}j&&!v&&(O=t(O,1/0));var K=D.length+O.length+R.length,F=K<x?new Array(x-K+1).join(f):"";switch(j&&v&&(O=t(F+O,F.length?x-R.length:1/0),F=""),m){case"<":O=D+O+R+F;break;case"=":O=D+F+O+R;break;case"^":O=F.slice(0,K=F.length>>1)+D+O+R+F.slice(K);break;default:O=F+D+O+R;break}return a(O)}return A.toString=function(){return h+""},A}function u(h,f){var m=d((h=Ii(h),h.type="f",h)),g=Math.max(-8,Math.min(8,Math.floor(Hn(f)/3)))*3,p=Math.pow(10,-g),v=df[8+g/3];return function(x){return m(p*x)+v}}return{format:d,formatPrefix:u}}var xa,wu,y0;CN({thousands:",",grouping:[3],currency:["$",""]});function CN(e){return xa=EN(e),wu=xa.format,y0=xa.formatPrefix,xa}function MN(e){return Math.max(0,-Hn(Math.abs(e)))}function TN(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Hn(t)/3)))*3-Hn(Math.abs(e)))}function DN(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,Hn(t)-Hn(e))+1}function x0(e,t,r,n){var i=Gl(e,t,r),a;switch(n=Ii(n??",f"),n.type){case"s":{var s=Math.max(Math.abs(e),Math.abs(t));return n.precision==null&&!isNaN(a=TN(i,s))&&(n.precision=a),y0(n,s)}case"":case"e":case"g":case"p":case"r":{n.precision==null&&!isNaN(a=DN(i,Math.max(Math.abs(e),Math.abs(t))))&&(n.precision=a-(n.type==="e"));break}case"f":case"%":{n.precision==null&&!isNaN(a=MN(i))&&(n.precision=a-(n.type==="%")*2);break}}return wu(n)}function Mr(e){var t=e.domain;return e.ticks=function(r){var n=t();return ql(n[0],n[n.length-1],r??10)},e.tickFormat=function(r,n){var i=t();return x0(i[0],i[i.length-1],r??10,n)},e.nice=function(r){r==null&&(r=10);var n=t(),i=0,a=n.length-1,s=n[i],o=n[a],c,d,u=10;for(o<s&&(d=s,s=o,o=d,d=i,i=a,a=d);u-- >0;){if(d=Vl(s,o,r),d===c)return n[i]=s,n[a]=o,t(n);if(d>0)s=Math.floor(s/d)*d,o=Math.ceil(o/d)*d;else if(d<0)s=Math.ceil(s*d)/d,o=Math.floor(o*d)/d;else break;c=d}return e},e}function b0(){var e=xu();return e.copy=function(){return Yi(e,b0())},Tt.apply(e,arguments),Mr(e)}function w0(e){var t;function r(n){return n==null||isNaN(n=+n)?t:n}return r.invert=r,r.domain=r.range=function(n){return arguments.length?(e=Array.from(n,Za),r):e.slice()},r.unknown=function(n){return arguments.length?(t=n,r):t},r.copy=function(){return w0(e).unknown(t)},e=arguments.length?Array.from(e,Za):[0,1],Mr(r)}function j0(e,t){e=e.slice();var r=0,n=e.length-1,i=e[r],a=e[n],s;return a<i&&(s=r,r=n,n=s,s=i,i=a,a=s),e[r]=t.floor(i),e[n]=t.ceil(a),e}function hf(e){return Math.log(e)}function ff(e){return Math.exp(e)}function IN(e){return-Math.log(-e)}function $N(e){return-Math.exp(-e)}function LN(e){return isFinite(e)?+("1e"+e):e<0?0:e}function RN(e){return e===10?LN:e===Math.E?Math.exp:t=>Math.pow(e,t)}function UN(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function mf(e){return(t,r)=>-e(-t,r)}function ju(e){const t=e(hf,ff),r=t.domain;let n=10,i,a;function s(){return i=UN(n),a=RN(n),r()[0]<0?(i=mf(i),a=mf(a),e(IN,$N)):e(hf,ff),t}return t.base=function(o){return arguments.length?(n=+o,s()):n},t.domain=function(o){return arguments.length?(r(o),s()):r()},t.ticks=o=>{const c=r();let d=c[0],u=c[c.length-1];const h=u<d;h&&([d,u]=[u,d]);let f=i(d),m=i(u),g,p;const v=o==null?10:+o;let x=[];if(!(n%1)&&m-f<v){if(f=Math.floor(f),m=Math.ceil(m),d>0){for(;f<=m;++f)for(g=1;g<n;++g)if(p=f<0?g/a(-f):g*a(f),!(p<d)){if(p>u)break;x.push(p)}}else for(;f<=m;++f)for(g=n-1;g>=1;--g)if(p=f>0?g/a(-f):g*a(f),!(p<d)){if(p>u)break;x.push(p)}x.length*2<v&&(x=ql(d,u,v))}else x=ql(f,m,Math.min(m-f,v)).map(a);return h?x.reverse():x},t.tickFormat=(o,c)=>{if(o==null&&(o=10),c==null&&(c=n===10?"s":","),typeof c!="function"&&(!(n%1)&&(c=Ii(c)).precision==null&&(c.trim=!0),c=wu(c)),o===1/0)return c;const d=Math.max(1,n*o/t.ticks().length);return u=>{let h=u/a(Math.round(i(u)));return h*n<n-.5&&(h*=n),h<=d?c(u):""}},t.nice=()=>r(j0(r(),{floor:o=>a(Math.floor(i(o))),ceil:o=>a(Math.ceil(i(o)))})),t}function S0(){const e=ju(Js()).domain([1,10]);return e.copy=()=>Yi(e,S0()).base(e.base()),Tt.apply(e,arguments),e}function pf(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function gf(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function Su(e){var t=1,r=e(pf(t),gf(t));return r.constant=function(n){return arguments.length?e(pf(t=+n),gf(t)):t},Mr(r)}function P0(){var e=Su(Js());return e.copy=function(){return Yi(e,P0()).constant(e.constant())},Tt.apply(e,arguments)}function vf(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function BN(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function FN(e){return e<0?-e*e:e*e}function Pu(e){var t=e(it,it),r=1;function n(){return r===1?e(it,it):r===.5?e(BN,FN):e(vf(r),vf(1/r))}return t.exponent=function(i){return arguments.length?(r=+i,n()):r},Mr(t)}function _u(){var e=Pu(Js());return e.copy=function(){return Yi(e,_u()).exponent(e.exponent())},Tt.apply(e,arguments),e}function zN(){return _u.apply(null,arguments).exponent(.5)}function yf(e){return Math.sign(e)*e*e}function WN(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function _0(){var e=xu(),t=[0,1],r=!1,n;function i(a){var s=WN(e(a));return isNaN(s)?n:r?Math.round(s):s}return i.invert=function(a){return e.invert(yf(a))},i.domain=function(a){return arguments.length?(e.domain(a),i):e.domain()},i.range=function(a){return arguments.length?(e.range((t=Array.from(a,Za)).map(yf)),i):t.slice()},i.rangeRound=function(a){return i.range(a).round(!0)},i.round=function(a){return arguments.length?(r=!!a,i):r},i.clamp=function(a){return arguments.length?(e.clamp(a),i):e.clamp()},i.unknown=function(a){return arguments.length?(n=a,i):n},i.copy=function(){return _0(e.domain(),t).round(r).clamp(e.clamp()).unknown(n)},Tt.apply(i,arguments),Mr(i)}function N0(){var e=[],t=[],r=[],n;function i(){var s=0,o=Math.max(1,t.length);for(r=new Array(o-1);++s<o;)r[s-1]=V_(e,s/o);return a}function a(s){return s==null||isNaN(s=+s)?n:t[Vi(r,s)]}return a.invertExtent=function(s){var o=t.indexOf(s);return o<0?[NaN,NaN]:[o>0?r[o-1]:e[0],o<r.length?r[o]:e[e.length-1]]},a.domain=function(s){if(!arguments.length)return e.slice();e=[];for(let o of s)o!=null&&!isNaN(o=+o)&&e.push(o);return e.sort(Nr),i()},a.range=function(s){return arguments.length?(t=Array.from(s),i()):t.slice()},a.unknown=function(s){return arguments.length?(n=s,a):n},a.quantiles=function(){return r.slice()},a.copy=function(){return N0().domain(e).range(t).unknown(n)},Tt.apply(a,arguments)}function k0(){var e=0,t=1,r=1,n=[.5],i=[0,1],a;function s(c){return c!=null&&c<=c?i[Vi(n,c,0,r)]:a}function o(){var c=-1;for(n=new Array(r);++c<r;)n[c]=((c+1)*t-(c-r)*e)/(r+1);return s}return s.domain=function(c){return arguments.length?([e,t]=c,e=+e,t=+t,o()):[e,t]},s.range=function(c){return arguments.length?(r=(i=Array.from(c)).length-1,o()):i.slice()},s.invertExtent=function(c){var d=i.indexOf(c);return d<0?[NaN,NaN]:d<1?[e,n[0]]:d>=r?[n[r-1],t]:[n[d-1],n[d]]},s.unknown=function(c){return arguments.length&&(a=c),s},s.thresholds=function(){return n.slice()},s.copy=function(){return k0().domain([e,t]).range(i).unknown(a)},Tt.apply(Mr(s),arguments)}function O0(){var e=[.5],t=[0,1],r,n=1;function i(a){return a!=null&&a<=a?t[Vi(e,a,0,n)]:r}return i.domain=function(a){return arguments.length?(e=Array.from(a),n=Math.min(e.length,t.length-1),i):e.slice()},i.range=function(a){return arguments.length?(t=Array.from(a),n=Math.min(e.length,t.length-1),i):t.slice()},i.invertExtent=function(a){var s=t.indexOf(a);return[e[s-1],e[s]]},i.unknown=function(a){return arguments.length?(r=a,i):r},i.copy=function(){return O0().domain(e).range(t).unknown(r)},Tt.apply(i,arguments)}const Xo=new Date,Jo=new Date;function Ie(e,t,r,n){function i(a){return e(a=arguments.length===0?new Date:new Date(+a)),a}return i.floor=a=>(e(a=new Date(+a)),a),i.ceil=a=>(e(a=new Date(a-1)),t(a,1),e(a),a),i.round=a=>{const s=i(a),o=i.ceil(a);return a-s<o-a?s:o},i.offset=(a,s)=>(t(a=new Date(+a),s==null?1:Math.floor(s)),a),i.range=(a,s,o)=>{const c=[];if(a=i.ceil(a),o=o==null?1:Math.floor(o),!(a<s)||!(o>0))return c;let d;do c.push(d=new Date(+a)),t(a,o),e(a);while(d<a&&a<s);return c},i.filter=a=>Ie(s=>{if(s>=s)for(;e(s),!a(s);)s.setTime(s-1)},(s,o)=>{if(s>=s)if(o<0)for(;++o<=0;)for(;t(s,-1),!a(s););else for(;--o>=0;)for(;t(s,1),!a(s););}),r&&(i.count=(a,s)=>(Xo.setTime(+a),Jo.setTime(+s),e(Xo),e(Jo),Math.floor(r(Xo,Jo))),i.every=a=>(a=Math.floor(a),!isFinite(a)||!(a>0)?null:a>1?i.filter(n?s=>n(s)%a===0:s=>i.count(0,s)%a===0):i)),i}const Ja=Ie(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);Ja.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?Ie(t=>{t.setTime(Math.floor(t/e)*e)},(t,r)=>{t.setTime(+t+r*e)},(t,r)=>(r-t)/e):Ja);Ja.range;const er=1e3,_t=er*60,tr=_t*60,sr=tr*24,Nu=sr*7,xf=sr*30,Qo=sr*365,Gr=Ie(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*er)},(e,t)=>(t-e)/er,e=>e.getUTCSeconds());Gr.range;const ku=Ie(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*er)},(e,t)=>{e.setTime(+e+t*_t)},(e,t)=>(t-e)/_t,e=>e.getMinutes());ku.range;const Ou=Ie(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*_t)},(e,t)=>(t-e)/_t,e=>e.getUTCMinutes());Ou.range;const Au=Ie(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*er-e.getMinutes()*_t)},(e,t)=>{e.setTime(+e+t*tr)},(e,t)=>(t-e)/tr,e=>e.getHours());Au.range;const Eu=Ie(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*tr)},(e,t)=>(t-e)/tr,e=>e.getUTCHours());Eu.range;const Zi=Ie(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*_t)/sr,e=>e.getDate()-1);Zi.range;const Qs=Ie(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/sr,e=>e.getUTCDate()-1);Qs.range;const A0=Ie(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/sr,e=>Math.floor(e/sr));A0.range;function mn(e){return Ie(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,r)=>{t.setDate(t.getDate()+r*7)},(t,r)=>(r-t-(r.getTimezoneOffset()-t.getTimezoneOffset())*_t)/Nu)}const eo=mn(0),Qa=mn(1),KN=mn(2),HN=mn(3),qn=mn(4),qN=mn(5),VN=mn(6);eo.range;Qa.range;KN.range;HN.range;qn.range;qN.range;VN.range;function pn(e){return Ie(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCDate(t.getUTCDate()+r*7)},(t,r)=>(r-t)/Nu)}const to=pn(0),es=pn(1),GN=pn(2),YN=pn(3),Vn=pn(4),ZN=pn(5),XN=pn(6);to.range;es.range;GN.range;YN.range;Vn.range;ZN.range;XN.range;const Cu=Ie(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());Cu.range;const Mu=Ie(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());Mu.range;const or=Ie(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());or.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Ie(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,r)=>{t.setFullYear(t.getFullYear()+r*e)});or.range;const lr=Ie(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());lr.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Ie(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCFullYear(t.getUTCFullYear()+r*e)});lr.range;function E0(e,t,r,n,i,a){const s=[[Gr,1,er],[Gr,5,5*er],[Gr,15,15*er],[Gr,30,30*er],[a,1,_t],[a,5,5*_t],[a,15,15*_t],[a,30,30*_t],[i,1,tr],[i,3,3*tr],[i,6,6*tr],[i,12,12*tr],[n,1,sr],[n,2,2*sr],[r,1,Nu],[t,1,xf],[t,3,3*xf],[e,1,Qo]];function o(d,u,h){const f=u<d;f&&([d,u]=[u,d]);const m=h&&typeof h.range=="function"?h:c(d,u,h),g=m?m.range(d,+u+1):[];return f?g.reverse():g}function c(d,u,h){const f=Math.abs(u-d)/h,m=fu(([,,v])=>v).right(s,f);if(m===s.length)return e.every(Gl(d/Qo,u/Qo,h));if(m===0)return Ja.every(Math.max(Gl(d,u,h),1));const[g,p]=s[f/s[m-1][2]<s[m][2]/f?m-1:m];return g.every(p)}return[o,c]}const[JN,QN]=E0(lr,Mu,to,A0,Eu,Ou),[ek,tk]=E0(or,Cu,eo,Zi,Au,ku);function el(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function tl(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function ui(e,t,r){return{y:e,m:t,d:r,H:0,M:0,S:0,L:0}}function rk(e){var t=e.dateTime,r=e.date,n=e.time,i=e.periods,a=e.days,s=e.shortDays,o=e.months,c=e.shortMonths,d=di(i),u=hi(i),h=di(a),f=hi(a),m=di(s),g=hi(s),p=di(o),v=hi(o),x=di(c),j=hi(c),b={a:L,A:K,b:F,B:G,c:null,d:_f,e:_f,f:_k,g:Ik,G:Lk,H:jk,I:Sk,j:Pk,L:C0,m:Nk,M:kk,p:X,q:z,Q:Of,s:Af,S:Ok,u:Ak,U:Ek,V:Ck,w:Mk,W:Tk,x:null,X:null,y:Dk,Y:$k,Z:Rk,"%":kf},S={a:J,A:re,b:ie,B:se,c:null,d:Nf,e:Nf,f:zk,g:Jk,G:eO,H:Uk,I:Bk,j:Fk,L:T0,m:Wk,M:Kk,p:M,q:B,Q:Of,s:Af,S:Hk,u:qk,U:Vk,V:Gk,w:Yk,W:Zk,x:null,X:null,y:Xk,Y:Qk,Z:tO,"%":kf},_={a:A,A:O,b:D,B:R,c:C,d:Sf,e:Sf,f:yk,g:jf,G:wf,H:Pf,I:Pf,j:mk,L:vk,m:fk,M:pk,p:w,q:hk,Q:bk,s:wk,S:gk,u:ok,U:lk,V:ck,w:sk,W:uk,x:k,X:I,y:jf,Y:wf,Z:dk,"%":xk};b.x=N(r,b),b.X=N(n,b),b.c=N(t,b),S.x=N(r,S),S.X=N(n,S),S.c=N(t,S);function N(T,W){return function(V){var U=[],le=-1,Q=0,oe=T.length,ve,xe,pr;for(V instanceof Date||(V=new Date(+V));++le<oe;)T.charCodeAt(le)===37&&(U.push(T.slice(Q,le)),(xe=bf[ve=T.charAt(++le)])!=null?ve=T.charAt(++le):xe=ve==="e"?" ":"0",(pr=W[ve])&&(ve=pr(V,xe)),U.push(ve),Q=le+1);return U.push(T.slice(Q,le)),U.join("")}}function P(T,W){return function(V){var U=ui(1900,void 0,1),le=E(U,T,V+="",0),Q,oe;if(le!=V.length)return null;if("Q"in U)return new Date(U.Q);if("s"in U)return new Date(U.s*1e3+("L"in U?U.L:0));if(W&&!("Z"in U)&&(U.Z=0),"p"in U&&(U.H=U.H%12+U.p*12),U.m===void 0&&(U.m="q"in U?U.q:0),"V"in U){if(U.V<1||U.V>53)return null;"w"in U||(U.w=1),"Z"in U?(Q=tl(ui(U.y,0,1)),oe=Q.getUTCDay(),Q=oe>4||oe===0?es.ceil(Q):es(Q),Q=Qs.offset(Q,(U.V-1)*7),U.y=Q.getUTCFullYear(),U.m=Q.getUTCMonth(),U.d=Q.getUTCDate()+(U.w+6)%7):(Q=el(ui(U.y,0,1)),oe=Q.getDay(),Q=oe>4||oe===0?Qa.ceil(Q):Qa(Q),Q=Zi.offset(Q,(U.V-1)*7),U.y=Q.getFullYear(),U.m=Q.getMonth(),U.d=Q.getDate()+(U.w+6)%7)}else("W"in U||"U"in U)&&("w"in U||(U.w="u"in U?U.u%7:"W"in U?1:0),oe="Z"in U?tl(ui(U.y,0,1)).getUTCDay():el(ui(U.y,0,1)).getDay(),U.m=0,U.d="W"in U?(U.w+6)%7+U.W*7-(oe+5)%7:U.w+U.U*7-(oe+6)%7);return"Z"in U?(U.H+=U.Z/100|0,U.M+=U.Z%100,tl(U)):el(U)}}function E(T,W,V,U){for(var le=0,Q=W.length,oe=V.length,ve,xe;le<Q;){if(U>=oe)return-1;if(ve=W.charCodeAt(le++),ve===37){if(ve=W.charAt(le++),xe=_[ve in bf?W.charAt(le++):ve],!xe||(U=xe(T,V,U))<0)return-1}else if(ve!=V.charCodeAt(U++))return-1}return U}function w(T,W,V){var U=d.exec(W.slice(V));return U?(T.p=u.get(U[0].toLowerCase()),V+U[0].length):-1}function A(T,W,V){var U=m.exec(W.slice(V));return U?(T.w=g.get(U[0].toLowerCase()),V+U[0].length):-1}function O(T,W,V){var U=h.exec(W.slice(V));return U?(T.w=f.get(U[0].toLowerCase()),V+U[0].length):-1}function D(T,W,V){var U=x.exec(W.slice(V));return U?(T.m=j.get(U[0].toLowerCase()),V+U[0].length):-1}function R(T,W,V){var U=p.exec(W.slice(V));return U?(T.m=v.get(U[0].toLowerCase()),V+U[0].length):-1}function C(T,W,V){return E(T,t,W,V)}function k(T,W,V){return E(T,r,W,V)}function I(T,W,V){return E(T,n,W,V)}function L(T){return s[T.getDay()]}function K(T){return a[T.getDay()]}function F(T){return c[T.getMonth()]}function G(T){return o[T.getMonth()]}function X(T){return i[+(T.getHours()>=12)]}function z(T){return 1+~~(T.getMonth()/3)}function J(T){return s[T.getUTCDay()]}function re(T){return a[T.getUTCDay()]}function ie(T){return c[T.getUTCMonth()]}function se(T){return o[T.getUTCMonth()]}function M(T){return i[+(T.getUTCHours()>=12)]}function B(T){return 1+~~(T.getUTCMonth()/3)}return{format:function(T){var W=N(T+="",b);return W.toString=function(){return T},W},parse:function(T){var W=P(T+="",!1);return W.toString=function(){return T},W},utcFormat:function(T){var W=N(T+="",S);return W.toString=function(){return T},W},utcParse:function(T){var W=P(T+="",!0);return W.toString=function(){return T},W}}}var bf={"-":"",_:" ",0:"0"},We=/^\s*\d+/,nk=/^%/,ik=/[\\^$*+?|[\]().{}]/g;function pe(e,t,r){var n=e<0?"-":"",i=(n?-e:e)+"",a=i.length;return n+(a<r?new Array(r-a+1).join(t)+i:i)}function ak(e){return e.replace(ik,"\\$&")}function di(e){return new RegExp("^(?:"+e.map(ak).join("|")+")","i")}function hi(e){return new Map(e.map((t,r)=>[t.toLowerCase(),r]))}function sk(e,t,r){var n=We.exec(t.slice(r,r+1));return n?(e.w=+n[0],r+n[0].length):-1}function ok(e,t,r){var n=We.exec(t.slice(r,r+1));return n?(e.u=+n[0],r+n[0].length):-1}function lk(e,t,r){var n=We.exec(t.slice(r,r+2));return n?(e.U=+n[0],r+n[0].length):-1}function ck(e,t,r){var n=We.exec(t.slice(r,r+2));return n?(e.V=+n[0],r+n[0].length):-1}function uk(e,t,r){var n=We.exec(t.slice(r,r+2));return n?(e.W=+n[0],r+n[0].length):-1}function wf(e,t,r){var n=We.exec(t.slice(r,r+4));return n?(e.y=+n[0],r+n[0].length):-1}function jf(e,t,r){var n=We.exec(t.slice(r,r+2));return n?(e.y=+n[0]+(+n[0]>68?1900:2e3),r+n[0].length):-1}function dk(e,t,r){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(r,r+6));return n?(e.Z=n[1]?0:-(n[2]+(n[3]||"00")),r+n[0].length):-1}function hk(e,t,r){var n=We.exec(t.slice(r,r+1));return n?(e.q=n[0]*3-3,r+n[0].length):-1}function fk(e,t,r){var n=We.exec(t.slice(r,r+2));return n?(e.m=n[0]-1,r+n[0].length):-1}function Sf(e,t,r){var n=We.exec(t.slice(r,r+2));return n?(e.d=+n[0],r+n[0].length):-1}function mk(e,t,r){var n=We.exec(t.slice(r,r+3));return n?(e.m=0,e.d=+n[0],r+n[0].length):-1}function Pf(e,t,r){var n=We.exec(t.slice(r,r+2));return n?(e.H=+n[0],r+n[0].length):-1}function pk(e,t,r){var n=We.exec(t.slice(r,r+2));return n?(e.M=+n[0],r+n[0].length):-1}function gk(e,t,r){var n=We.exec(t.slice(r,r+2));return n?(e.S=+n[0],r+n[0].length):-1}function vk(e,t,r){var n=We.exec(t.slice(r,r+3));return n?(e.L=+n[0],r+n[0].length):-1}function yk(e,t,r){var n=We.exec(t.slice(r,r+6));return n?(e.L=Math.floor(n[0]/1e3),r+n[0].length):-1}function xk(e,t,r){var n=nk.exec(t.slice(r,r+1));return n?r+n[0].length:-1}function bk(e,t,r){var n=We.exec(t.slice(r));return n?(e.Q=+n[0],r+n[0].length):-1}function wk(e,t,r){var n=We.exec(t.slice(r));return n?(e.s=+n[0],r+n[0].length):-1}function _f(e,t){return pe(e.getDate(),t,2)}function jk(e,t){return pe(e.getHours(),t,2)}function Sk(e,t){return pe(e.getHours()%12||12,t,2)}function Pk(e,t){return pe(1+Zi.count(or(e),e),t,3)}function C0(e,t){return pe(e.getMilliseconds(),t,3)}function _k(e,t){return C0(e,t)+"000"}function Nk(e,t){return pe(e.getMonth()+1,t,2)}function kk(e,t){return pe(e.getMinutes(),t,2)}function Ok(e,t){return pe(e.getSeconds(),t,2)}function Ak(e){var t=e.getDay();return t===0?7:t}function Ek(e,t){return pe(eo.count(or(e)-1,e),t,2)}function M0(e){var t=e.getDay();return t>=4||t===0?qn(e):qn.ceil(e)}function Ck(e,t){return e=M0(e),pe(qn.count(or(e),e)+(or(e).getDay()===4),t,2)}function Mk(e){return e.getDay()}function Tk(e,t){return pe(Qa.count(or(e)-1,e),t,2)}function Dk(e,t){return pe(e.getFullYear()%100,t,2)}function Ik(e,t){return e=M0(e),pe(e.getFullYear()%100,t,2)}function $k(e,t){return pe(e.getFullYear()%1e4,t,4)}function Lk(e,t){var r=e.getDay();return e=r>=4||r===0?qn(e):qn.ceil(e),pe(e.getFullYear()%1e4,t,4)}function Rk(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+pe(t/60|0,"0",2)+pe(t%60,"0",2)}function Nf(e,t){return pe(e.getUTCDate(),t,2)}function Uk(e,t){return pe(e.getUTCHours(),t,2)}function Bk(e,t){return pe(e.getUTCHours()%12||12,t,2)}function Fk(e,t){return pe(1+Qs.count(lr(e),e),t,3)}function T0(e,t){return pe(e.getUTCMilliseconds(),t,3)}function zk(e,t){return T0(e,t)+"000"}function Wk(e,t){return pe(e.getUTCMonth()+1,t,2)}function Kk(e,t){return pe(e.getUTCMinutes(),t,2)}function Hk(e,t){return pe(e.getUTCSeconds(),t,2)}function qk(e){var t=e.getUTCDay();return t===0?7:t}function Vk(e,t){return pe(to.count(lr(e)-1,e),t,2)}function D0(e){var t=e.getUTCDay();return t>=4||t===0?Vn(e):Vn.ceil(e)}function Gk(e,t){return e=D0(e),pe(Vn.count(lr(e),e)+(lr(e).getUTCDay()===4),t,2)}function Yk(e){return e.getUTCDay()}function Zk(e,t){return pe(es.count(lr(e)-1,e),t,2)}function Xk(e,t){return pe(e.getUTCFullYear()%100,t,2)}function Jk(e,t){return e=D0(e),pe(e.getUTCFullYear()%100,t,2)}function Qk(e,t){return pe(e.getUTCFullYear()%1e4,t,4)}function eO(e,t){var r=e.getUTCDay();return e=r>=4||r===0?Vn(e):Vn.ceil(e),pe(e.getUTCFullYear()%1e4,t,4)}function tO(){return"+0000"}function kf(){return"%"}function Of(e){return+e}function Af(e){return Math.floor(+e/1e3)}var Nn,I0,$0;rO({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function rO(e){return Nn=rk(e),I0=Nn.format,Nn.parse,$0=Nn.utcFormat,Nn.utcParse,Nn}function nO(e){return new Date(e)}function iO(e){return e instanceof Date?+e:+new Date(+e)}function Tu(e,t,r,n,i,a,s,o,c,d){var u=xu(),h=u.invert,f=u.domain,m=d(".%L"),g=d(":%S"),p=d("%I:%M"),v=d("%I %p"),x=d("%a %d"),j=d("%b %d"),b=d("%B"),S=d("%Y");function _(N){return(c(N)<N?m:o(N)<N?g:s(N)<N?p:a(N)<N?v:n(N)<N?i(N)<N?x:j:r(N)<N?b:S)(N)}return u.invert=function(N){return new Date(h(N))},u.domain=function(N){return arguments.length?f(Array.from(N,iO)):f().map(nO)},u.ticks=function(N){var P=f();return e(P[0],P[P.length-1],N??10)},u.tickFormat=function(N,P){return P==null?_:d(P)},u.nice=function(N){var P=f();return(!N||typeof N.range!="function")&&(N=t(P[0],P[P.length-1],N??10)),N?f(j0(P,N)):u},u.copy=function(){return Yi(u,Tu(e,t,r,n,i,a,s,o,c,d))},u}function aO(){return Tt.apply(Tu(ek,tk,or,Cu,eo,Zi,Au,ku,Gr,I0).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function sO(){return Tt.apply(Tu(JN,QN,lr,Mu,to,Qs,Eu,Ou,Gr,$0).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function ro(){var e=0,t=1,r,n,i,a,s=it,o=!1,c;function d(h){return h==null||isNaN(h=+h)?c:s(i===0?.5:(h=(a(h)-r)*i,o?Math.max(0,Math.min(1,h)):h))}d.domain=function(h){return arguments.length?([e,t]=h,r=a(e=+e),n=a(t=+t),i=r===n?0:1/(n-r),d):[e,t]},d.clamp=function(h){return arguments.length?(o=!!h,d):o},d.interpolator=function(h){return arguments.length?(s=h,d):s};function u(h){return function(f){var m,g;return arguments.length?([m,g]=f,s=h(m,g),d):[s(0),s(1)]}}return d.range=u(Qn),d.rangeRound=u(yu),d.unknown=function(h){return arguments.length?(c=h,d):c},function(h){return a=h,r=h(e),n=h(t),i=r===n?0:1/(n-r),d}}function Tr(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function L0(){var e=Mr(ro()(it));return e.copy=function(){return Tr(e,L0())},hr.apply(e,arguments)}function R0(){var e=ju(ro()).domain([1,10]);return e.copy=function(){return Tr(e,R0()).base(e.base())},hr.apply(e,arguments)}function U0(){var e=Su(ro());return e.copy=function(){return Tr(e,U0()).constant(e.constant())},hr.apply(e,arguments)}function Du(){var e=Pu(ro());return e.copy=function(){return Tr(e,Du()).exponent(e.exponent())},hr.apply(e,arguments)}function oO(){return Du.apply(null,arguments).exponent(.5)}function B0(){var e=[],t=it;function r(n){if(n!=null&&!isNaN(n=+n))return t((Vi(e,n,1)-1)/(e.length-1))}return r.domain=function(n){if(!arguments.length)return e.slice();e=[];for(let i of n)i!=null&&!isNaN(i=+i)&&e.push(i);return e.sort(Nr),r},r.interpolator=function(n){return arguments.length?(t=n,r):t},r.range=function(){return e.map((n,i)=>t(i/(e.length-1)))},r.quantiles=function(n){return Array.from({length:n+1},(i,a)=>q_(e,a/n))},r.copy=function(){return B0(t).domain(e)},hr.apply(r,arguments)}function no(){var e=0,t=.5,r=1,n=1,i,a,s,o,c,d=it,u,h=!1,f;function m(p){return isNaN(p=+p)?f:(p=.5+((p=+u(p))-a)*(n*p<n*a?o:c),d(h?Math.max(0,Math.min(1,p)):p))}m.domain=function(p){return arguments.length?([e,t,r]=p,i=u(e=+e),a=u(t=+t),s=u(r=+r),o=i===a?0:.5/(a-i),c=a===s?0:.5/(s-a),n=a<i?-1:1,m):[e,t,r]},m.clamp=function(p){return arguments.length?(h=!!p,m):h},m.interpolator=function(p){return arguments.length?(d=p,m):d};function g(p){return function(v){var x,j,b;return arguments.length?([x,j,b]=v,d=xN(p,[x,j,b]),m):[d(0),d(.5),d(1)]}}return m.range=g(Qn),m.rangeRound=g(yu),m.unknown=function(p){return arguments.length?(f=p,m):f},function(p){return u=p,i=p(e),a=p(t),s=p(r),o=i===a?0:.5/(a-i),c=a===s?0:.5/(s-a),n=a<i?-1:1,m}}function F0(){var e=Mr(no()(it));return e.copy=function(){return Tr(e,F0())},hr.apply(e,arguments)}function z0(){var e=ju(no()).domain([.1,1,10]);return e.copy=function(){return Tr(e,z0()).base(e.base())},hr.apply(e,arguments)}function W0(){var e=Su(no());return e.copy=function(){return Tr(e,W0()).constant(e.constant())},hr.apply(e,arguments)}function Iu(){var e=Pu(no());return e.copy=function(){return Tr(e,Iu()).exponent(e.exponent())},hr.apply(e,arguments)}function lO(){return Iu.apply(null,arguments).exponent(.5)}const gi=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:pu,scaleDiverging:F0,scaleDivergingLog:z0,scaleDivergingPow:Iu,scaleDivergingSqrt:lO,scaleDivergingSymlog:W0,scaleIdentity:w0,scaleImplicit:Yl,scaleLinear:b0,scaleLog:S0,scaleOrdinal:mu,scalePoint:Y_,scalePow:_u,scaleQuantile:N0,scaleQuantize:k0,scaleRadial:_0,scaleSequential:L0,scaleSequentialLog:R0,scaleSequentialPow:Du,scaleSequentialQuantile:B0,scaleSequentialSqrt:oO,scaleSequentialSymlog:U0,scaleSqrt:zN,scaleSymlog:P0,scaleThreshold:O0,scaleTime:aO,scaleUtc:sO,tickFormat:x0},Symbol.toStringTag,{value:"Module"}));var gn=e=>e.chartData,cO=$([gn],e=>{var t=e.chartData!=null?e.chartData.length-1:0;return{chartData:e.chartData,computedData:e.computedData,dataEndIndex:t,dataStartIndex:0}}),io=(e,t,r,n)=>n?cO(e):gn(e);function Gn(e){if(Array.isArray(e)&&e.length===2){var[t,r]=e;if(Ye(t)&&Ye(r))return!0}return!1}function Ef(e,t,r){return r?e:[Math.min(e[0],t[0]),Math.max(e[1],t[1])]}function uO(e,t){if(t&&typeof e!="function"&&Array.isArray(e)&&e.length===2){var[r,n]=e,i,a;if(Ye(r))i=r;else if(typeof r=="function")return;if(Ye(n))a=n;else if(typeof n=="function")return;var s=[i,a];if(Gn(s))return s}}function dO(e,t,r){if(!(!r&&t==null)){if(typeof e=="function"&&t!=null)try{var n=e(t,r);if(Gn(n))return Ef(n,t,r)}catch{}if(Array.isArray(e)&&e.length===2){var[i,a]=e,s,o;if(i==="auto")t!=null&&(s=Math.min(...t));else if(Y(i))s=i;else if(typeof i=="function")try{t!=null&&(s=i(t?.[0]))}catch{}else if(typeof i=="string"&&_h.test(i)){var c=_h.exec(i);if(c==null||t==null)s=void 0;else{var d=+c[1];s=t[0]-d}}else s=t?.[0];if(a==="auto")t!=null&&(o=Math.max(...t));else if(Y(a))o=a;else if(typeof a=="function")try{t!=null&&(o=a(t?.[1]))}catch{}else if(typeof a=="string"&&Nh.test(a)){var u=Nh.exec(a);if(u==null||t==null)o=void 0;else{var h=+u[1];o=t[1]+h}}else o=t?.[1];var f=[s,o];if(Gn(f))return t==null?f:Ef(f,t,r)}}}var ei=1e9,hO={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},Lu,Oe=!0,At="[DecimalError] ",en=At+"Invalid argument: ",$u=At+"Exponent out of range: ",ti=Math.floor,Br=Math.pow,fO=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,pt,Re=1e7,ke=7,K0=9007199254740991,ts=ti(K0/ke),Z={};Z.absoluteValue=Z.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e};Z.comparedTo=Z.cmp=function(e){var t,r,n,i,a=this;if(e=new a.constructor(e),a.s!==e.s)return a.s||-e.s;if(a.e!==e.e)return a.e>e.e^a.s<0?1:-1;for(n=a.d.length,i=e.d.length,t=0,r=n<i?n:i;t<r;++t)if(a.d[t]!==e.d[t])return a.d[t]>e.d[t]^a.s<0?1:-1;return n===i?0:n>i^a.s<0?1:-1};Z.decimalPlaces=Z.dp=function(){var e=this,t=e.d.length-1,r=(t-e.e)*ke;if(t=e.d[t],t)for(;t%10==0;t/=10)r--;return r<0?0:r};Z.dividedBy=Z.div=function(e){return nr(this,new this.constructor(e))};Z.dividedToIntegerBy=Z.idiv=function(e){var t=this,r=t.constructor;return Pe(nr(t,new r(e),0,1),r.precision)};Z.equals=Z.eq=function(e){return!this.cmp(e)};Z.exponent=function(){return Ce(this)};Z.greaterThan=Z.gt=function(e){return this.cmp(e)>0};Z.greaterThanOrEqualTo=Z.gte=function(e){return this.cmp(e)>=0};Z.isInteger=Z.isint=function(){return this.e>this.d.length-2};Z.isNegative=Z.isneg=function(){return this.s<0};Z.isPositive=Z.ispos=function(){return this.s>0};Z.isZero=function(){return this.s===0};Z.lessThan=Z.lt=function(e){return this.cmp(e)<0};Z.lessThanOrEqualTo=Z.lte=function(e){return this.cmp(e)<1};Z.logarithm=Z.log=function(e){var t,r=this,n=r.constructor,i=n.precision,a=i+5;if(e===void 0)e=new n(10);else if(e=new n(e),e.s<1||e.eq(pt))throw Error(At+"NaN");if(r.s<1)throw Error(At+(r.s?"NaN":"-Infinity"));return r.eq(pt)?new n(0):(Oe=!1,t=nr($i(r,a),$i(e,a),a),Oe=!0,Pe(t,i))};Z.minus=Z.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?V0(t,e):H0(t,(e.s=-e.s,e))};Z.modulo=Z.mod=function(e){var t,r=this,n=r.constructor,i=n.precision;if(e=new n(e),!e.s)throw Error(At+"NaN");return r.s?(Oe=!1,t=nr(r,e,0,1).times(e),Oe=!0,r.minus(t)):Pe(new n(r),i)};Z.naturalExponential=Z.exp=function(){return q0(this)};Z.naturalLogarithm=Z.ln=function(){return $i(this)};Z.negated=Z.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e};Z.plus=Z.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?H0(t,e):V0(t,(e.s=-e.s,e))};Z.precision=Z.sd=function(e){var t,r,n,i=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(en+e);if(t=Ce(i)+1,n=i.d.length-1,r=n*ke+1,n=i.d[n],n){for(;n%10==0;n/=10)r--;for(n=i.d[0];n>=10;n/=10)r++}return e&&t>r?t:r};Z.squareRoot=Z.sqrt=function(){var e,t,r,n,i,a,s,o=this,c=o.constructor;if(o.s<1){if(!o.s)return new c(0);throw Error(At+"NaN")}for(e=Ce(o),Oe=!1,i=Math.sqrt(+o),i==0||i==1/0?(t=zt(o.d),(t.length+e)%2==0&&(t+="0"),i=Math.sqrt(t),e=ti((e+1)/2)-(e<0||e%2),i==1/0?t="5e"+e:(t=i.toExponential(),t=t.slice(0,t.indexOf("e")+1)+e),n=new c(t)):n=new c(i.toString()),r=c.precision,i=s=r+3;;)if(a=n,n=a.plus(nr(o,a,s+2)).times(.5),zt(a.d).slice(0,s)===(t=zt(n.d)).slice(0,s)){if(t=t.slice(s-3,s+1),i==s&&t=="4999"){if(Pe(a,r+1,0),a.times(a).eq(o)){n=a;break}}else if(t!="9999")break;s+=4}return Oe=!0,Pe(n,r)};Z.times=Z.mul=function(e){var t,r,n,i,a,s,o,c,d,u=this,h=u.constructor,f=u.d,m=(e=new h(e)).d;if(!u.s||!e.s)return new h(0);for(e.s*=u.s,r=u.e+e.e,c=f.length,d=m.length,c<d&&(a=f,f=m,m=a,s=c,c=d,d=s),a=[],s=c+d,n=s;n--;)a.push(0);for(n=d;--n>=0;){for(t=0,i=c+n;i>n;)o=a[i]+m[n]*f[i-n-1]+t,a[i--]=o%Re|0,t=o/Re|0;a[i]=(a[i]+t)%Re|0}for(;!a[--s];)a.pop();return t?++r:a.shift(),e.d=a,e.e=r,Oe?Pe(e,h.precision):e};Z.toDecimalPlaces=Z.todp=function(e,t){var r=this,n=r.constructor;return r=new n(r),e===void 0?r:(Kt(e,0,ei),t===void 0?t=n.rounding:Kt(t,0,8),Pe(r,e+Ce(r)+1,t))};Z.toExponential=function(e,t){var r,n=this,i=n.constructor;return e===void 0?r=un(n,!0):(Kt(e,0,ei),t===void 0?t=i.rounding:Kt(t,0,8),n=Pe(new i(n),e+1,t),r=un(n,!0,e+1)),r};Z.toFixed=function(e,t){var r,n,i=this,a=i.constructor;return e===void 0?un(i):(Kt(e,0,ei),t===void 0?t=a.rounding:Kt(t,0,8),n=Pe(new a(i),e+Ce(i)+1,t),r=un(n.abs(),!1,e+Ce(n)+1),i.isneg()&&!i.isZero()?"-"+r:r)};Z.toInteger=Z.toint=function(){var e=this,t=e.constructor;return Pe(new t(e),Ce(e)+1,t.rounding)};Z.toNumber=function(){return+this};Z.toPower=Z.pow=function(e){var t,r,n,i,a,s,o=this,c=o.constructor,d=12,u=+(e=new c(e));if(!e.s)return new c(pt);if(o=new c(o),!o.s){if(e.s<1)throw Error(At+"Infinity");return o}if(o.eq(pt))return o;if(n=c.precision,e.eq(pt))return Pe(o,n);if(t=e.e,r=e.d.length-1,s=t>=r,a=o.s,s){if((r=u<0?-u:u)<=K0){for(i=new c(pt),t=Math.ceil(n/ke+4),Oe=!1;r%2&&(i=i.times(o),Mf(i.d,t)),r=ti(r/2),r!==0;)o=o.times(o),Mf(o.d,t);return Oe=!0,e.s<0?new c(pt).div(i):Pe(i,n)}}else if(a<0)throw Error(At+"NaN");return a=a<0&&e.d[Math.max(t,r)]&1?-1:1,o.s=1,Oe=!1,i=e.times($i(o,n+d)),Oe=!0,i=q0(i),i.s=a,i};Z.toPrecision=function(e,t){var r,n,i=this,a=i.constructor;return e===void 0?(r=Ce(i),n=un(i,r<=a.toExpNeg||r>=a.toExpPos)):(Kt(e,1,ei),t===void 0?t=a.rounding:Kt(t,0,8),i=Pe(new a(i),e,t),r=Ce(i),n=un(i,e<=r||r<=a.toExpNeg,e)),n};Z.toSignificantDigits=Z.tosd=function(e,t){var r=this,n=r.constructor;return e===void 0?(e=n.precision,t=n.rounding):(Kt(e,1,ei),t===void 0?t=n.rounding:Kt(t,0,8)),Pe(new n(r),e,t)};Z.toString=Z.valueOf=Z.val=Z.toJSON=Z[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=Ce(e),r=e.constructor;return un(e,t<=r.toExpNeg||t>=r.toExpPos)};function H0(e,t){var r,n,i,a,s,o,c,d,u=e.constructor,h=u.precision;if(!e.s||!t.s)return t.s||(t=new u(e)),Oe?Pe(t,h):t;if(c=e.d,d=t.d,s=e.e,i=t.e,c=c.slice(),a=s-i,a){for(a<0?(n=c,a=-a,o=d.length):(n=d,i=s,o=c.length),s=Math.ceil(h/ke),o=s>o?s+1:o+1,a>o&&(a=o,n.length=1),n.reverse();a--;)n.push(0);n.reverse()}for(o=c.length,a=d.length,o-a<0&&(a=o,n=d,d=c,c=n),r=0;a;)r=(c[--a]=c[a]+d[a]+r)/Re|0,c[a]%=Re;for(r&&(c.unshift(r),++i),o=c.length;c[--o]==0;)c.pop();return t.d=c,t.e=i,Oe?Pe(t,h):t}function Kt(e,t,r){if(e!==~~e||e<t||e>r)throw Error(en+e)}function zt(e){var t,r,n,i=e.length-1,a="",s=e[0];if(i>0){for(a+=s,t=1;t<i;t++)n=e[t]+"",r=ke-n.length,r&&(a+=jr(r)),a+=n;s=e[t],n=s+"",r=ke-n.length,r&&(a+=jr(r))}else if(s===0)return"0";for(;s%10===0;)s/=10;return a+s}var nr=function(){function e(n,i){var a,s=0,o=n.length;for(n=n.slice();o--;)a=n[o]*i+s,n[o]=a%Re|0,s=a/Re|0;return s&&n.unshift(s),n}function t(n,i,a,s){var o,c;if(a!=s)c=a>s?1:-1;else for(o=c=0;o<a;o++)if(n[o]!=i[o]){c=n[o]>i[o]?1:-1;break}return c}function r(n,i,a){for(var s=0;a--;)n[a]-=s,s=n[a]<i[a]?1:0,n[a]=s*Re+n[a]-i[a];for(;!n[0]&&n.length>1;)n.shift()}return function(n,i,a,s){var o,c,d,u,h,f,m,g,p,v,x,j,b,S,_,N,P,E,w=n.constructor,A=n.s==i.s?1:-1,O=n.d,D=i.d;if(!n.s)return new w(n);if(!i.s)throw Error(At+"Division by zero");for(c=n.e-i.e,P=D.length,_=O.length,m=new w(A),g=m.d=[],d=0;D[d]==(O[d]||0);)++d;if(D[d]>(O[d]||0)&&--c,a==null?j=a=w.precision:s?j=a+(Ce(n)-Ce(i))+1:j=a,j<0)return new w(0);if(j=j/ke+2|0,d=0,P==1)for(u=0,D=D[0],j++;(d<_||u)&&j--;d++)b=u*Re+(O[d]||0),g[d]=b/D|0,u=b%D|0;else{for(u=Re/(D[0]+1)|0,u>1&&(D=e(D,u),O=e(O,u),P=D.length,_=O.length),S=P,p=O.slice(0,P),v=p.length;v<P;)p[v++]=0;E=D.slice(),E.unshift(0),N=D[0],D[1]>=Re/2&&++N;do u=0,o=t(D,p,P,v),o<0?(x=p[0],P!=v&&(x=x*Re+(p[1]||0)),u=x/N|0,u>1?(u>=Re&&(u=Re-1),h=e(D,u),f=h.length,v=p.length,o=t(h,p,f,v),o==1&&(u--,r(h,P<f?E:D,f))):(u==0&&(o=u=1),h=D.slice()),f=h.length,f<v&&h.unshift(0),r(p,h,v),o==-1&&(v=p.length,o=t(D,p,P,v),o<1&&(u++,r(p,P<v?E:D,v))),v=p.length):o===0&&(u++,p=[0]),g[d++]=u,o&&p[0]?p[v++]=O[S]||0:(p=[O[S]],v=1);while((S++<_||p[0]!==void 0)&&j--)}return g[0]||g.shift(),m.e=c,Pe(m,s?a+Ce(m)+1:a)}}();function q0(e,t){var r,n,i,a,s,o,c=0,d=0,u=e.constructor,h=u.precision;if(Ce(e)>16)throw Error($u+Ce(e));if(!e.s)return new u(pt);for(t==null?(Oe=!1,o=h):o=t,s=new u(.03125);e.abs().gte(.1);)e=e.times(s),d+=5;for(n=Math.log(Br(2,d))/Math.LN10*2+5|0,o+=n,r=i=a=new u(pt),u.precision=o;;){if(i=Pe(i.times(e),o),r=r.times(++c),s=a.plus(nr(i,r,o)),zt(s.d).slice(0,o)===zt(a.d).slice(0,o)){for(;d--;)a=Pe(a.times(a),o);return u.precision=h,t==null?(Oe=!0,Pe(a,h)):a}a=s}}function Ce(e){for(var t=e.e*ke,r=e.d[0];r>=10;r/=10)t++;return t}function rl(e,t,r){if(t>e.LN10.sd())throw Oe=!0,r&&(e.precision=r),Error(At+"LN10 precision limit exceeded");return Pe(new e(e.LN10),t)}function jr(e){for(var t="";e--;)t+="0";return t}function $i(e,t){var r,n,i,a,s,o,c,d,u,h=1,f=10,m=e,g=m.d,p=m.constructor,v=p.precision;if(m.s<1)throw Error(At+(m.s?"NaN":"-Infinity"));if(m.eq(pt))return new p(0);if(t==null?(Oe=!1,d=v):d=t,m.eq(10))return t==null&&(Oe=!0),rl(p,d);if(d+=f,p.precision=d,r=zt(g),n=r.charAt(0),a=Ce(m),Math.abs(a)<15e14){for(;n<7&&n!=1||n==1&&r.charAt(1)>3;)m=m.times(e),r=zt(m.d),n=r.charAt(0),h++;a=Ce(m),n>1?(m=new p("0."+r),a++):m=new p(n+"."+r.slice(1))}else return c=rl(p,d+2,v).times(a+""),m=$i(new p(n+"."+r.slice(1)),d-f).plus(c),p.precision=v,t==null?(Oe=!0,Pe(m,v)):m;for(o=s=m=nr(m.minus(pt),m.plus(pt),d),u=Pe(m.times(m),d),i=3;;){if(s=Pe(s.times(u),d),c=o.plus(nr(s,new p(i),d)),zt(c.d).slice(0,d)===zt(o.d).slice(0,d))return o=o.times(2),a!==0&&(o=o.plus(rl(p,d+2,v).times(a+""))),o=nr(o,new p(h),d),p.precision=v,t==null?(Oe=!0,Pe(o,v)):o;o=c,i+=2}}function Cf(e,t){var r,n,i;for((r=t.indexOf("."))>-1&&(t=t.replace(".","")),(n=t.search(/e/i))>0?(r<0&&(r=n),r+=+t.slice(n+1),t=t.substring(0,n)):r<0&&(r=t.length),n=0;t.charCodeAt(n)===48;)++n;for(i=t.length;t.charCodeAt(i-1)===48;)--i;if(t=t.slice(n,i),t){if(i-=n,r=r-n-1,e.e=ti(r/ke),e.d=[],n=(r+1)%ke,r<0&&(n+=ke),n<i){for(n&&e.d.push(+t.slice(0,n)),i-=ke;n<i;)e.d.push(+t.slice(n,n+=ke));t=t.slice(n),n=ke-t.length}else n-=i;for(;n--;)t+="0";if(e.d.push(+t),Oe&&(e.e>ts||e.e<-ts))throw Error($u+r)}else e.s=0,e.e=0,e.d=[0];return e}function Pe(e,t,r){var n,i,a,s,o,c,d,u,h=e.d;for(s=1,a=h[0];a>=10;a/=10)s++;if(n=t-s,n<0)n+=ke,i=t,d=h[u=0];else{if(u=Math.ceil((n+1)/ke),a=h.length,u>=a)return e;for(d=a=h[u],s=1;a>=10;a/=10)s++;n%=ke,i=n-ke+s}if(r!==void 0&&(a=Br(10,s-i-1),o=d/a%10|0,c=t<0||h[u+1]!==void 0||d%a,c=r<4?(o||c)&&(r==0||r==(e.s<0?3:2)):o>5||o==5&&(r==4||c||r==6&&(n>0?i>0?d/Br(10,s-i):0:h[u-1])%10&1||r==(e.s<0?8:7))),t<1||!h[0])return c?(a=Ce(e),h.length=1,t=t-a-1,h[0]=Br(10,(ke-t%ke)%ke),e.e=ti(-t/ke)||0):(h.length=1,h[0]=e.e=e.s=0),e;if(n==0?(h.length=u,a=1,u--):(h.length=u+1,a=Br(10,ke-n),h[u]=i>0?(d/Br(10,s-i)%Br(10,i)|0)*a:0),c)for(;;)if(u==0){(h[0]+=a)==Re&&(h[0]=1,++e.e);break}else{if(h[u]+=a,h[u]!=Re)break;h[u--]=0,a=1}for(n=h.length;h[--n]===0;)h.pop();if(Oe&&(e.e>ts||e.e<-ts))throw Error($u+Ce(e));return e}function V0(e,t){var r,n,i,a,s,o,c,d,u,h,f=e.constructor,m=f.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new f(e),Oe?Pe(t,m):t;if(c=e.d,h=t.d,n=t.e,d=e.e,c=c.slice(),s=d-n,s){for(u=s<0,u?(r=c,s=-s,o=h.length):(r=h,n=d,o=c.length),i=Math.max(Math.ceil(m/ke),o)+2,s>i&&(s=i,r.length=1),r.reverse(),i=s;i--;)r.push(0);r.reverse()}else{for(i=c.length,o=h.length,u=i<o,u&&(o=i),i=0;i<o;i++)if(c[i]!=h[i]){u=c[i]<h[i];break}s=0}for(u&&(r=c,c=h,h=r,t.s=-t.s),o=c.length,i=h.length-o;i>0;--i)c[o++]=0;for(i=h.length;i>s;){if(c[--i]<h[i]){for(a=i;a&&c[--a]===0;)c[a]=Re-1;--c[a],c[i]+=Re}c[i]-=h[i]}for(;c[--o]===0;)c.pop();for(;c[0]===0;c.shift())--n;return c[0]?(t.d=c,t.e=n,Oe?Pe(t,m):t):new f(0)}function un(e,t,r){var n,i=Ce(e),a=zt(e.d),s=a.length;return t?(r&&(n=r-s)>0?a=a.charAt(0)+"."+a.slice(1)+jr(n):s>1&&(a=a.charAt(0)+"."+a.slice(1)),a=a+(i<0?"e":"e+")+i):i<0?(a="0."+jr(-i-1)+a,r&&(n=r-s)>0&&(a+=jr(n))):i>=s?(a+=jr(i+1-s),r&&(n=r-i-1)>0&&(a=a+"."+jr(n))):((n=i+1)<s&&(a=a.slice(0,n)+"."+a.slice(n)),r&&(n=r-s)>0&&(i+1===s&&(a+="."),a+=jr(n))),e.s<0?"-"+a:a}function Mf(e,t){if(e.length>t)return e.length=t,!0}function G0(e){var t,r,n;function i(a){var s=this;if(!(s instanceof i))return new i(a);if(s.constructor=i,a instanceof i){s.s=a.s,s.e=a.e,s.d=(a=a.d)?a.slice():a;return}if(typeof a=="number"){if(a*0!==0)throw Error(en+a);if(a>0)s.s=1;else if(a<0)a=-a,s.s=-1;else{s.s=0,s.e=0,s.d=[0];return}if(a===~~a&&a<1e7){s.e=0,s.d=[a];return}return Cf(s,a.toString())}else if(typeof a!="string")throw Error(en+a);if(a.charCodeAt(0)===45?(a=a.slice(1),s.s=-1):s.s=1,fO.test(a))Cf(s,a);else throw Error(en+a)}if(i.prototype=Z,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.clone=G0,i.config=i.set=mO,e===void 0&&(e={}),e)for(n=["precision","rounding","toExpNeg","toExpPos","LN10"],t=0;t<n.length;)e.hasOwnProperty(r=n[t++])||(e[r]=this[r]);return i.config(e),i}function mO(e){if(!e||typeof e!="object")throw Error(At+"Object expected");var t,r,n,i=["precision",1,ei,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<i.length;t+=3)if((n=e[r=i[t]])!==void 0)if(ti(n)===n&&n>=i[t+1]&&n<=i[t+2])this[r]=n;else throw Error(en+r+": "+n);if((n=e[r="LN10"])!==void 0)if(n==Math.LN10)this[r]=new this(n);else throw Error(en+r+": "+n);return this}var Lu=G0(hO);pt=new Lu(1);const be=Lu;var pO=e=>e,Y0={"@@functional/placeholder":!0},Z0=e=>e===Y0,Tf=e=>function t(){return arguments.length===0||arguments.length===1&&Z0(arguments.length<=0?void 0:arguments[0])?t:e(...arguments)},X0=(e,t)=>e===1?t:Tf(function(){for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];var a=n.filter(s=>s!==Y0).length;return a>=e?t(...n):X0(e-a,Tf(function(){for(var s=arguments.length,o=new Array(s),c=0;c<s;c++)o[c]=arguments[c];var d=n.map(u=>Z0(u)?o.shift():u);return t(...d,...o)}))}),ao=e=>X0(e.length,e),Ql=(e,t)=>{for(var r=[],n=e;n<t;++n)r[n-e]=n;return r},gO=ao((e,t)=>Array.isArray(t)?t.map(e):Object.keys(t).map(r=>t[r]).map(e)),vO=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];if(!r.length)return pO;var i=r.reverse(),a=i[0],s=i.slice(1);return function(){return s.reduce((o,c)=>c(o),a(...arguments))}},ec=e=>Array.isArray(e)?e.reverse():e.split("").reverse().join(""),J0=e=>{var t=null,r=null;return function(){for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return t&&i.every((s,o)=>{var c;return s===((c=t)===null||c===void 0?void 0:c[o])})||(t=i,r=e(...i)),r}};function Q0(e){var t;return e===0?t=1:t=Math.floor(new be(e).abs().log(10).toNumber())+1,t}function ev(e,t,r){for(var n=new be(e),i=0,a=[];n.lt(t)&&i<1e5;)a.push(n.toNumber()),n=n.add(r),i++;return a}ao((e,t,r)=>{var n=+e,i=+t;return n+r*(i-n)});ao((e,t,r)=>{var n=t-+e;return n=n||1/0,(r-e)/n});ao((e,t,r)=>{var n=t-+e;return n=n||1/0,Math.max(0,Math.min(1,(r-e)/n))});var tv=e=>{var[t,r]=e,[n,i]=[t,r];return t>r&&([n,i]=[r,t]),[n,i]},rv=(e,t,r)=>{if(e.lte(0))return new be(0);var n=Q0(e.toNumber()),i=new be(10).pow(n),a=e.div(i),s=n!==1?.05:.1,o=new be(Math.ceil(a.div(s).toNumber())).add(r).mul(s),c=o.mul(i);return t?new be(c.toNumber()):new be(Math.ceil(c.toNumber()))},yO=(e,t,r)=>{var n=new be(1),i=new be(e);if(!i.isint()&&r){var a=Math.abs(e);a<1?(n=new be(10).pow(Q0(e)-1),i=new be(Math.floor(i.div(n).toNumber())).mul(n)):a>1&&(i=new be(Math.floor(e)))}else e===0?i=new be(Math.floor((t-1)/2)):r||(i=new be(Math.floor(e)));var s=Math.floor((t-1)/2),o=vO(gO(c=>i.add(new be(c-s).mul(n)).toNumber()),Ql);return o(0,t)},nv=function(t,r,n,i){var a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((r-t)/(n-1)))return{step:new be(0),tickMin:new be(0),tickMax:new be(0)};var s=rv(new be(r).sub(t).div(n-1),i,a),o;t<=0&&r>=0?o=new be(0):(o=new be(t).add(r).div(2),o=o.sub(new be(o).mod(s)));var c=Math.ceil(o.sub(t).div(s).toNumber()),d=Math.ceil(new be(r).sub(o).div(s).toNumber()),u=c+d+1;return u>n?nv(t,r,n,i,a+1):(u<n&&(d=r>0?d+(n-u):d,c=r>0?c:c+(n-u)),{step:s,tickMin:o.sub(new be(c).mul(s)),tickMax:o.add(new be(d).mul(s))})};function xO(e){var[t,r]=e,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,a=Math.max(n,2),[s,o]=tv([t,r]);if(s===-1/0||o===1/0){var c=o===1/0?[s,...Ql(0,n-1).map(()=>1/0)]:[...Ql(0,n-1).map(()=>-1/0),o];return t>r?ec(c):c}if(s===o)return yO(s,n,i);var{step:d,tickMin:u,tickMax:h}=nv(s,o,a,i,0),f=ev(u,h.add(new be(.1).mul(d)),d);return t>r?ec(f):f}function bO(e,t){var[r,n]=e,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,[a,s]=tv([r,n]);if(a===-1/0||s===1/0)return[r,n];if(a===s)return[a];var o=Math.max(t,2),c=rv(new be(s).sub(a).div(o-1),i,0),d=[...ev(new be(a),new be(s),c),s];return i===!1&&(d=d.map(u=>Math.round(u))),r>n?ec(d):d}var wO=J0(xO),jO=J0(bO),iv=e=>e.rootProps.maxBarSize,SO=e=>e.rootProps.barGap,av=e=>e.rootProps.barCategoryGap,PO=e=>e.rootProps.barSize,so=e=>e.rootProps.stackOffset,Ru=e=>e.options.chartName,Uu=e=>e.rootProps.syncId,sv=e=>e.rootProps.syncMethod,Bu=e=>e.options.eventEmitter,Jt={allowDuplicatedCategory:!0,angleAxisId:0,axisLine:!0,cx:0,cy:0,orientation:"outer",reversed:!1,scale:"auto",tick:!0,tickLine:!0,tickSize:8,type:"category"},mt={allowDataOverflow:!1,allowDuplicatedCategory:!0,angle:0,axisLine:!0,cx:0,cy:0,orientation:"right",radiusAxisId:0,scale:"auto",stroke:"#ccc",tick:!0,tickCount:5,type:"number"},oo=(e,t)=>{if(!(!e||!t))return e!=null&&e.reversed?[t[1],t[0]]:t},_O={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!1,dataKey:void 0,domain:void 0,id:Jt.angleAxisId,includeHidden:!1,name:void 0,reversed:Jt.reversed,scale:Jt.scale,tick:Jt.tick,tickCount:void 0,ticks:void 0,type:Jt.type,unit:void 0},NO={allowDataOverflow:mt.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:mt.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:mt.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:mt.scale,tick:mt.tick,tickCount:mt.tickCount,ticks:void 0,type:mt.type,unit:void 0},kO={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:Jt.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Jt.angleAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Jt.scale,tick:Jt.tick,tickCount:void 0,ticks:void 0,type:"number",unit:void 0},OO={allowDataOverflow:mt.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:mt.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:mt.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:mt.scale,tick:mt.tick,tickCount:mt.tickCount,ticks:void 0,type:"category",unit:void 0},Fu=(e,t)=>e.polarAxis.angleAxis[t]!=null?e.polarAxis.angleAxis[t]:e.layout.layoutType==="radial"?kO:_O,zu=(e,t)=>e.polarAxis.radiusAxis[t]!=null?e.polarAxis.radiusAxis[t]:e.layout.layoutType==="radial"?OO:NO,lo=e=>e.polarOptions,Wu=$([ur,dr,ze],kS),ov=$([lo,Wu],(e,t)=>{if(e!=null)return Bt(e.innerRadius,t,0)}),lv=$([lo,Wu],(e,t)=>{if(e!=null)return Bt(e.outerRadius,t,t*.8)}),AO=e=>{if(e==null)return[0,0];var{startAngle:t,endAngle:r}=e;return[t,r]},cv=$([lo],AO);$([Fu,cv],oo);var uv=$([Wu,ov,lv],(e,t,r)=>{if(!(e==null||t==null||r==null))return[t,r]});$([zu,uv],oo);var EO=$([ge,lo,ov,lv,ur,dr],(e,t,r,n,i,a)=>{if(!(e!=="centric"&&e!=="radial"||t==null||r==null||n==null)){var{cx:s,cy:o,startAngle:c,endAngle:d}=t;return{cx:Bt(s,i,i/2),cy:Bt(o,a,a/2),innerRadius:r,outerRadius:n,startAngle:c,endAngle:d,clockWise:!1}}}),Ke=(e,t)=>t,co=(e,t,r)=>r;function Df(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function rs(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Df(Object(r),!0).forEach(function(n){CO(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Df(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function CO(e,t,r){return(t=MO(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function MO(e){var t=TO(e,"string");return typeof t=="symbol"?t:t+""}function TO(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var tc=[0,"auto"],ht={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:void 0,height:30,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"bottom",padding:{left:0,right:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"category",unit:void 0},Gt=(e,t)=>{var r=e.cartesianAxis.xAxis[t];return r??ht},ft={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:tc,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"left",padding:{top:0,bottom:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"number",unit:void 0,width:Gs},fr=(e,t)=>{var r=e.cartesianAxis.yAxis[t];return r??ft},DO={domain:[0,"auto"],includeHidden:!1,reversed:!1,allowDataOverflow:!1,allowDuplicatedCategory:!1,dataKey:void 0,id:0,name:"",range:[64,64],scale:"auto",type:"number",unit:""},Ku=(e,t)=>{var r=e.cartesianAxis.zAxis[t];return r??DO},dt=(e,t,r)=>{switch(t){case"xAxis":return Gt(e,r);case"yAxis":return fr(e,r);case"zAxis":return Ku(e,r);case"angleAxis":return Fu(e,r);case"radiusAxis":return zu(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},IO=(e,t,r)=>{switch(t){case"xAxis":return Gt(e,r);case"yAxis":return fr(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},Xi=(e,t,r)=>{switch(t){case"xAxis":return Gt(e,r);case"yAxis":return fr(e,r);case"angleAxis":return Fu(e,r);case"radiusAxis":return zu(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},dv=e=>e.graphicalItems.countOfBars>0;function hv(e,t){return r=>{switch(e){case"xAxis":return"xAxisId"in r&&r.xAxisId===t;case"yAxis":return"yAxisId"in r&&r.yAxisId===t;case"zAxis":return"zAxisId"in r&&r.zAxisId===t;case"angleAxis":return"angleAxisId"in r&&r.angleAxisId===t;case"radiusAxis":return"radiusAxisId"in r&&r.radiusAxisId===t;default:return!1}}}var Ji=e=>e.graphicalItems.cartesianItems,$O=$([Ke,co],hv),fv=(e,t,r)=>e.filter(r).filter(n=>t?.includeHidden===!0?!0:!n.hide),Qi=$([Ji,dt,$O],fv),mv=e=>e.filter(t=>t.stackId===void 0),LO=$([Qi],mv),pv=e=>e.map(t=>t.data).filter(Boolean).flat(1),RO=$([Qi],pv),gv=(e,t)=>{var{chartData:r=[],dataStartIndex:n,dataEndIndex:i}=t;return e.length>0?e:r.slice(n,i+1)},uo=$([RO,io],gv),vv=(e,t,r)=>t?.dataKey!=null?e.map(n=>({value:Fe(n,t.dataKey)})):r.length>0?r.map(n=>n.dataKey).flatMap(n=>e.map(i=>({value:Fe(i,n)}))):e.map(n=>({value:n})),ho=$([uo,dt,Qi],vv);function yv(e,t){switch(e){case"xAxis":return t.direction==="x";case"yAxis":return t.direction==="y";default:return!1}}function vn(e){return e.filter(t=>kt(t)||t instanceof Date).map(Number).filter(t=>rt(t)===!1)}function UO(e,t,r){return!r||typeof t!="number"||rt(t)?[]:r.length?vn(r.flatMap(n=>{var i=Fe(e,n.dataKey),a,s;if(Array.isArray(i)?[a,s]=i:a=s=i,!(!Ye(a)||!Ye(s)))return[t-a,t+s]})):[]}var xv=(e,t,r)=>{var n={},i=t.reduce((a,s)=>(s.stackId==null||(a[s.stackId]==null&&(a[s.stackId]=[]),a[s.stackId].push(s)),a),n);return Object.fromEntries(Object.entries(i).map(a=>{var[s,o]=a,c=o.map(d=>d.dataKey);return[s,{stackedData:WS(e,c,r),graphicalItems:o}]}))},Li=$([uo,Qi,so],xv),bv=(e,t,r)=>{var{dataStartIndex:n,dataEndIndex:i}=t;if(r!=="zAxis"){var a=VS(e,n,i);if(!(a!=null&&a[0]===0&&a[1]===0))return a}},BO=$([Li,gn,Ke],bv),wv=(e,t,r,n)=>r.length>0?e.flatMap(i=>r.flatMap(a=>{var s,o,c=(s=a.errorBars)===null||s===void 0?void 0:s.filter(u=>yv(n,u)),d=Fe(i,(o=t.dataKey)!==null&&o!==void 0?o:a.dataKey);return{value:d,errorDomain:UO(i,d,c)}})).filter(Boolean):t?.dataKey!=null?e.map(i=>({value:Fe(i,t.dataKey),errorDomain:[]})):e.map(i=>({value:i,errorDomain:[]})),FO=$(uo,dt,LO,Ke,wv);function zO(e){var{value:t}=e;if(kt(t)||t instanceof Date)return t}var WO=e=>{var t=e.flatMap(n=>[n.value,n.errorDomain]).flat(1),r=vn(t);if(r.length!==0)return[Math.min(...r),Math.max(...r)]},KO=(e,t,r)=>{var n=e.map(zO).filter(i=>i!=null);return r&&(t.dataKey==null||t.allowDuplicatedCategory&&Sp(n))?c0(0,e.length):t.allowDuplicatedCategory?n:Array.from(new Set(n))},Hu=e=>{var t;if(e==null||!("domain"in e))return tc;if(e.domain!=null)return e.domain;if(e.ticks!=null){if(e.type==="number"){var r=vn(e.ticks);return[Math.min(...r),Math.max(...r)]}if(e.type==="category")return e.ticks.map(String)}return(t=e?.domain)!==null&&t!==void 0?t:tc},qu=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];var i=r.filter(Boolean);if(i.length!==0){var a=i.flat(),s=Math.min(...a),o=Math.max(...a);return[s,o]}},jv=e=>e.referenceElements.dots,ri=(e,t,r)=>e.filter(n=>n.ifOverflow==="extendDomain").filter(n=>t==="xAxis"?n.xAxisId===r:n.yAxisId===r),HO=$([jv,Ke,co],ri),Sv=e=>e.referenceElements.areas,qO=$([Sv,Ke,co],ri),Pv=e=>e.referenceElements.lines,VO=$([Pv,Ke,co],ri),_v=(e,t)=>{var r=vn(e.map(n=>t==="xAxis"?n.x:n.y));if(r.length!==0)return[Math.min(...r),Math.max(...r)]},GO=$(HO,Ke,_v),Nv=(e,t)=>{var r=vn(e.flatMap(n=>[t==="xAxis"?n.x1:n.y1,t==="xAxis"?n.x2:n.y2]));if(r.length!==0)return[Math.min(...r),Math.max(...r)]},YO=$([qO,Ke],Nv),kv=(e,t)=>{var r=vn(e.map(n=>t==="xAxis"?n.x:n.y));if(r.length!==0)return[Math.min(...r),Math.max(...r)]},ZO=$(VO,Ke,kv),XO=$(GO,ZO,YO,(e,t,r)=>qu(e,r,t)),JO=$([dt],Hu),Ov=(e,t,r,n,i)=>{var a=uO(t,e.allowDataOverflow);return a??dO(t,qu(r,i,WO(n)),e.allowDataOverflow)},QO=$([dt,JO,BO,FO,XO],Ov),eA=[0,1],Av=(e,t,r,n,i,a,s)=>{if(!(e==null||r==null||r.length===0)){var{dataKey:o,type:c}=e,d=qt(t,a);return d&&o==null?c0(0,r.length):c==="category"?KO(n,e,d):i==="expand"?eA:s}},Vu=$([dt,ge,uo,ho,so,Ke,QO],Av),Ev=(e,t,r,n,i)=>{if(e!=null){var{scale:a,type:s}=e;if(a==="auto")return t==="radial"&&i==="radiusAxis"?"band":t==="radial"&&i==="angleAxis"?"linear":s==="category"&&n&&(n.indexOf("LineChart")>=0||n.indexOf("AreaChart")>=0||n.indexOf("ComposedChart")>=0&&!r)?"point":s==="category"?"band":"linear";if(typeof a=="string"){var o="scale".concat(Ki(a));return o in gi?o:"point"}}},ea=$([dt,ge,dv,Ru,Ke],Ev);function tA(e){if(e!=null){if(e in gi)return gi[e]();var t="scale".concat(Ki(e));if(t in gi)return gi[t]()}}function Gu(e,t,r,n){if(!(r==null||n==null)){if(typeof e.scale=="function")return e.scale.copy().domain(r).range(n);var i=tA(t);if(i!=null){var a=i.domain(r).range(n);return RS(a),a}}}var Cv=(e,t,r)=>{var n=Hu(t);if(!(r!=="auto"&&r!=="linear")){if(t!=null&&t.tickCount&&Array.isArray(n)&&(n[0]==="auto"||n[1]==="auto")&&Gn(e))return wO(e,t.tickCount,t.allowDecimals);if(t!=null&&t.tickCount&&t.type==="number"&&Gn(e))return jO(e,t.tickCount,t.allowDecimals)}},Yu=$([Vu,Xi,ea],Cv),Mv=(e,t,r,n)=>{if(n!=="angleAxis"&&e?.type==="number"&&Gn(t)&&Array.isArray(r)&&r.length>0){var i=t[0],a=r[0],s=t[1],o=r[r.length-1];return[Math.min(i,a),Math.max(s,o)]}return t},rA=$([dt,Vu,Yu,Ke],Mv),nA=$(ho,dt,(e,t)=>{if(!(!t||t.type!=="number")){var r=1/0,n=Array.from(vn(e.map(o=>o.value))).sort((o,c)=>o-c);if(n.length<2)return 1/0;var i=n[n.length-1]-n[0];if(i===0)return 1/0;for(var a=0;a<n.length-1;a++){var s=n[a+1]-n[a];r=Math.min(r,s)}return r/i}}),Tv=$(nA,ge,av,ze,(e,t,r,n)=>n,(e,t,r,n,i)=>{if(!Ye(e))return 0;var a=t==="vertical"?n.height:n.width;if(i==="gap")return e*a/2;if(i==="no-gap"){var s=Bt(r,e*a),o=e*a/2;return o-s-(o-s)/a*s}return 0}),iA=(e,t)=>{var r=Gt(e,t);return r==null||typeof r.padding!="string"?0:Tv(e,"xAxis",t,r.padding)},aA=(e,t)=>{var r=fr(e,t);return r==null||typeof r.padding!="string"?0:Tv(e,"yAxis",t,r.padding)},sA=$(Gt,iA,(e,t)=>{var r,n;if(e==null)return{left:0,right:0};var{padding:i}=e;return typeof i=="string"?{left:t,right:t}:{left:((r=i.left)!==null&&r!==void 0?r:0)+t,right:((n=i.right)!==null&&n!==void 0?n:0)+t}}),oA=$(fr,aA,(e,t)=>{var r,n;if(e==null)return{top:0,bottom:0};var{padding:i}=e;return typeof i=="string"?{top:t,bottom:t}:{top:((r=i.top)!==null&&r!==void 0?r:0)+t,bottom:((n=i.bottom)!==null&&n!==void 0?n:0)+t}}),lA=$([ze,sA,Zs,Ys,(e,t,r)=>r],(e,t,r,n,i)=>{var{padding:a}=n;return i?[a.left,r.width-a.right]:[e.left+t.left,e.left+e.width-t.right]}),cA=$([ze,ge,oA,Zs,Ys,(e,t,r)=>r],(e,t,r,n,i,a)=>{var{padding:s}=i;return a?[n.height-s.bottom,s.top]:t==="horizontal"?[e.top+e.height-r.bottom,e.top+r.top]:[e.top+r.top,e.top+e.height-r.bottom]}),ta=(e,t,r,n)=>{var i;switch(t){case"xAxis":return lA(e,r,n);case"yAxis":return cA(e,r,n);case"zAxis":return(i=Ku(e,r))===null||i===void 0?void 0:i.range;case"angleAxis":return cv(e);case"radiusAxis":return uv(e,r);default:return}},Dv=$([dt,ta],oo),Er=$([dt,ea,rA,Dv],Gu);$(Qi,Ke,(e,t)=>e.flatMap(r=>{var n;return(n=r.errorBars)!==null&&n!==void 0?n:[]}).filter(r=>yv(t,r)));function Iv(e,t){return e.id<t.id?-1:e.id>t.id?1:0}var fo=(e,t)=>t,mo=(e,t,r)=>r,uA=$(ou,fo,mo,(e,t,r)=>e.filter(n=>n.orientation===t).filter(n=>n.mirror===r).sort(Iv)),dA=$(lu,fo,mo,(e,t,r)=>e.filter(n=>n.orientation===t).filter(n=>n.mirror===r).sort(Iv)),$v=(e,t)=>({width:e.width,height:t.height}),hA=(e,t)=>{var r=typeof t.width=="number"?t.width:Gs;return{width:r,height:e.height}},Lv=$(ze,Gt,$v),fA=(e,t,r)=>{switch(t){case"top":return e.top;case"bottom":return r-e.bottom;default:return 0}},mA=(e,t,r)=>{switch(t){case"left":return e.left;case"right":return r-e.right;default:return 0}},pA=$(dr,ze,uA,fo,mo,(e,t,r,n,i)=>{var a={},s;return r.forEach(o=>{var c=$v(t,o);s==null&&(s=fA(t,n,e));var d=n==="top"&&!i||n==="bottom"&&i;a[o.id]=s-Number(d)*c.height,s+=(d?-1:1)*c.height}),a}),gA=$(ur,ze,dA,fo,mo,(e,t,r,n,i)=>{var a={},s;return r.forEach(o=>{var c=hA(t,o);s==null&&(s=mA(t,n,e));var d=n==="left"&&!i||n==="right"&&i;a[o.id]=s-Number(d)*c.width,s+=(d?-1:1)*c.width}),a}),vA=(e,t)=>{var r=ze(e),n=Gt(e,t);if(n!=null){var i=pA(e,n.orientation,n.mirror),a=i[t];return a==null?{x:r.left,y:0}:{x:r.left,y:a}}},yA=(e,t)=>{var r=ze(e),n=fr(e,t);if(n!=null){var i=gA(e,n.orientation,n.mirror),a=i[t];return a==null?{x:0,y:r.top}:{x:a,y:r.top}}},Rv=$(ze,fr,(e,t)=>{var r=typeof t.width=="number"?t.width:Gs;return{width:r,height:e.height}}),If=(e,t,r)=>{switch(t){case"xAxis":return Lv(e,r).width;case"yAxis":return Rv(e,r).height;default:return}},Uv=(e,t,r,n)=>{if(r!=null){var{allowDuplicatedCategory:i,type:a,dataKey:s}=r,o=qt(e,n),c=t.map(d=>d.value);if(s&&o&&a==="category"&&i&&Sp(c))return c}},Zu=$([ge,ho,dt,Ke],Uv),Bv=(e,t,r,n)=>{if(!(r==null||r.dataKey==null)){var{type:i,scale:a}=r,s=qt(e,n);if(s&&(i==="number"||a!=="auto"))return t.map(o=>o.value)}},Xu=$([ge,ho,Xi,Ke],Bv),$f=$([ge,IO,ea,Er,Zu,Xu,ta,Yu,Ke],(e,t,r,n,i,a,s,o,c)=>{if(t==null)return null;var d=qt(e,c);return{angle:t.angle,interval:t.interval,minTickGap:t.minTickGap,orientation:t.orientation,tick:t.tick,tickCount:t.tickCount,tickFormatter:t.tickFormatter,ticks:t.ticks,type:t.type,unit:t.unit,axisType:c,categoricalDomain:a,duplicateDomain:i,isCategorical:d,niceTicks:o,range:s,realScaleType:r,scale:n}}),xA=(e,t,r,n,i,a,s,o,c)=>{if(!(t==null||n==null)){var d=qt(e,c),{type:u,ticks:h,tickCount:f}=t,m=r==="scaleBand"&&typeof n.bandwidth=="function"?n.bandwidth()/2:2,g=u==="category"&&n.bandwidth?n.bandwidth()/m:0;g=c==="angleAxis"&&a!=null&&a.length>=2?ct(a[0]-a[1])*2*g:g;var p=h||i;if(p){var v=p.map((x,j)=>{var b=s?s.indexOf(x):x;return{index:j,coordinate:n(b)+g,value:x,offset:g}});return v.filter(x=>!rt(x.coordinate))}return d&&o?o.map((x,j)=>({coordinate:n(x)+g,value:x,index:j,offset:g})):n.ticks?n.ticks(f).map(x=>({coordinate:n(x)+g,value:x,offset:g})):n.domain().map((x,j)=>({coordinate:n(x)+g,value:s?s[x]:x,index:j,offset:g}))}},Fv=$([ge,Xi,ea,Er,Yu,ta,Zu,Xu,Ke],xA),bA=(e,t,r,n,i,a,s)=>{if(!(t==null||r==null||n==null||n[0]===n[1])){var o=qt(e,s),{tickCount:c}=t,d=0;return d=s==="angleAxis"&&n?.length>=2?ct(n[0]-n[1])*2*d:d,o&&a?a.map((u,h)=>({coordinate:r(u)+d,value:u,index:h,offset:d})):r.ticks?r.ticks(c).map(u=>({coordinate:r(u)+d,value:u,offset:d})):r.domain().map((u,h)=>({coordinate:r(u)+d,value:i?i[u]:u,index:h,offset:d}))}},Ht=$([ge,Xi,Er,ta,Zu,Xu,Ke],bA),Et=$(dt,Er,(e,t)=>{if(!(e==null||t==null))return rs(rs({},e),{},{scale:t})}),wA=$([dt,ea,Vu,Dv],Gu);$((e,t,r)=>Ku(e,r),wA,(e,t)=>{if(!(e==null||t==null))return rs(rs({},e),{},{scale:t})});var jA=$([ge,ou,lu],(e,t,r)=>{switch(e){case"horizontal":return t.some(n=>n.reversed)?"right-to-left":"left-to-right";case"vertical":return r.some(n=>n.reversed)?"bottom-to-top":"top-to-bottom";case"centric":case"radial":return"left-to-right";default:return}}),zv=e=>e.options.defaultTooltipEventType,Wv=e=>e.options.validateTooltipEventTypes;function Kv(e,t,r){if(e==null)return t;var n=e?"axis":"item";return r==null?t:r.includes(n)?n:t}function Ju(e,t){var r=zv(e),n=Wv(e);return Kv(t,r,n)}function SA(e){return ee(t=>Ju(t,e))}var Hv=(e,t)=>{var r,n=Number(t);if(!(rt(n)||t==null))return n>=0?e==null||(r=e[n])===null||r===void 0?void 0:r.value:void 0},PA=e=>e.tooltip.settings,Pr={active:!1,index:null,dataKey:void 0,coordinate:void 0},_A={itemInteraction:{click:Pr,hover:Pr},axisInteraction:{click:Pr,hover:Pr},keyboardInteraction:Pr,syncInteraction:{active:!1,index:null,dataKey:void 0,label:void 0,coordinate:void 0},tooltipItemPayloads:[],settings:{shared:void 0,trigger:"hover",axisId:0,active:!1,defaultIndex:void 0}},qv=Mt({name:"tooltip",initialState:_A,reducers:{addTooltipEntrySettings(e,t){e.tooltipItemPayloads.push(t.payload)},removeTooltipEntrySettings(e,t){var r=rr(e).tooltipItemPayloads.indexOf(t.payload);r>-1&&e.tooltipItemPayloads.splice(r,1)},setTooltipSettingsState(e,t){e.settings=t.payload},setActiveMouseOverItemIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.itemInteraction.hover.active=!0,e.itemInteraction.hover.index=t.payload.activeIndex,e.itemInteraction.hover.dataKey=t.payload.activeDataKey,e.itemInteraction.hover.coordinate=t.payload.activeCoordinate},mouseLeaveChart(e){e.itemInteraction.hover.active=!1,e.axisInteraction.hover.active=!1},mouseLeaveItem(e){e.itemInteraction.hover.active=!1},setActiveClickItemIndex(e,t){e.syncInteraction.active=!1,e.itemInteraction.click.active=!0,e.keyboardInteraction.active=!1,e.itemInteraction.click.index=t.payload.activeIndex,e.itemInteraction.click.dataKey=t.payload.activeDataKey,e.itemInteraction.click.coordinate=t.payload.activeCoordinate},setMouseOverAxisIndex(e,t){e.syncInteraction.active=!1,e.axisInteraction.hover.active=!0,e.keyboardInteraction.active=!1,e.axisInteraction.hover.index=t.payload.activeIndex,e.axisInteraction.hover.dataKey=t.payload.activeDataKey,e.axisInteraction.hover.coordinate=t.payload.activeCoordinate},setMouseClickAxisIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.axisInteraction.click.active=!0,e.axisInteraction.click.index=t.payload.activeIndex,e.axisInteraction.click.dataKey=t.payload.activeDataKey,e.axisInteraction.click.coordinate=t.payload.activeCoordinate},setSyncInteraction(e,t){e.syncInteraction=t.payload},setKeyboardInteraction(e,t){e.keyboardInteraction.active=t.payload.active,e.keyboardInteraction.index=t.payload.activeIndex,e.keyboardInteraction.coordinate=t.payload.activeCoordinate,e.keyboardInteraction.dataKey=t.payload.activeDataKey}}}),{addTooltipEntrySettings:NA,removeTooltipEntrySettings:kA,setTooltipSettingsState:OA,setActiveMouseOverItemIndex:Vv,mouseLeaveItem:AA,mouseLeaveChart:Gv,setActiveClickItemIndex:EA,setMouseOverAxisIndex:Yv,setMouseClickAxisIndex:CA,setSyncInteraction:rc,setKeyboardInteraction:nc}=qv.actions,MA=qv.reducer;function Lf(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function ba(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Lf(Object(r),!0).forEach(function(n){TA(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Lf(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function TA(e,t,r){return(t=DA(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function DA(e){var t=IA(e,"string");return typeof t=="symbol"?t:t+""}function IA(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function $A(e,t,r){return t==="axis"?r==="click"?e.axisInteraction.click:e.axisInteraction.hover:r==="click"?e.itemInteraction.click:e.itemInteraction.hover}function LA(e){return e.index!=null}var Zv=(e,t,r,n)=>{if(t==null)return Pr;var i=$A(e,t,r);if(i==null)return Pr;if(i.active)return i;if(e.keyboardInteraction.active)return e.keyboardInteraction;if(e.syncInteraction.active&&e.syncInteraction.index!=null)return e.syncInteraction;var a=e.settings.active===!0;if(LA(i)){if(a)return ba(ba({},i),{},{active:!0})}else if(n!=null)return{active:!0,coordinate:void 0,dataKey:void 0,index:n};return ba(ba({},Pr),{},{coordinate:i.coordinate})},Qu=(e,t)=>{var r=e?.index;if(r==null)return null;var n=Number(r);if(!Ye(n))return r;var i=0,a=1/0;return t.length>0&&(a=t.length-1),String(Math.max(i,Math.min(n,a)))},Xv=(e,t,r,n,i,a,s,o)=>{if(!(a==null||o==null)){var c=s[0],d=c==null?void 0:o(c.positions,a);if(d!=null)return d;var u=i?.[Number(a)];if(u)switch(r){case"horizontal":return{x:u.coordinate,y:(n.top+t)/2};default:return{x:(n.left+e)/2,y:u.coordinate}}}},Jv=(e,t,r,n)=>{if(t==="axis")return e.tooltipItemPayloads;if(e.tooltipItemPayloads.length===0)return[];var i;return r==="hover"?i=e.itemInteraction.hover.dataKey:i=e.itemInteraction.click.dataKey,i==null&&n!=null?[e.tooltipItemPayloads[0]]:e.tooltipItemPayloads.filter(a=>{var s;return((s=a.settings)===null||s===void 0?void 0:s.dataKey)===i})},ra=e=>e.options.tooltipPayloadSearcher,ni=e=>e.tooltip;function Rf(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Uf(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Rf(Object(r),!0).forEach(function(n){RA(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Rf(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function RA(e,t,r){return(t=UA(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function UA(e){var t=BA(e,"string");return typeof t=="symbol"?t:t+""}function BA(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function FA(e,t,r){return Array.isArray(e)&&e&&t+r!==0?e.slice(t,r+1):e}function zA(e,t){return e??t}var Qv=(e,t,r,n,i,a,s)=>{if(!(t==null||a==null)){var{chartData:o,computedData:c,dataStartIndex:d,dataEndIndex:u}=r,h=[];return e.reduce((f,m)=>{var g,{dataDefinedOnItem:p,settings:v}=m,x=zA(p,o),j=FA(x,d,u),b=(g=v?.dataKey)!==null&&g!==void 0?g:n?.dataKey,S=v?.nameKey,_;if(n!=null&&n.dataKey&&Array.isArray(j)&&!Array.isArray(j[0])&&s==="axis"?_=Pp(j,n.dataKey,i):_=a(j,t,c,S),Array.isArray(_))_.forEach(P=>{var E=Uf(Uf({},v),{},{name:P.name,unit:P.unit,color:void 0,fill:void 0});f.push(kh({tooltipEntrySettings:E,dataKey:P.dataKey,payload:P.payload,value:Fe(P.payload,P.dataKey),name:P.name}))});else{var N;f.push(kh({tooltipEntrySettings:v,dataKey:b,payload:_,value:Fe(_,b),name:(N=Fe(_,S))!==null&&N!==void 0?N:v?.name}))}return f},h)}},He=e=>{var t=ge(e);return t==="horizontal"?"xAxis":t==="vertical"?"yAxis":t==="centric"?"angleAxis":"radiusAxis"},ii=e=>e.tooltip.settings.axisId,Xe=e=>{var t=He(e),r=ii(e);return Xi(e,t,r)},ed=$([Xe,ge,dv,Ru,He],Ev),WA=$([e=>e.graphicalItems.cartesianItems,e=>e.graphicalItems.polarItems],(e,t)=>[...e,...t]),KA=$([He,ii],hv),po=$([WA,Xe,KA],fv),HA=$([po],pv),yn=$([HA,gn],gv),td=$([yn,Xe,po],vv),qA=$([Xe],Hu),VA=$([yn,po,so],xv),GA=$([VA,gn,He],bv),YA=$([po],mv),ZA=$([yn,Xe,YA,He],wv),XA=$([jv,He,ii],ri),JA=$([XA,He],_v),QA=$([Sv,He,ii],ri),eE=$([QA,He],Nv),tE=$([Pv,He,ii],ri),rE=$([tE,He],kv),nE=$([JA,rE,eE],qu),iE=$([Xe,qA,GA,ZA,nE],Ov),ey=$([Xe,ge,yn,td,so,He,iE],Av),aE=$([ey,Xe,ed],Cv),sE=$([Xe,ey,aE,He],Mv),ty=e=>{var t=He(e),r=ii(e),n=!1;return ta(e,t,r,n)},ry=$([Xe,ty],oo),ny=$([Xe,ed,sE,ry],Gu),oE=$([ge,td,Xe,He],Uv),lE=$([ge,td,Xe,He],Bv),cE=(e,t,r,n,i,a,s,o)=>{if(t){var{type:c}=t,d=qt(e,o);if(n){var u=r==="scaleBand"&&n.bandwidth?n.bandwidth()/2:2,h=c==="category"&&n.bandwidth?n.bandwidth()/u:0;return h=o==="angleAxis"&&i!=null&&i?.length>=2?ct(i[0]-i[1])*2*h:h,d&&s?s.map((f,m)=>({coordinate:n(f)+h,value:f,index:m,offset:h})):n.domain().map((f,m)=>({coordinate:n(f)+h,value:a?a[f]:f,index:m,offset:h}))}}},mr=$([ge,Xe,ed,ny,ty,oE,lE,He],cE),rd=$([zv,Wv,PA],(e,t,r)=>Kv(r.shared,e,t)),iy=e=>e.tooltip.settings.trigger,nd=e=>e.tooltip.settings.defaultIndex,go=$([ni,rd,iy,nd],Zv),dn=$([go,yn],Qu),ay=$([mr,dn],Hv),sy=$([go],e=>{if(e)return e.dataKey}),oy=$([ni,rd,iy,nd],Jv),uE=$([ur,dr,ge,ze,mr,nd,oy,ra],Xv),dE=$([go,uE],(e,t)=>e!=null&&e.coordinate?e.coordinate:t),hE=$([go],e=>e.active),fE=$([oy,dn,gn,Xe,ay,ra,rd],Qv),mE=$([fE],e=>{if(e!=null){var t=e.map(r=>r.payload).filter(r=>r!=null);return Array.from(new Set(t))}});function Bf(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Ff(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Bf(Object(r),!0).forEach(function(n){pE(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Bf(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function pE(e,t,r){return(t=gE(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function gE(e){var t=vE(e,"string");return typeof t=="symbol"?t:t+""}function vE(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var yE=()=>ee(Xe),xE=()=>{var e=yE(),t=ee(mr),r=ee(ny);return cn(Ff(Ff({},e),{},{scale:r}),t)},ly=()=>ee(Ru),id=(e,t)=>t,cy=(e,t,r)=>r,ad=(e,t,r,n)=>n,bE=$(mr,e=>Fs(e,t=>t.coordinate)),sd=$([ni,id,cy,ad],Zv),uy=$([sd,yn],Qu),wE=(e,t,r)=>{if(t!=null){var n=ni(e);return t==="axis"?r==="hover"?n.axisInteraction.hover.dataKey:n.axisInteraction.click.dataKey:r==="hover"?n.itemInteraction.hover.dataKey:n.itemInteraction.click.dataKey}},dy=$([ni,id,cy,ad],Jv),ns=$([ur,dr,ge,ze,mr,ad,dy,ra],Xv),jE=$([sd,ns],(e,t)=>{var r;return(r=e.coordinate)!==null&&r!==void 0?r:t}),hy=$(mr,uy,Hv),SE=$([dy,uy,gn,Xe,hy,ra,id],Qv),PE=$([sd],e=>({isActive:e.active,activeIndex:e.index})),_E=(e,t,r,n,i,a,s,o)=>{if(!(!e||!t||!n||!i||!a)){var c=GS(e.chartX,e.chartY,t,r,o);if(c){var d=ZS(c,t),u=$S(d,s,a,n,i),h=YS(t,a,u,c);return{activeIndex:String(u),activeCoordinate:h}}}};function ic(){return ic=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ic.apply(null,arguments)}function zf(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function wa(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?zf(Object(r),!0).forEach(function(n){NE(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):zf(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function NE(e,t,r){return(t=kE(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function kE(e){var t=OE(e,"string");return typeof t=="symbol"?t:t+""}function OE(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function AE(e){var{coordinate:t,payload:r,index:n,offset:i,tooltipAxisBandSize:a,layout:s,cursor:o,tooltipEventType:c,chartName:d}=e,u=t,h=r,f=n;if(!o||!u||d!=="ScatterChart"&&c!=="axis")return null;var m,g;if(d==="ScatterChart")m=u,g=XP;else if(d==="BarChart")m=JP(s,u,i,a),g=r0;else if(s==="radial"){var{cx:p,cy:v,radius:x,startAngle:j,endAngle:b}=n0(u);m={cx:p,cy:v,startAngle:j,endAngle:b,innerRadius:x,outerRadius:x},g=a0}else m={points:T_(s,u,i)},g=wi;var S=typeof o=="object"&&"className"in o?o.className:void 0,_=wa(wa(wa(wa({stroke:"#ccc",pointerEvents:"none"},i),m),ue(o,!1)),{},{payload:h,payloadIndex:f,className:me("recharts-tooltip-cursor",S)});return y.isValidElement(o)?y.cloneElement(o,_):y.createElement(g,_)}function EE(e){var t=xE(),r=qg(),n=qi(),i=ly();return y.createElement(AE,ic({},e,{coordinate:e.coordinate,index:e.index,payload:e.payload,offset:r,layout:n,tooltipAxisBandSize:t,chartName:i}))}var fy=y.createContext(null),CE=()=>y.useContext(fy),my={exports:{}};(function(e){var t=Object.prototype.hasOwnProperty,r="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(r=!1));function i(c,d,u){this.fn=c,this.context=d,this.once=u||!1}function a(c,d,u,h,f){if(typeof u!="function")throw new TypeError("The listener must be a function");var m=new i(u,h||c,f),g=r?r+d:d;return c._events[g]?c._events[g].fn?c._events[g]=[c._events[g],m]:c._events[g].push(m):(c._events[g]=m,c._eventsCount++),c}function s(c,d){--c._eventsCount===0?c._events=new n:delete c._events[d]}function o(){this._events=new n,this._eventsCount=0}o.prototype.eventNames=function(){var d=[],u,h;if(this._eventsCount===0)return d;for(h in u=this._events)t.call(u,h)&&d.push(r?h.slice(1):h);return Object.getOwnPropertySymbols?d.concat(Object.getOwnPropertySymbols(u)):d},o.prototype.listeners=function(d){var u=r?r+d:d,h=this._events[u];if(!h)return[];if(h.fn)return[h.fn];for(var f=0,m=h.length,g=new Array(m);f<m;f++)g[f]=h[f].fn;return g},o.prototype.listenerCount=function(d){var u=r?r+d:d,h=this._events[u];return h?h.fn?1:h.length:0},o.prototype.emit=function(d,u,h,f,m,g){var p=r?r+d:d;if(!this._events[p])return!1;var v=this._events[p],x=arguments.length,j,b;if(v.fn){switch(v.once&&this.removeListener(d,v.fn,void 0,!0),x){case 1:return v.fn.call(v.context),!0;case 2:return v.fn.call(v.context,u),!0;case 3:return v.fn.call(v.context,u,h),!0;case 4:return v.fn.call(v.context,u,h,f),!0;case 5:return v.fn.call(v.context,u,h,f,m),!0;case 6:return v.fn.call(v.context,u,h,f,m,g),!0}for(b=1,j=new Array(x-1);b<x;b++)j[b-1]=arguments[b];v.fn.apply(v.context,j)}else{var S=v.length,_;for(b=0;b<S;b++)switch(v[b].once&&this.removeListener(d,v[b].fn,void 0,!0),x){case 1:v[b].fn.call(v[b].context);break;case 2:v[b].fn.call(v[b].context,u);break;case 3:v[b].fn.call(v[b].context,u,h);break;case 4:v[b].fn.call(v[b].context,u,h,f);break;default:if(!j)for(_=1,j=new Array(x-1);_<x;_++)j[_-1]=arguments[_];v[b].fn.apply(v[b].context,j)}}return!0},o.prototype.on=function(d,u,h){return a(this,d,u,h,!1)},o.prototype.once=function(d,u,h){return a(this,d,u,h,!0)},o.prototype.removeListener=function(d,u,h,f){var m=r?r+d:d;if(!this._events[m])return this;if(!u)return s(this,m),this;var g=this._events[m];if(g.fn)g.fn===u&&(!f||g.once)&&(!h||g.context===h)&&s(this,m);else{for(var p=0,v=[],x=g.length;p<x;p++)(g[p].fn!==u||f&&!g[p].once||h&&g[p].context!==h)&&v.push(g[p]);v.length?this._events[m]=v.length===1?v[0]:v:s(this,m)}return this},o.prototype.removeAllListeners=function(d){var u;return d?(u=r?r+d:d,this._events[u]&&s(this,u)):(this._events=new n,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=r,o.EventEmitter=o,e.exports=o})(my);var ME=my.exports;const TE=cr(ME);var Ri=new TE,ac="recharts.syncEvent.tooltip",Wf="recharts.syncEvent.brush";function vo(e,t){if(t){var r=Number.parseInt(t,10);if(!rt(r))return e?.[r]}}var DE={chartName:"",tooltipPayloadSearcher:void 0,eventEmitter:void 0,defaultTooltipEventType:"axis"},py=Mt({name:"options",initialState:DE,reducers:{createEventEmitter:e=>{e.eventEmitter==null&&(e.eventEmitter=Symbol("rechartsEventEmitter"))}}}),IE=py.reducer,{createEventEmitter:$E}=py.actions;function LE(e){return e.tooltip.syncInteraction}var RE={chartData:void 0,computedData:void 0,dataStartIndex:0,dataEndIndex:0},gy=Mt({name:"chartData",initialState:RE,reducers:{setChartData(e,t){if(e.chartData=t.payload,t.payload==null){e.dataStartIndex=0,e.dataEndIndex=0;return}t.payload.length>0&&e.dataEndIndex!==t.payload.length-1&&(e.dataEndIndex=t.payload.length-1)},setComputedData(e,t){e.computedData=t.payload},setDataStartEndIndexes(e,t){var{startIndex:r,endIndex:n}=t.payload;r!=null&&(e.dataStartIndex=r),n!=null&&(e.dataEndIndex=n)}}}),{setChartData:Kf,setDataStartEndIndexes:UE,setComputedData:$3}=gy.actions,BE=gy.reducer,vy=()=>{};function FE(){var e=ee(Uu),t=ee(Bu),r=Ae(),n=ee(sv),i=ee(mr),a=qi(),s=Xs(),o=ee(c=>c.rootProps.className);y.useEffect(()=>{if(e==null)return vy;var c=(d,u,h)=>{if(t!==h&&e===d){if(n==="index"){r(u);return}if(i!=null){var f;if(typeof n=="function"){var m={activeTooltipIndex:u.payload.index==null?void 0:Number(u.payload.index),isTooltipActive:u.payload.active,activeIndex:u.payload.index==null?void 0:Number(u.payload.index),activeLabel:u.payload.label,activeDataKey:u.payload.dataKey,activeCoordinate:u.payload.coordinate},g=n(i,m);f=i[g]}else n==="value"&&(f=i.find(N=>String(N.value)===u.payload.label));var{coordinate:p}=u.payload;if(f==null||u.payload.active===!1||p==null||s==null){r(rc({active:!1,coordinate:void 0,dataKey:void 0,index:null,label:void 0}));return}var{x:v,y:x}=p,j=Math.min(v,s.x+s.width),b=Math.min(x,s.y+s.height),S={x:a==="horizontal"?f.coordinate:j,y:a==="horizontal"?b:f.coordinate},_=rc({active:u.payload.active,coordinate:S,dataKey:u.payload.dataKey,index:String(f.index),label:u.payload.label});r(_)}}};return Ri.on(ac,c),()=>{Ri.off(ac,c)}},[o,r,t,e,n,i,a,s])}function zE(){var e=ee(Uu),t=ee(Bu),r=Ae();y.useEffect(()=>{if(e==null)return vy;var n=(i,a,s)=>{t!==s&&e===i&&r(UE(a))};return Ri.on(Wf,n),()=>{Ri.off(Wf,n)}},[r,t,e])}function WE(){var e=Ae();y.useEffect(()=>{e($E())},[e]),FE(),zE()}function KE(e,t,r,n,i,a){var s=ee(f=>wE(f,e,t)),o=ee(Bu),c=ee(Uu),d=ee(sv),u=ee(LE),h=u?.active;y.useEffect(()=>{if(!h&&c!=null&&o!=null){var f=rc({active:a,coordinate:r,dataKey:s,index:i,label:typeof n=="number"?String(n):n});Ri.emit(ac,c,f,o)}},[h,r,s,i,n,o,c,d,a])}function Hf(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function qf(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Hf(Object(r),!0).forEach(function(n){HE(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Hf(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function HE(e,t,r){return(t=qE(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function qE(e){var t=VE(e,"string");return typeof t=="symbol"?t:t+""}function VE(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function GE(e){return e.dataKey}function YE(e,t){return y.isValidElement(e)?y.cloneElement(e,t):typeof e=="function"?y.createElement(e,t):y.createElement(AP,t)}var Vf=[],ZE={allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",axisId:0,contentStyle:{},cursor:!0,filterNull:!0,isAnimationActive:!fn.isSsr,itemSorter:"name",itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,wrapperStyle:{}};function ji(e){var t=Vt(e,ZE),{active:r,allowEscapeViewBox:n,animationDuration:i,animationEasing:a,content:s,filterNull:o,isAnimationActive:c,offset:d,payloadUniqBy:u,position:h,reverseDirection:f,useTranslate3d:m,wrapperStyle:g,cursor:p,shared:v,trigger:x,defaultIndex:j,portal:b,axisId:S}=t,_=Ae(),N=typeof j=="number"?String(j):j;y.useEffect(()=>{_(OA({shared:v,trigger:x,axisId:S,active:r,defaultIndex:N}))},[_,v,x,S,r,N]);var P=Xs(),E=Gg(),w=SA(v),{activeIndex:A,isActive:O}=ee(ie=>PE(ie,w,x,N)),D=ee(ie=>SE(ie,w,x,N)),R=ee(ie=>hy(ie,w,x,N)),C=ee(ie=>jE(ie,w,x,N)),k=D,I=CE(),L=r??O,[K,F]=vg([k,L]),G=w==="axis"?R:void 0;KE(w,x,C,G,A,L);var X=b??I;if(X==null)return null;var z=k??Vf;L||(z=Vf),o&&z.length&&(z=ag(k.filter(ie=>ie.value!=null&&(ie.hide!==!0||t.includeHidden)),u,GE));var J=z.length>0,re=y.createElement($P,{allowEscapeViewBox:n,animationDuration:i,animationEasing:a,isAnimationActive:c,active:L,coordinate:C,hasPayload:J,offset:d,position:h,reverseDirection:f,useTranslate3d:m,viewBox:P,wrapperStyle:g,lastBoundingBox:K,innerRef:F,hasPortalFromProps:!!b},YE(s,qf(qf({},t),{},{payload:z,label:G,active:L,coordinate:C,accessibilityLayer:E})));return y.createElement(y.Fragment,null,wc.createPortal(re,X),L&&y.createElement(EE,{cursor:p,tooltipEventType:w,coordinate:C,payload:k,index:A}))}var yy={},xy={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n=0,i={}){typeof i!="object"&&(i={});let a=null,s=null,o=null,c=0,d=null,u;const{leading:h=!1,trailing:f=!0,maxWait:m}=i,g="maxWait"in i,p=g?Math.max(Number(m)||0,n):0,v=P=>(a!==null&&(u=r.apply(s,a)),a=s=null,c=P,u),x=P=>(c=P,d=setTimeout(_,n),h&&a!==null?v(P):u),j=P=>(d=null,f&&a!==null?v(P):u),b=P=>{if(o===null)return!0;const E=P-o,w=E>=n||E<0,A=g&&P-c>=p;return w||A},S=P=>{const E=o===null?0:P-o,w=n-E,A=p-(P-c);return g?Math.min(w,A):w},_=()=>{const P=Date.now();if(b(P))return j(P);d=setTimeout(_,S(P))},N=function(...P){const E=Date.now(),w=b(E);if(a=P,s=this,o=E,w){if(d===null)return x(E);if(g)return clearTimeout(d),d=setTimeout(_,n),v(E)}return d===null&&(d=setTimeout(_,n)),u};return N.cancel=()=>{d!==null&&clearTimeout(d),c=0,o=a=s=d=null},N.flush=()=>d===null?u:j(Date.now()),N}e.debounce=t})(xy);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=xy;function r(n,i=0,a={}){const{leading:s=!0,trailing:o=!0}=a;return t.debounce(n,i,{leading:s,maxWait:i,trailing:o})}e.throttle=r})(yy);var XE=yy.throttle;const JE=cr(XE);var Si=function(t,r){for(var n=arguments.length,i=new Array(n>2?n-2:0),a=2;a<n;a++)i[a-2]=arguments[a]};function Gf(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function nl(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Gf(Object(r),!0).forEach(function(n){QE(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Gf(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function QE(e,t,r){return(t=eC(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function eC(e){var t=tC(e,"string");return typeof t=="symbol"?t:t+""}function tC(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Pi=y.forwardRef((e,t)=>{var{aspect:r,initialDimension:n={width:-1,height:-1},width:i="100%",height:a="100%",minWidth:s=0,minHeight:o,maxHeight:c,children:d,debounce:u=0,id:h,className:f,onResize:m,style:g={}}=e,p=y.useRef(null),v=y.useRef();v.current=m,y.useImperativeHandle(t,()=>p.current);var[x,j]=y.useState({containerWidth:n.width,containerHeight:n.height}),b=y.useCallback((_,N)=>{j(P=>{var E=Math.round(_),w=Math.round(N);return P.containerWidth===E&&P.containerHeight===w?P:{containerWidth:E,containerHeight:w}})},[]);y.useEffect(()=>{var _=w=>{var A,{width:O,height:D}=w[0].contentRect;b(O,D),(A=v.current)===null||A===void 0||A.call(v,O,D)};u>0&&(_=JE(_,u,{trailing:!0,leading:!1}));var N=new ResizeObserver(_),{width:P,height:E}=p.current.getBoundingClientRect();return b(P,E),N.observe(p.current),()=>{N.disconnect()}},[b,u]);var S=y.useMemo(()=>{var{containerWidth:_,containerHeight:N}=x;if(_<0||N<0)return null;Si(Hr(i)||Hr(a),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,i,a),Si(!r||r>0,"The aspect(%s) must be greater than zero.",r);var P=Hr(i)?_:i,E=Hr(a)?N:a;return r&&r>0&&(P?E=P/r:E&&(P=E*r),c&&E>c&&(E=c)),Si(P>0||E>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,P,E,i,a,s,o,r),y.Children.map(d,w=>y.cloneElement(w,{width:P,height:E,style:nl({width:P,height:E},w.props.style)}))},[r,d,a,c,o,s,x,i]);return y.createElement("div",{id:h?"".concat(h):void 0,className:me("recharts-responsive-container",f),style:nl(nl({},g),{},{width:i,height:a,minWidth:s,minHeight:o,maxHeight:c}),ref:p},y.createElement("div",{style:{width:0,height:0,overflow:"visible"}},S))}),by=e=>null;by.displayName="Cell";function Yf(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function sc(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Yf(Object(r),!0).forEach(function(n){rC(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Yf(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function rC(e,t,r){return(t=nC(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function nC(e){var t=iC(e,"string");return typeof t=="symbol"?t:t+""}function iC(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var kn={widthCache:{},cacheCount:0},aC=2e3,sC={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},Zf="recharts_measurement_span";function oC(e){var t=sc({},e);return Object.keys(t).forEach(r=>{t[r]||delete t[r]}),t}var _i=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t==null||fn.isSsr)return{width:0,height:0};var n=oC(r),i=JSON.stringify({text:t,copyStyle:n});if(kn.widthCache[i])return kn.widthCache[i];try{var a=document.getElementById(Zf);a||(a=document.createElement("span"),a.setAttribute("id",Zf),a.setAttribute("aria-hidden","true"),document.body.appendChild(a));var s=sc(sc({},sC),n);Object.assign(a.style,s),a.textContent="".concat(t);var o=a.getBoundingClientRect(),c={width:o.width,height:o.height};return kn.widthCache[i]=c,++kn.cacheCount>aC&&(kn.cacheCount=0,kn.widthCache={}),c}catch{return{width:0,height:0}}},Xf=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,Jf=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,lC=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,cC=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,wy={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},uC=Object.keys(wy),Cn="NaN";function dC(e,t){return e*wy[t]}class st{static parse(t){var r,[,n,i]=(r=cC.exec(t))!==null&&r!==void 0?r:[];return new st(parseFloat(n),i??"")}constructor(t,r){this.num=t,this.unit=r,this.num=t,this.unit=r,rt(t)&&(this.unit=""),r!==""&&!lC.test(r)&&(this.num=NaN,this.unit=""),uC.includes(r)&&(this.num=dC(t,r),this.unit="px")}add(t){return this.unit!==t.unit?new st(NaN,""):new st(this.num+t.num,this.unit)}subtract(t){return this.unit!==t.unit?new st(NaN,""):new st(this.num-t.num,this.unit)}multiply(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new st(NaN,""):new st(this.num*t.num,this.unit||t.unit)}divide(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new st(NaN,""):new st(this.num/t.num,this.unit||t.unit)}toString(){return"".concat(this.num).concat(this.unit)}isNaN(){return rt(this.num)}}function jy(e){if(e.includes(Cn))return Cn;for(var t=e;t.includes("*")||t.includes("/");){var r,[,n,i,a]=(r=Xf.exec(t))!==null&&r!==void 0?r:[],s=st.parse(n??""),o=st.parse(a??""),c=i==="*"?s.multiply(o):s.divide(o);if(c.isNaN())return Cn;t=t.replace(Xf,c.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var d,[,u,h,f]=(d=Jf.exec(t))!==null&&d!==void 0?d:[],m=st.parse(u??""),g=st.parse(f??""),p=h==="+"?m.add(g):m.subtract(g);if(p.isNaN())return Cn;t=t.replace(Jf,p.toString())}return t}var Qf=/\(([^()]*)\)/;function hC(e){for(var t=e,r;(r=Qf.exec(t))!=null;){var[,n]=r;t=t.replace(Qf,jy(n))}return t}function fC(e){var t=e.replace(/\s+/g,"");return t=hC(t),t=jy(t),t}function mC(e){try{return fC(e)}catch{return Cn}}function il(e){var t=mC(e.slice(5,-1));return t===Cn?"":t}var pC=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],gC=["dx","dy","angle","className","breakAll"];function oc(){return oc=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},oc.apply(null,arguments)}function em(e,t){if(e==null)return{};var r,n,i=vC(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function vC(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var Sy=/[ \f\n\r\t\v\u2028\u2029]+/,Py=e=>{var{children:t,breakAll:r,style:n}=e;try{var i=[];we(t)||(r?i=t.toString().split(""):i=t.toString().split(Sy));var a=i.map(o=>({word:o,width:_i(o,n).width})),s=r?0:_i(" ",n).width;return{wordsWithComputedWidth:a,spaceWidth:s}}catch{return null}},yC=(e,t,r,n,i)=>{var{maxLines:a,children:s,style:o,breakAll:c}=e,d=Y(a),u=s,h=function(){var O=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return O.reduce((D,R)=>{var{word:C,width:k}=R,I=D[D.length-1];if(I&&(n==null||i||I.width+k+r<Number(n)))I.words.push(C),I.width+=k+r;else{var L={words:[C],width:k};D.push(L)}return D},[])},f=h(t),m=A=>A.reduce((O,D)=>O.width>D.width?O:D);if(!d||i)return f;var g=f.length>a||m(f).width>Number(n);if(!g)return f;for(var p="…",v=A=>{var O=u.slice(0,A),D=Py({breakAll:c,style:o,children:O+p}).wordsWithComputedWidth,R=h(D),C=R.length>a||m(R).width>Number(n);return[C,R]},x=0,j=u.length-1,b=0,S;x<=j&&b<=u.length-1;){var _=Math.floor((x+j)/2),N=_-1,[P,E]=v(N),[w]=v(_);if(!P&&!w&&(x=_+1),P&&w&&(j=_-1),!P&&w){S=E;break}b++}return S||f},tm=e=>{var t=we(e)?[]:e.toString().split(Sy);return[{words:t}]},xC=e=>{var{width:t,scaleToFit:r,children:n,style:i,breakAll:a,maxLines:s}=e;if((t||r)&&!fn.isSsr){var o,c,d=Py({breakAll:a,children:n,style:i});if(d){var{wordsWithComputedWidth:u,spaceWidth:h}=d;o=u,c=h}else return tm(n);return yC({breakAll:a,children:n,maxLines:s,style:i},o,c,t,r)}return tm(n)},rm="#808080",od=y.forwardRef((e,t)=>{var{x:r=0,y:n=0,lineHeight:i="1em",capHeight:a="0.71em",scaleToFit:s=!1,textAnchor:o="start",verticalAnchor:c="end",fill:d=rm}=e,u=em(e,pC),h=y.useMemo(()=>xC({breakAll:u.breakAll,children:u.children,maxLines:u.maxLines,scaleToFit:s,style:u.style,width:u.width}),[u.breakAll,u.children,u.maxLines,s,u.style,u.width]),{dx:f,dy:m,angle:g,className:p,breakAll:v}=u,x=em(u,gC);if(!kt(r)||!kt(n))return null;var j=r+(Y(f)?f:0),b=n+(Y(m)?m:0),S;switch(c){case"start":S=il("calc(".concat(a,")"));break;case"middle":S=il("calc(".concat((h.length-1)/2," * -").concat(i," + (").concat(a," / 2))"));break;default:S=il("calc(".concat(h.length-1," * -").concat(i,")"));break}var _=[];if(s){var N=h[0].width,{width:P}=u;_.push("scale(".concat(Y(P)?P/N:1,")"))}return g&&_.push("rotate(".concat(g,", ").concat(j,", ").concat(b,")")),_.length&&(x.transform=_.join(" ")),y.createElement("text",oc({},ue(x,!0),{ref:t,x:j,y:b,className:me("recharts-text",p),textAnchor:o,fill:d.includes("url")?rm:d}),h.map((E,w)=>{var A=E.words.join(v?"":" ");return y.createElement("tspan",{x:j,dy:w===0?S:i,key:"".concat(A,"-").concat(w)},A)}))});od.displayName="Text";var bC=["offset"],wC=["labelRef"];function nm(e,t){if(e==null)return{};var r,n,i=jC(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function jC(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function im(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Ee(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?im(Object(r),!0).forEach(function(n){SC(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):im(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function SC(e,t,r){return(t=PC(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function PC(e){var t=_C(e,"string");return typeof t=="symbol"?t:t+""}function _C(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Qt(){return Qt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Qt.apply(null,arguments)}var NC=e=>{var{value:t,formatter:r}=e,n=we(e.children)?t:e.children;return typeof r=="function"?r(n):n},ld=e=>e!=null&&typeof e=="function",kC=(e,t)=>{var r=ct(t-e),n=Math.min(Math.abs(t-e),360);return r*n},OC=(e,t,r)=>{var{position:n,viewBox:i,offset:a,className:s}=e,{cx:o,cy:c,innerRadius:d,outerRadius:u,startAngle:h,endAngle:f,clockWise:m}=i,g=(d+u)/2,p=kC(h,f),v=p>=0?1:-1,x,j;n==="insideStart"?(x=h+v*a,j=m):n==="insideEnd"?(x=f-v*a,j=!m):n==="end"&&(x=f+v*a,j=m),j=p<=0?j:!j;var b=Ge(o,c,g,x),S=Ge(o,c,g,x+(j?1:-1)*359),_="M".concat(b.x,",").concat(b.y,`
    A`).concat(g,",").concat(g,",0,1,").concat(j?0:1,`,
    `).concat(S.x,",").concat(S.y),N=we(e.id)?sn("recharts-radial-line-"):e.id;return y.createElement("text",Qt({},r,{dominantBaseline:"central",className:me("recharts-radial-bar-label",s)}),y.createElement("defs",null,y.createElement("path",{id:N,d:_})),y.createElement("textPath",{xlinkHref:"#".concat(N)},t))},AC=e=>{var{viewBox:t,offset:r,position:n}=e,{cx:i,cy:a,innerRadius:s,outerRadius:o,startAngle:c,endAngle:d}=t,u=(c+d)/2;if(n==="outside"){var{x:h,y:f}=Ge(i,a,o+r,u);return{x:h,y:f,textAnchor:h>=i?"start":"end",verticalAnchor:"middle"}}if(n==="center")return{x:i,y:a,textAnchor:"middle",verticalAnchor:"middle"};if(n==="centerTop")return{x:i,y:a,textAnchor:"middle",verticalAnchor:"start"};if(n==="centerBottom")return{x:i,y:a,textAnchor:"middle",verticalAnchor:"end"};var m=(s+o)/2,{x:g,y:p}=Ge(i,a,m,u);return{x:g,y:p,textAnchor:"middle",verticalAnchor:"middle"}},EC=(e,t)=>{var{parentViewBox:r,offset:n,position:i}=e,{x:a,y:s,width:o,height:c}=t,d=c>=0?1:-1,u=d*n,h=d>0?"end":"start",f=d>0?"start":"end",m=o>=0?1:-1,g=m*n,p=m>0?"end":"start",v=m>0?"start":"end";if(i==="top"){var x={x:a+o/2,y:s-d*n,textAnchor:"middle",verticalAnchor:h};return Ee(Ee({},x),r?{height:Math.max(s-r.y,0),width:o}:{})}if(i==="bottom"){var j={x:a+o/2,y:s+c+u,textAnchor:"middle",verticalAnchor:f};return Ee(Ee({},j),r?{height:Math.max(r.y+r.height-(s+c),0),width:o}:{})}if(i==="left"){var b={x:a-g,y:s+c/2,textAnchor:p,verticalAnchor:"middle"};return Ee(Ee({},b),r?{width:Math.max(b.x-r.x,0),height:c}:{})}if(i==="right"){var S={x:a+o+g,y:s+c/2,textAnchor:v,verticalAnchor:"middle"};return Ee(Ee({},S),r?{width:Math.max(r.x+r.width-S.x,0),height:c}:{})}var _=r?{width:o,height:c}:{};return i==="insideLeft"?Ee({x:a+g,y:s+c/2,textAnchor:v,verticalAnchor:"middle"},_):i==="insideRight"?Ee({x:a+o-g,y:s+c/2,textAnchor:p,verticalAnchor:"middle"},_):i==="insideTop"?Ee({x:a+o/2,y:s+u,textAnchor:"middle",verticalAnchor:f},_):i==="insideBottom"?Ee({x:a+o/2,y:s+c-u,textAnchor:"middle",verticalAnchor:h},_):i==="insideTopLeft"?Ee({x:a+g,y:s+u,textAnchor:v,verticalAnchor:f},_):i==="insideTopRight"?Ee({x:a+o-g,y:s+u,textAnchor:p,verticalAnchor:f},_):i==="insideBottomLeft"?Ee({x:a+g,y:s+c-u,textAnchor:v,verticalAnchor:h},_):i==="insideBottomRight"?Ee({x:a+o-g,y:s+c-u,textAnchor:p,verticalAnchor:h},_):i&&typeof i=="object"&&(Y(i.x)||Hr(i.x))&&(Y(i.y)||Hr(i.y))?Ee({x:a+Bt(i.x,o),y:s+Bt(i.y,c),textAnchor:"end",verticalAnchor:"end"},_):Ee({x:a+o/2,y:s+c/2,textAnchor:"middle",verticalAnchor:"middle"},_)},CC=e=>"cx"in e&&Y(e.cx);function lt(e){var{offset:t=5}=e,r=nm(e,bC),n=Ee({offset:t},r),{viewBox:i,position:a,value:s,children:o,content:c,className:d="",textBreakAll:u,labelRef:h}=n,f=Xs(),m=i||f;if(!m||we(s)&&we(o)&&!y.isValidElement(c)&&typeof c!="function")return null;if(y.isValidElement(c)){var g=nm(n,wC);return y.cloneElement(c,g)}var p;if(typeof c=="function"){if(p=y.createElement(c,n),y.isValidElement(p))return p}else p=NC(n);var v=CC(m),x=ue(n,!0);if(v&&(a==="insideStart"||a==="insideEnd"||a==="end"))return OC(n,p,x);var j=v?AC(n):EC(n,m);return y.createElement(od,Qt({ref:h,className:me("recharts-label",d)},x,j,{breakAll:u}),p)}lt.displayName="Label";var _y=e=>{var{cx:t,cy:r,angle:n,startAngle:i,endAngle:a,r:s,radius:o,innerRadius:c,outerRadius:d,x:u,y:h,top:f,left:m,width:g,height:p,clockWise:v,labelViewBox:x}=e;if(x)return x;if(Y(g)&&Y(p)){if(Y(u)&&Y(h))return{x:u,y:h,width:g,height:p};if(Y(f)&&Y(m))return{x:f,y:m,width:g,height:p}}if(Y(u)&&Y(h))return{x:u,y:h,width:0,height:0};if(Y(t)&&Y(r))return{cx:t,cy:r,startAngle:i||n||0,endAngle:a||n||0,innerRadius:c||0,outerRadius:d||o||s||0,clockWise:v};if(e.viewBox)return e.viewBox},MC=(e,t,r)=>{if(!e)return null;var n={viewBox:t,labelRef:r};return e===!0?y.createElement(lt,Qt({key:"label-implicit"},n)):kt(e)?y.createElement(lt,Qt({key:"label-implicit",value:e},n)):y.isValidElement(e)?e.type===lt?y.cloneElement(e,Ee({key:"label-implicit"},n)):y.createElement(lt,Qt({key:"label-implicit",content:e},n)):ld(e)?y.createElement(lt,Qt({key:"label-implicit",content:e},n)):e&&typeof e=="object"?y.createElement(lt,Qt({},e,{key:"label-implicit"},n)):null},TC=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!t||!t.children&&n&&!t.label)return null;var{children:i,labelRef:a}=t,s=_y(t),o=Lc(i,lt).map((d,u)=>y.cloneElement(d,{viewBox:r||s,key:"label-".concat(u)}));if(!n)return o;var c=MC(t.label,r||s,a);return[c,...o]};lt.parseViewBox=_y;lt.renderCallByParent=TC;var Ny={},ky={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r[r.length-1]}e.last=t})(ky);var Oy={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Array.isArray(r)?r:Array.from(r)}e.toArray=t})(Oy);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=ky,r=Oy,n=$s;function i(a){if(n.isArrayLike(a))return t.last(r.toArray(a))}e.last=i})(Ny);var DC=Ny.last;const IC=cr(DC);var $C=["valueAccessor"],LC=["data","dataKey","clockWise","id","textBreakAll"];function is(){return is=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},is.apply(null,arguments)}function am(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function sm(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?am(Object(r),!0).forEach(function(n){RC(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):am(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function RC(e,t,r){return(t=UC(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function UC(e){var t=BC(e,"string");return typeof t=="symbol"?t:t+""}function BC(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function om(e,t){if(e==null)return{};var r,n,i=FC(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function FC(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var zC=e=>Array.isArray(e.value)?IC(e.value):e.value;function ir(e){var{valueAccessor:t=zC}=e,r=om(e,$C),{data:n,dataKey:i,clockWise:a,id:s,textBreakAll:o}=r,c=om(r,LC);return!n||!n.length?null:y.createElement(De,{className:"recharts-label-list"},n.map((d,u)=>{var h=we(i)?t(d,u):Fe(d&&d.payload,i),f=we(s)?{}:{id:"".concat(s,"-").concat(u)};return y.createElement(lt,is({},ue(d,!0),c,f,{parentViewBox:d.parentViewBox,value:h,textBreakAll:o,viewBox:lt.parseViewBox(we(a)?d:sm(sm({},d),{},{clockWise:a})),key:"label-".concat(u),index:u}))}))}ir.displayName="LabelList";function WC(e,t){return e?e===!0?y.createElement(ir,{key:"labelList-implicit",data:t}):y.isValidElement(e)||ld(e)?y.createElement(ir,{key:"labelList-implicit",data:t,content:e}):typeof e=="object"?y.createElement(ir,is({data:t},e,{key:"labelList-implicit"})):null:null}function KC(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&r&&!e.label)return null;var{children:n}=e,i=Lc(n,ir).map((s,o)=>y.cloneElement(s,{data:t,key:"labelList-".concat(o)}));if(!r)return i;var a=WC(e.label,t);return[a,...i]}ir.renderCallByParent=KC;function lc(){return lc=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},lc.apply(null,arguments)}var cd=e=>{var{cx:t,cy:r,r:n,className:i}=e,a=me("recharts-dot",i);return t===+t&&r===+r&&n===+n?y.createElement("circle",lc({},ue(e,!1),$c(e),{className:a,cx:t,cy:r,r:n})):null},HC={radiusAxis:{},angleAxis:{}},qC=Mt({name:"polarAxis",initialState:HC,reducers:{addRadiusAxis(e,t){e.radiusAxis[t.payload.id]=t.payload},removeRadiusAxis(e,t){delete e.radiusAxis[t.payload.id]},addAngleAxis(e,t){e.angleAxis[t.payload.id]=t.payload},removeAngleAxis(e,t){delete e.angleAxis[t.payload.id]}}}),VC=qC.reducer,GC={countOfBars:0,cartesianItems:[],polarItems:[]},Ay=Mt({name:"graphicalItems",initialState:GC,reducers:{addBar(e){e.countOfBars+=1},removeBar(e){e.countOfBars-=1},addCartesianGraphicalItem(e,t){e.cartesianItems.push(t.payload)},replaceCartesianGraphicalItem(e,t){var{prev:r,next:n}=t.payload,i=rr(e).cartesianItems.indexOf(r);i>-1&&(e.cartesianItems[i]=n)},removeCartesianGraphicalItem(e,t){var r=rr(e).cartesianItems.indexOf(t.payload);r>-1&&e.cartesianItems.splice(r,1)},addPolarGraphicalItem(e,t){e.polarItems.push(t.payload)},removePolarGraphicalItem(e,t){var r=rr(e).polarItems.indexOf(t.payload);r>-1&&e.polarItems.splice(r,1)}}}),{addBar:YC,removeBar:ZC,addCartesianGraphicalItem:XC,replaceCartesianGraphicalItem:JC,removeCartesianGraphicalItem:QC,addPolarGraphicalItem:L3,removePolarGraphicalItem:R3}=Ay.actions,eM=Ay.reducer;function lm(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function cm(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?lm(Object(r),!0).forEach(function(n){tM(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):lm(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function tM(e,t,r){return(t=rM(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function rM(e){var t=nM(e,"string");return typeof t=="symbol"?t:t+""}function nM(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function iM(e){var t=Ae(),r=y.useRef(null);return y.useEffect(()=>{var n=cm(cm({},e),{},{stackId:su(e.stackId)});r.current===null?t(XC(n)):r.current!==n&&t(JC({prev:r.current,next:n})),r.current=n},[t,e]),y.useEffect(()=>()=>{r.current&&(t(QC(r.current)),r.current=null)},[t]),null}var Ey={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){if(typeof r!="object"||r==null)return!1;if(Object.getPrototypeOf(r)===null)return!0;if(Object.prototype.toString.call(r)!=="[object Object]"){const i=r[Symbol.toStringTag];return i==null||!Object.getOwnPropertyDescriptor(r,Symbol.toStringTag)?.writable?!1:r.toString()===`[object ${i}]`}let n=r;for(;Object.getPrototypeOf(n)!==null;)n=Object.getPrototypeOf(n);return Object.getPrototypeOf(r)===n}e.isPlainObject=t})(Ey);var aM=Ey.isPlainObject;const sM=cr(aM);function as(){return as=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},as.apply(null,arguments)}var um=(e,t,r,n,i)=>{var a=r-n,s;return s="M ".concat(e,",").concat(t),s+="L ".concat(e+r,",").concat(t),s+="L ".concat(e+r-a/2,",").concat(t+i),s+="L ".concat(e+r-a/2-n,",").concat(t+i),s+="L ".concat(e,",").concat(t," Z"),s},oM={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},lM=e=>{var t=Vt(e,oM),r=y.useRef(),[n,i]=y.useState(-1);y.useEffect(()=>{if(r.current&&r.current.getTotalLength)try{var v=r.current.getTotalLength();v&&i(v)}catch{}},[]);var{x:a,y:s,upperWidth:o,lowerWidth:c,height:d,className:u}=t,{animationEasing:h,animationDuration:f,animationBegin:m,isUpdateAnimationActive:g}=t;if(a!==+a||s!==+s||o!==+o||c!==+c||d!==+d||o===0&&c===0||d===0)return null;var p=me("recharts-trapezoid",u);return g?y.createElement(Ar,{canBegin:n>0,from:{upperWidth:0,lowerWidth:0,height:d,x:a,y:s},to:{upperWidth:o,lowerWidth:c,height:d,x:a,y:s},duration:f,animationEasing:h,isActive:g},v=>{var{upperWidth:x,lowerWidth:j,height:b,x:S,y:_}=v;return y.createElement(Ar,{canBegin:n>0,from:"0px ".concat(n===-1?1:n,"px"),to:"".concat(n,"px 0px"),attributeName:"strokeDasharray",begin:m,duration:f,easing:h},y.createElement("path",as({},ue(t,!0),{className:p,d:um(S,_,x,j,b),ref:r})))}):y.createElement("g",null,y.createElement("path",as({},ue(t,!0),{className:p,d:um(a,s,o,c,d)})))},cM=["option","shapeType","propTransformer","activeClassName","isActive"];function uM(e,t){if(e==null)return{};var r,n,i=dM(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function dM(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function dm(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function ss(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?dm(Object(r),!0).forEach(function(n){hM(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):dm(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function hM(e,t,r){return(t=fM(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function fM(e){var t=mM(e,"string");return typeof t=="symbol"?t:t+""}function mM(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function pM(e,t){return ss(ss({},t),e)}function gM(e,t){return e==="symbols"}function hm(e){var{shapeType:t,elementProps:r}=e;switch(t){case"rectangle":return y.createElement(r0,r);case"trapezoid":return y.createElement(lM,r);case"sector":return y.createElement(a0,r);case"symbols":if(gM(t))return y.createElement(zc,r);break;default:return null}}function vM(e){return y.isValidElement(e)?e.props:e}function yM(e){var{option:t,shapeType:r,propTransformer:n=pM,activeClassName:i="recharts-active-shape",isActive:a}=e,s=uM(e,cM),o;if(y.isValidElement(t))o=y.cloneElement(t,ss(ss({},s),vM(t)));else if(typeof t=="function")o=t(s);else if(sM(t)&&typeof t!="boolean"){var c=n(t,s);o=y.createElement(hm,{shapeType:r,elementProps:c})}else{var d=s;o=y.createElement(hm,{shapeType:r,elementProps:d})}return a?y.createElement(De,{className:i},o):o}var Cy=(e,t)=>{var r=Ae();return(n,i)=>a=>{e?.(n,i,a),r(Vv({activeIndex:String(i),activeDataKey:t,activeCoordinate:n.tooltipPosition}))}},My=e=>{var t=Ae();return(r,n)=>i=>{e?.(r,n,i),t(AA())}},Ty=(e,t)=>{var r=Ae();return(n,i)=>a=>{e?.(n,i,a),r(EA({activeIndex:String(i),activeDataKey:t,activeCoordinate:n.tooltipPosition}))}};function ud(e){var{fn:t,args:r}=e,n=Ae(),i=Ze();return y.useEffect(()=>{if(!i){var a=t(r);return n(NA(a)),()=>{n(kA(a))}}},[t,r,n,i]),null}var xM=()=>{};function dd(e){var{legendPayload:t}=e,r=Ae(),n=Ze();return y.useEffect(()=>n?xM:(r(dP(t)),()=>{r(hP(t))}),[r,n,t]),null}function hd(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"animation-",r=y.useRef(sn(t)),n=y.useRef(e);return n.current!==e&&(r.current=sn(t),n.current=e),r.current}var bM=$([ze],e=>{if(e)return{top:e.top,bottom:e.bottom,left:e.left,right:e.right}}),wM=$([bM,ur,dr],(e,t,r)=>{if(!(!e||t==null||r==null))return{x:e.left,y:e.top,width:Math.max(0,t-e.left-e.right),height:Math.max(0,r-e.top-e.bottom)}}),jM=e=>{var t=Ze();return ee(r=>Et(r,"xAxis",e,t))},SM=e=>{var t=Ze();return ee(r=>Et(r,"yAxis",e,t))},yo=()=>ee(wM),PM=()=>ee(mE);function fm(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function mm(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?fm(Object(r),!0).forEach(function(n){_M(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):fm(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function _M(e,t,r){return(t=NM(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function NM(e){var t=kM(e,"string");return typeof t=="symbol"?t:t+""}function kM(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var OM=e=>{var{point:t,childIndex:r,mainColor:n,activeDot:i,dataKey:a}=e;if(i===!1||t.x==null||t.y==null)return null;var s=mm(mm({index:r,dataKey:a,cx:t.x,cy:t.y,r:4,fill:n??"none",strokeWidth:2,stroke:"#fff",payload:t.payload,value:t.value},ue(i,!1)),$c(i)),o;return y.isValidElement(i)?o=y.cloneElement(i,s):typeof i=="function"?o=i(s):o=y.createElement(cd,s),y.createElement(De,{className:"recharts-active-dot"},o)};function cc(e){var{points:t,mainColor:r,activeDot:n,itemDataKey:i}=e,a=ee(dn),s=PM();if(t==null||s==null)return null;var o=t.find(c=>s.includes(c.payload));return we(o)?null:OM({point:o,childIndex:Number(a),mainColor:r,dataKey:i,activeDot:n})}var AM=()=>{var e=Ae();return y.useEffect(()=>(e(YC()),()=>{e(ZC())})),null},EM=["children"];function CM(e,t){if(e==null)return{};var r,n,i=MM(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function MM(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var pm=()=>{},Dy=y.createContext({addErrorBar:pm,removeErrorBar:pm}),TM={data:[],xAxisId:"xAxis-0",yAxisId:"yAxis-0",dataPointFormatter:()=>({x:0,y:0,value:0}),errorBarOffset:0},Iy=y.createContext(TM);function $y(e){var{children:t}=e,r=CM(e,EM);return y.createElement(Iy.Provider,{value:r},t)}var DM=()=>y.useContext(Iy),fd=e=>{var{children:t,xAxisId:r,yAxisId:n,zAxisId:i,dataKey:a,data:s,stackId:o,hide:c,type:d,barSize:u}=e,[h,f]=y.useState([]),m=y.useCallback(v=>{f(x=>[...x,v])},[f]),g=y.useCallback(v=>{f(x=>x.filter(j=>j!==v))},[f]),p=Ze();return y.createElement(Dy.Provider,{value:{addErrorBar:m,removeErrorBar:g}},y.createElement(iM,{type:d,data:s,xAxisId:r,yAxisId:n,zAxisId:i,dataKey:a,errorBars:h,stackId:o,hide:c,barSize:u,isPanorama:p}),t)};function IM(e){var{addErrorBar:t,removeErrorBar:r}=y.useContext(Dy);return y.useEffect(()=>(t(e),()=>{r(e)}),[t,r,e]),null}var $M=["direction","width","dataKey","isAnimationActive","animationBegin","animationDuration","animationEasing"];function Ly(e,t,r){return(t=LM(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function LM(e){var t=RM(e,"string");return typeof t=="symbol"?t:t+""}function RM(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Ui(){return Ui=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ui.apply(null,arguments)}function UM(e,t){if(e==null)return{};var r,n,i=BM(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function BM(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function FM(e){var{direction:t,width:r,dataKey:n,isAnimationActive:i,animationBegin:a,animationDuration:s,animationEasing:o}=e,c=UM(e,$M),d=ue(c,!1),{data:u,dataPointFormatter:h,xAxisId:f,yAxisId:m,errorBarOffset:g}=DM(),p=jM(f),v=SM(m);if(p?.scale==null||v?.scale==null||u==null||t==="x"&&p.type!=="number")return null;var x=u.map(j=>{var{x:b,y:S,value:_,errorVal:N}=h(j,n,t);if(!N)return null;var P=[],E,w;if(Array.isArray(N)?[E,w]=N:E=w=N,t==="x"){var{scale:A}=p,O=S+g,D=O+r,R=O-r,C=A(_-E),k=A(_+w);P.push({x1:k,y1:D,x2:k,y2:R}),P.push({x1:C,y1:O,x2:k,y2:O}),P.push({x1:C,y1:D,x2:C,y2:R})}else if(t==="y"){var{scale:I}=v,L=b+g,K=L-r,F=L+r,G=I(_-E),X=I(_+w);P.push({x1:K,y1:X,x2:F,y2:X}),P.push({x1:L,y1:G,x2:L,y2:X}),P.push({x1:K,y1:G,x2:F,y2:G})}var z="".concat(b+g,"px ").concat(S+g,"px");return y.createElement(De,Ui({className:"recharts-errorBar",key:"bar-".concat(P.map(J=>"".concat(J.x1,"-").concat(J.x2,"-").concat(J.y1,"-").concat(J.y2)))},d),P.map(J=>{var re=i?{transformOrigin:"".concat(J.x1-5,"px")}:void 0;return y.createElement(Ar,{from:{transform:"scaleY(0)",transformOrigin:z},to:{transform:"scaleY(1)",transformOrigin:z},begin:a,easing:o,isActive:i,duration:s,key:"line-".concat(J.x1,"-").concat(J.x2,"-").concat(J.y1,"-").concat(J.y2),style:{transformOrigin:z}},y.createElement("line",Ui({},J,{style:re})))}))});return y.createElement(De,{className:"recharts-errorBars"},x)}var Ry=y.createContext(void 0);function zM(e){var t=y.useContext(Ry);return e??t??"x"}function Uy(e){var{direction:t,children:r}=e;return y.createElement(Ry.Provider,{value:t},r)}var By={stroke:"black",strokeWidth:1.5,width:5,offset:0,isAnimationActive:!0,animationBegin:0,animationDuration:400,animationEasing:"ease-in-out"};function WM(e){var t=zM(e.direction),{width:r,isAnimationActive:n,animationBegin:i,animationDuration:a,animationEasing:s}=Vt(e,By);return y.createElement(y.Fragment,null,y.createElement(IM,{dataKey:e.dataKey,direction:t}),y.createElement(FM,Ui({},e,{direction:t,width:r,isAnimationActive:n,animationBegin:i,animationDuration:a,animationEasing:s})))}class Fy extends y.Component{render(){return y.createElement(WM,this.props)}}Ly(Fy,"defaultProps",By);Ly(Fy,"displayName","ErrorBar");var KM="Invariant failed";function HM(e,t){throw new Error(KM)}var qM=["x","y"];function uc(){return uc=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},uc.apply(null,arguments)}function gm(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function fi(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?gm(Object(r),!0).forEach(function(n){VM(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):gm(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function VM(e,t,r){return(t=GM(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function GM(e){var t=YM(e,"string");return typeof t=="symbol"?t:t+""}function YM(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function ZM(e,t){if(e==null)return{};var r,n,i=XM(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function XM(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function JM(e,t){var{x:r,y:n}=e,i=ZM(e,qM),a="".concat(r),s=parseInt(a,10),o="".concat(n),c=parseInt(o,10),d="".concat(t.height||i.height),u=parseInt(d,10),h="".concat(t.width||i.width),f=parseInt(h,10);return fi(fi(fi(fi(fi({},t),i),s?{x:s}:{}),c?{y:c}:{}),{},{height:u,width:f,name:t.name,radius:t.radius})}function zy(e){return y.createElement(yM,uc({shapeType:"rectangle",propTransformer:JM,activeClassName:"recharts-active-bar"},e))}var QM=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return(n,i)=>{if(Y(t))return t;var a=Y(n)||we(n);return a?t(n,i):(a||HM(),r)}};function xo(e,t){var r,n,i=ee(d=>Gt(d,e)),a=ee(d=>fr(d,t)),s=(r=i?.allowDataOverflow)!==null&&r!==void 0?r:ht.allowDataOverflow,o=(n=a?.allowDataOverflow)!==null&&n!==void 0?n:ft.allowDataOverflow,c=s||o;return{needClip:c,needClipX:s,needClipY:o}}function md(e){var{xAxisId:t,yAxisId:r,clipPathId:n}=e,i=yo(),{needClipX:a,needClipY:s,needClip:o}=xo(t,r);if(!o)return null;var{x:c,y:d,width:u,height:h}=i;return y.createElement("clipPath",{id:"clipPath-".concat(n)},y.createElement("rect",{x:a?c:c-u/2,y:s?d:d-h/2,width:a?u:u*2,height:s?h:h*2}))}var eT=["onMouseEnter","onMouseLeave","onClick"],tT=["value","background","tooltipPosition"],rT=["onMouseEnter","onClick","onMouseLeave"];function Bi(){return Bi=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Bi.apply(null,arguments)}function vm(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function et(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?vm(Object(r),!0).forEach(function(n){bo(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):vm(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function bo(e,t,r){return(t=nT(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function nT(e){var t=iT(e,"string");return typeof t=="symbol"?t:t+""}function iT(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function dc(e,t){if(e==null)return{};var r,n,i=aT(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function aT(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var sT=e=>{var{dataKey:t,name:r,fill:n,legendType:i,hide:a}=e;return[{inactive:a,dataKey:t,type:i,color:n,value:Jn(r,t),payload:e}]};function oT(e){var{dataKey:t,stroke:r,strokeWidth:n,fill:i,name:a,hide:s,unit:o}=e;return{dataDefinedOnItem:void 0,positions:void 0,settings:{stroke:r,strokeWidth:n,fill:i,dataKey:t,nameKey:void 0,name:Jn(a,t),hide:s,type:e.tooltipType,color:e.fill,unit:o}}}function lT(e){var t=ee(dn),{data:r,dataKey:n,background:i,allOtherBarProps:a}=e,{onMouseEnter:s,onMouseLeave:o,onClick:c}=a,d=dc(a,eT),u=Cy(s,n),h=My(o),f=Ty(c,n);if(!i||r==null)return null;var m=ue(i,!1);return y.createElement(y.Fragment,null,r.map((g,p)=>{var{value:v,background:x,tooltipPosition:j}=g,b=dc(g,tT);if(!x)return null;var S=u(g,p),_=h(g,p),N=f(g,p),P=et(et(et(et(et({option:i,isActive:String(p)===t},b),{},{fill:"#eee"},x),m),Cs(d,g,p)),{},{onMouseEnter:S,onMouseLeave:_,onClick:N,dataKey:n,index:p,className:"recharts-bar-background-rectangle"});return y.createElement(zy,Bi({key:"background-bar-".concat(p)},P))}))}function Wy(e){var{data:t,props:r,showLabels:n}=e,i=ue(r,!1),{shape:a,dataKey:s,activeBar:o}=r,c=ee(dn),d=ee(sy),{onMouseEnter:u,onClick:h,onMouseLeave:f}=r,m=dc(r,rT),g=Cy(u,s),p=My(f),v=Ty(h,s);return t?y.createElement(y.Fragment,null,t.map((x,j)=>{var b=o&&String(j)===c&&(d==null||s===d),S=b?o:a,_=et(et(et({},i),x),{},{isActive:b,option:S,index:j,dataKey:s});return y.createElement(De,Bi({className:"recharts-bar-rectangle"},Cs(m,x,j),{onMouseEnter:g(x,j),onMouseLeave:p(x,j),onClick:v(x,j),key:"rectangle-".concat(x?.x,"-").concat(x?.y,"-").concat(x?.value,"-").concat(j)}),y.createElement(zy,_))}),n&&ir.renderCallByParent(r,t)):null}function cT(e){var{props:t,previousRectanglesRef:r}=e,{data:n,layout:i,isAnimationActive:a,animationBegin:s,animationDuration:o,animationEasing:c,onAnimationEnd:d,onAnimationStart:u}=t,h=r.current,f=hd(t,"recharts-bar-"),[m,g]=y.useState(!1),p=y.useCallback(()=>{typeof d=="function"&&d(),g(!1)},[d]),v=y.useCallback(()=>{typeof u=="function"&&u(),g(!0)},[u]);return y.createElement(Ar,{begin:s,duration:o,isActive:a,easing:c,from:{t:0},to:{t:1},onAnimationEnd:p,onAnimationStart:v,key:f},x=>{var{t:j}=x,b=j===1?n:n.map((S,_)=>{var N=h&&h[_];if(N){var P=$t(N.x,S.x),E=$t(N.y,S.y),w=$t(N.width,S.width),A=$t(N.height,S.height);return et(et({},S),{},{x:P(j),y:E(j),width:w(j),height:A(j)})}if(i==="horizontal"){var O=$t(0,S.height),D=O(j);return et(et({},S),{},{y:S.y+S.height-D,height:D})}var R=$t(0,S.width),C=R(j);return et(et({},S),{},{width:C})});return j>0&&(r.current=b),y.createElement(De,null,y.createElement(Wy,{props:t,data:b,showLabels:!m}))})}function uT(e){var{data:t,isAnimationActive:r}=e,n=y.useRef(null);return r&&t&&t.length&&(n.current==null||n.current!==t)?y.createElement(cT,{previousRectanglesRef:n,props:e}):y.createElement(Wy,{props:e,data:t,showLabels:!0})}var Ky=0,dT=(e,t)=>{var r=Array.isArray(e.value)?e.value[1]:e.value;return{x:e.x,y:e.y,value:r,errorVal:Fe(e,t)}};class hT extends y.PureComponent{constructor(){super(...arguments),bo(this,"id",sn("recharts-bar-"))}render(){var{hide:t,data:r,dataKey:n,className:i,xAxisId:a,yAxisId:s,needClip:o,background:c,id:d,layout:u}=this.props;if(t)return null;var h=me("recharts-bar",i),f=we(d)?this.id:d;return y.createElement(De,{className:h},o&&y.createElement("defs",null,y.createElement(md,{clipPathId:f,xAxisId:a,yAxisId:s})),y.createElement(De,{className:"recharts-bar-rectangles",clipPath:o?"url(#clipPath-".concat(f,")"):null},y.createElement(lT,{data:r,dataKey:n,background:c,allOtherBarProps:this.props}),y.createElement(uT,this.props)),y.createElement(Uy,{direction:u==="horizontal"?"y":"x"},this.props.children))}}var Hy={activeBar:!1,animationBegin:0,animationDuration:400,animationEasing:"ease",hide:!1,isAnimationActive:!fn.isSsr,legendType:"rect",minPointSize:Ky,xAxisId:0,yAxisId:0};function fT(e){var{xAxisId:t,yAxisId:r,hide:n,legendType:i,minPointSize:a,activeBar:s,animationBegin:o,animationDuration:c,animationEasing:d,isAnimationActive:u}=Vt(e,Hy),{needClip:h}=xo(t,r),f=qi(),m=Ze(),g=y.useMemo(()=>({barSize:e.barSize,data:void 0,dataKey:e.dataKey,maxBarSize:e.maxBarSize,minPointSize:a,stackId:su(e.stackId)}),[e.barSize,e.dataKey,e.maxBarSize,a,e.stackId]),p=Lc(e.children,by),v=ee(b=>FT(b,t,r,m,g,p));if(f!=="vertical"&&f!=="horizontal")return null;var x,j=v?.[0];return j==null||j.height==null||j.width==null?x=0:x=f==="vertical"?j.height/2:j.width/2,y.createElement($y,{xAxisId:t,yAxisId:r,data:v,dataPointFormatter:dT,errorBarOffset:x},y.createElement(hT,Bi({},e,{layout:f,needClip:h,data:v,xAxisId:t,yAxisId:r,hide:n,legendType:i,minPointSize:a,activeBar:s,animationBegin:o,animationDuration:c,animationEasing:d,isAnimationActive:u})))}function mT(e){var{layout:t,barSettings:{dataKey:r,minPointSize:n},pos:i,bandSize:a,xAxis:s,yAxis:o,xAxisTicks:c,yAxisTicks:d,stackedData:u,displayedData:h,offset:f,cells:m}=e,g=t==="horizontal"?o:s,p=u?g.scale.domain():null,v=KS({numericAxis:g});return h.map((x,j)=>{var b,S,_,N,P,E;u?b=US(u[j],p):(b=Fe(x,r),Array.isArray(b)||(b=[v,b]));var w=QM(n,Ky)(b[1],j);if(t==="horizontal"){var A,[O,D]=[o.scale(b[0]),o.scale(b[1])];S=Ph({axis:s,ticks:c,bandSize:a,offset:i.offset,entry:x,index:j}),_=(A=D??O)!==null&&A!==void 0?A:void 0,N=i.size;var R=O-D;if(P=rt(R)?0:R,E={x:S,y:f.top,width:N,height:f.height},Math.abs(w)>0&&Math.abs(P)<Math.abs(w)){var C=ct(P||w)*(Math.abs(w)-Math.abs(P));_-=C,P+=C}}else{var[k,I]=[s.scale(b[0]),s.scale(b[1])];if(S=k,_=Ph({axis:o,ticks:d,bandSize:a,offset:i.offset,entry:x,index:j}),N=I-k,P=i.size,E={x:f.left,y:_,width:f.width,height:P},Math.abs(w)>0&&Math.abs(N)<Math.abs(w)){var L=ct(N||w)*(Math.abs(w)-Math.abs(N));N+=L}}var K=et(et({},x),{},{x:S,y:_,width:N,height:P,value:u?b:b[1],payload:x,background:E,tooltipPosition:{x:S+N/2,y:_+P/2}},m&&m[j]&&m[j].props);return K})}class wo extends y.PureComponent{render(){return y.createElement(fd,{type:"bar",data:null,xAxisId:this.props.xAxisId,yAxisId:this.props.yAxisId,zAxisId:0,dataKey:this.props.dataKey,stackId:this.props.stackId,hide:this.props.hide,barSize:this.props.barSize},y.createElement(AM,null),y.createElement(dd,{legendPayload:sT(this.props)}),y.createElement(ud,{fn:oT,args:this.props}),y.createElement(fT,this.props))}}bo(wo,"displayName","Bar");bo(wo,"defaultProps",Hy);function ym(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function ja(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?ym(Object(r),!0).forEach(function(n){pT(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ym(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function pT(e,t,r){return(t=gT(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function gT(e){var t=vT(e,"string");return typeof t=="symbol"?t:t+""}function vT(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var yT=(e,t)=>t,xT=(e,t,r)=>r,bT=(e,t,r,n)=>n,pd=(e,t,r,n,i)=>i,wT=(e,t,r,n,i)=>i.maxBarSize,jT=(e,t,r,n,i,a)=>a,xm=(e,t,r)=>{var n=r??e;if(!we(n))return Bt(n,t,0)},ST=$([ge,Ji,yT,xT,bT],(e,t,r,n,i)=>t.filter(a=>e==="horizontal"?a.xAxisId===r:a.yAxisId===n).filter(a=>a.isPanorama===i).filter(a=>a.hide===!1).filter(a=>a.type==="bar")),PT=(e,t,r,n)=>{var i=ge(e);return i==="horizontal"?Li(e,"yAxis",r,n):Li(e,"xAxis",t,n)},_T=(e,t,r)=>{var n=ge(e);return n==="horizontal"?If(e,"xAxis",t):If(e,"yAxis",r)};function NT(e){return e.stackId!=null&&e.dataKey!=null}var kT=(e,t,r)=>{var n={},i=e.filter(NT),a=e.filter(d=>d.stackId==null),s=i.reduce((d,u)=>(d[u.stackId]||(d[u.stackId]=[]),d[u.stackId].push(u),d),n),o=Object.entries(s).map(d=>{var[u,h]=d,f=h.map(g=>g.dataKey),m=xm(t,r,h[0].barSize);return{stackId:u,dataKeys:f,barSize:m}}),c=a.map(d=>{var u=[d.dataKey].filter(f=>f!=null),h=xm(t,r,d.barSize);return{stackId:void 0,dataKeys:u,barSize:h}});return[...o,...c]},OT=$([ST,PO,_T],kT),AT=(e,t,r,n,i)=>{var a,s,o=ge(e),c=iv(e),{maxBarSize:d}=i,u=we(d)?c:d,h,f;return o==="horizontal"?(h=Et(e,"xAxis",t,n),f=Ht(e,"xAxis",t,n)):(h=Et(e,"yAxis",r,n),f=Ht(e,"yAxis",r,n)),(a=(s=cn(h,f,!0))!==null&&s!==void 0?s:u)!==null&&a!==void 0?a:0},qy=(e,t,r,n)=>{var i=ge(e),a,s;return i==="horizontal"?(a=Et(e,"xAxis",t,n),s=Ht(e,"xAxis",t,n)):(a=Et(e,"yAxis",r,n),s=Ht(e,"yAxis",r,n)),cn(a,s)};function ET(e,t,r,n,i){var a=n.length;if(!(a<1)){var s=Bt(e,r,0,!0),o,c=[];if(Ye(n[0].barSize)){var d=!1,u=r/a,h=n.reduce((x,j)=>x+(j.barSize||0),0);h+=(a-1)*s,h>=r&&(h-=(a-1)*s,s=0),h>=r&&u>0&&(d=!0,u*=.9,h=a*u);var f=(r-h)/2>>0,m={offset:f-s,size:0};o=n.reduce((x,j)=>{var b,S={stackId:j.stackId,dataKeys:j.dataKeys,position:{offset:m.offset+m.size+s,size:d?u:(b=j.barSize)!==null&&b!==void 0?b:0}},_=[...x,S];return m=_[_.length-1].position,_},c)}else{var g=Bt(t,r,0,!0);r-2*g-(a-1)*s<=0&&(s=0);var p=(r-2*g-(a-1)*s)/a;p>1&&(p>>=0);var v=Ye(i)?Math.min(p,i):p;o=n.reduce((x,j,b)=>[...x,{stackId:j.stackId,dataKeys:j.dataKeys,position:{offset:g+(p+s)*b+(p-v)/2,size:v}}],c)}return o}}var CT=(e,t,r,n,i,a,s)=>{var o=we(s)?t:s,c=ET(r,n,i!==a?i:a,e,o);return i!==a&&c!=null&&(c=c.map(d=>ja(ja({},d),{},{position:ja(ja({},d.position),{},{offset:d.position.offset-i/2})}))),c},MT=$([OT,iv,SO,av,AT,qy,wT],CT),TT=(e,t,r,n)=>Et(e,"xAxis",t,n),DT=(e,t,r,n)=>Et(e,"yAxis",r,n),IT=(e,t,r,n)=>Ht(e,"xAxis",t,n),$T=(e,t,r,n)=>Ht(e,"yAxis",r,n),LT=$([MT,pd],(e,t)=>{if(e!=null){var r=e.find(n=>n.stackId===t.stackId&&n.dataKeys.includes(t.dataKey));if(r!=null)return r.position}}),RT=(e,t)=>{if(!(!e||t?.dataKey==null)){var{stackId:r}=t;if(r!=null){var n=e[r];if(n){var{stackedData:i}=n;if(i){var a=i.find(s=>s.key===t.dataKey);return a}}}}},UT=$([Ji,pd],(e,t)=>{if(e.some(r=>r.type==="bar"&&t.dataKey===r.dataKey&&t.stackId===r.stackId&&t.stackId===r.stackId))return t}),BT=$([PT,pd],RT),FT=$([ze,TT,DT,IT,$T,LT,ge,io,qy,BT,UT,jT],(e,t,r,n,i,a,s,o,c,d,u,h)=>{var{chartData:f,dataStartIndex:m,dataEndIndex:g}=o;if(!(u==null||a==null||s!=="horizontal"&&s!=="vertical"||t==null||r==null||n==null||i==null||c==null)){var{data:p}=u,v;if(p!=null&&p.length>0?v=p:v=f?.slice(m,g+1),v!=null)return mT({layout:s,barSettings:u,pos:a,bandSize:c,xAxis:t,yAxis:r,xAxisTicks:n,yAxisTicks:i,stackedData:d,displayedData:v,offset:e,cells:h})}}),zT=e=>{var{chartData:t}=e,r=Ae(),n=Ze();return y.useEffect(()=>n?()=>{}:(r(Kf(t)),()=>{r(Kf(void 0))}),[t,r,n]),null},bm={x:0,y:0,width:0,height:0,padding:{top:0,right:0,bottom:0,left:0}},WT=Mt({name:"brush",initialState:bm,reducers:{setBrushSettings(e,t){return t.payload==null?bm:t.payload}}}),KT=WT.reducer;function wm(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Sa(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?wm(Object(r),!0).forEach(function(n){Vy(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):wm(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Vy(e,t,r){return(t=HT(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function HT(e){var t=qT(e,"string");return typeof t=="symbol"?t:t+""}function qT(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var VT=(e,t)=>{var{x:r,y:n}=e,{x:i,y:a}=t;return{x:Math.min(r,i),y:Math.min(n,a),width:Math.abs(i-r),height:Math.abs(a-n)}},GT=e=>{var{x1:t,y1:r,x2:n,y2:i}=e;return VT({x:t,y:r},{x:n,y:i})};class jo{static create(t){return new jo(t)}constructor(t){this.scale=t}get domain(){return this.scale.domain}get range(){return this.scale.range}get rangeMin(){return this.range()[0]}get rangeMax(){return this.range()[1]}get bandwidth(){return this.scale.bandwidth}apply(t){var{bandAware:r,position:n}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t!==void 0){if(n)switch(n){case"start":return this.scale(t);case"middle":{var i=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+i}case"end":{var a=this.bandwidth?this.bandwidth():0;return this.scale(t)+a}default:return this.scale(t)}if(r){var s=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+s}return this.scale(t)}}isInRange(t){var r=this.range(),n=r[0],i=r[r.length-1];return n<=i?t>=n&&t<=i:t>=i&&t<=n}}Vy(jo,"EPS",1e-4);var YT=e=>{var t=Object.keys(e).reduce((r,n)=>Sa(Sa({},r),{},{[n]:jo.create(e[n])}),{});return Sa(Sa({},t),{},{apply(r){var{bandAware:n,position:i}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Object.fromEntries(Object.entries(r).map(a=>{var[s,o]=a;return[s,t[s].apply(o,{bandAware:n,position:i})]}))},isInRange(r){return Object.keys(r).every(n=>t[n].isInRange(r[n]))}})};function ZT(e){return(e%180+180)%180}var XT=function(t){var{width:r,height:n}=t,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,a=ZT(i),s=a*Math.PI/180,o=Math.atan(n/r),c=s>o&&s<Math.PI-o?n/Math.sin(s):r/Math.cos(s);return Math.abs(c)},JT={dots:[],areas:[],lines:[]},Gy=Mt({name:"referenceElements",initialState:JT,reducers:{addDot:(e,t)=>{e.dots.push(t.payload)},removeDot:(e,t)=>{var r=rr(e).dots.findIndex(n=>n===t.payload);r!==-1&&e.dots.splice(r,1)},addArea:(e,t)=>{e.areas.push(t.payload)},removeArea:(e,t)=>{var r=rr(e).areas.findIndex(n=>n===t.payload);r!==-1&&e.areas.splice(r,1)},addLine:(e,t)=>{e.lines.push(t.payload)},removeLine:(e,t)=>{var r=rr(e).lines.findIndex(n=>n===t.payload);r!==-1&&e.lines.splice(r,1)}}}),{addDot:U3,removeDot:B3,addArea:F3,removeArea:z3,addLine:QT,removeLine:eD}=Gy.actions,tD=Gy.reducer,Yy=y.createContext(void 0),rD=e=>{var{children:t}=e,[r]=y.useState("".concat(sn("recharts"),"-clip")),n=yo();if(n==null)return null;var{x:i,y:a,width:s,height:o}=n;return y.createElement(Yy.Provider,{value:r},y.createElement("defs",null,y.createElement("clipPath",{id:r},y.createElement("rect",{x:i,y:a,height:o,width:s}))),t)},nD=()=>y.useContext(Yy);function jm(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Sm(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?jm(Object(r),!0).forEach(function(n){gd(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):jm(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function gd(e,t,r){return(t=iD(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function iD(e){var t=aD(e,"string");return typeof t=="symbol"?t:t+""}function aD(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function hc(){return hc=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},hc.apply(null,arguments)}var sD=(e,t)=>{var r;return y.isValidElement(e)?r=y.cloneElement(e,t):typeof e=="function"?r=e(t):r=y.createElement("line",hc({},t,{className:"recharts-reference-line-line"})),r},oD=(e,t,r,n,i,a,s,o,c)=>{var{x:d,y:u,width:h,height:f}=i;if(r){var{y:m}=c,g=e.y.apply(m,{position:a});if(rt(g)||c.ifOverflow==="discard"&&!e.y.isInRange(g))return null;var p=[{x:d+h,y:g},{x:d,y:g}];return o==="left"?p.reverse():p}if(t){var{x:v}=c,x=e.x.apply(v,{position:a});if(rt(x)||c.ifOverflow==="discard"&&!e.x.isInRange(x))return null;var j=[{x,y:u+f},{x,y:u}];return s==="top"?j.reverse():j}if(n){var{segment:b}=c,S=b.map(_=>e.apply(_,{position:a}));return c.ifOverflow==="discard"&&S.some(_=>!e.isInRange(_))?null:S}return null};function lD(e){var t=Ae();return y.useEffect(()=>(t(QT(e)),()=>{t(eD(e))})),null}function cD(e){var{x:t,y:r,segment:n,xAxisId:i,yAxisId:a,shape:s,className:o,ifOverflow:c}=e,d=Ze(),u=nD(),h=ee(O=>Gt(O,i)),f=ee(O=>fr(O,a)),m=ee(O=>Er(O,"xAxis",i,d)),g=ee(O=>Er(O,"yAxis",a,d)),p=Xs(),v=kt(t),x=kt(r);if(!u||!p||h==null||f==null||m==null||g==null)return null;var j=YT({x:m,y:g}),b=n&&n.length===2,S=oD(j,v,x,b,p,e.position,h.orientation,f.orientation,e);if(!S)return null;var[{x:_,y:N},{x:P,y:E}]=S,w=c==="hidden"?"url(#".concat(u,")"):void 0,A=Sm(Sm({clipPath:w},ue(e,!0)),{},{x1:_,y1:N,x2:P,y2:E});return y.createElement(De,{className:me("recharts-reference-line",o)},sD(s,A),lt.renderCallByParent(e,GT({x1:_,y1:N,x2:P,y2:E})))}function uD(e){return y.createElement(y.Fragment,null,y.createElement(lD,{yAxisId:e.yAxisId,xAxisId:e.xAxisId,ifOverflow:e.ifOverflow,x:e.x,y:e.y}),y.createElement(cD,e))}class vd extends y.Component{render(){return y.createElement(uD,this.props)}}gd(vd,"displayName","ReferenceLine");gd(vd,"defaultProps",{ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle"});function al(e,t){for(var r in e)if({}.hasOwnProperty.call(e,r)&&(!{}.hasOwnProperty.call(t,r)||e[r]!==t[r]))return!1;for(var n in t)if({}.hasOwnProperty.call(t,n)&&!{}.hasOwnProperty.call(e,n))return!1;return!0}function Zy(e,t,r){if(t<1)return[];if(t===1&&r===void 0)return e;for(var n=[],i=0;i<e.length;i+=t)n.push(e[i]);return n}function dD(e,t,r){var n={width:e.width+t.width,height:e.height+t.height};return XT(n,r)}function hD(e,t,r){var n=r==="width",{x:i,y:a,width:s,height:o}=e;return t===1?{start:n?i:a,end:n?i+s:a+o}:{start:n?i+s:a+o,end:n?i:a}}function os(e,t,r,n,i){if(e*t<e*n||e*t>e*i)return!1;var a=r();return e*(t-e*a/2-n)>=0&&e*(t+e*a/2-i)<=0}function fD(e,t){return Zy(e,t+1)}function mD(e,t,r,n,i){for(var a=(n||[]).slice(),{start:s,end:o}=t,c=0,d=1,u=s,h=function(){var g=n?.[c];if(g===void 0)return{v:Zy(n,d)};var p=c,v,x=()=>(v===void 0&&(v=r(g,p)),v),j=g.coordinate,b=c===0||os(e,j,x,u,o);b||(c=0,u=s,d+=1),b&&(u=j+e*(x()/2+i),c+=d)},f;d<=a.length;)if(f=h(),f)return f.v;return[]}function Pm(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Qe(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Pm(Object(r),!0).forEach(function(n){pD(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Pm(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function pD(e,t,r){return(t=gD(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function gD(e){var t=vD(e,"string");return typeof t=="symbol"?t:t+""}function vD(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function yD(e,t,r,n,i){for(var a=(n||[]).slice(),s=a.length,{start:o}=t,{end:c}=t,d=function(f){var m=a[f],g,p=()=>(g===void 0&&(g=r(m,f)),g);if(f===s-1){var v=e*(m.coordinate+e*p()/2-c);a[f]=m=Qe(Qe({},m),{},{tickCoord:v>0?m.coordinate-v*e:m.coordinate})}else a[f]=m=Qe(Qe({},m),{},{tickCoord:m.coordinate});var x=os(e,m.tickCoord,p,o,c);x&&(c=m.tickCoord-e*(p()/2+i),a[f]=Qe(Qe({},m),{},{isShow:!0}))},u=s-1;u>=0;u--)d(u);return a}function xD(e,t,r,n,i,a){var s=(n||[]).slice(),o=s.length,{start:c,end:d}=t;if(a){var u=n[o-1],h=r(u,o-1),f=e*(u.coordinate+e*h/2-d);s[o-1]=u=Qe(Qe({},u),{},{tickCoord:f>0?u.coordinate-f*e:u.coordinate});var m=os(e,u.tickCoord,()=>h,c,d);m&&(d=u.tickCoord-e*(h/2+i),s[o-1]=Qe(Qe({},u),{},{isShow:!0}))}for(var g=a?o-1:o,p=function(j){var b=s[j],S,_=()=>(S===void 0&&(S=r(b,j)),S);if(j===0){var N=e*(b.coordinate-e*_()/2-c);s[j]=b=Qe(Qe({},b),{},{tickCoord:N<0?b.coordinate-N*e:b.coordinate})}else s[j]=b=Qe(Qe({},b),{},{tickCoord:b.coordinate});var P=os(e,b.tickCoord,_,c,d);P&&(c=b.tickCoord+e*(_()/2+i),s[j]=Qe(Qe({},b),{},{isShow:!0}))},v=0;v<g;v++)p(v);return s}function yd(e,t,r){var{tick:n,ticks:i,viewBox:a,minTickGap:s,orientation:o,interval:c,tickFormatter:d,unit:u,angle:h}=e;if(!i||!i.length||!n)return[];if(Y(c)||fn.isSsr){var f;return(f=fD(i,Y(c)?c:0))!==null&&f!==void 0?f:[]}var m=[],g=o==="top"||o==="bottom"?"width":"height",p=u&&g==="width"?_i(u,{fontSize:t,letterSpacing:r}):{width:0,height:0},v=(b,S)=>{var _=typeof d=="function"?d(b.value,S):b.value;return g==="width"?dD(_i(_,{fontSize:t,letterSpacing:r}),p,h):_i(_,{fontSize:t,letterSpacing:r})[g]},x=i.length>=2?ct(i[1].coordinate-i[0].coordinate):1,j=hD(a,x,g);return c==="equidistantPreserveStart"?mD(x,j,v,i,s):(c==="preserveStart"||c==="preserveStartEnd"?m=xD(x,j,v,i,s,c==="preserveStartEnd"):m=yD(x,j,v,i,s),m.filter(b=>b.isShow))}var bD=["viewBox"],wD=["viewBox"];function Mn(){return Mn=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Mn.apply(null,arguments)}function _m(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Te(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?_m(Object(r),!0).forEach(function(n){xd(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_m(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Nm(e,t){if(e==null)return{};var r,n,i=jD(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function jD(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function xd(e,t,r){return(t=SD(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function SD(e){var t=PD(e,"string");return typeof t=="symbol"?t:t+""}function PD(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class Dr extends y.Component{constructor(t){super(t),this.tickRefs=y.createRef(),this.tickRefs.current=[],this.state={fontSize:"",letterSpacing:""}}shouldComponentUpdate(t,r){var{viewBox:n}=t,i=Nm(t,bD),a=this.props,{viewBox:s}=a,o=Nm(a,wD);return!al(n,s)||!al(i,o)||!al(r,this.state)}getTickLineCoord(t){var{x:r,y:n,width:i,height:a,orientation:s,tickSize:o,mirror:c,tickMargin:d}=this.props,u,h,f,m,g,p,v=c?-1:1,x=t.tickSize||o,j=Y(t.tickCoord)?t.tickCoord:t.coordinate;switch(s){case"top":u=h=t.coordinate,m=n+ +!c*a,f=m-v*x,p=f-v*d,g=j;break;case"left":f=m=t.coordinate,h=r+ +!c*i,u=h-v*x,g=u-v*d,p=j;break;case"right":f=m=t.coordinate,h=r+ +c*i,u=h+v*x,g=u+v*d,p=j;break;default:u=h=t.coordinate,m=n+ +c*a,f=m+v*x,p=f+v*d,g=j;break}return{line:{x1:u,y1:f,x2:h,y2:m},tick:{x:g,y:p}}}getTickTextAnchor(){var{orientation:t,mirror:r}=this.props,n;switch(t){case"left":n=r?"start":"end";break;case"right":n=r?"end":"start";break;default:n="middle";break}return n}getTickVerticalAnchor(){var{orientation:t,mirror:r}=this.props;switch(t){case"left":case"right":return"middle";case"top":return r?"start":"end";default:return r?"end":"start"}}renderAxisLine(){var{x:t,y:r,width:n,height:i,orientation:a,mirror:s,axisLine:o}=this.props,c=Te(Te(Te({},ue(this.props,!1)),ue(o,!1)),{},{fill:"none"});if(a==="top"||a==="bottom"){var d=+(a==="top"&&!s||a==="bottom"&&s);c=Te(Te({},c),{},{x1:t,y1:r+d*i,x2:t+n,y2:r+d*i})}else{var u=+(a==="left"&&!s||a==="right"&&s);c=Te(Te({},c),{},{x1:t+u*n,y1:r,x2:t+u*n,y2:r+i})}return y.createElement("line",Mn({},c,{className:me("recharts-cartesian-axis-line",an(o,"className"))}))}static renderTickItem(t,r,n){var i,a=me(r.className,"recharts-cartesian-axis-tick-value");if(y.isValidElement(t))i=y.cloneElement(t,Te(Te({},r),{},{className:a}));else if(typeof t=="function")i=t(Te(Te({},r),{},{className:a}));else{var s="recharts-cartesian-axis-tick-value";typeof t!="boolean"&&(s=me(s,t.className)),i=y.createElement(od,Mn({},r,{className:s}),n)}return i}renderTicks(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[],{tickLine:i,stroke:a,tick:s,tickFormatter:o,unit:c}=this.props,d=yd(Te(Te({},this.props),{},{ticks:n}),t,r),u=this.getTickTextAnchor(),h=this.getTickVerticalAnchor(),f=ue(this.props,!1),m=ue(s,!1),g=Te(Te({},f),{},{fill:"none"},ue(i,!1)),p=d.map((v,x)=>{var{line:j,tick:b}=this.getTickLineCoord(v),S=Te(Te(Te(Te({textAnchor:u,verticalAnchor:h},f),{},{stroke:"none",fill:a},m),b),{},{index:x,payload:v,visibleTicksCount:d.length,tickFormatter:o});return y.createElement(De,Mn({className:"recharts-cartesian-axis-tick",key:"tick-".concat(v.value,"-").concat(v.coordinate,"-").concat(v.tickCoord)},Cs(this.props,v,x)),i&&y.createElement("line",Mn({},g,j,{className:me("recharts-cartesian-axis-tick-line",an(i,"className"))})),s&&Dr.renderTickItem(s,S,"".concat(typeof o=="function"?o(v.value,x):v.value).concat(c||"")))});return p.length>0?y.createElement("g",{className:"recharts-cartesian-axis-ticks"},p):null}render(){var{axisLine:t,width:r,height:n,className:i,hide:a}=this.props;if(a)return null;var{ticks:s}=this.props;return r!=null&&r<=0||n!=null&&n<=0?null:y.createElement(De,{className:me("recharts-cartesian-axis",i),ref:o=>{if(o){var c=o.getElementsByClassName("recharts-cartesian-axis-tick-value");this.tickRefs.current=Array.from(c);var d=c[0];if(d){var u=window.getComputedStyle(d).fontSize,h=window.getComputedStyle(d).letterSpacing;(u!==this.state.fontSize||h!==this.state.letterSpacing)&&this.setState({fontSize:window.getComputedStyle(d).fontSize,letterSpacing:window.getComputedStyle(d).letterSpacing})}}}},t&&this.renderAxisLine(),this.renderTicks(this.state.fontSize,this.state.letterSpacing,s),lt.renderCallByParent(this.props))}}xd(Dr,"displayName","CartesianAxis");xd(Dr,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var _D=["x1","y1","x2","y2","key"],ND=["offset"],kD=["xAxisId","yAxisId"],OD=["xAxisId","yAxisId"];function km(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function tt(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?km(Object(r),!0).forEach(function(n){AD(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):km(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function AD(e,t,r){return(t=ED(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ED(e){var t=CD(e,"string");return typeof t=="symbol"?t:t+""}function CD(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Yr(){return Yr=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Yr.apply(null,arguments)}function ls(e,t){if(e==null)return{};var r,n,i=MD(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function MD(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var TD=e=>{var{fill:t}=e;if(!t||t==="none")return null;var{fillOpacity:r,x:n,y:i,width:a,height:s,ry:o}=e;return y.createElement("rect",{x:n,y:i,ry:o,width:a,height:s,stroke:"none",fill:t,fillOpacity:r,className:"recharts-cartesian-grid-bg"})};function Xy(e,t){var r;if(y.isValidElement(e))r=y.cloneElement(e,t);else if(typeof e=="function")r=e(t);else{var{x1:n,y1:i,x2:a,y2:s,key:o}=t,c=ls(t,_D),d=ue(c,!1),u=ls(d,ND);r=y.createElement("line",Yr({},u,{x1:n,y1:i,x2:a,y2:s,fill:"none",key:o}))}return r}function DD(e){var{x:t,width:r,horizontal:n=!0,horizontalPoints:i}=e;if(!n||!i||!i.length)return null;var a=ls(e,kD),s=i.map((o,c)=>{var d=tt(tt({},a),{},{x1:t,y1:o,x2:t+r,y2:o,key:"line-".concat(c),index:c});return Xy(n,d)});return y.createElement("g",{className:"recharts-cartesian-grid-horizontal"},s)}function ID(e){var{y:t,height:r,vertical:n=!0,verticalPoints:i}=e;if(!n||!i||!i.length)return null;var a=ls(e,OD),s=i.map((o,c)=>{var d=tt(tt({},a),{},{x1:o,y1:t,x2:o,y2:t+r,key:"line-".concat(c),index:c});return Xy(n,d)});return y.createElement("g",{className:"recharts-cartesian-grid-vertical"},s)}function $D(e){var{horizontalFill:t,fillOpacity:r,x:n,y:i,width:a,height:s,horizontalPoints:o,horizontal:c=!0}=e;if(!c||!t||!t.length)return null;var d=o.map(h=>Math.round(h+i-i)).sort((h,f)=>h-f);i!==d[0]&&d.unshift(0);var u=d.map((h,f)=>{var m=!d[f+1],g=m?i+s-h:d[f+1]-h;if(g<=0)return null;var p=f%t.length;return y.createElement("rect",{key:"react-".concat(f),y:h,x:n,height:g,width:a,stroke:"none",fill:t[p],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return y.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},u)}function LD(e){var{vertical:t=!0,verticalFill:r,fillOpacity:n,x:i,y:a,width:s,height:o,verticalPoints:c}=e;if(!t||!r||!r.length)return null;var d=c.map(h=>Math.round(h+i-i)).sort((h,f)=>h-f);i!==d[0]&&d.unshift(0);var u=d.map((h,f)=>{var m=!d[f+1],g=m?i+s-h:d[f+1]-h;if(g<=0)return null;var p=f%r.length;return y.createElement("rect",{key:"react-".concat(f),x:h,y:a,width:g,height:o,stroke:"none",fill:r[p],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return y.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},u)}var RD=(e,t)=>{var{xAxis:r,width:n,height:i,offset:a}=e;return zg(yd(tt(tt(tt({},Dr.defaultProps),r),{},{ticks:Wg(r),viewBox:{x:0,y:0,width:n,height:i}})),a.left,a.left+a.width,t)},UD=(e,t)=>{var{yAxis:r,width:n,height:i,offset:a}=e;return zg(yd(tt(tt(tt({},Dr.defaultProps),r),{},{ticks:Wg(r),viewBox:{x:0,y:0,width:n,height:i}})),a.top,a.top+a.height,t)},BD={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[],xAxisId:0,yAxisId:0};function Ln(e){var t=cu(),r=uu(),n=qg(),i=tt(tt({},Vt(e,BD)),{},{x:Y(e.x)?e.x:n.left,y:Y(e.y)?e.y:n.top,width:Y(e.width)?e.width:n.width,height:Y(e.height)?e.height:n.height}),{xAxisId:a,yAxisId:s,x:o,y:c,width:d,height:u,syncWithTicks:h,horizontalValues:f,verticalValues:m}=i,g=Ze(),p=ee(w=>$f(w,"xAxis",a,g)),v=ee(w=>$f(w,"yAxis",s,g));if(!Y(d)||d<=0||!Y(u)||u<=0||!Y(o)||o!==+o||!Y(c)||c!==+c)return null;var x=i.verticalCoordinatesGenerator||RD,j=i.horizontalCoordinatesGenerator||UD,{horizontalPoints:b,verticalPoints:S}=i;if((!b||!b.length)&&typeof j=="function"){var _=f&&f.length,N=j({yAxis:v?tt(tt({},v),{},{ticks:_?f:v.ticks}):void 0,width:t,height:r,offset:n},_?!0:h);Si(Array.isArray(N),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(typeof N,"]")),Array.isArray(N)&&(b=N)}if((!S||!S.length)&&typeof x=="function"){var P=m&&m.length,E=x({xAxis:p?tt(tt({},p),{},{ticks:P?m:p.ticks}):void 0,width:t,height:r,offset:n},P?!0:h);Si(Array.isArray(E),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(typeof E,"]")),Array.isArray(E)&&(S=E)}return y.createElement("g",{className:"recharts-cartesian-grid"},y.createElement(TD,{fill:i.fill,fillOpacity:i.fillOpacity,x:i.x,y:i.y,width:i.width,height:i.height,ry:i.ry}),y.createElement($D,Yr({},i,{horizontalPoints:b})),y.createElement(LD,Yr({},i,{verticalPoints:S})),y.createElement(DD,Yr({},i,{offset:n,horizontalPoints:b,xAxis:p,yAxis:v})),y.createElement(ID,Yr({},i,{offset:n,verticalPoints:S,xAxis:p,yAxis:v})))}Ln.displayName="CartesianGrid";var Jy=(e,t,r,n)=>Et(e,"xAxis",t,n),Qy=(e,t,r,n)=>Ht(e,"xAxis",t,n),ex=(e,t,r,n)=>Et(e,"yAxis",r,n),tx=(e,t,r,n)=>Ht(e,"yAxis",r,n),FD=$([ge,Jy,ex,Qy,tx],(e,t,r,n,i)=>qt(e,"xAxis")?cn(t,n,!1):cn(r,i,!1)),zD=(e,t,r,n,i)=>i,WD=$([Ji,zD],(e,t)=>{if(e.some(r=>r.type==="line"&&t.dataKey===r.dataKey&&t.data===r.data))return t}),KD=$([ge,Jy,ex,Qy,tx,WD,FD,io],(e,t,r,n,i,a,s,o)=>{var{chartData:c,dataStartIndex:d,dataEndIndex:u}=o;if(!(a==null||t==null||r==null||n==null||i==null||n.length===0||i.length===0||s==null)){var{dataKey:h,data:f}=a,m;if(f!=null&&f.length>0?m=f:m=c?.slice(d,u+1),m!=null)return cI({layout:e,xAxis:t,yAxis:r,xAxisTicks:n,yAxisTicks:i,dataKey:h,bandSize:s,displayedData:m})}}),HD=["type","layout","connectNulls","needClip"],qD=["activeDot","animateNewValues","animationBegin","animationDuration","animationEasing","connectNulls","dot","hide","isAnimationActive","label","legendType","xAxisId","yAxisId"];function rx(e,t){if(e==null)return{};var r,n,i=VD(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function VD(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function Om(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Lt(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Om(Object(r),!0).forEach(function(n){So(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Om(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function So(e,t,r){return(t=GD(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function GD(e){var t=YD(e,"string");return typeof t=="symbol"?t:t+""}function YD(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Yn(){return Yn=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Yn.apply(null,arguments)}var ZD=e=>{var{dataKey:t,name:r,stroke:n,legendType:i,hide:a}=e;return[{inactive:a,dataKey:t,type:i,color:n,value:Jn(r,t),payload:e}]};function XD(e){var{dataKey:t,data:r,stroke:n,strokeWidth:i,fill:a,name:s,hide:o,unit:c}=e;return{dataDefinedOnItem:r,positions:void 0,settings:{stroke:n,strokeWidth:i,fill:a,dataKey:t,nameKey:void 0,name:Jn(s,t),hide:o,type:e.tooltipType,color:e.stroke,unit:c}}}var nx=(e,t)=>"".concat(t,"px ").concat(e-t,"px");function JD(e,t){for(var r=e.length%2!==0?[...e,0]:e,n=[],i=0;i<t;++i)n=[...n,...r];return n}var QD=(e,t,r)=>{var n=r.reduce((h,f)=>h+f);if(!n)return nx(t,e);for(var i=Math.floor(e/n),a=e%n,s=t-e,o=[],c=0,d=0;c<r.length;d+=r[c],++c)if(d+r[c]>a){o=[...r.slice(0,c),a-d];break}var u=o.length%2===0?[0,s]:[s];return[...JD(r,i),...o,...u].map(h=>"".concat(h,"px")).join(", ")};function eI(e,t){var r;if(y.isValidElement(e))r=y.cloneElement(e,t);else if(typeof e=="function")r=e(t);else{var n=me("recharts-line-dot",typeof e!="boolean"?e.className:"");r=y.createElement(cd,Yn({},t,{className:n}))}return r}function tI(e,t){return e==null?!1:t?!0:e.length===1}function rI(e){var{clipPathId:t,points:r,props:n}=e,{dot:i,dataKey:a,needClip:s}=n;if(!tI(r,i))return null;var o=Ms(i),c=ue(n,!1),d=ue(i,!0),u=r.map((f,m)=>{var g=Lt(Lt(Lt({key:"dot-".concat(m),r:3},c),d),{},{index:m,cx:f.x,cy:f.y,dataKey:a,value:f.value,payload:f.payload,points:r});return eI(i,g)}),h={clipPath:s?"url(#clipPath-".concat(o?"":"dots-").concat(t,")"):null};return y.createElement(De,Yn({className:"recharts-line-dots",key:"dots"},h),u)}function fc(e){var{clipPathId:t,pathRef:r,points:n,strokeDasharray:i,props:a,showLabels:s}=e,{type:o,layout:c,connectNulls:d,needClip:u}=a,h=rx(a,HD),f=Lt(Lt({},ue(h,!0)),{},{fill:"none",className:"recharts-line-curve",clipPath:u?"url(#clipPath-".concat(t,")"):null,points:n,type:o,layout:c,connectNulls:d,strokeDasharray:i??a.strokeDasharray});return y.createElement(y.Fragment,null,n?.length>1&&y.createElement(wi,Yn({},f,{pathRef:r})),y.createElement(rI,{points:n,clipPathId:t,props:a}),s&&ir.renderCallByParent(a,n))}function nI(e){try{return e&&e.getTotalLength&&e.getTotalLength()||0}catch{return 0}}function iI(e){var{clipPathId:t,props:r,pathRef:n,previousPointsRef:i,longestAnimatedLengthRef:a}=e,{points:s,strokeDasharray:o,isAnimationActive:c,animationBegin:d,animationDuration:u,animationEasing:h,animateNewValues:f,width:m,height:g,onAnimationEnd:p,onAnimationStart:v}=r,x=i.current,j=hd(r,"recharts-line-"),[b,S]=y.useState(!1),_=y.useCallback(()=>{typeof p=="function"&&p(),S(!1)},[p]),N=y.useCallback(()=>{typeof v=="function"&&v(),S(!0)},[v]),P=nI(n.current),E=a.current;return y.createElement(Ar,{begin:d,duration:u,isActive:c,easing:h,from:{t:0},to:{t:1},onAnimationEnd:_,onAnimationStart:N,key:j},w=>{var{t:A}=w,O=$t(E,P+E),D=Math.min(O(A),P),R;if(o){var C="".concat(o).split(/[,\s]+/gim).map(L=>parseFloat(L));R=QD(D,P,C)}else R=nx(P,D);if(x){var k=x.length/s.length,I=A===1?s:s.map((L,K)=>{var F=Math.floor(K*k);if(x[F]){var G=x[F],X=$t(G.x,L.x),z=$t(G.y,L.y);return Lt(Lt({},L),{},{x:X(A),y:z(A)})}if(f){var J=$t(m*2,L.x),re=$t(g/2,L.y);return Lt(Lt({},L),{},{x:J(A),y:re(A)})}return Lt(Lt({},L),{},{x:L.x,y:L.y})});return i.current=I,y.createElement(fc,{props:r,points:I,clipPathId:t,pathRef:n,showLabels:!b,strokeDasharray:R})}return A>0&&P>0&&(i.current=s,a.current=D),y.createElement(fc,{props:r,points:s,clipPathId:t,pathRef:n,showLabels:!b,strokeDasharray:R})})}function aI(e){var{clipPathId:t,props:r}=e,{points:n,isAnimationActive:i}=r,a=y.useRef(null),s=y.useRef(0),o=y.useRef(null),c=a.current;return i&&n&&n.length&&c!==n?y.createElement(iI,{props:r,clipPathId:t,previousPointsRef:a,longestAnimatedLengthRef:s,pathRef:o}):y.createElement(fc,{props:r,points:n,clipPathId:t,pathRef:o,showLabels:!0})}var sI=(e,t)=>({x:e.x,y:e.y,value:e.value,errorVal:Fe(e.payload,t)});class oI extends y.Component{constructor(){super(...arguments),So(this,"id",sn("recharts-line-"))}render(){var t,{hide:r,dot:n,points:i,className:a,xAxisId:s,yAxisId:o,top:c,left:d,width:u,height:h,id:f,needClip:m,layout:g}=this.props;if(r)return null;var p=me("recharts-line",a),v=we(f)?this.id:f,{r:x=3,strokeWidth:j=2}=(t=ue(n,!1))!==null&&t!==void 0?t:{r:3,strokeWidth:2},b=Ms(n),S=x*2+j;return y.createElement(y.Fragment,null,y.createElement(De,{className:p},m&&y.createElement("defs",null,y.createElement(md,{clipPathId:v,xAxisId:s,yAxisId:o}),!b&&y.createElement("clipPath",{id:"clipPath-dots-".concat(v)},y.createElement("rect",{x:d-S/2,y:c-S/2,width:u+S,height:h+S}))),y.createElement(aI,{props:this.props,clipPathId:v}),y.createElement(Uy,{direction:g==="horizontal"?"y":"x"},y.createElement($y,{xAxisId:s,yAxisId:o,data:i,dataPointFormatter:sI,errorBarOffset:0},this.props.children))),y.createElement(cc,{activeDot:this.props.activeDot,points:i,mainColor:this.props.stroke,itemDataKey:this.props.dataKey}))}}var ix={activeDot:!0,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",connectNulls:!1,dot:!0,fill:"#fff",hide:!1,isAnimationActive:!fn.isSsr,label:!1,legendType:"line",stroke:"#3182bd",strokeWidth:1,xAxisId:0,yAxisId:0};function lI(e){var t=Vt(e,ix),{activeDot:r,animateNewValues:n,animationBegin:i,animationDuration:a,animationEasing:s,connectNulls:o,dot:c,hide:d,isAnimationActive:u,label:h,legendType:f,xAxisId:m,yAxisId:g}=t,p=rx(t,qD),{needClip:v}=xo(m,g),{height:x,width:j,x:b,y:S}=yo(),_=qi(),N=Ze(),P=y.useMemo(()=>({dataKey:e.dataKey,data:e.data}),[e.dataKey,e.data]),E=ee(w=>KD(w,m,g,N,P));return _!=="horizontal"&&_!=="vertical"?null:y.createElement(oI,Yn({},p,{connectNulls:o,dot:c,activeDot:r,animateNewValues:n,animationBegin:i,animationDuration:a,animationEasing:s,isAnimationActive:u,hide:d,label:h,legendType:f,xAxisId:m,yAxisId:g,points:E,layout:_,height:x,width:j,left:b,top:S,needClip:v}))}function cI(e){var{layout:t,xAxis:r,yAxis:n,xAxisTicks:i,yAxisTicks:a,dataKey:s,bandSize:o,displayedData:c}=e;return c.map((d,u)=>{var h=Fe(d,s);return t==="horizontal"?{x:Fa({axis:r,ticks:i,bandSize:o,entry:d,index:u}),y:we(h)?null:n.scale(h),value:h,payload:d}:{x:we(h)?null:r.scale(h),y:Fa({axis:n,ticks:a,bandSize:o,entry:d,index:u}),value:h,payload:d}})}class Po extends y.PureComponent{render(){return y.createElement(fd,{type:"line",data:this.props.data,xAxisId:this.props.xAxisId,yAxisId:this.props.yAxisId,zAxisId:0,dataKey:this.props.dataKey,stackId:void 0,hide:this.props.hide,barSize:void 0},y.createElement(dd,{legendPayload:ZD(this.props)}),y.createElement(ud,{fn:XD,args:this.props}),y.createElement(lI,this.props))}}So(Po,"displayName","Line");So(Po,"defaultProps",ix);var ax=(e,t,r,n)=>Et(e,"xAxis",t,n),sx=(e,t,r,n)=>Ht(e,"xAxis",t,n),ox=(e,t,r,n)=>Et(e,"yAxis",r,n),lx=(e,t,r,n)=>Ht(e,"yAxis",r,n),uI=$([ge,ax,ox,sx,lx],(e,t,r,n,i)=>qt(e,"xAxis")?cn(t,n,!1):cn(r,i,!1)),dI=(e,t,r,n,i)=>{var a,s=ge(e),o=qt(s,"xAxis"),c;if(o?c=Li(e,"yAxis",r,n):c=Li(e,"xAxis",t,n),c!=null){var{dataKey:d,stackId:u}=i;if(u!=null){var h=(a=c[u])===null||a===void 0?void 0:a.stackedData;return h?.find(f=>f.key===d)}}},hI=(e,t,r,n,i)=>i,fI=$([Ji,hI],(e,t)=>{if(e.some(r=>r.type==="area"&&t.dataKey===r.dataKey&&su(t.stackId)===r.stackId&&t.data===r.data))return t}),mI=$([ge,ax,ox,sx,lx,dI,io,uI,fI],(e,t,r,n,i,a,s,o,c)=>{var{chartData:d,dataStartIndex:u,dataEndIndex:h}=s;if(!(c==null||e!=="horizontal"&&e!=="vertical"||t==null||r==null||n==null||i==null||n.length===0||i.length===0||o==null)){var{data:f}=c,m;if(f&&f.length>0?m=f:m=d?.slice(u,h+1),m!=null){var g=void 0;return TI({layout:e,xAxis:t,yAxis:r,xAxisTicks:n,yAxisTicks:i,dataStartIndex:u,areaSettings:c,stackedData:a,displayedData:m,chartBaseValue:g,bandSize:o})}}}),pI=["layout","type","stroke","connectNulls","isRange"],gI=["activeDot","animationBegin","animationDuration","animationEasing","connectNulls","dot","fill","fillOpacity","hide","isAnimationActive","legendType","stroke","xAxisId","yAxisId"];function cx(e,t){if(e==null)return{};var r,n,i=vI(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function vI(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function Am(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Zr(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Am(Object(r),!0).forEach(function(n){_o(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Am(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function _o(e,t,r){return(t=yI(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function yI(e){var t=xI(e,"string");return typeof t=="symbol"?t:t+""}function xI(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function kr(){return kr=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},kr.apply(null,arguments)}function cs(e,t){return e&&e!=="none"?e:t}var bI=e=>{var{dataKey:t,name:r,stroke:n,fill:i,legendType:a,hide:s}=e;return[{inactive:s,dataKey:t,type:a,color:cs(n,i),value:Jn(r,t),payload:e}]};function wI(e){var{dataKey:t,data:r,stroke:n,strokeWidth:i,fill:a,name:s,hide:o,unit:c}=e;return{dataDefinedOnItem:r,positions:void 0,settings:{stroke:n,strokeWidth:i,fill:a,dataKey:t,nameKey:void 0,name:Jn(s,t),hide:o,type:e.tooltipType,color:cs(n,a),unit:c}}}var jI=(e,t)=>{var r;if(y.isValidElement(e))r=y.cloneElement(e,t);else if(typeof e=="function")r=e(t);else{var n=me("recharts-area-dot",typeof e!="boolean"?e.className:"");r=y.createElement(cd,kr({},t,{className:n}))}return r};function SI(e,t){return e==null?!1:t?!0:e.length===1}function PI(e){var{clipPathId:t,points:r,props:n}=e,{needClip:i,dot:a,dataKey:s}=n;if(!SI(r,a))return null;var o=Ms(a),c=ue(n,!1),d=ue(a,!0),u=r.map((f,m)=>{var g=Zr(Zr(Zr({key:"dot-".concat(m),r:3},c),d),{},{index:m,cx:f.x,cy:f.y,dataKey:s,value:f.value,payload:f.payload,points:r});return jI(a,g)}),h={clipPath:i?"url(#clipPath-".concat(o?"":"dots-").concat(t,")"):void 0};return y.createElement(De,kr({className:"recharts-area-dots"},h),u)}function mc(e){var{points:t,baseLine:r,needClip:n,clipPathId:i,props:a,showLabels:s}=e,{layout:o,type:c,stroke:d,connectNulls:u,isRange:h}=a,f=cx(a,pI);return y.createElement(y.Fragment,null,t?.length>1&&y.createElement(De,{clipPath:n?"url(#clipPath-".concat(i,")"):void 0},y.createElement(wi,kr({},ue(f,!0),{points:t,connectNulls:u,type:c,baseLine:r,layout:o,stroke:"none",className:"recharts-area-area"})),d!=="none"&&y.createElement(wi,kr({},ue(a,!1),{className:"recharts-area-curve",layout:o,type:c,connectNulls:u,fill:"none",points:t})),d!=="none"&&h&&y.createElement(wi,kr({},ue(a,!1),{className:"recharts-area-curve",layout:o,type:c,connectNulls:u,fill:"none",points:r}))),y.createElement(PI,{points:t,props:a,clipPathId:i}),s&&ir.renderCallByParent(a,t))}function _I(e){var{alpha:t,baseLine:r,points:n,strokeWidth:i}=e,a=n[0].y,s=n[n.length-1].y;if(!Ye(a)||!Ye(s))return null;var o=t*Math.abs(a-s),c=Math.max(...n.map(d=>d.x||0));return Y(r)?c=Math.max(r,c):r&&Array.isArray(r)&&r.length&&(c=Math.max(...r.map(d=>d.x||0),c)),Y(c)?y.createElement("rect",{x:0,y:a<s?a:a-o,width:c+(i?parseInt("".concat(i),10):1),height:Math.floor(o)}):null}function NI(e){var{alpha:t,baseLine:r,points:n,strokeWidth:i}=e,a=n[0].x,s=n[n.length-1].x;if(!Ye(a)||!Ye(s))return null;var o=t*Math.abs(a-s),c=Math.max(...n.map(d=>d.y||0));return Y(r)?c=Math.max(r,c):r&&Array.isArray(r)&&r.length&&(c=Math.max(...r.map(d=>d.y||0),c)),Y(c)?y.createElement("rect",{x:a<s?a:a-o,y:0,width:o,height:Math.floor(c+(i?parseInt("".concat(i),10):1))}):null}function kI(e){var{alpha:t,layout:r,points:n,baseLine:i,strokeWidth:a}=e;return r==="vertical"?y.createElement(_I,{alpha:t,points:n,baseLine:i,strokeWidth:a}):y.createElement(NI,{alpha:t,points:n,baseLine:i,strokeWidth:a})}function OI(e){var{needClip:t,clipPathId:r,props:n,previousPointsRef:i,previousBaselineRef:a}=e,{points:s,baseLine:o,isAnimationActive:c,animationBegin:d,animationDuration:u,animationEasing:h,onAnimationStart:f,onAnimationEnd:m}=n,g=hd(n,"recharts-area-"),[p,v]=y.useState(!0),x=y.useCallback(()=>{typeof m=="function"&&m(),v(!1)},[m]),j=y.useCallback(()=>{typeof f=="function"&&f(),v(!0)},[f]),b=i.current,S=a.current;return y.createElement(Ar,{begin:d,duration:u,isActive:c,easing:h,from:{t:0},to:{t:1},onAnimationEnd:x,onAnimationStart:j,key:g},_=>{var{t:N}=_;if(b){var P=b.length/s.length,E=N===1?s:s.map((A,O)=>{var D=Math.floor(O*P);if(b[D]){var R=b[D];return Zr(Zr({},A),{},{x:_n(R.x,A.x,N),y:_n(R.y,A.y,N)})}return A}),w;return Y(o)?w=_n(S,o,N):we(o)||rt(o)?w=_n(S,0,N):w=o.map((A,O)=>{var D=Math.floor(O*P);if(Array.isArray(S)&&S[D]){var R=S[D];return Zr(Zr({},A),{},{x:_n(R.x,A.x,N),y:_n(R.y,A.y,N)})}return A}),N>0&&(i.current=E,a.current=w),y.createElement(mc,{points:E,baseLine:w,needClip:t,clipPathId:r,props:n,showLabels:!p})}return N>0&&(i.current=s,a.current=o),y.createElement(De,null,y.createElement("defs",null,y.createElement("clipPath",{id:"animationClipPath-".concat(r)},y.createElement(kI,{alpha:N,points:s,baseLine:o,layout:n.layout,strokeWidth:n.strokeWidth}))),y.createElement(De,{clipPath:"url(#animationClipPath-".concat(r,")")},y.createElement(mc,{points:s,baseLine:o,needClip:t,clipPathId:r,props:n,showLabels:!0})))})}function AI(e){var{needClip:t,clipPathId:r,props:n}=e,{points:i,baseLine:a,isAnimationActive:s}=n,o=y.useRef(null),c=y.useRef(),d=o.current,u=c.current;return s&&i&&i.length&&(d!==i||u!==a)?y.createElement(OI,{needClip:t,clipPathId:r,props:n,previousPointsRef:o,previousBaselineRef:c}):y.createElement(mc,{points:i,baseLine:a,needClip:t,clipPathId:r,props:n,showLabels:!0})}class EI extends y.PureComponent{constructor(){super(...arguments),_o(this,"id",sn("recharts-area-"))}render(){var t,{hide:r,dot:n,points:i,className:a,top:s,left:o,needClip:c,xAxisId:d,yAxisId:u,width:h,height:f,id:m,baseLine:g}=this.props;if(r)return null;var p=me("recharts-area",a),v=we(m)?this.id:m,{r:x=3,strokeWidth:j=2}=(t=ue(n,!1))!==null&&t!==void 0?t:{r:3,strokeWidth:2},b=Ms(n),S=x*2+j;return y.createElement(y.Fragment,null,y.createElement(De,{className:p},c&&y.createElement("defs",null,y.createElement(md,{clipPathId:v,xAxisId:d,yAxisId:u}),!b&&y.createElement("clipPath",{id:"clipPath-dots-".concat(v)},y.createElement("rect",{x:o-S/2,y:s-S/2,width:h+S,height:f+S}))),y.createElement(AI,{needClip:c,clipPathId:v,props:this.props})),y.createElement(cc,{points:i,mainColor:cs(this.props.stroke,this.props.fill),itemDataKey:this.props.dataKey,activeDot:this.props.activeDot}),this.props.isRange&&Array.isArray(g)&&y.createElement(cc,{points:g,mainColor:cs(this.props.stroke,this.props.fill),itemDataKey:this.props.dataKey,activeDot:this.props.activeDot}))}}var ux={activeDot:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",connectNulls:!1,dot:!1,fill:"#3182bd",fillOpacity:.6,hide:!1,isAnimationActive:!fn.isSsr,legendType:"line",stroke:"#3182bd",xAxisId:0,yAxisId:0};function CI(e){var t,r=Vt(e,ux),{activeDot:n,animationBegin:i,animationDuration:a,animationEasing:s,connectNulls:o,dot:c,fill:d,fillOpacity:u,hide:h,isAnimationActive:f,legendType:m,stroke:g,xAxisId:p,yAxisId:v}=r,x=cx(r,gI),j=qi(),b=ly(),{needClip:S}=xo(p,v),_=Ze(),N=y.useMemo(()=>({baseValue:e.baseValue,stackId:e.stackId,connectNulls:o,data:e.data,dataKey:e.dataKey}),[e.baseValue,e.stackId,o,e.data,e.dataKey]),{points:P,isRange:E,baseLine:w}=(t=ee(C=>mI(C,p,v,_,N)))!==null&&t!==void 0?t:{},{height:A,width:O,x:D,y:R}=yo();return j!=="horizontal"&&j!=="vertical"||b!=="AreaChart"&&b!=="ComposedChart"?null:y.createElement(EI,kr({},x,{activeDot:n,animationBegin:i,animationDuration:a,animationEasing:s,baseLine:w,connectNulls:o,dot:c,fill:d,fillOpacity:u,height:A,hide:h,layout:j,isAnimationActive:f,isRange:E,legendType:m,needClip:S,points:P,stroke:g,width:O,left:D,top:R,xAxisId:p,yAxisId:v}))}var MI=(e,t,r,n,i)=>{var a=r??t;if(Y(a))return a;var s=e==="horizontal"?i:n,o=s.scale.domain();if(s.type==="number"){var c=Math.max(o[0],o[1]),d=Math.min(o[0],o[1]);return a==="dataMin"?d:a==="dataMax"||c<0?c:Math.max(Math.min(o[0],o[1]),0)}return a==="dataMin"?o[0]:a==="dataMax"?o[1]:o[0]};function TI(e){var{areaSettings:{connectNulls:t,baseValue:r,dataKey:n},stackedData:i,layout:a,chartBaseValue:s,xAxis:o,yAxis:c,displayedData:d,dataStartIndex:u,xAxisTicks:h,yAxisTicks:f,bandSize:m}=e,g=i&&i.length,p=MI(a,s,r,o,c),v=a==="horizontal",x=!1,j=d.map((S,_)=>{var N;g?N=i[u+_]:(N=Fe(S,n),Array.isArray(N)?x=!0:N=[p,N]);var P=N[1]==null||g&&!t&&Fe(S,n)==null;return v?{x:Fa({axis:o,ticks:h,bandSize:m,entry:S,index:_}),y:P?null:c.scale(N[1]),value:N,payload:S}:{x:P?null:o.scale(N[1]),y:Fa({axis:c,ticks:f,bandSize:m,entry:S,index:_}),value:N,payload:S}}),b;return g||x?b=j.map(S=>{var _=Array.isArray(S.value)?S.value[0]:null;return v?{x:S.x,y:_!=null&&S.y!=null?c.scale(_):null}:{x:_!=null?o.scale(_):null,y:S.y}}):b=v?c.scale(p):o.scale(p),{points:j,baseLine:b,isRange:x}}class bd extends y.PureComponent{render(){return y.createElement(fd,{type:"area",data:this.props.data,dataKey:this.props.dataKey,xAxisId:this.props.xAxisId,yAxisId:this.props.yAxisId,zAxisId:0,stackId:this.props.stackId,hide:this.props.hide,barSize:void 0},y.createElement(dd,{legendPayload:bI(this.props)}),y.createElement(ud,{fn:wI,args:this.props}),y.createElement(CI,this.props))}}_o(bd,"displayName","Area");_o(bd,"defaultProps",ux);function Em(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Cm(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Em(Object(r),!0).forEach(function(n){DI(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Em(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function DI(e,t,r){return(t=II(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function II(e){var t=$I(e,"string");return typeof t=="symbol"?t:t+""}function $I(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var LI={xAxis:{},yAxis:{},zAxis:{}},dx=Mt({name:"cartesianAxis",initialState:LI,reducers:{addXAxis(e,t){e.xAxis[t.payload.id]=t.payload},removeXAxis(e,t){delete e.xAxis[t.payload.id]},addYAxis(e,t){e.yAxis[t.payload.id]=t.payload},removeYAxis(e,t){delete e.yAxis[t.payload.id]},addZAxis(e,t){e.zAxis[t.payload.id]=t.payload},removeZAxis(e,t){delete e.zAxis[t.payload.id]},updateYAxisWidth(e,t){var{id:r,width:n}=t.payload;e.yAxis[r]&&(e.yAxis[r]=Cm(Cm({},e.yAxis[r]),{},{width:n}))}}}),{addXAxis:RI,removeXAxis:UI,addYAxis:BI,removeYAxis:FI,addZAxis:W3,removeZAxis:K3,updateYAxisWidth:zI}=dx.actions,WI=dx.reducer,KI=["children"],HI=["dangerouslySetInnerHTML","ticks"];function hx(e,t,r){return(t=qI(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function qI(e){var t=VI(e,"string");return typeof t=="symbol"?t:t+""}function VI(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function pc(){return pc=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},pc.apply(null,arguments)}function fx(e,t){if(e==null)return{};var r,n,i=GI(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function GI(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function YI(e){var t=Ae(),r=y.useMemo(()=>{var a=fx(e,KI);return a},[e]),n=ee(a=>Gt(a,r.id)),i=r===n;return y.useEffect(()=>(t(RI(r)),()=>{t(UI(r))}),[r,t]),i?e.children:null}var ZI=e=>{var{xAxisId:t,className:r}=e,n=ee(Hg),i=Ze(),a="xAxis",s=ee(h=>Er(h,a,t,i)),o=ee(h=>Fv(h,a,t,i)),c=ee(h=>Lv(h,t)),d=ee(h=>vA(h,t));if(c==null||d==null)return null;var u=fx(e,HI);return y.createElement(Dr,pc({},u,{scale:s,x:d.x,y:d.y,width:c.width,height:c.height,className:me("recharts-".concat(a," ").concat(a),r),viewBox:n,ticks:o}))},XI=e=>{var t,r,n,i,a;return y.createElement(YI,{interval:(t=e.interval)!==null&&t!==void 0?t:"preserveEnd",id:e.xAxisId,scale:e.scale,type:e.type,padding:e.padding,allowDataOverflow:e.allowDataOverflow,domain:e.domain,dataKey:e.dataKey,allowDuplicatedCategory:e.allowDuplicatedCategory,allowDecimals:e.allowDecimals,tickCount:e.tickCount,includeHidden:(r=e.includeHidden)!==null&&r!==void 0?r:!1,reversed:e.reversed,ticks:e.ticks,height:e.height,orientation:e.orientation,mirror:e.mirror,hide:e.hide,unit:e.unit,name:e.name,angle:(n=e.angle)!==null&&n!==void 0?n:0,minTickGap:(i=e.minTickGap)!==null&&i!==void 0?i:5,tick:(a=e.tick)!==null&&a!==void 0?a:!0,tickFormatter:e.tickFormatter},y.createElement(ZI,e))};class tn extends y.Component{render(){return y.createElement(XI,this.props)}}hx(tn,"displayName","XAxis");hx(tn,"defaultProps",{allowDataOverflow:ht.allowDataOverflow,allowDecimals:ht.allowDecimals,allowDuplicatedCategory:ht.allowDuplicatedCategory,height:ht.height,hide:!1,mirror:ht.mirror,orientation:ht.orientation,padding:ht.padding,reversed:ht.reversed,scale:ht.scale,tickCount:ht.tickCount,type:ht.type,xAxisId:0});var JI=e=>{var{ticks:t,label:r,labelGapWithTick:n=5,tickSize:i=0,tickMargin:a=0}=e,s=0;if(t){t.forEach(u=>{if(u){var h=u.getBoundingClientRect();h.width>s&&(s=h.width)}});var o=r?r.getBoundingClientRect().width:0,c=i+a,d=s+c+o+(r?n:0);return Math.round(d)}return 0},QI=["dangerouslySetInnerHTML","ticks"];function mx(e,t,r){return(t=e$(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function e$(e){var t=t$(e,"string");return typeof t=="symbol"?t:t+""}function t$(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function gc(){return gc=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},gc.apply(null,arguments)}function r$(e,t){if(e==null)return{};var r,n,i=n$(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function n$(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function i$(e){var t=Ae();return y.useEffect(()=>(t(BI(e)),()=>{t(FI(e))}),[e,t]),null}var a$=e=>{var t,{yAxisId:r,className:n,width:i,label:a}=e,s=y.useRef(null),o=y.useRef(null),c=ee(Hg),d=Ze(),u=Ae(),h="yAxis",f=ee(x=>Er(x,h,r,d)),m=ee(x=>Rv(x,r)),g=ee(x=>yA(x,r)),p=ee(x=>Fv(x,h,r,d));if(y.useLayoutEffect(()=>{var x;if(!(i!=="auto"||!m||ld(a)||y.isValidElement(a))){var j=s.current,b=j==null||(x=j.tickRefs)===null||x===void 0?void 0:x.current,{tickSize:S,tickMargin:_}=j.props,N=JI({ticks:b,label:o.current,labelGapWithTick:5,tickSize:S,tickMargin:_});Math.round(m.width)!==Math.round(N)&&u(zI({id:r,width:N}))}},[s,s==null||(t=s.current)===null||t===void 0||(t=t.tickRefs)===null||t===void 0?void 0:t.current,m?.width,m,u,a,r,i]),m==null||g==null)return null;var v=r$(e,QI);return y.createElement(Dr,gc({},v,{ref:s,labelRef:o,scale:f,x:g.x,y:g.y,width:m.width,height:m.height,className:me("recharts-".concat(h," ").concat(h),n),viewBox:c,ticks:p}))},s$=e=>{var t,r,n,i,a;return y.createElement(y.Fragment,null,y.createElement(i$,{interval:(t=e.interval)!==null&&t!==void 0?t:"preserveEnd",id:e.yAxisId,scale:e.scale,type:e.type,domain:e.domain,allowDataOverflow:e.allowDataOverflow,dataKey:e.dataKey,allowDuplicatedCategory:e.allowDuplicatedCategory,allowDecimals:e.allowDecimals,tickCount:e.tickCount,padding:e.padding,includeHidden:(r=e.includeHidden)!==null&&r!==void 0?r:!1,reversed:e.reversed,ticks:e.ticks,width:e.width,orientation:e.orientation,mirror:e.mirror,hide:e.hide,unit:e.unit,name:e.name,angle:(n=e.angle)!==null&&n!==void 0?n:0,minTickGap:(i=e.minTickGap)!==null&&i!==void 0?i:5,tick:(a=e.tick)!==null&&a!==void 0?a:!0,tickFormatter:e.tickFormatter}),y.createElement(a$,e))},o$={allowDataOverflow:ft.allowDataOverflow,allowDecimals:ft.allowDecimals,allowDuplicatedCategory:ft.allowDuplicatedCategory,hide:!1,mirror:ft.mirror,orientation:ft.orientation,padding:ft.padding,reversed:ft.reversed,scale:ft.scale,tickCount:ft.tickCount,type:ft.type,width:ft.width,yAxisId:0};class rn extends y.Component{render(){return y.createElement(s$,this.props)}}mx(rn,"displayName","YAxis");mx(rn,"defaultProps",o$);var l$={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var na=y;function c$(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var u$=typeof Object.is=="function"?Object.is:c$,d$=na.useSyncExternalStore,h$=na.useRef,f$=na.useEffect,m$=na.useMemo,p$=na.useDebugValue;l$.useSyncExternalStoreWithSelector=function(e,t,r,n,i){var a=h$(null);if(a.current===null){var s={hasValue:!1,value:null};a.current=s}else s=a.current;a=m$(function(){function c(m){if(!d){if(d=!0,u=m,m=n(m),i!==void 0&&s.hasValue){var g=s.value;if(i(g,m))return h=g}return h=m}if(g=h,u$(u,m))return g;var p=n(m);return i!==void 0&&i(g,p)?(u=m,g):(u=m,h=p)}var d=!1,u,h,f=r===void 0?null:r;return[function(){return c(t())},f===null?void 0:function(){return c(f())}]},[t,r,n,i]);var o=d$(e,a[0],a[1]);return f$(function(){s.hasValue=!0,s.value=o},[o]),p$(o),o};function g$(e){e()}function v$(){let e=null,t=null;return{clear(){e=null,t=null},notify(){g$(()=>{let r=e;for(;r;)r.callback(),r=r.next})},get(){const r=[];let n=e;for(;n;)r.push(n),n=n.next;return r},subscribe(r){let n=!0;const i=t={callback:r,next:null,prev:t};return i.prev?i.prev.next=i:e=i,function(){!n||e===null||(n=!1,i.next?i.next.prev=i.prev:t=i.prev,i.prev?i.prev.next=i.next:e=i.next)}}}}var Mm={notify(){},get:()=>[]};function y$(e,t){let r,n=Mm,i=0,a=!1;function s(p){u();const v=n.subscribe(p);let x=!1;return()=>{x||(x=!0,v(),h())}}function o(){n.notify()}function c(){g.onStateChange&&g.onStateChange()}function d(){return a}function u(){i++,r||(r=e.subscribe(c),n=v$())}function h(){i--,r&&i===0&&(r(),r=void 0,n.clear(),n=Mm)}function f(){a||(a=!0,u())}function m(){a&&(a=!1,h())}const g={addNestedSub:s,notifyNestedSubs:o,handleChangeWrapper:c,isSubscribed:d,trySubscribe:f,tryUnsubscribe:m,getListeners:()=>n};return g}var x$=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",b$=x$(),w$=()=>typeof navigator<"u"&&navigator.product==="ReactNative",j$=w$(),S$=()=>b$||j$?y.useLayoutEffect:y.useEffect,P$=S$(),sl=Symbol.for("react-redux-context"),ol=typeof globalThis<"u"?globalThis:{};function _$(){if(!y.createContext)return{};const e=ol[sl]??(ol[sl]=new Map);let t=e.get(y.createContext);return t||(t=y.createContext(null),e.set(y.createContext,t)),t}var N$=_$();function k$(e){const{children:t,context:r,serverState:n,store:i}=e,a=y.useMemo(()=>{const c=y$(i);return{store:i,subscription:c,getServerState:n?()=>n:void 0}},[i,n]),s=y.useMemo(()=>i.getState(),[i]);P$(()=>{const{subscription:c}=a;return c.onStateChange=c.notifyNestedSubs,c.trySubscribe(),s!==i.getState()&&c.notifyNestedSubs(),()=>{c.tryUnsubscribe(),c.onStateChange=void 0}},[a,s]);const o=r||N$;return y.createElement(o.Provider,{value:a},t)}var O$=k$,A$=(e,t)=>t,wd=$([A$,ge,EO,He,ry,mr,bE,ze],_E),jd=e=>{var t=e.currentTarget.getBoundingClientRect(),r=t.width/e.currentTarget.offsetWidth,n=t.height/e.currentTarget.offsetHeight;return{chartX:Math.round((e.clientX-t.left)/r),chartY:Math.round((e.clientY-t.top)/n)}},px=Ot("mouseClick"),gx=Hi();gx.startListening({actionCreator:px,effect:(e,t)=>{var r=e.payload,n=wd(t.getState(),jd(r));n?.activeIndex!=null&&t.dispatch(CA({activeIndex:n.activeIndex,activeDataKey:void 0,activeCoordinate:n.activeCoordinate}))}});var vc=Ot("mouseMove"),vx=Hi();vx.startListening({actionCreator:vc,effect:(e,t)=>{var r=e.payload,n=t.getState(),i=Ju(n,n.tooltip.settings.shared),a=wd(n,jd(r));i==="axis"&&(a?.activeIndex!=null?t.dispatch(Yv({activeIndex:a.activeIndex,activeDataKey:void 0,activeCoordinate:a.activeCoordinate})):t.dispatch(Gv()))}});function E$(e,t){return t instanceof HTMLElement?"HTMLElement <".concat(t.tagName,' class="').concat(t.className,'">'):t===window?"global.window":t}var Tm={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,barSize:void 0,className:void 0,maxBarSize:void 0,stackOffset:"none",syncId:void 0,syncMethod:"index"},yx=Mt({name:"rootProps",initialState:Tm,reducers:{updateOptions:(e,t)=>{var r;e.accessibilityLayer=t.payload.accessibilityLayer,e.barCategoryGap=t.payload.barCategoryGap,e.barGap=(r=t.payload.barGap)!==null&&r!==void 0?r:Tm.barGap,e.barSize=t.payload.barSize,e.maxBarSize=t.payload.maxBarSize,e.stackOffset=t.payload.stackOffset,e.syncId=t.payload.syncId,e.syncMethod=t.payload.syncMethod,e.className=t.payload.className}}}),C$=yx.reducer,{updateOptions:M$}=yx.actions,T$=Mt({name:"polarOptions",initialState:null,reducers:{updatePolarOptions:(e,t)=>t.payload}}),D$=T$.reducer,xx=Ot("keyDown"),bx=Ot("focus"),Sd=Hi();Sd.startListening({actionCreator:xx,effect:(e,t)=>{var r=t.getState(),n=r.rootProps.accessibilityLayer!==!1;if(n){var{keyboardInteraction:i}=r.tooltip,a=e.payload;if(!(a!=="ArrowRight"&&a!=="ArrowLeft"&&a!=="Enter")){var s=Number(Qu(i,yn(r))),o=mr(r);if(a==="Enter"){var c=ns(r,"axis","hover",String(i.index));t.dispatch(nc({active:!i.active,activeIndex:i.index,activeDataKey:i.dataKey,activeCoordinate:c}));return}var d=jA(r),u=d==="left-to-right"?1:-1,h=a==="ArrowRight"?1:-1,f=s+h*u;if(!(o==null||f>=o.length||f<0)){var m=ns(r,"axis","hover",String(f));t.dispatch(nc({active:!0,activeIndex:f.toString(),activeDataKey:void 0,activeCoordinate:m}))}}}}});Sd.startListening({actionCreator:bx,effect:(e,t)=>{var r=t.getState(),n=r.rootProps.accessibilityLayer!==!1;if(n){var{keyboardInteraction:i}=r.tooltip;if(!i.active&&i.index==null){var a="0",s=ns(r,"axis","hover",String(a));t.dispatch(nc({activeDataKey:void 0,active:!0,activeIndex:a,activeCoordinate:s}))}}}});var St=Ot("externalEvent"),wx=Hi();wx.startListening({actionCreator:St,effect:(e,t)=>{if(e.payload.handler!=null){var r=t.getState(),n={activeCoordinate:dE(r),activeDataKey:sy(r),activeIndex:dn(r),activeLabel:ay(r),activeTooltipIndex:dn(r),isTooltipActive:hE(r)};e.payload.handler(n,e.payload.reactEvent)}}});var I$=$([ni],e=>e.tooltipItemPayloads),$$=$([I$,ra,(e,t,r)=>t,(e,t,r)=>r],(e,t,r,n)=>{var i=e.find(o=>o.settings.dataKey===n);if(i!=null){var{positions:a}=i;if(a!=null){var s=t(a,r);return s}}}),jx=Ot("touchMove"),Sx=Hi();Sx.startListening({actionCreator:jx,effect:(e,t)=>{var r=e.payload,n=t.getState(),i=Ju(n,n.tooltip.settings.shared);if(i==="axis"){var a=wd(n,jd({clientX:r.touches[0].clientX,clientY:r.touches[0].clientY,currentTarget:r.currentTarget}));a?.activeIndex!=null&&t.dispatch(Yv({activeIndex:a.activeIndex,activeDataKey:void 0,activeCoordinate:a.activeCoordinate}))}else if(i==="item"){var s,o=r.touches[0],c=document.elementFromPoint(o.clientX,o.clientY);if(!c||!c.getAttribute)return;var d=c.getAttribute(JS),u=(s=c.getAttribute(QS))!==null&&s!==void 0?s:void 0,h=$$(t.getState(),d,u);t.dispatch(Vv({activeDataKey:u,activeIndex:d,activeCoordinate:h}))}}});var L$=xg({brush:KT,cartesianAxis:WI,chartData:BE,graphicalItems:eM,layout:jS,legend:fP,options:IE,polarAxis:VC,polarOptions:D$,referenceElements:tD,rootProps:C$,tooltip:MA}),R$=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Chart";return V2({reducer:L$,preloadedState:t,middleware:n=>n({serializableCheck:!1}).concat([gx.middleware,vx.middleware,Sd.middleware,wx.middleware,Sx.middleware]),devTools:{serialize:{replacer:E$},name:"recharts-".concat(r)}})};function U$(e){var{preloadedState:t,children:r,reduxStoreName:n}=e,i=Ze(),a=y.useRef(null);if(i)return r;a.current==null&&(a.current=R$(t,n));var s=Jc;return y.createElement(O$,{context:s,store:a.current},r)}function B$(e){var{layout:t,width:r,height:n,margin:i}=e,a=Ae(),s=Ze();return y.useEffect(()=>{s||(a(xS(t)),a(bS({width:r,height:n})),a(yS(i)))},[a,s,t,r,n,i]),null}function F$(e){var t=Ae();return y.useEffect(()=>{t(M$(e))},[t,e]),null}var z$=["children"];function W$(e,t){if(e==null)return{};var r,n,i=K$(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function K$(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function us(){return us=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},us.apply(null,arguments)}var H$={width:"100%",height:"100%"},q$=y.forwardRef((e,t)=>{var r=cu(),n=uu(),i=Gg();if(!za(r)||!za(n))return null;var{children:a,otherAttributes:s,title:o,desc:c}=e,d,u;return typeof s.tabIndex=="number"?d=s.tabIndex:d=i?0:void 0,typeof s.role=="string"?u=s.role:u=i?"application":void 0,y.createElement(Rc,us({},s,{title:o,desc:c,role:u,tabIndex:d,width:r,height:n,style:H$,ref:t}),a)}),V$=e=>{var{children:t}=e,r=ee(Zs);if(!r)return null;var{width:n,height:i,y:a,x:s}=r;return y.createElement(Rc,{width:n,height:i,x:s,y:a},t)},Dm=y.forwardRef((e,t)=>{var{children:r}=e,n=W$(e,z$),i=Ze();return i?y.createElement(V$,null,r):y.createElement(q$,us({ref:t},n),r)});function G$(){var e=Ae(),[t,r]=y.useState(null),n=ee(XS);return y.useEffect(()=>{if(t!=null){var i=t.getBoundingClientRect(),a=i.width/t.offsetWidth;Ye(a)&&a!==n&&e(wS(a))}},[t,e,n]),r}function Im(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Y$(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Im(Object(r),!0).forEach(function(n){Z$(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Im(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Z$(e,t,r){return(t=X$(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function X$(e){var t=J$(e,"string");return typeof t=="symbol"?t:t+""}function J$(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Q$=y.forwardRef((e,t)=>{var{children:r,className:n,height:i,onClick:a,onContextMenu:s,onDoubleClick:o,onMouseDown:c,onMouseEnter:d,onMouseLeave:u,onMouseMove:h,onMouseUp:f,onTouchEnd:m,onTouchMove:g,onTouchStart:p,style:v,width:x}=e,j=Ae(),[b,S]=y.useState(null),[_,N]=y.useState(null);WE();var P=G$(),E=y.useCallback(z=>{P(z),typeof t=="function"&&t(z),S(z),N(z)},[P,t,S,N]),w=y.useCallback(z=>{j(px(z)),j(St({handler:a,reactEvent:z}))},[j,a]),A=y.useCallback(z=>{j(vc(z)),j(St({handler:d,reactEvent:z}))},[j,d]),O=y.useCallback(z=>{j(Gv()),j(St({handler:u,reactEvent:z}))},[j,u]),D=y.useCallback(z=>{j(vc(z)),j(St({handler:h,reactEvent:z}))},[j,h]),R=y.useCallback(()=>{j(bx())},[j]),C=y.useCallback(z=>{j(xx(z.key))},[j]),k=y.useCallback(z=>{j(St({handler:s,reactEvent:z}))},[j,s]),I=y.useCallback(z=>{j(St({handler:o,reactEvent:z}))},[j,o]),L=y.useCallback(z=>{j(St({handler:c,reactEvent:z}))},[j,c]),K=y.useCallback(z=>{j(St({handler:f,reactEvent:z}))},[j,f]),F=y.useCallback(z=>{j(St({handler:p,reactEvent:z}))},[j,p]),G=y.useCallback(z=>{j(jx(z)),j(St({handler:g,reactEvent:z}))},[j,g]),X=y.useCallback(z=>{j(St({handler:m,reactEvent:z}))},[j,m]);return y.createElement(fy.Provider,{value:b},y.createElement(Np.Provider,{value:_},y.createElement("div",{className:me("recharts-wrapper",n),style:Y$({position:"relative",cursor:"default",width:x,height:i},v),onClick:w,onContextMenu:k,onDoubleClick:I,onFocus:R,onKeyDown:C,onMouseDown:L,onMouseEnter:A,onMouseLeave:O,onMouseMove:D,onMouseUp:K,onTouchEnd:X,onTouchMove:G,onTouchStart:F,ref:E},r)))}),e3=["children","className","width","height","style","compact","title","desc"];function t3(e,t){if(e==null)return{};var r,n,i=r3(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function r3(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var n3=y.forwardRef((e,t)=>{var{children:r,className:n,width:i,height:a,style:s,compact:o,title:c,desc:d}=e,u=t3(e,e3),h=ue(u,!1);return o?y.createElement(Dm,{otherAttributes:h,title:c,desc:d},r):y.createElement(Q$,{className:n,style:s,width:i,height:a,onClick:e.onClick,onMouseLeave:e.onMouseLeave,onMouseEnter:e.onMouseEnter,onMouseMove:e.onMouseMove,onMouseDown:e.onMouseDown,onMouseUp:e.onMouseUp,onContextMenu:e.onContextMenu,onDoubleClick:e.onDoubleClick,onTouchStart:e.onTouchStart,onTouchMove:e.onTouchMove,onTouchEnd:e.onTouchEnd},y.createElement(Dm,{otherAttributes:h,title:c,desc:d,ref:t},y.createElement(rD,null,r)))}),i3=["width","height"];function yc(){return yc=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},yc.apply(null,arguments)}function a3(e,t){if(e==null)return{};var r,n,i=s3(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function s3(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var o3={top:5,right:5,bottom:5,left:5},l3={accessibilityLayer:!0,layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:o3,reverseStackOrder:!1,syncMethod:"index"},No=y.forwardRef(function(t,r){var n,i=Vt(t.categoricalChartProps,l3),{width:a,height:s}=i,o=a3(i,i3);if(!za(a)||!za(s))return null;var{chartName:c,defaultTooltipEventType:d,validateTooltipEventTypes:u,tooltipPayloadSearcher:h,categoricalChartProps:f}=t,m={chartName:c,defaultTooltipEventType:d,validateTooltipEventTypes:u,tooltipPayloadSearcher:h,eventEmitter:void 0};return y.createElement(U$,{preloadedState:{options:m},reduxStoreName:(n=f.id)!==null&&n!==void 0?n:c},y.createElement(zT,{chartData:f.data}),y.createElement(B$,{width:a,height:s,layout:i.layout,margin:i.margin}),y.createElement(F$,{accessibilityLayer:i.accessibilityLayer,barCategoryGap:i.barCategoryGap,maxBarSize:i.maxBarSize,stackOffset:i.stackOffset,barGap:i.barGap,barSize:i.barSize,syncId:i.syncId,syncMethod:i.syncMethod,className:i.className}),y.createElement(n3,yc({},o,{width:a,height:s,ref:r})))}),c3=["axis"],u3=y.forwardRef((e,t)=>y.createElement(No,{chartName:"LineChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:c3,tooltipPayloadSearcher:vo,categoricalChartProps:e,ref:t})),d3=["axis","item"],Px=y.forwardRef((e,t)=>y.createElement(No,{chartName:"BarChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:d3,tooltipPayloadSearcher:vo,categoricalChartProps:e,ref:t})),h3=["axis"],f3=y.forwardRef((e,t)=>y.createElement(No,{chartName:"AreaChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:h3,tooltipPayloadSearcher:vo,categoricalChartProps:e,ref:t})),m3=["axis"],p3=y.forwardRef((e,t)=>y.createElement(No,{chartName:"ComposedChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:m3,tooltipPayloadSearcher:vo,categoricalChartProps:e,ref:t}));const $m=({data:e,zones:t,type:r,height:n=400,timeRange:i="1h",showPrediction:a=!1,showCapacityLines:s=!0,showAlerts:o=!0,showTrends:c=!0,interactive:d=!0})=>{const[u,h]=y.useState([]),[f,m]=y.useState(!0),[g,p]=y.useState(new Set(t.map(P=>P.id)));y.useState(null);const v=P=>Array.isArray(P)?P.filter(E=>{if(!E||typeof E!="object")return!1;for(const w of t)if(g.has(w.id)){const A=E[w.id];if(A!=null&&(typeof A!="number"||isNaN(A)))return!1}return!0}).map(E=>{const w={...E};for(const A of t)if(g.has(A.id)){const O=w[A.id];(O==null||isNaN(O))&&(w[A.id]=0)}return w}):[];y.useEffect(()=>{if(x(),f){if(Se&&typeof Se.isSystemStressed=="function"&&Se.isSystemStressed()){console.warn("Skipping chart updates due to system stress");return}const P=setInterval(()=>{if(Se&&typeof Se.isSystemStressed=="function"&&Se.isSystemStressed()){console.warn("Skipping chart update due to system stress");return}x()},12e4);return()=>clearInterval(P)}},[e,t,i,f,g]);const x=()=>{try{if(Se&&typeof Se.isSystemStressed=="function"&&Se.isSystemStressed()){console.warn("Skipping chart data generation due to system stress");return}const P=3,E=new Date,w={"15m":15*60*1e3,"1h":60*60*1e3,"6h":6*60*60*1e3,"24h":24*60*60*1e3,"7d":7*24*60*60*1e3}[i],A=new Date(E.getTime()-w),O=P,D=w/O,R=[];for(let k=0;k<O;k++){const I=new Date(A.getTime()+k*D);R.push(I)}const C=R.map((k,I)=>{const L=k.getHours(),K=k.getMinutes(),F=k.getDay(),G={time:i==="7d"?k.toLocaleDateString():k.toLocaleTimeString(),timestamp:k.getTime(),hour:L,minute:K,dayOfWeek:F};return t.filter(X=>g.has(X.id)).slice(0,2).forEach(X=>{if(!g.has(X.id))return;let z=X.current_count,J=1;L>=4&&L<=8?J=2.2:L>=17&&L<=21?J=2.5:L>=22||L<=3?J=.15:L>=9&&L<=16&&(J=1.3),(F===0||F===6)&&(J*=1.3);const re={"mahakal-ghat":1.3,"ram-ghat":1.2,"bhairav-ghat":1.1,"narsingh-ghat":.9,"kshipra-ghat":.8}[X.id]||1,ie=Math.sin(I/10*Math.PI)*.2,se=(Math.random()-.5)*.2,M=Math.max(0,Math.floor(z*J*re*(1+ie+se)));if(G[X.id]=M,G[`${X.id}_capacity`]=X.capacity,G[`${X.id}_occupancy`]=M/X.capacity*100,c&&I>2){const B=z*.9,T=M>B?"increasing":M<B?"decreasing":"stable";G[`${X.id}_trend`]=T}if(a&&I>3){const T=M*(1+(Math.random()-.5)*.15);G[`${X.id}_predicted`]=Math.max(0,Math.floor(T));const W=T*.12;G[`${X.id}_upper`]=Math.floor(T+W),G[`${X.id}_lower`]=Math.max(0,Math.floor(T-W)),G[`${X.id}_confidence`]=.7+Math.random()*.25}}),o&&Math.random()<.05&&(G.alert=!0,G.alertType=Math.random()<.2?"critical":Math.random()<.5?"warning":"info",G.alertZone=t[Math.floor(Math.random()*t.length)].id),G});h(v(C))}catch(P){console.error("Chart data generation error:",P),h([])}},j=["#3b82f6","#10b981","#f59e0b","#ef4444","#8b5cf6","#06b6d4","#84cc16","#f97316","#ec4899","#6366f1"],b=()=>l.jsx(Pi,{width:"100%",height:Math.min(n,300),children:l.jsxs(p3,{data:u,margin:{top:20,right:30,left:20,bottom:5},children:[l.jsx(Ln,{strokeDasharray:"3 3",stroke:"#f0f0f0"}),l.jsx(tn,{dataKey:"time",stroke:"#6b7280",fontSize:11,tick:{fill:"#6b7280"},angle:-45,textAnchor:"end",height:60,interval:"preserveStartEnd"}),l.jsx(rn,{stroke:"#6b7280",fontSize:11,tick:{fill:"#6b7280"},label:{value:"People Count",angle:-90,position:"insideLeft"}}),l.jsx(ji,{contentStyle:{backgroundColor:"#fff",border:"1px solid #e5e7eb",borderRadius:"8px",boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1)",fontSize:"12px"},labelFormatter:P=>`Time: ${P}`,formatter:(P,E)=>E.includes("capacity")?[P,"Capacity"]:typeof P!="number"?[0,E]:E.includes("predicted")?[P,"Predicted"]:E.includes("upper")?[P,"Upper Bound"]:E.includes("lower")?[P,"Lower Bound"]:[typeof P=="number"?P.toLocaleString():P,E.replace(/[-_]/g," ")],animationDuration:0}),l.jsx(_r,{wrapperStyle:{fontSize:"12px"}}),s&&t.filter(P=>g.has(P.id)).slice(0,2).map((P,E)=>l.jsx(vd,{y:P.capacity,stroke:j[E%j.length],strokeDasharray:"8 8",strokeOpacity:.6,label:{value:`${P.name} Capacity`,position:"topRight",fontSize:10}},`${P.id}_capacity_line`)),t.filter(P=>g.has(P.id)).slice(0,1).map((P,E)=>l.jsx(Po,{type:"monotone",dataKey:P.id,stroke:j[E%j.length],strokeWidth:3,dot:!1,activeDot:{r:6,stroke:j[E%j.length],strokeWidth:2},name:P.name,connectNulls:!1,animationDuration:0},P.id)),!1,!1,!1,!1]})}),S=()=>l.jsx(Pi,{width:"100%",height:Math.min(n,300),children:l.jsxs(f3,{data:v(u.slice(-10)),margin:{top:20,right:30,left:20,bottom:5},children:[l.jsx(Ln,{strokeDasharray:"3 3",stroke:"#f0f0f0"}),l.jsx(tn,{dataKey:"time",stroke:"#6b7280",fontSize:11}),l.jsx(rn,{stroke:"#6b7280",fontSize:11}),l.jsx(ji,{animationDuration:0}),l.jsx(_r,{}),t.filter(P=>g.has(P.id)).slice(0,1).map((P,E)=>l.jsx(bd,{type:"monotone",dataKey:P.id,stackId:"1",stroke:j[E%j.length],fill:j[E%j.length],fillOpacity:.7,name:P.name,animationDuration:0},P.id))]})}),_=()=>l.jsx(Pi,{width:"100%",height:Math.min(n,300),children:l.jsxs(Px,{data:v(u.slice(-5)),margin:{top:20,right:30,left:20,bottom:5},children:[l.jsx(Ln,{strokeDasharray:"3 3",stroke:"#f0f0f0"}),l.jsx(tn,{dataKey:"time",stroke:"#6b7280",fontSize:11}),l.jsx(rn,{stroke:"#6b7280",fontSize:11}),l.jsx(ji,{animationDuration:0}),l.jsx(_r,{}),t.filter(P=>g.has(P.id)).slice(0,1).map((P,E)=>l.jsx(wo,{dataKey:P.id,fill:j[E%j.length],name:P.name,radius:[4,4,0,0],animationDuration:0},P.id))]})}),N=()=>{switch(r){case"area":return S();case"bar":return _();case"composed":return b();default:return b()}};return l.jsxs("div",{className:"w-full",children:[l.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4 mb-4",children:[l.jsxs("div",{className:"flex items-center space-x-4",children:[l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx("span",{className:"text-sm text-gray-600",children:"Time Range:"}),l.jsxs("select",{value:i,onChange:P=>{},disabled:!0,className:"px-2 py-1 border border-gray-300 rounded text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[l.jsx("option",{value:"15m",children:"Last 15 Minutes"}),l.jsx("option",{value:"1h",children:"Last Hour"}),l.jsx("option",{value:"6h",children:"Last 6 Hours"}),l.jsx("option",{value:"24h",children:"Last 24 Hours"})]})]}),l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx("span",{className:"text-sm text-gray-600",children:"Chart Type:"}),l.jsxs("select",{value:r,onChange:P=>{},disabled:!0,className:"px-2 py-1 border border-gray-300 rounded text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[l.jsx("option",{value:"line",children:"Line Chart"}),l.jsx("option",{value:"area",children:"Area Chart"}),l.jsx("option",{value:"bar",children:"Bar Chart"})]})]})]}),l.jsxs("div",{className:"flex items-center space-x-4",children:[l.jsxs("label",{className:"flex items-center space-x-2",children:[l.jsx("input",{type:"checkbox",checked:a,onChange:P=>{},disabled:!0,className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),l.jsx("span",{className:"text-sm text-gray-600",children:"AI Predictions"})]}),l.jsxs("label",{className:"flex items-center space-x-2",children:[l.jsx("input",{type:"checkbox",checked:s,onChange:P=>{},disabled:!0,className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),l.jsx("span",{className:"text-sm text-gray-600",children:"Capacity Lines"})]}),l.jsx("button",{onClick:()=>{m(!f)},className:`px-3 py-1 rounded text-sm font-medium transition-colors ${f?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:f?"🔴 Live":"⏸️ Paused"})]})]}),l.jsxs("div",{className:"mb-4 p-3 bg-gray-50 rounded-lg",children:[l.jsx("div",{className:"text-sm text-gray-600 mb-2",children:"Select Zones to Display:"}),l.jsx("div",{className:"flex flex-wrap gap-2",children:t.map((P,E)=>l.jsxs("label",{className:"flex items-center space-x-2",children:[l.jsx("input",{type:"checkbox",checked:g.has(P.id),onChange:w=>{const A=new Set(g);w.target.checked?A.add(P.id):A.delete(P.id),p(A)},className:"rounded border-gray-300 focus:ring-blue-500",style:{accentColor:j[E%j.length]}}),l.jsx("span",{className:"text-sm text-gray-700",children:P.name}),l.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:j[E%j.length]}})]},P.id))})]}),l.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:N()}),l.jsx("div",{className:"mt-4 grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:t.filter(P=>g.has(P.id)).map((P,E)=>{const w=u[u.length-1],A=u[u.length-2],O=w?.[P.id]??0,D=A?.[P.id]??0,R=O-D,C=D>0?R/D*100:0,k=O/P.capacity*100,I=w?.[`${P.id}_predicted`];return l.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-3",children:[l.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[l.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:j[E%j.length]}}),l.jsx("span",{className:"text-sm font-medium text-gray-900",children:P.name})]}),l.jsxs("div",{className:"space-y-1",children:[l.jsx("div",{className:"text-lg font-bold text-gray-900",children:O.toLocaleString()}),l.jsxs("div",{className:`text-xs flex items-center space-x-1 ${R>0?"text-red-600":R<0?"text-green-600":"text-gray-600"}`,children:[l.jsx("span",{children:R>0?"↗":R<0?"↘":"→"}),l.jsxs("span",{children:[Math.abs(C).toFixed(1),"%"]})]}),l.jsxs("div",{className:"text-xs text-gray-600",children:[k.toFixed(1),"% capacity"]}),I&&l.jsxs("div",{className:"text-xs text-purple-600",children:["Predicted: ",I," (",I>O?"+":"",I-O,")"]}),l.jsx("div",{className:`text-xs font-medium ${k>90?"text-red-600":k>70?"text-yellow-600":"text-green-600"}`,children:k>90?"Critical":k>70?"High":k>40?"Moderate":"Low"})]}),l.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Flow: ",Math.floor(Math.random()*30)+5," people/min"]}),k<90&&R>0&&l.jsxs("div",{className:"text-xs text-orange-600 mt-1",children:["Est. full in: ",Math.floor((P.capacity-O)/Math.abs(R)*5)," min"]})]},P.id)})})]})},_x=({alerts:e,zones:t,onAlertAcknowledge:r,user:n})=>{const[i,a]=y.useState("all"),[s,o]=y.useState("all"),[c,d]=y.useState(""),[u,h]=y.useState(!0),[f,m]=y.useState(!0),[g,p]=y.useState([]),[v,x]=y.useState({total:0,critical:0,autoGenerated:0,avgResponseTime:0,predictionAccuracy:0});y.useEffect(()=>{j(),b()},[e,t]);const j=()=>{const w=e.map(A=>{const O=t.find(I=>I.id===A.location_id),D=O?O.current_count/O.capacity*100:0;let R="medium";A.type==="critical"||D>90?R="critical":A.type==="warning"||D>70?R="high":D>50?R="medium":R="low";let C="crowd";A.message.toLowerCase().includes("prediction")||A.message.toLowerCase().includes("forecast")?C="prediction":A.message.toLowerCase().includes("evacuation")||A.message.toLowerCase().includes("route")?C="evacuation":A.message.toLowerCase().includes("system")||A.message.toLowerCase().includes("connection")?C="system":(A.message.toLowerCase().includes("safety")||A.message.toLowerCase().includes("medical"))&&(C="safety");const k=t.filter(I=>I.id!==A.location_id&&I.status!=="safe").map(I=>I.id).slice(0,3);return{...A,severity:R,category:C,autoGenerated:!A.message.includes("Manual"),relatedZones:k,actionRequired:R==="critical"||R==="high",estimatedImpact:Math.min(100,D+k.length*10)}});p(w)},b=()=>{const w={total:e.length,critical:e.filter(A=>A.type==="critical").length,autoGenerated:g.filter(A=>A.autoGenerated).length,avgResponseTime:120+Math.random()*180,predictionAccuracy:85+Math.random()*10};x(w)},S=async w=>{if(w.status==="critical")return;const A=w.current_count/w.capacity*100;if(A>75){if(!n||!n.permissions.canAcknowledgeAlerts){console.warn("User does not have permission to create alerts");return}const O={type:A>85?"critical":"warning",message:`AI Prediction: ${w.name} ${A>85?"will exceed":"approaching"} critical capacity within 15 minutes. Current: ${w.current_count}/${w.capacity} (${A.toFixed(1)}%). ${A>85?"Immediate evacuation recommended.":"Enhanced monitoring advised."}`,location_id:w.id,timestamp:new Date().toISOString(),acknowledged:!1};try{await Oi.createAlert(O)}catch(D){console.warn("Failed to create alert via Supabase, using local alert instead:",D),{id:`${Date.now()}`,...O}}}},_=w=>{switch(w.category){case"prediction":return l.jsx(Or,{className:"w-5 h-5 text-purple-600"});case"evacuation":return l.jsx(Ni,{className:"w-5 h-5 text-orange-600"});case"safety":return l.jsx(Kr,{className:"w-5 h-5 text-red-600"});case"system":return l.jsx(lb,{className:"w-5 h-5 text-blue-600"});default:return l.jsx(Be,{className:"w-5 h-5 text-yellow-600"})}},N=w=>{switch(w){case"critical":return"bg-red-100 text-red-800 border-red-300";case"high":return"bg-orange-100 text-orange-800 border-orange-300";case"medium":return"bg-yellow-100 text-yellow-800 border-yellow-300";case"low":return"bg-blue-100 text-blue-800 border-blue-300";default:return"bg-gray-100 text-gray-800 border-gray-300"}},P=w=>{switch(w){case"prediction":return"bg-purple-50 border-purple-200";case"evacuation":return"bg-orange-50 border-orange-200";case"safety":return"bg-red-50 border-red-200";case"system":return"bg-blue-50 border-blue-200";default:return"bg-yellow-50 border-yellow-200"}},E=g.filter(w=>{const A=i==="all"||w.type===i,O=s==="all"||w.category===s,D=w.message.toLowerCase().includes(c.toLowerCase())||w.location_id.toLowerCase().includes(c.toLowerCase()),R=n.permissions.canViewAllZones||n.assigned_zones.includes(w.location_id);return A&&O&&D&&R&&!w.acknowledged}).sort((w,A)=>{const O={critical:0,high:1,medium:2,low:3},D=O[w.severity]-O[A.severity];return D!==0?D:new Date(A.timestamp).getTime()-new Date(w.timestamp).getTime()});return l.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[l.jsxs("div",{className:"flex items-center justify-between mb-6",children:[l.jsxs("div",{className:"flex items-center space-x-3",children:[l.jsx("div",{className:"bg-red-100 p-2 rounded-lg",children:l.jsx(Or,{className:"w-6 h-6 text-red-600"})}),l.jsxs("div",{children:[l.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Smart Alert System"}),l.jsx("p",{className:"text-sm text-gray-600",children:"AI-powered alert management with predictive capabilities"})]})]}),l.jsxs("div",{className:"flex items-center space-x-3",children:[l.jsx("button",{onClick:()=>h(!u),className:`p-2 rounded-lg transition-colors ${u?"bg-blue-100 text-blue-600":"bg-gray-100 text-gray-600"}`,children:u?l.jsx(Vm,{className:"w-4 h-4"}):l.jsx(Gm,{className:"w-4 h-4"})}),l.jsx("button",{onClick:()=>m(!f),className:`p-2 rounded-lg transition-colors ${f?"bg-blue-100 text-blue-600":"bg-gray-100 text-gray-600"}`,children:f?l.jsx(Bx,{className:"w-4 h-4"}):l.jsx(Ux,{className:"w-4 h-4"})})]})]}),l.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4 mb-6",children:[l.jsxs("div",{className:"bg-gray-50 rounded-lg p-3 text-center",children:[l.jsx("div",{className:"text-2xl font-bold text-gray-900",children:v.total}),l.jsx("div",{className:"text-xs text-gray-600",children:"Total Alerts"})]}),l.jsxs("div",{className:"bg-red-50 rounded-lg p-3 text-center",children:[l.jsx("div",{className:"text-2xl font-bold text-red-600",children:v.critical}),l.jsx("div",{className:"text-xs text-red-600",children:"Critical"})]}),l.jsxs("div",{className:"bg-purple-50 rounded-lg p-3 text-center",children:[l.jsx("div",{className:"text-2xl font-bold text-purple-600",children:v.autoGenerated}),l.jsx("div",{className:"text-xs text-purple-600",children:"AI Generated"})]}),l.jsxs("div",{className:"bg-blue-50 rounded-lg p-3 text-center",children:[l.jsxs("div",{className:"text-2xl font-bold text-blue-600",children:[Math.round(v.avgResponseTime),"s"]}),l.jsx("div",{className:"text-xs text-blue-600",children:"Avg Response"})]}),l.jsxs("div",{className:"bg-green-50 rounded-lg p-3 text-center",children:[l.jsxs("div",{className:"text-2xl font-bold text-green-600",children:[Math.round(v.predictionAccuracy),"%"]}),l.jsx("div",{className:"text-xs text-green-600",children:"AI Accuracy"})]})]}),l.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4 mb-6",children:[l.jsxs("div",{className:"flex items-center space-x-4",children:[l.jsxs("div",{className:"relative",children:[l.jsx(Hm,{className:"w-4 h-4 absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),l.jsx("input",{type:"text",placeholder:"Search alerts...",value:c,onChange:w=>d(w.target.value),className:"pl-10 pr-4 py-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),l.jsxs("select",{value:i,onChange:w=>a(w.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[l.jsx("option",{value:"all",children:"All Types"}),l.jsx("option",{value:"critical",children:"Critical"}),l.jsx("option",{value:"warning",children:"Warning"}),l.jsx("option",{value:"info",children:"Info"})]}),l.jsxs("select",{value:s,onChange:w=>o(w.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[l.jsx("option",{value:"all",children:"All Categories"}),l.jsx("option",{value:"crowd",children:"Crowd"}),l.jsx("option",{value:"prediction",children:"AI Prediction"}),l.jsx("option",{value:"evacuation",children:"Evacuation"}),l.jsx("option",{value:"safety",children:"Safety"}),l.jsx("option",{value:"system",children:"System"})]})]}),l.jsx("div",{className:"flex items-center space-x-2",children:l.jsx("button",{onClick:()=>{t.forEach(w=>{(w.status==="moderate"||w.status==="critical")&&S(w)})},className:"px-3 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors text-sm",children:"Generate AI Predictions"})})]}),l.jsx("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:E.length===0?l.jsxs("div",{className:"text-center py-8 text-gray-500",children:[l.jsx(Rn,{className:"w-12 h-12 mx-auto mb-2 text-green-500"}),l.jsx("p",{children:"No active alerts"}),l.jsx("p",{className:"text-sm",children:"All systems operating normally"})]}):E.map(w=>{const A=t.find(D=>D.id===w.location_id),O=Math.floor((Date.now()-new Date(w.timestamp).getTime())/6e4);return l.jsx("div",{className:`p-4 rounded-lg border transition-all hover:shadow-md ${P(w.category)}`,children:l.jsxs("div",{className:"flex items-start justify-between",children:[l.jsxs("div",{className:"flex items-start space-x-3 flex-1",children:[_(w),l.jsxs("div",{className:"flex-1",children:[l.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[l.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium border ${N(w.severity)}`,children:w.severity.toUpperCase()}),l.jsx("span",{className:"px-2 py-1 bg-gray-100 text-gray-700 rounded-full text-xs font-medium capitalize",children:w.category}),w.autoGenerated&&l.jsx("span",{className:"px-2 py-1 bg-purple-100 text-purple-700 rounded-full text-xs font-medium",children:"AI Generated"}),w.actionRequired&&l.jsx("span",{className:"px-2 py-1 bg-red-100 text-red-700 rounded-full text-xs font-medium animate-pulse",children:"ACTION REQUIRED"})]}),l.jsx("p",{className:"text-sm font-medium text-gray-900 mb-2",children:w.message}),l.jsxs("div",{className:"grid grid-cols-2 gap-4 text-xs text-gray-600 mb-2",children:[l.jsxs("div",{className:"flex items-center space-x-1",children:[l.jsx(nn,{className:"w-3 h-3"}),l.jsx("span",{children:A?.name||w.location_id})]}),l.jsxs("div",{className:"flex items-center space-x-1",children:[l.jsx(Dn,{className:"w-3 h-3"}),l.jsx("span",{children:O<1?"Just now":O<60?`${O}m ago`:`${Math.floor(O/60)}h ago`})]})]}),A&&l.jsx("div",{className:"mb-2 p-2 bg-white bg-opacity-70 rounded text-xs",children:l.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[l.jsxs("div",{children:[l.jsx("span",{className:"text-gray-600",children:"Count:"}),l.jsx("span",{className:"font-medium ml-1",children:A.current_count})]}),l.jsxs("div",{children:[l.jsx("span",{className:"text-gray-600",children:"Capacity:"}),l.jsx("span",{className:"font-medium ml-1",children:A.capacity})]}),l.jsxs("div",{children:[l.jsx("span",{className:"text-gray-600",children:"Impact:"}),l.jsxs("span",{className:"font-medium ml-1",children:[w.estimatedImpact,"%"]})]}),l.jsxs("div",{className:"col-span-3 mt-1 pt-1 border-t border-gray-300",children:[l.jsx("span",{className:"text-gray-600",children:"Occupancy Rate:"}),l.jsxs("span",{className:`font-medium ml-1 ${A.current_count/A.capacity>.9?"text-red-600":A.current_count/A.capacity>.7?"text-yellow-600":"text-green-600"}`,children:[(A.current_count/A.capacity*100).toFixed(1),"%"]})]})]})}),w.relatedZones.length>0&&l.jsxs("div",{className:"mb-2 p-2 bg-blue-50 rounded text-xs",children:[l.jsx("span",{className:"text-blue-700 font-medium",children:"Related zones affected: "}),l.jsx("span",{className:"text-blue-600",children:w.relatedZones.map(D=>t.find(C=>C.id===D)?.name||D).join(", ")}),l.jsx("div",{className:"mt-1 text-blue-600",children:"Suggested action: Monitor neighboring zones for overflow"})]}),w.category==="prediction"&&l.jsxs("div",{className:"mt-2 p-2 bg-purple-50 border border-purple-200 rounded",children:[l.jsxs("p",{className:"text-xs text-purple-700 font-medium",children:["🤖 AI Recommendation: ",w.severity==="critical"?"Immediate evacuation to nearest safe zone":w.severity==="high"?"Prepare crowd control measures and monitor exits":"Enhanced monitoring and crowd flow management"]}),w.severity==="critical"&&l.jsx("p",{className:"text-xs text-purple-600 mt-1",children:"Estimated evacuation time: 10-15 minutes to safe zones"})]})]})]}),l.jsxs("div",{className:"flex items-center space-x-2 ml-4",children:[n.permissions.canAcknowledgeAlerts&&l.jsx("button",{onClick:()=>r(w.id),className:"px-3 py-1 bg-green-600 text-white rounded text-sm hover:bg-green-700 transition-colors",children:"Acknowledge"}),l.jsx("button",{className:"text-gray-400 hover:text-gray-600 transition-colors",children:l.jsx(ob,{className:"w-4 h-4"})})]})]})},w.id)})}),l.jsxs("div",{className:"mt-6 pt-4 border-t border-gray-200",children:[l.jsx("h3",{className:"font-medium text-gray-900 mb-3",children:"AI Insights"}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[l.jsxs("div",{className:"bg-purple-50 rounded-lg p-3",children:[l.jsx("div",{className:"text-sm text-purple-600 font-medium",children:"Prediction Accuracy"}),l.jsxs("div",{className:"text-lg font-bold text-purple-900",children:[Math.round(v.predictionAccuracy),"%"]}),l.jsx("div",{className:"text-xs text-purple-700",children:"Last 24 hours"})]}),l.jsxs("div",{className:"bg-blue-50 rounded-lg p-3",children:[l.jsx("div",{className:"text-sm text-blue-600 font-medium",children:"Auto-Generated"}),l.jsxs("div",{className:"text-lg font-bold text-blue-900",children:[Math.round(v.autoGenerated/v.total*100)||0,"%"]}),l.jsx("div",{className:"text-xs text-blue-700",children:"Of all alerts"})]}),l.jsxs("div",{className:"bg-green-50 rounded-lg p-3",children:[l.jsx("div",{className:"text-sm text-green-600 font-medium",children:"Response Time"}),l.jsxs("div",{className:"text-lg font-bold text-green-900",children:[Math.round(v.avgResponseTime),"s"]}),l.jsx("div",{className:"text-xs text-green-700",children:"Average response"})]})]})]})]})};class Tn{constructor(){this.detectionHistory=[],this.isInitialized=!1,this.isInitializing=!1}static getInstance(){return Tn.instance||(Tn.instance=new Tn),Tn.instance}async initialize(){if(!(this.isInitializing||this.isInitialized)){this.isInitializing=!0,console.log("🧠 Initializing YOLOv8 People Prediction Service...");try{Ue.isModelLoaded()||(console.log("Waiting for YOLOv8 people detection model to load..."),await new Promise(t=>{const r=()=>{Ue.isModelLoaded()?t(!0):setTimeout(r,500)};r()})),this.isInitialized=!0,console.log("✅ YOLOv8 People Prediction Service ready!")}catch(t){console.error("People prediction service initialization failed:",t),this.isInitialized=!0}finally{this.isInitializing=!1}}}async predictFuturePeopleLevels(t,r){try{if(window.performanceOptimizer&&window.performanceOptimizer.isSystemStressed())return console.warn("People prediction skipped due to system stress"),this.fallbackPeoplePrediction(t,r)}catch{}!this.isInitialized&&!this.isInitializing&&await this.initialize();try{const n=Ue.getDetectionHistory();return this.detectionHistory=n,n.length>0?await this.performYOLOv8EnhancedPeoplePrediction(t,r):this.fallbackPeoplePrediction(t,r)}catch(n){return console.error("People prediction error:",n),this.fallbackPeoplePrediction(t,r)}}async performYOLOv8EnhancedPeoplePrediction(t,r){const n=Ue.getDetectionHistory().slice(-5);if(n.length===0)return this.fallbackPeoplePrediction(t,r);const i=n[n.length-1];if(i.predictions){const a=i.predictions;let s=a.next15MinutePrediction;r<=1?s=a.nextMinutePrediction:r<=5?s=a.next5MinutePrediction:r<=30&&(s=a.next30MinutePrediction);const o=[{name:"Fine-tuned YOLOv8 People Behavior Analysis",weight:.4,impact:i.behaviorPatterns.length*.12,confidence:.9,description:`${i.behaviorPatterns.length} people behavior patterns detected`},{name:"People Flow Direction Analysis",weight:.25,impact:i.flowDirection.velocity/100,confidence:i.flowDirection.consistency,description:`People flow velocity: ${i.flowDirection.velocity.toFixed(0)} people/min, ritual flow: ${i.flowDirection.ritualFlow}`},{name:"People Risk Assessment Integration",weight:.2,impact:i.riskAssessment.evacuationUrgency,confidence:.88,description:`Risk level: ${i.riskAssessment.level}, people-specific risks: ${i.riskAssessment.simhasthaSpecificRisks?.length||0}`},{name:"Cultural People Patterns",weight:.15,impact:(i.simhasthaSpecificFeatures?.culturalPatterns.familyGroups||0)/100,confidence:.85,description:`People cultural factors: ${i.simhasthaSpecificFeatures?.culturalPatterns.familyGroups||0} family groups, ritual activity detected: ${i.simhasthaSpecificFeatures?.ritualActivity.confidence.toFixed(2)||0}`}],c=this.generateEnhancedExplanation(a,i,r,t);return{predicted_count:s||0,confidence:a.confidence||.8,trend:a.trendDirection||"stable",factors:o,explanation:c,riskLevel:a.riskLevel||"medium",timeHorizon:r}}return this.performEnhancedPeopleTrendAnalysis(t,r,n)}performEnhancedPeopleTrendAnalysis(t,r,n){const i=n.map(b=>b.count||0),a=i.reduce((b,S)=>b+S,0)/i.length;let s="stable",o=0;if(i.length>=3){const b=i.slice(-2),S=i.slice(0,-2),_=b.reduce((E,w)=>E+w,0)/b.length,N=S.reduce((E,w)=>E+w,0)/S.length,P=_-N;o=Math.abs(P)/Math.max(N,1),P>N*.15?s="increasing":P<-N*.15&&(s="decreasing")}const c=new Date,u=new Date(c.getTime()+r*6e4).getHours(),h=this.getTimeMultiplier(u),f=this.getLocationMultiplier(t),m=n[n.length-1];let g=1;if(m.behaviorPatterns){const b=m.behaviorPatterns.filter(_=>_.type==="clustering").length,S=m.behaviorPatterns.filter(_=>_.type==="flowing").length;g=1+b*.1-S*.05}const p=Math.round(a*h*f*g),v=this.assessRiskLevel(p,t),x=[{name:"People Historical Trend Analysis",weight:.35,impact:o,confidence:Math.min(.9,.6+i.length*.05),description:`${s} trend with ${(o*100).toFixed(0)}% strength`},{name:"Time-based People Patterns",weight:.3,impact:h-1,confidence:.85,description:`${u}:00 - ${this.getTimeDescription(u)}`},{name:"Location People Characteristics",weight:.2,impact:f-1,confidence:.8,description:`${t} specific people dynamics`},{name:"People Behavior Pattern Influence",weight:.15,impact:g-1,confidence:.75,description:"People behavior patterns affecting flow"}],j=`Based on YOLOv8 people analysis of ${i.length} recent detections, the people count shows a ${s} trend. Time factor (${(h*100-100).toFixed(0)}% adjustment) and location people characteristics suggest ${p} people in ${r} minutes. Risk level: ${v}.`;return{predicted_count:Math.max(0,p),confidence:.8,trend:s,factors:x,explanation:j,riskLevel:v,timeHorizon:r}}generateEnhancedExplanation(t,r,n,i){let a=`YOLOv8 advanced people analysis predicts ${t.trendDirection} people trend. `;if(r.behaviorPatterns.length>0){const s=r.behaviorPatterns.reduce((o,c)=>o.confidence>c.confidence?o:c);a+=`Dominant behavior: ${s.type} involving ${s.peopleInvolved} people. `}return r.flowDirection.velocity>20&&(a+=`High people flow velocity (${r.flowDirection.velocity.toFixed(0)} people/min) detected. `),a+=`Current people risk level: ${r.riskAssessment.level} with ${r.riskAssessment.safetyScore}% safety score. `,r.spatialDistribution&&(a+=`People spatial distribution shows ${r.spatialDistribution.hotspots.length} hotspots. `),a+=`People prediction confidence: ${(t.confidence*100).toFixed(0)}% for ${n}-minute forecast.`,a}getTimeMultiplier(t){return t>=4&&t<=8?2.5:t>=17&&t<=21?2.8:t>=22||t<=3?.2:1.4}getLocationMultiplier(t){return{"mahakal-ghat":1.4,"ram-ghat":1.2,"bhairav-ghat":1.3,"narsingh-ghat":.9,"kshipra-ghat":.8}[t]||1}getTimeDescription(t){return t>=4&&t<=8?"Morning bathing peak period":t>=17&&t<=21?"Evening aarti ceremony time":t>=22||t<=3?"Night time minimal activity":"Regular operational hours"}assessRiskLevel(t,r){const i={"ram-ghat":500,"mahakal-ghat":800,"bhairav-ghat":900,"narsingh-ghat":600,"kshipra-ghat":700}[r]||500,a=t/i;return a>.9?"critical":a>.7?"high":a>.5?"medium":"low"}fallbackPeoplePrediction(t,r){const n=new Date().getHours();let i=150;const a={"mahakal-ghat":1.3,"ram-ghat":1.1,"bhairav-ghat":1.2,"narsingh-ghat":.8,"kshipra-ghat":.9};i*=a[t]||1,n>=4&&n<=8?i*=2.2:n>=17&&n<=20?i*=2.5:(n>=22||n<=3)&&(i*=.2);const s=Math.round(i),o=this.assessRiskLevel(s,t);return{predicted_count:s,confidence:.6,trend:"stable",factors:[{name:"People Location Factor",weight:.5,impact:a[t]||1,confidence:.7,description:`${t} people baseline characteristics`},{name:"People Time Factor",weight:.5,impact:1,confidence:.8,description:`${n}:00 time-based adjustment`}],explanation:`Fallback people prediction based on location and time patterns for ${t} at ${n}:00. Risk level: ${o}.`,riskLevel:o,timeHorizon:r}}getPeopleEvacuationRecommendations(t){const r=t.filter(i=>i.status==="critical"),n=t.filter(i=>i.status==="safe");return r.map(i=>{const a=n[0];return{fromZone:i.id,toZone:a?.id||"safe-area",distance:Math.floor(Math.random()*500)+100,estimatedTime:Math.floor(Math.random()*10)+5,priority:"high",message:`YOLOv8 people detection recommends evacuation from ${i.name} to ${a?.name||"safe area"}`,peopleCount:i.current_count-i.capacity,routeEfficiency:.8+Math.random()*.2,alternativeRoutes:[],explanation:"Based on YOLOv8 people risk assessment and flow analysis"}})}getPeopleFlowAnalysis(t){const r=t.reduce((i,a)=>i+a.current_count,0),n=t.filter(i=>i.status==="critical").map(i=>({zoneId:i.id,congestionLevel:i.current_count/i.capacity*100,estimatedDelay:Math.floor(Math.random()*10)+5,yoloAnalysis:"High people density clustering detected"}));return{totalFlow:r,bottlenecks:n,flowEfficiency:Math.max(30,100-n.length*20),yoloInsights:"People flow analysis based on YOLOv8 behavior pattern detection"}}getPeopleCapacityOptimization(t){const r=t.reduce((s,o)=>s+o.capacity,0),i=t.reduce((s,o)=>s+o.current_count,0)/r*100,a=t.filter(s=>s.status==="critical").map(s=>({fromZone:s.name,peopleToMove:s.current_count-s.capacity,urgency:s.current_count>s.capacity*1.2?"high":"medium",yoloRecommendation:"Based on people spatial distribution analysis"}));return{currentUtilization:i,redistributionSuggestions:a,yoloOptimization:"People recommendations enhanced by YOLOv8 spatial analysis"}}exportPeoplePredictionData(t){return{timestamp:new Date().toISOString(),service:"YOLOv8 Enhanced People Prediction Service",version:"8.0.0",zones:t.map(r=>({id:r.id,name:r.name,current_count:r.current_count,capacity:r.capacity,status:r.status})),predictions:t.map(r=>this.fallbackPeoplePrediction(r.id,15)),yolo8_people_detections:this.detectionHistory.slice(-10),model_info:Ue.getModelInfo(),advanced_features:{people_behavior_analysis:!0,people_flow_detection:!0,risk_assessment:!0,people_spatial_analysis:!0,interpretable_predictions:!0,evacuation_recommendations:!0}}}isReady(){return this.isInitialized&&Ue.isModelReady()}async waitForInitialization(){!this.isInitialized&&!this.isInitializing&&await this.initialize()}dispose(){this.detectionHistory=[],this.isInitialized=!1,this.isInitializing=!1}}const xc=Tn.getInstance();window.addEventListener("beforeunload",()=>{xc.dispose()});const Nx=({zones:e,selectedZone:t})=>{const[r,n]=y.useState([]),[i,a]=y.useState([]),[s,o]=y.useState(15),[c,d]=y.useState([]),[u,h]=y.useState(!1);y.useEffect(()=>{f(),m(),g();const b=setInterval(()=>{f(),m(),g()},6e4);return()=>{clearInterval(b)}},[e,s]),y.useEffect(()=>{(async()=>{const S=await Ue.loadModel();h(S)})()},[]);const f=()=>{const b=e.slice(0,3).map(async S=>{try{const _=await xc.predictFuturePeopleLevels(S.id,s);return{locationId:S.id,predicted_count:_.predicted_count||0,confidence:_.confidence||.5,trend:_.trend||"stable",algorithm:"yolov11-people",factors:_.factors||[]}}catch(_){return console.warn("Prediction error for zone:",S.id,_),{locationId:S.id,predicted_count:S.current_count,confidence:.5,trend:"stable",algorithm:"fallback",factors:[]}}});Promise.all(b).then(n).catch(S=>{console.warn("Failed to update predictions:",S)})},m=()=>{const b=xc.getPeopleEvacuationRecommendations(e);a(b)},g=()=>{const b=Ue.getDetectionHistory();d(b.slice(-5))},p=b=>{switch(b){case"increasing":return l.jsx(Ni,{className:"w-4 h-4 text-red-500"});case"decreasing":return l.jsx(ul,{className:"w-4 h-4 text-green-500"});default:return l.jsx(Qx,{className:"w-4 h-4 text-gray-500"})}},v=b=>{switch(b){case"increasing":return"text-red-600 bg-red-50";case"decreasing":return"text-green-600 bg-green-50";default:return"text-gray-600 bg-gray-50"}},x=b=>{switch(b){case"high":return"bg-red-100 text-red-800 border-red-200";case"medium":return"bg-yellow-100 text-yellow-800 border-yellow-200";default:return"bg-blue-100 text-blue-800 border-blue-200"}},j=t?r.filter(b=>b.locationId===t):r;return l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[l.jsxs("div",{className:"flex items-center justify-between mb-6",children:[l.jsxs("div",{className:"flex items-center space-x-3",children:[l.jsx("div",{className:"bg-blue-100 p-2 rounded-lg",children:l.jsx(Or,{className:"w-6 h-6 text-blue-600"})}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"YOLOv11 People-Only Predictions"}),l.jsx("p",{className:"text-sm text-gray-600",children:"Advanced people-only count forecasting with YOLOv11"})]})]}),l.jsxs("div",{className:"flex items-center space-x-4",children:[l.jsxs("div",{className:`px-3 py-1 rounded-full text-sm font-medium ${u?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"}`,children:["YOLOv11 People-Only Detection: ",u?"Ready":"Loading..."]}),l.jsx("label",{className:"text-sm text-gray-600",children:"Forecast:"}),l.jsxs("select",{value:s,onChange:b=>o(parseInt(b.target.value)),className:"px-3 py-1 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[l.jsx("option",{value:15,children:"15 minutes"}),l.jsx("option",{value:30,children:"30 minutes"}),l.jsx("option",{value:60,children:"1 hour"})]})]})]}),l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:j.map(b=>{const S=e.find(E=>E.id===b.locationId);if(!S)return null;const _=Math.round(b.confidence*100),N=S.current_count,P=b.predicted_count-N;return l.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[l.jsxs("div",{className:"flex items-center justify-between mb-2",children:[l.jsx("h4",{className:"font-medium text-gray-900",children:S.name}),p(b.trend)]}),l.jsxs("div",{className:"space-y-2",children:[l.jsxs("div",{className:"flex items-center justify-between text-sm",children:[l.jsx("span",{className:"text-gray-600",children:"Current:"}),l.jsx("span",{className:"font-medium",children:N})]}),l.jsxs("div",{className:"flex items-center justify-between text-sm",children:[l.jsx("span",{className:"text-gray-600",children:"Predicted:"}),l.jsx("span",{className:"font-medium",children:b.predicted_count})]}),l.jsxs("div",{className:"flex items-center justify-between text-sm",children:[l.jsx("span",{className:"text-gray-600",children:"Change:"}),l.jsxs("span",{className:`font-medium ${P>0?"text-red-600":P<0?"text-green-600":"text-gray-600"}`,children:[P>0?"+":"",P]})]}),l.jsxs("div",{className:"flex items-center justify-between text-sm",children:[l.jsx("span",{className:"text-gray-600",children:"Confidence:"}),l.jsxs("span",{className:"font-medium",children:[_,"%"]})]}),l.jsxs("div",{className:"flex items-center justify-between text-sm",children:[l.jsx("span",{className:"text-gray-600",children:"Algorithm:"}),l.jsx("span",{className:"font-medium capitalize",children:b.algorithm})]}),l.jsxs("div",{className:`px-2 py-1 rounded text-xs font-medium ${v(b.trend)}`,children:[b.trend.charAt(0).toUpperCase()+b.trend.slice(1)," trend"]}),b.factors&&b.factors.length>0&&l.jsxs("div",{className:"mt-2 pt-2 border-t border-gray-200",children:[l.jsx("div",{className:"text-xs text-gray-600 mb-1",children:"Factors:"}),b.factors.slice(0,2).map((E,w)=>l.jsxs("div",{className:"text-xs text-gray-500",children:["• ",E.name,": ",(E.weight*100).toFixed(0),"%"]},w))]})]})]},b.locationId)})})]}),i.length>0&&l.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[l.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[l.jsx(Be,{className:"w-5 h-5 text-orange-600"}),l.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Evacuation Recommendations"})]}),l.jsx("div",{className:"space-y-3",children:i.map((b,S)=>{const _=e.find(P=>P.id===b.fromZone),N=e.find(P=>P.id===b.toZone);return l.jsxs("div",{className:`border rounded-lg p-4 ${x(b.priority)}`,children:[l.jsxs("div",{className:"flex items-start justify-between mb-2",children:[l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx(nn,{className:"w-4 h-4"}),l.jsxs("span",{className:"font-medium",children:[_?.name," → ",N?.name]})]}),l.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${b.priority==="high"?"bg-red-200 text-red-800":b.priority==="medium"?"bg-yellow-200 text-yellow-800":"bg-blue-200 text-blue-800"}`,children:b.priority.toUpperCase()})]}),l.jsx("p",{className:"text-sm mb-3",children:b.message}),l.jsxs("div",{className:"flex items-center space-x-4 text-xs text-gray-600",children:[l.jsxs("div",{className:"flex items-center space-x-1",children:[l.jsx(nn,{className:"w-3 h-3"}),l.jsxs("span",{children:[b.distance,"m"]})]}),l.jsxs("div",{className:"flex items-center space-x-1",children:[l.jsx(Dn,{className:"w-3 h-3"}),l.jsxs("span",{children:["~",b.estimatedTime," min"]})]})]})]},S)})})]}),c.length>0&&l.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[l.jsx("h4",{className:"font-medium text-gray-900 mb-4",children:"Recent YOLOv8 People-Only Detections (Last 5)"}),l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:c.slice(-5).map((b,S)=>l.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[l.jsxs("div",{className:"flex items-center justify-between mb-2",children:[l.jsxs("span",{className:"font-medium text-gray-900",children:[b.count," people"]}),l.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${b.crowdDensity==="critical"?"bg-red-100 text-red-800":b.crowdDensity==="high"?"bg-orange-100 text-orange-800":b.crowdDensity==="medium"?"bg-yellow-100 text-yellow-800":"bg-green-100 text-green-800"}`,children:b.crowdDensity})]}),l.jsxs("div",{className:"text-xs text-gray-600 space-y-1",children:[l.jsxs("div",{children:["Confidence: ",(b.confidence*100).toFixed(1),"%"]}),l.jsxs("div",{children:["Time: ",new Date(b.timestamp).toLocaleTimeString()]}),l.jsxs("div",{children:["Patterns: ",b.behaviorPatterns?.length||0]}),b.riskAssessment&&l.jsxs("div",{className:"mt-2 pt-2 border-t border-gray-200",children:[l.jsxs("div",{className:`text-sm font-medium ${b.riskAssessment.level==="critical"?"text-red-600":b.riskAssessment.level==="high"?"text-orange-600":b.riskAssessment.level==="medium"?"text-yellow-600":"text-green-600"}`,children:["YOLOv8 People-Only Risk: ",b.riskAssessment.level.toUpperCase()]}),l.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["People Safety: ",b.riskAssessment.safetyScore,"%"]})]}),b.predictions&&l.jsxs("div",{className:"mt-2 pt-2 border-t border-gray-200",children:[l.jsxs("div",{className:"text-xs text-purple-600",children:["YOLOv8 People-Only Next 15m: ",b.predictions.next15MinutePrediction," people"]}),l.jsxs("div",{className:"text-xs text-purple-500",children:["People Trend: ",b.predictions.trendDirection]})]})]})]},S))})]}),l.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[l.jsx("h4",{className:"font-medium text-gray-900 mb-4",children:"YOLOv8 People-Only Detection Insights"}),l.jsxs("div",{className:"space-y-3",children:[r.filter(b=>b.trend==="increasing"&&b.confidence>.7).length>0&&l.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3",children:[l.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[l.jsx(Ni,{className:"w-4 h-4 text-red-600"}),l.jsx("span",{className:"font-medium text-red-800",children:"High People-Only Growth Alert"})]}),l.jsxs("p",{className:"text-sm text-red-700 mb-2",children:[r.filter(b=>b.trend==="increasing"&&b.confidence>.7).length," zones showing upward people-only count trends."]}),l.jsxs("div",{className:"text-xs text-red-600",children:[l.jsx("strong",{children:"Recommendation:"})," Monitor people-only flow closely and prepare crowd control."]})]}),e.filter(b=>b.status==="critical").length>0&&l.jsxs("div",{className:"bg-orange-50 border border-orange-200 rounded-lg p-3",children:[l.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[l.jsx(Be,{className:"w-4 h-4 text-orange-600"}),l.jsx("span",{className:"font-medium text-orange-800",children:"People-Only Capacity Warning"})]}),l.jsxs("p",{className:"text-sm text-orange-700 mb-2",children:[e.filter(b=>b.status==="critical").length," zones at critical capacity. People-only evacuation routes available."]}),l.jsxs("div",{className:"text-xs text-orange-600",children:[l.jsx("strong",{children:"Recommendation:"})," Consider people-only evacuation protocols."]})]}),r.filter(b=>b.trend==="decreasing").length>r.length/2&&l.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-3",children:[l.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[l.jsx(ul,{className:"w-4 h-4 text-green-600"}),l.jsx("span",{className:"font-medium text-green-800",children:"Positive People-Only Trend"})]}),l.jsx("p",{className:"text-sm text-green-700 mb-2",children:"Most zones showing decreasing people-only levels."}),l.jsxs("div",{className:"text-xs text-green-600",children:[l.jsx("strong",{children:"Status:"})," Continue people-only monitoring."]})]}),l.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3",children:[l.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[l.jsx(Or,{className:"w-4 h-4 text-blue-600"}),l.jsx("span",{className:"font-medium text-blue-800",children:"YOLOv8 People-Only Detection Status"})]}),l.jsxs("div",{className:"grid grid-cols-3 gap-4 text-sm text-blue-700",children:[l.jsxs("div",{children:[l.jsx("div",{className:"font-medium",children:"People-Only Accuracy"}),l.jsx("div",{children:"98%"})]}),l.jsxs("div",{children:[l.jsx("div",{className:"font-medium",children:"Confidence"}),l.jsxs("div",{children:[Math.round(r.reduce((b,S)=>b+S.confidence,0)/r.length*100)||0,"%"]})]}),l.jsxs("div",{children:[l.jsx("div",{className:"font-medium",children:"Engine"}),l.jsx("div",{children:"YOLOv8n People-Only"})]})]})]})]})]})]})},g3=({currentUser:e})=>{const[t,r]=y.useState([]),[n,i]=y.useState(""),[a,s]=y.useState("all"),[o,c]=y.useState(!1),[d,u]=y.useState(null);ll.useEffect(()=>{const p=wl.getDemoUsers().map((v,x)=>({id:`user-${x}`,email:v.email,role:v.role,assigned_zones:v.role==="admin"?["ram-ghat","mahakal-ghat","bhairav-ghat","narsingh-ghat","kshipra-ghat"]:v.role==="police"?["ram-ghat","mahakal-ghat","bhairav-ghat"]:["narsingh-ghat","kshipra-ghat"],permissions:h(v.role),profile:v.profile}));r(p)},[]);const h=p=>{switch(p){case"admin":return{canViewAllZones:!0,canManageDetection:!0,canAcknowledgeAlerts:!0,canExportData:!0,canManageUsers:!0,canAccessPredictions:!0,canControlEvacuation:!0};case"police":return{canViewAllZones:!0,canManageDetection:!1,canAcknowledgeAlerts:!0,canExportData:!0,canManageUsers:!1,canAccessPredictions:!0,canControlEvacuation:!0};default:return{canViewAllZones:!1,canManageDetection:!1,canAcknowledgeAlerts:!1,canExportData:!1,canManageUsers:!1,canAccessPredictions:!1,canControlEvacuation:!1}}},f=t.filter(p=>{const v=p.profile.name.toLowerCase().includes(n.toLowerCase())||p.email.toLowerCase().includes(n.toLowerCase()),x=a==="all"||p.role===a;return v&&x}),m=p=>{switch(p){case"admin":return"bg-red-100 text-red-800";case"police":return"bg-blue-100 text-blue-800";case"volunteer":return"bg-purple-100 text-purple-800";default:return"bg-gray-100 text-gray-800"}},g=p=>{switch(p){case"admin":return l.jsx(Kr,{className:"w-4 h-4"});case"police":return l.jsx(Kr,{className:"w-4 h-4"});case"volunteer":return l.jsx(nt,{className:"w-4 h-4"});default:return l.jsx(nt,{className:"w-4 h-4"})}};return l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[l.jsxs("div",{className:"flex items-center justify-between mb-6",children:[l.jsxs("div",{children:[l.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"User Management"}),l.jsx("p",{className:"text-sm text-gray-600",children:"Manage system users, roles, and permissions"})]}),l.jsxs("button",{onClick:()=>c(!0),className:"flex items-center space-x-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[l.jsx(sb,{className:"w-4 h-4"}),l.jsx("span",{children:"Add User"})]})]}),l.jsxs("div",{className:"flex items-center space-x-4 mb-6",children:[l.jsxs("div",{className:"flex-1 relative",children:[l.jsx(Hm,{className:"w-4 h-4 absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),l.jsx("input",{type:"text",placeholder:"Search users...",value:n,onChange:p=>i(p.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),l.jsxs("select",{value:a,onChange:p=>s(p.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[l.jsx("option",{value:"all",children:"All Roles"}),l.jsx("option",{value:"admin",children:"Admin"}),l.jsx("option",{value:"police",children:"Police"}),l.jsx("option",{value:"volunteer",children:"Volunteer"})]})]}),l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"w-full",children:[l.jsx("thead",{children:l.jsxs("tr",{className:"border-b border-gray-200",children:[l.jsx("th",{className:"text-left py-3 px-4 font-medium text-gray-900",children:"User"}),l.jsx("th",{className:"text-left py-3 px-4 font-medium text-gray-900",children:"Role"}),l.jsx("th",{className:"text-left py-3 px-4 font-medium text-gray-900",children:"Department"}),l.jsx("th",{className:"text-left py-3 px-4 font-medium text-gray-900",children:"Assigned Zones"}),l.jsx("th",{className:"text-left py-3 px-4 font-medium text-gray-900",children:"Status"}),l.jsx("th",{className:"text-left py-3 px-4 font-medium text-gray-900",children:"Actions"})]})}),l.jsx("tbody",{children:f.map(p=>l.jsxs("tr",{className:"border-b border-gray-100 hover:bg-gray-50",children:[l.jsx("td",{className:"py-3 px-4",children:l.jsxs("div",{children:[l.jsx("div",{className:"font-medium text-gray-900",children:p.profile.name}),l.jsx("div",{className:"text-sm text-gray-500",children:p.email}),l.jsx("div",{className:"text-xs text-gray-400",children:p.profile.badgeNumber})]})}),l.jsx("td",{className:"py-3 px-4",children:l.jsxs("span",{className:`inline-flex items-center space-x-1 px-2 py-1 rounded-full text-xs font-medium ${m(p.role)}`,children:[g(p.role),l.jsx("span",{className:"capitalize",children:p.role})]})}),l.jsxs("td",{className:"py-3 px-4",children:[l.jsx("div",{className:"text-sm text-gray-900",children:p.profile.department}),l.jsx("div",{className:"text-xs text-gray-500",children:p.profile.shift})]}),l.jsxs("td",{className:"py-3 px-4",children:[l.jsxs("div",{className:"text-sm text-gray-900",children:[p.assigned_zones.length," zones"]}),l.jsxs("div",{className:"text-xs text-gray-500",children:[p.assigned_zones.slice(0,2).join(", "),p.assigned_zones.length>2&&"..."]})]}),l.jsx("td",{className:"py-3 px-4",children:l.jsxs("span",{className:"inline-flex items-center space-x-1 px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800",children:[l.jsx("div",{className:"w-1.5 h-1.5 bg-green-500 rounded-full"}),l.jsx("span",{children:"Active"})]})}),l.jsx("td",{className:"py-3 px-4",children:l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx("button",{onClick:()=>u(p),className:"p-1 text-gray-400 hover:text-blue-600 transition-colors",title:"Edit user",children:l.jsx(nb,{className:"w-4 h-4"})}),l.jsx("button",{className:"p-1 text-gray-400 hover:text-red-600 transition-colors",title:"Delete user",children:l.jsx(ib,{className:"w-4 h-4"})})]})})]},p.id))})]})})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[l.jsx("div",{className:"bg-white rounded-xl shadow-lg p-6",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Users"}),l.jsx("p",{className:"text-2xl font-bold text-gray-900",children:t.length})]}),l.jsx("div",{className:"bg-gray-100 p-3 rounded-lg",children:l.jsx(nt,{className:"w-6 h-6 text-gray-600"})})]})}),l.jsx("div",{className:"bg-white rounded-xl shadow-lg p-6",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Admins"}),l.jsx("p",{className:"text-2xl font-bold text-red-600",children:t.filter(p=>p.role==="admin").length})]}),l.jsx("div",{className:"bg-red-100 p-3 rounded-lg",children:l.jsx(Kr,{className:"w-6 h-6 text-red-600"})})]})}),l.jsx("div",{className:"bg-white rounded-xl shadow-lg p-6",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Police"}),l.jsx("p",{className:"text-2xl font-bold text-blue-600",children:t.filter(p=>p.role==="police").length})]}),l.jsx("div",{className:"bg-blue-100 p-3 rounded-lg",children:l.jsx(Kr,{className:"w-6 h-6 text-blue-600"})})]})}),l.jsx("div",{className:"bg-white rounded-xl shadow-lg p-6",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Volunteers"}),l.jsx("p",{className:"text-2xl font-bold text-purple-600",children:t.filter(p=>p.role==="volunteer").length})]}),l.jsx("div",{className:"bg-purple-100 p-3 rounded-lg",children:l.jsx(nt,{className:"w-6 h-6 text-purple-600"})})]})})]}),l.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[l.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Role Permissions Matrix"}),l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"w-full text-sm",children:[l.jsx("thead",{children:l.jsxs("tr",{className:"border-b border-gray-200",children:[l.jsx("th",{className:"text-left py-2 px-3 font-medium text-gray-900",children:"Permission"}),l.jsx("th",{className:"text-center py-2 px-3 font-medium text-red-600",children:"Admin"}),l.jsx("th",{className:"text-center py-2 px-3 font-medium text-blue-600",children:"Police"}),l.jsx("th",{className:"text-center py-2 px-3 font-medium text-purple-600",children:"Volunteer"})]})}),l.jsx("tbody",{children:[{key:"canViewAllZones",label:"View All Zones"},{key:"canManageDetection",label:"Manage Detection"},{key:"canAcknowledgeAlerts",label:"Acknowledge Alerts"},{key:"canExportData",label:"Export Data"},{key:"canManageUsers",label:"Manage Users"},{key:"canAccessPredictions",label:"Access Predictions"},{key:"canControlEvacuation",label:"Control Evacuation"}].map(p=>l.jsxs("tr",{className:"border-b border-gray-100",children:[l.jsx("td",{className:"py-2 px-3 text-gray-900",children:p.label}),l.jsx("td",{className:"py-2 px-3 text-center",children:h("admin")[p.key]?l.jsx(yi,{className:"w-4 h-4 text-green-600 mx-auto"}):l.jsx(Pa,{className:"w-4 h-4 text-gray-400 mx-auto"})}),l.jsx("td",{className:"py-2 px-3 text-center",children:h("police")[p.key]?l.jsx(yi,{className:"w-4 h-4 text-green-600 mx-auto"}):l.jsx(Pa,{className:"w-4 h-4 text-gray-400 mx-auto"})}),l.jsx("td",{className:"py-2 px-3 text-center",children:h("volunteer")[p.key]?l.jsx(yi,{className:"w-4 h-4 text-green-600 mx-auto"}):l.jsx(Pa,{className:"w-4 h-4 text-gray-400 mx-auto"})})]},p.key))})]})})]})]})},v3=()=>{const[e,t]=y.useState({uptime:"2d 14h 32m",totalRequests:45672,activeConnections:23,databaseSize:"2.4 GB",memoryUsage:68,cpuUsage:42,diskUsage:35,networkLatency:12}),[r,n]=y.useState([{name:"Web Server",status:"online",uptime:"99.9%",lastCheck:new Date},{name:"Database",status:"online",uptime:"99.8%",lastCheck:new Date},{name:"Real-time Service",status:"online",uptime:"99.7%",lastCheck:new Date},{name:"Detection Engine",status:"online",uptime:"98.5%",lastCheck:new Date},{name:"Alert System",status:"online",uptime:"99.9%",lastCheck:new Date},{name:"File Storage",status:"warning",uptime:"97.2%",lastCheck:new Date}]),[i,a]=y.useState([{timestamp:new Date,level:"info",message:"System startup completed successfully",service:"System"},{timestamp:new Date(Date.now()-3e5),level:"info",message:"Database connection established",service:"Database"},{timestamp:new Date(Date.now()-6e5),level:"warning",message:"High memory usage detected",service:"System"},{timestamp:new Date(Date.now()-9e5),level:"info",message:"Detection model loaded successfully",service:"Detection"},{timestamp:new Date(Date.now()-12e5),level:"error",message:"Failed to connect to external API",service:"External"}]);y.useEffect(()=>{const d=setInterval(()=>{t(u=>({...u,totalRequests:u.totalRequests+Math.floor(Math.random()*10),activeConnections:Math.max(1,u.activeConnections+Math.floor(Math.random()*6)-3),memoryUsage:Math.max(30,Math.min(90,u.memoryUsage+Math.floor(Math.random()*6)-3)),cpuUsage:Math.max(10,Math.min(80,u.cpuUsage+Math.floor(Math.random()*10)-5)),networkLatency:Math.max(5,Math.min(50,u.networkLatency+Math.floor(Math.random()*6)-3))}))},5e3);return()=>clearInterval(d)},[]);const s=d=>{switch(d){case"online":return"text-green-600 bg-green-100";case"warning":return"text-yellow-600 bg-yellow-100";case"error":return"text-red-600 bg-red-100";default:return"text-gray-600 bg-gray-100"}},o=d=>{switch(d){case"online":return l.jsx(Rn,{className:"w-4 h-4"});case"warning":return l.jsx(vi,{className:"w-4 h-4"});case"error":return l.jsx(vi,{className:"w-4 h-4"});default:return l.jsx(Dn,{className:"w-4 h-4"})}},c=d=>{switch(d){case"error":return"text-red-600 bg-red-50 border-red-200";case"warning":return"text-yellow-600 bg-yellow-50 border-yellow-200";case"info":return"text-blue-600 bg-blue-50 border-blue-200";default:return"text-gray-600 bg-gray-50 border-gray-200"}};return l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[l.jsx("div",{className:"bg-white rounded-xl shadow-lg p-6",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-sm font-medium text-gray-600",children:"System Uptime"}),l.jsx("p",{className:"text-2xl font-bold text-green-600",children:e.uptime})]}),l.jsx("div",{className:"bg-green-100 p-3 rounded-lg",children:l.jsx(tb,{className:"w-6 h-6 text-green-600"})})]})}),l.jsx("div",{className:"bg-white rounded-xl shadow-lg p-6",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Requests"}),l.jsx("p",{className:"text-2xl font-bold text-blue-600",children:e.totalRequests.toLocaleString()})]}),l.jsx("div",{className:"bg-blue-100 p-3 rounded-lg",children:l.jsx(Rx,{className:"w-6 h-6 text-blue-600"})})]})}),l.jsx("div",{className:"bg-white rounded-xl shadow-lg p-6",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Active Connections"}),l.jsx("p",{className:"text-2xl font-bold text-purple-600",children:e.activeConnections})]}),l.jsx("div",{className:"bg-purple-100 p-3 rounded-lg",children:l.jsx(Ad,{className:"w-6 h-6 text-purple-600"})})]})}),l.jsx("div",{className:"bg-white rounded-xl shadow-lg p-6",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Database Size"}),l.jsx("p",{className:"text-2xl font-bold text-gray-900",children:e.databaseSize})]}),l.jsx("div",{className:"bg-gray-100 p-3 rounded-lg",children:l.jsx(Fm,{className:"w-6 h-6 text-gray-600"})})]})})]}),l.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[l.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-6",children:"Performance Metrics"}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx(Wx,{className:"w-4 h-4 text-blue-600"}),l.jsx("span",{className:"text-sm font-medium text-gray-700",children:"CPU Usage"})]}),l.jsxs("span",{className:"text-sm font-bold text-gray-900",children:[e.cpuUsage,"%"]})]}),l.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:l.jsx("div",{className:`h-2 rounded-full ${e.cpuUsage>70?"bg-red-500":e.cpuUsage>50?"bg-yellow-500":"bg-green-500"}`,style:{width:`${e.cpuUsage}%`}})})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx(Jx,{className:"w-4 h-4 text-green-600"}),l.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Memory Usage"})]}),l.jsxs("span",{className:"text-sm font-bold text-gray-900",children:[e.memoryUsage,"%"]})]}),l.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:l.jsx("div",{className:`h-2 rounded-full ${e.memoryUsage>80?"bg-red-500":e.memoryUsage>60?"bg-yellow-500":"bg-green-500"}`,style:{width:`${e.memoryUsage}%`}})})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx(qx,{className:"w-4 h-4 text-purple-600"}),l.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Disk Usage"})]}),l.jsxs("span",{className:"text-sm font-bold text-gray-900",children:[e.diskUsage,"%"]})]}),l.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:l.jsx("div",{className:`h-2 rounded-full ${e.diskUsage>80?"bg-red-500":e.diskUsage>60?"bg-yellow-500":"bg-green-500"}`,style:{width:`${e.diskUsage}%`}})})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx(Ad,{className:"w-4 h-4 text-orange-600"}),l.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Network Latency"})]}),l.jsxs("span",{className:"text-sm font-bold text-gray-900",children:[e.networkLatency,"ms"]})]}),l.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:l.jsx("div",{className:`h-2 rounded-full ${e.networkLatency>30?"bg-red-500":e.networkLatency>20?"bg-yellow-500":"bg-green-500"}`,style:{width:`${Math.min(e.networkLatency*2,100)}%`}})})]})]})]}),l.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[l.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-6",children:"Service Status"}),l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:r.map((d,u)=>l.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[l.jsxs("div",{className:"flex items-center justify-between mb-2",children:[l.jsx("h4",{className:"font-medium text-gray-900",children:d.name}),l.jsxs("span",{className:`inline-flex items-center space-x-1 px-2 py-1 rounded-full text-xs font-medium ${s(d.status)}`,children:[o(d.status),l.jsx("span",{className:"capitalize",children:d.status})]})]}),l.jsxs("div",{className:"space-y-1 text-sm text-gray-600",children:[l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{children:"Uptime:"}),l.jsx("span",{className:"font-medium",children:d.uptime})]}),l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{children:"Last Check:"}),l.jsx("span",{className:"font-medium",children:d.lastCheck.toLocaleTimeString()})]})]})]},u))})]}),l.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[l.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-6",children:"Recent System Logs"}),l.jsx("div",{className:"space-y-2 max-h-96 overflow-y-auto",children:i.map((d,u)=>l.jsx("div",{className:`p-3 rounded-lg border ${c(d.level)}`,children:l.jsxs("div",{className:"flex items-start justify-between",children:[l.jsxs("div",{className:"flex-1",children:[l.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[l.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium uppercase ${c(d.level)}`,children:d.level}),l.jsx("span",{className:"text-sm font-medium text-gray-900",children:d.service})]}),l.jsx("p",{className:"text-sm text-gray-700",children:d.message})]}),l.jsx("span",{className:"text-xs text-gray-500 ml-4",children:d.timestamp.toLocaleTimeString()})]})},u))})]})]})},Lm=({user:e,zones:t,alerts:r,crowdData:n,connectionStatus:i,onLogout:a,onAlertAcknowledge:s,onDetectionResult:o,onRefresh:c,onExportData:d,isLoading:u=!1,isMobile:h=!1})=>{const[f,m]=y.useState("overview"),[g,p]=y.useState(""),[v,x]=y.useState(!1),[j,b]=y.useState(!0),[S,_]=y.useState(!1),[N,P]=y.useState(!1),[E,w]=y.useState("all"),A=()=>t.reduce((C,k)=>C+k.current_count,0),O=()=>t.filter(C=>C.status==="critical").length,D=()=>E==="all"?t:t.filter(C=>C.status===E),R=()=>{switch(f){case"overview":return l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:`grid gap-6 ${h?"grid-cols-2":"grid-cols-1 md:grid-cols-5"}`,children:[l.jsx("div",{className:"bg-white rounded-xl shadow-lg p-6",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total People"}),l.jsx("p",{className:"text-2xl font-bold text-gray-900",children:A().toLocaleString()})]}),l.jsx("div",{className:"bg-blue-100 p-3 rounded-lg",children:l.jsx(nt,{className:"w-6 h-6 text-blue-600"})})]})}),l.jsx("div",{className:"bg-white rounded-xl shadow-lg p-6",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Critical Zones"}),l.jsx("p",{className:"text-2xl font-bold text-red-600",children:O()})]}),l.jsx("div",{className:"bg-red-100 p-3 rounded-lg",children:l.jsx(Be,{className:"w-6 h-6 text-red-600"})})]})}),l.jsx("div",{className:"bg-white rounded-xl shadow-lg p-6",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Active Alerts"}),l.jsx("p",{className:"text-2xl font-bold text-yellow-600",children:r.filter(C=>!C.acknowledged).length})]}),l.jsx("div",{className:"bg-yellow-100 p-3 rounded-lg",children:l.jsx(Be,{className:"w-6 h-6 text-yellow-600"})})]})}),l.jsx("div",{className:"bg-white rounded-xl shadow-lg p-6",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-sm font-medium text-gray-600",children:"System Status"}),l.jsx("p",{className:`text-2xl font-bold ${i==="connected"?"text-green-600":i==="connecting"?"text-yellow-600":"text-blue-600"}`,children:i==="connected"?"Online":i==="connecting"?"Connecting":"Demo Mode"})]}),l.jsx("div",{className:`p-3 rounded-lg ${i==="connected"?"bg-green-100":i==="connecting"?"bg-yellow-100":"bg-blue-100"}`,children:l.jsx(Fm,{className:`w-6 h-6 ${i==="connected"?"text-green-600":i==="connecting"?"text-yellow-600":"text-blue-600"}`})})]})}),l.jsx("div",{className:"bg-white rounded-xl shadow-lg p-6",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Active Users"}),l.jsx("p",{className:"text-2xl font-bold text-purple-600",children:"5"})]}),l.jsx("div",{className:"bg-purple-100 p-3 rounded-lg",children:l.jsx(Od,{className:"w-6 h-6 text-purple-600"})})]})})]}),l.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsx("h3",{className:`font-semibold text-gray-900 ${h?"text-base":"text-lg"}`,children:"Zone Management"}),l.jsxs("div",{className:"flex items-center space-x-3",children:[l.jsxs("div",{className:`text-xs text-gray-500 ${h?"hidden":"block"}`,children:["Total Capacity: ",t.reduce((C,k)=>C+k.capacity,0).toLocaleString()," people"]}),l.jsxs("select",{value:E,onChange:C=>w(C.target.value),className:`border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ${h?"px-2 py-1 text-xs":"px-3 py-1 text-sm"}`,children:[l.jsxs("option",{value:"all",children:["All Zones (",t.length,")"]}),l.jsxs("option",{value:"safe",children:["Safe Zones (",t.filter(C=>C.status==="safe").length,")"]}),l.jsxs("option",{value:"moderate",children:["Moderate Zones (",t.filter(C=>C.status==="moderate").length,")"]}),l.jsxs("option",{value:"critical",children:["Critical Zones (",t.filter(C=>C.status==="critical").length,")"]})]}),l.jsx(Kx,{className:`text-gray-500 ${h?"w-3 h-3":"w-4 h-4"}`})]})]}),l.jsxs("div",{className:`grid gap-4 mb-6 ${h?"grid-cols-2":"grid-cols-4"}`,children:[l.jsxs("div",{className:"bg-green-50 rounded-lg p-3 text-center",children:[l.jsx("div",{className:`font-bold text-green-600 ${h?"text-lg":"text-xl"}`,children:t.filter(C=>C.status==="safe").length}),l.jsx("div",{className:`text-green-700 ${h?"text-xs":"text-sm"}`,children:"Safe"})]}),l.jsxs("div",{className:"bg-yellow-50 rounded-lg p-3 text-center",children:[l.jsx("div",{className:`font-bold text-yellow-600 ${h?"text-lg":"text-xl"}`,children:t.filter(C=>C.status==="moderate").length}),l.jsx("div",{className:`text-yellow-700 ${h?"text-xs":"text-sm"}`,children:"Moderate"})]}),l.jsxs("div",{className:"bg-red-50 rounded-lg p-3 text-center",children:[l.jsx("div",{className:`font-bold text-red-600 ${h?"text-lg":"text-xl"}`,children:t.filter(C=>C.status==="critical").length}),l.jsx("div",{className:`text-red-700 ${h?"text-xs":"text-sm"}`,children:"Critical"})]}),l.jsxs("div",{className:"bg-blue-50 rounded-lg p-3 text-center",children:[l.jsxs("div",{className:`font-bold text-blue-600 ${h?"text-lg":"text-xl"}`,children:[Math.round(A()/t.reduce((C,k)=>C+k.capacity,0)*100),"%"]}),l.jsx("div",{className:`text-blue-700 ${h?"text-xs":"text-sm"}`,children:"Overall"})]})]}),l.jsx("div",{className:`grid gap-6 ${h?"grid-cols-1":"grid-cols-1 lg:grid-cols-2 xl:grid-cols-3"}`,children:D().map(C=>l.jsx(Ac,{zone:C,onClick:()=>p(C.id)},C.id))})]}),l.jsxs("div",{className:`grid gap-6 ${h?"grid-cols-1":"grid-cols-1 lg:grid-cols-2"}`,children:[l.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[l.jsx("h3",{className:`font-semibold text-gray-900 mb-4 ${h?"text-base":"text-lg"}`,children:"Crowd Trends"}),n.length>0?l.jsx($m,{data:n.slice(-15),zones:t.slice(0,3),type:"line",showPrediction:!1,showCapacityLines:!0,showAlerts:!1,height:h?200:250}):l.jsx("div",{className:"flex items-center justify-center h-64 text-gray-500",children:l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"animate-pulse rounded-full h-8 w-8 bg-blue-200 mx-auto mb-2"}),l.jsx("p",{children:"Loading chart data..."})]})})]}),l.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[l.jsx("h3",{className:`font-semibold text-gray-900 mb-4 ${h?"text-base":"text-lg"}`,children:"Zone Distribution"}),n.length>0?l.jsx($m,{data:n.slice(-10),zones:t.slice(0,3),type:"bar",height:h?200:250,showPrediction:!1,showAlerts:!1}):l.jsx("div",{className:"flex items-center justify-center h-64 text-gray-500",children:l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"animate-pulse rounded-full h-8 w-8 bg-blue-200 mx-auto mb-2"}),l.jsx("p",{children:"Loading chart data..."})]})})]})]})]});case"map":return l.jsx("div",{className:"space-y-6",children:l.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsx("h3",{className:`font-semibold text-gray-900 ${h?"text-base":"text-lg"}`,children:"Administrative Map Control"}),l.jsxs("div",{className:`flex items-center ${h?"space-x-2":"space-x-4"}`,children:[l.jsxs("label",{className:"flex items-center space-x-2",children:[l.jsx("input",{type:"checkbox",checked:j,onChange:C=>b(C.target.checked),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),l.jsx("span",{className:`text-gray-700 ${h?"text-xs":"text-sm"}`,children:"Zone Heatmap"})]}),l.jsxs("label",{className:"flex items-center space-x-2",children:[l.jsx("input",{type:"checkbox",checked:S,onChange:C=>_(C.target.checked),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),l.jsx("span",{className:`text-gray-700 ${h?"text-xs":"text-sm"}`,children:"Evacuation Routes"})]}),l.jsxs("label",{className:"flex items-center space-x-2",children:[l.jsx("input",{type:"checkbox",checked:N,onChange:C=>P(C.target.checked),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),l.jsx("span",{className:`text-gray-700 ${h?"text-xs":"text-sm"}`,children:"Flow Indicators"})]})]})]}),l.jsx("div",{className:h?"h-80":"h-96",children:l.jsx(Ec,{zones:t,showHeatmap:j,showEvacuationRoutes:S,showFlowIndicators:N,selectedZone:g,onZoneClick:C=>p(C.id)})})]})});case"detection":return l.jsxs("div",{className:"space-y-6",children:[l.jsx(M1,{onModelReady:()=>x(!0)}),l.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[l.jsx("h3",{className:`font-semibold text-gray-900 mb-4 ${h?"text-base":"text-lg"}`,children:"AI Detection Management"}),l.jsx("p",{className:`text-gray-600 mb-4 ${h?"text-xs":"text-sm"}`,children:"Fine-tuned YOLOv8 people detection with cultural behavior analysis and predictions"})]}),l.jsx("div",{className:`grid gap-6 ${h?"grid-cols-1":"grid-cols-1 lg:grid-cols-2"}`,children:t.slice(0,4).map(C=>l.jsx(C1,{locationId:C.id,onDetectionResult:o,isModelReady:v,onModelStatusChange:k=>console.log(`Model status for ${C.id}:`,k)},C.id))})]});case"alerts":return l.jsx("div",{className:"space-y-6",children:l.jsx(_x,{alerts:r,zones:t,onAlertAcknowledge:s,user:e})});case"prediction":return l.jsx("div",{className:"space-y-6",children:l.jsx(Nx,{zones:t,selectedZone:g})});case"users":return l.jsx("div",{className:"space-y-6",children:l.jsx(g3,{currentUser:e})});case"system":return l.jsx("div",{className:"space-y-6",children:l.jsx(v3,{})});default:return null}};return l.jsxs("div",{className:"min-h-screen bg-gray-50",children:[l.jsx("header",{className:"bg-white shadow-sm border-b",children:l.jsx("div",{className:`mx-auto ${h?"px-4":"max-w-7xl px-4 sm:px-6 lg:px-8"}`,children:l.jsxs("div",{className:"flex items-center justify-between h-16",children:[l.jsxs("div",{className:"flex items-center space-x-4",children:[l.jsx("div",{className:"bg-red-600 p-2 rounded-lg",children:l.jsx(Kr,{className:"w-6 h-6 text-white"})}),l.jsxs("div",{children:[l.jsx("h1",{className:`font-semibold text-gray-900 ${h?"text-lg":"text-xl"}`,children:"Admin Dashboard - Divya Drishti (दिव्य  दृष्टि)"}),l.jsx("p",{className:`text-gray-600 ${h?"text-xs":"text-sm"}`,children:"Full System Administration"})]})]}),l.jsxs("div",{className:`flex items-center ${h?"space-x-2":"space-x-4"}`,children:[l.jsxs("button",{onClick:c,disabled:u,className:`flex items-center space-x-2 text-gray-600 hover:text-gray-900 transition-colors disabled:opacity-50 ${h?"px-2 py-1":"px-3 py-2"}`,children:[l.jsx(Un,{className:`${u?"animate-spin":""} ${h?"w-3 h-3":"w-4 h-4"}`}),!h&&l.jsx("span",{children:"Refresh"})]}),l.jsxs("button",{onClick:d,className:`flex items-center space-x-2 text-gray-600 hover:text-gray-900 transition-colors ${h?"px-2 py-1":"px-3 py-2"}`,children:[l.jsx(zm,{className:h?"w-3 h-3":"w-4 h-4"}),!h&&l.jsx("span",{children:"Export"})]}),!h&&l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx("div",{className:`w-2 h-2 rounded-full animate-pulse ${i==="connected"?"bg-green-500":i==="connecting"?"bg-yellow-500":"bg-blue-500"}`}),l.jsx("span",{className:"text-sm text-gray-600",children:i==="connected"?"System Online":i==="connecting"?"Connecting":"Demo Mode"})]}),l.jsxs("div",{className:`text-gray-600 ${h?"text-xs":"text-sm"}`,children:[l.jsx("div",{className:"font-medium",children:e.profile.name}),!h&&l.jsx("div",{className:"text-xs",children:e.profile.department})]}),l.jsxs("button",{onClick:a,className:`flex items-center space-x-2 text-gray-600 hover:text-gray-900 transition-colors ${h?"px-2 py-1":"px-3 py-2"}`,children:[l.jsx(jc,{className:h?"w-3 h-3":"w-4 h-4"}),!h&&l.jsx("span",{children:"Logout"})]})]})]})})}),l.jsx("nav",{className:"bg-white border-b",children:l.jsx("div",{className:`mx-auto ${h?"px-2":"max-w-7xl px-4 sm:px-6 lg:px-8"}`,children:l.jsx("div",{className:"flex space-x-8",children:[{id:"overview",label:"System Overview",icon:nt},{id:"map",label:"Map Control",icon:Sc},{id:"detection",label:"Detection Management",icon:dl},{id:"alerts",label:"Alert Management",icon:Be},{id:"prediction",label:"YOLOv8 People Predictions",icon:Or},{id:"users",label:"User Management",icon:Od},{id:"system",label:"System Monitor",icon:rb}].map(({id:C,label:k,icon:I})=>l.jsxs("button",{onClick:()=>m(C),className:`flex items-center space-x-2 border-b-2 font-medium transition-colors ${h?"px-2 py-2 text-xs":"px-4 py-3 text-sm"} ${f===C?"border-red-500 text-red-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[l.jsx(I,{className:h?"w-3 h-3":"w-4 h-4"}),l.jsx("span",{className:h?"hidden sm:inline":"",children:h?k.split(" ")[0]:k}),C==="alerts"&&r.filter(L=>!L.acknowledged).length>0&&l.jsx("span",{className:`bg-red-500 text-white rounded-full ${h?"text-xs px-1 py-0.5":"text-xs px-2 py-1"}`,children:r.filter(L=>!L.acknowledged).length})]},C))})})}),l.jsx("main",{className:`mx-auto ${h?"px-4 py-4":"max-w-7xl px-4 sm:px-6 lg:px-8 py-8"}`,children:R()})]})},bc=({data:e,type:t,height:r=300})=>{const n=e.reduce((s,o)=>{const c=new Date(o.timestamp).toLocaleTimeString(),d=s.find(u=>u.time===c);return d?d[o.location_id]=o.people_count:s.push({time:c,[o.location_id]:o.people_count}),s},[]),i=[...new Set(e.map(s=>s.location_id))],a=["#3b82f6","#10b981","#f59e0b","#ef4444","#8b5cf6"];return t==="line"?l.jsx(Pi,{width:"100%",height:r,children:l.jsxs(u3,{data:n,children:[l.jsx(Ln,{strokeDasharray:"3 3"}),l.jsx(tn,{dataKey:"time"}),l.jsx(rn,{}),l.jsx(ji,{}),l.jsx(_r,{}),i.map((s,o)=>l.jsx(Po,{type:"monotone",dataKey:s,stroke:a[o%a.length],strokeWidth:2,dot:{fill:a[o%a.length]}},s))]})}):l.jsx(Pi,{width:"100%",height:r,children:l.jsxs(Px,{data:n,children:[l.jsx(Ln,{strokeDasharray:"3 3"}),l.jsx(tn,{dataKey:"time"}),l.jsx(rn,{}),l.jsx(ji,{}),l.jsx(_r,{}),i.map((s,o)=>l.jsx(wo,{dataKey:s,fill:a[o%a.length]},s))]})})},y3=({zones:e,user:t})=>{const[r,n]=y.useState([{id:"evac-001",name:"Bhairav Ghat Emergency Evacuation",status:"draft",fromZones:["bhairav-ghat"],toZones:["narsingh-ghat","kshipra-ghat"],estimatedTime:15,peopleAffected:950,priority:"critical",createdAt:new Date},{id:"evac-002",name:"Mahakal Ghat Crowd Redistribution",status:"draft",fromZones:["mahakal-ghat"],toZones:["ram-ghat"],estimatedTime:10,peopleAffected:720,priority:"high",createdAt:new Date(Date.now()-3e5)}]),[i,a]=y.useState(""),[s,o]=y.useState(!1),c=p=>{n(v=>v.map(x=>x.id===p?{...x,status:"active",activatedAt:new Date}:x))},d=p=>{n(v=>v.map(x=>x.id===p?{...x,status:"completed"}:x))},u=p=>{switch(p){case"critical":return"bg-red-100 text-red-800 border-red-200";case"high":return"bg-orange-100 text-orange-800 border-orange-200";case"medium":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"low":return"bg-blue-100 text-blue-800 border-blue-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},h=p=>{switch(p){case"active":return"bg-green-100 text-green-800";case"completed":return"bg-gray-100 text-gray-800";case"draft":return"bg-blue-100 text-blue-800";default:return"bg-gray-100 text-gray-800"}},f=p=>{switch(p){case"active":return l.jsx(Fr,{className:"w-4 h-4"});case"completed":return l.jsx(Rn,{className:"w-4 h-4"});case"draft":return l.jsx(Dn,{className:"w-4 h-4"});default:return l.jsx(Dn,{className:"w-4 h-4"})}},m=e.filter(p=>p.status==="critical"),g=e.filter(p=>p.status==="safe");return l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[l.jsxs("div",{className:"flex items-center justify-between mb-6",children:[l.jsxs("div",{children:[l.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Evacuation Control Center"}),l.jsx("p",{className:"text-sm text-gray-600",children:"Manage emergency evacuation plans and crowd redistribution"})]}),l.jsxs("div",{className:"flex items-center space-x-3",children:[l.jsx("div",{className:`px-3 py-1 rounded-full text-sm font-medium ${m.length>0?"bg-red-100 text-red-800":"bg-green-100 text-green-800"}`,children:m.length>0?`${m.length} Critical Zones`:"All Zones Safe"}),l.jsx("button",{onClick:()=>o(!0),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Create Plan"})]})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[l.jsxs("div",{className:"bg-red-50 rounded-lg p-4",children:[l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx(Be,{className:"w-5 h-5 text-red-600"}),l.jsx("span",{className:"font-medium text-red-900",children:"Critical Zones"})]}),l.jsx("p",{className:"text-2xl font-bold text-red-600 mt-1",children:m.length})]}),l.jsxs("div",{className:"bg-green-50 rounded-lg p-4",children:[l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx(Rn,{className:"w-5 h-5 text-green-600"}),l.jsx("span",{className:"font-medium text-green-900",children:"Safe Zones"})]}),l.jsx("p",{className:"text-2xl font-bold text-green-600 mt-1",children:g.length})]}),l.jsxs("div",{className:"bg-blue-50 rounded-lg p-4",children:[l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx(Fr,{className:"w-5 h-5 text-blue-600"}),l.jsx("span",{className:"font-medium text-blue-900",children:"Active Plans"})]}),l.jsx("p",{className:"text-2xl font-bold text-blue-600 mt-1",children:r.filter(p=>p.status==="active").length})]}),l.jsxs("div",{className:"bg-purple-50 rounded-lg p-4",children:[l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx(nt,{className:"w-5 h-5 text-purple-600"}),l.jsx("span",{className:"font-medium text-purple-900",children:"People Affected"})]}),l.jsx("p",{className:"text-2xl font-bold text-purple-600 mt-1",children:r.filter(p=>p.status==="active").reduce((p,v)=>p+v.peopleAffected,0).toLocaleString()})]})]})]}),l.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[l.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-6",children:"Evacuation Plans"}),r.length===0?l.jsxs("div",{className:"text-center py-8 text-gray-500",children:[l.jsx(Fr,{className:"w-12 h-12 mx-auto mb-2 text-gray-400"}),l.jsx("p",{children:"No evacuation plans created"}),l.jsx("p",{className:"text-sm",children:"Create a plan to manage crowd evacuation"})]}):l.jsx("div",{className:"space-y-4",children:r.map(p=>l.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[l.jsxs("div",{className:"flex items-start justify-between mb-3",children:[l.jsxs("div",{className:"flex-1",children:[l.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[l.jsx("h4",{className:"font-medium text-gray-900",children:p.name}),l.jsxs("span",{className:`inline-flex items-center space-x-1 px-2 py-1 rounded-full text-xs font-medium ${h(p.status)}`,children:[f(p.status),l.jsx("span",{className:"capitalize",children:p.status})]}),l.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium border ${u(p.priority)}`,children:p.priority.toUpperCase()})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 text-sm text-gray-600",children:[l.jsxs("div",{children:[l.jsx("span",{className:"font-medium",children:"From:"}),l.jsx("div",{className:"mt-1",children:p.fromZones.map(v=>{const x=e.find(j=>j.id===v);return l.jsxs("div",{className:"flex items-center space-x-1",children:[l.jsx(nn,{className:"w-3 h-3"}),l.jsx("span",{children:x?.name||v})]},v)})})]}),l.jsxs("div",{children:[l.jsx("span",{className:"font-medium",children:"To:"}),l.jsx("div",{className:"mt-1",children:p.toZones.map(v=>{const x=e.find(j=>j.id===v);return l.jsxs("div",{className:"flex items-center space-x-1",children:[l.jsx(nn,{className:"w-3 h-3"}),l.jsx("span",{children:x?.name||v})]},v)})})]}),l.jsxs("div",{children:[l.jsx("span",{className:"font-medium",children:"Estimated Time:"}),l.jsxs("div",{className:"flex items-center space-x-1 mt-1",children:[l.jsx(Dn,{className:"w-3 h-3"}),l.jsxs("span",{children:[p.estimatedTime," minutes"]})]})]}),l.jsxs("div",{children:[l.jsx("span",{className:"font-medium",children:"People Affected:"}),l.jsxs("div",{className:"flex items-center space-x-1 mt-1",children:[l.jsx(nt,{className:"w-3 h-3"}),l.jsx("span",{children:p.peopleAffected.toLocaleString()})]})]})]})]}),l.jsxs("div",{className:"flex items-center space-x-2 ml-4",children:[p.status==="draft"&&l.jsx("button",{onClick:()=>c(p.id),className:"px-3 py-1 bg-green-600 text-white rounded text-sm hover:bg-green-700 transition-colors",children:"Activate"}),p.status==="active"&&l.jsx("button",{onClick:()=>d(p.id),className:"px-3 py-1 bg-gray-600 text-white rounded text-sm hover:bg-gray-700 transition-colors",children:"Complete"}),l.jsx("button",{onClick:()=>a(p.id),className:"px-3 py-1 bg-blue-600 text-white rounded text-sm hover:bg-blue-700 transition-colors",children:"Details"})]})]}),p.status==="active"&&p.activatedAt&&l.jsx("div",{className:"mt-3 p-3 bg-green-50 border border-green-200 rounded",children:l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx(Fr,{className:"w-4 h-4 text-green-600 animate-pulse"}),l.jsxs("span",{className:"text-sm font-medium text-green-800",children:["Plan activated at ",p.activatedAt.toLocaleTimeString()]})]})})]},p.id))})]}),l.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[l.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-6",children:"Emergency Actions"}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[l.jsxs("button",{className:"flex items-center space-x-3 p-4 bg-red-50 border border-red-200 rounded-lg hover:bg-red-100 transition-colors",children:[l.jsx(Be,{className:"w-6 h-6 text-red-600"}),l.jsxs("div",{className:"text-left",children:[l.jsx("div",{className:"font-medium text-red-900",children:"Emergency Broadcast"}),l.jsx("div",{className:"text-sm text-red-700",children:"Send alert to all zones"})]})]}),l.jsxs("button",{className:"flex items-center space-x-3 p-4 bg-yellow-50 border border-yellow-200 rounded-lg hover:bg-yellow-100 transition-colors",children:[l.jsx(Fr,{className:"w-6 h-6 text-yellow-600"}),l.jsxs("div",{className:"text-left",children:[l.jsx("div",{className:"font-medium text-yellow-900",children:"Activate All Plans"}),l.jsx("div",{className:"text-sm text-yellow-700",children:"Execute all evacuation plans"})]})]}),l.jsxs("button",{className:"flex items-center space-x-3 p-4 bg-blue-50 border border-blue-200 rounded-lg hover:bg-blue-100 transition-colors",children:[l.jsx(nt,{className:"w-6 h-6 text-blue-600"}),l.jsxs("div",{className:"text-left",children:[l.jsx("div",{className:"font-medium text-blue-900",children:"Crowd Redistribution"}),l.jsx("div",{className:"text-sm text-blue-700",children:"Balance zone capacities"})]})]})]})]}),l.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[l.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-6",children:"Communication Center"}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[l.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Quick Messages"}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:[l.jsx("button",{className:"text-left p-2 bg-white border border-gray-200 rounded hover:bg-gray-50 transition-colors",children:'"Please move to designated safe areas"'}),l.jsx("button",{className:"text-left p-2 bg-white border border-gray-200 rounded hover:bg-gray-50 transition-colors",children:'"Follow evacuation route signs"'}),l.jsx("button",{className:"text-left p-2 bg-white border border-gray-200 rounded hover:bg-gray-50 transition-colors",children:'"Maintain calm and orderly movement"'}),l.jsx("button",{className:"text-left p-2 bg-white border border-gray-200 rounded hover:bg-gray-50 transition-colors",children:'"Emergency services are on standby"'})]})]}),l.jsxs("div",{className:"bg-blue-50 rounded-lg p-4",children:[l.jsx("h4",{className:"font-medium text-blue-900 mb-2",children:"Emergency Contacts"}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm",children:[l.jsxs("div",{children:[l.jsx("div",{className:"font-medium",children:"Control Room"}),l.jsx("div",{className:"text-blue-700",children:"+91-9876543210"})]}),l.jsxs("div",{children:[l.jsx("div",{className:"font-medium",children:"Medical Emergency"}),l.jsx("div",{className:"text-blue-700",children:"102"})]}),l.jsxs("div",{children:[l.jsx("div",{className:"font-medium",children:"Police Control"}),l.jsx("div",{className:"text-blue-700",children:"100"})]})]})]})]})]})]})},x3=({user:e,zones:t,alerts:r,crowdData:n,connectionStatus:i,onLogout:a,onAlertAcknowledge:s,onDetectionResult:o,onRefresh:c,onExportData:d,isLoading:u=!1})=>{const[h,f]=y.useState("overview"),[m,g]=y.useState(""),[p,v]=y.useState(!0),[x,j]=y.useState(!0),[b,S]=y.useState(!0),N=e.permissions.canViewAllZones?t:t.filter(O=>e.assigned_zones.includes(O.id)),P=()=>N.reduce((O,D)=>O+D.current_count,0),E=()=>N.filter(O=>O.status==="critical").length,w=()=>r.filter(O=>!O.acknowledged&&(e.permissions.canViewAllZones||e.assigned_zones.includes(O.location_id))),A=()=>{switch(h){case"overview":return l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[l.jsx("div",{className:"bg-white rounded-xl shadow-lg p-6",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Assigned Zones"}),l.jsx("p",{className:"text-2xl font-bold text-blue-900",children:N.length})]}),l.jsx("div",{className:"bg-blue-100 p-3 rounded-lg",children:l.jsx(yi,{className:"w-6 h-6 text-blue-600"})})]})}),l.jsx("div",{className:"bg-white rounded-xl shadow-lg p-6",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total People"}),l.jsx("p",{className:"text-2xl font-bold text-gray-900",children:P().toLocaleString()})]}),l.jsx("div",{className:"bg-green-100 p-3 rounded-lg",children:l.jsx(nt,{className:"w-6 h-6 text-green-600"})})]})}),l.jsx("div",{className:"bg-white rounded-xl shadow-lg p-6",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Critical Zones"}),l.jsx("p",{className:"text-2xl font-bold text-red-600",children:E()})]}),l.jsx("div",{className:"bg-red-100 p-3 rounded-lg",children:l.jsx(Be,{className:"w-6 h-6 text-red-600"})})]})}),l.jsx("div",{className:"bg-white rounded-xl shadow-lg p-6",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Active Alerts"}),l.jsx("p",{className:"text-2xl font-bold text-yellow-600",children:w().length})]}),l.jsx("div",{className:"bg-yellow-100 p-3 rounded-lg",children:l.jsx(Fr,{className:"w-6 h-6 text-yellow-600"})})]})})]}),l.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[l.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Duty Information"}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[l.jsxs("div",{className:"bg-blue-50 rounded-lg p-4",children:[l.jsx("h4",{className:"font-medium text-blue-900 mb-2",children:"Officer Details"}),l.jsxs("div",{className:"space-y-1 text-sm text-blue-800",children:[l.jsxs("p",{children:[l.jsx("strong",{children:"Name:"})," ",e.profile.name]}),l.jsxs("p",{children:[l.jsx("strong",{children:"Badge:"})," ",e.profile.badgeNumber]}),l.jsxs("p",{children:[l.jsx("strong",{children:"Department:"})," ",e.profile.department]}),l.jsxs("p",{children:[l.jsx("strong",{children:"Contact:"})," ",e.profile.contact]})]})]}),l.jsxs("div",{className:"bg-green-50 rounded-lg p-4",children:[l.jsx("h4",{className:"font-medium text-green-900 mb-2",children:"Current Shift"}),l.jsxs("div",{className:"space-y-1 text-sm text-green-800",children:[l.jsxs("p",{children:[l.jsx("strong",{children:"Shift:"})," ",e.profile.shift]}),l.jsxs("p",{children:[l.jsx("strong",{children:"Status:"})," On Duty"]}),l.jsxs("p",{children:[l.jsx("strong",{children:"Started:"})," ",new Date().toLocaleTimeString()]})]})]}),l.jsxs("div",{className:"bg-purple-50 rounded-lg p-4",children:[l.jsx("h4",{className:"font-medium text-purple-900 mb-2",children:"Emergency Contacts"}),l.jsxs("div",{className:"space-y-1 text-sm text-purple-800",children:[l.jsxs("p",{children:[l.jsx("strong",{children:"Control Room:"})," 100"]}),l.jsxs("p",{children:[l.jsx("strong",{children:"Medical:"})," 102"]}),l.jsxs("p",{children:[l.jsx("strong",{children:"Fire:"})," 101"]}),l.jsxs("p",{children:[l.jsx("strong",{children:"Emergency:"})," 108"]})]})]})]})]}),l.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[l.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Assigned Zones"}),l.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-6",children:N.map(O=>l.jsx(Ac,{zone:O,onClick:()=>g(O.id)},O.id))})]}),l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[l.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[l.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Crowd Trends"}),l.jsx(bc,{data:n,type:"line"})]}),l.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[l.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Zone Status"}),l.jsx(bc,{data:n,type:"bar"})]})]})]});case"map":return l.jsx("div",{className:"space-y-6",children:l.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Tactical Map View"}),l.jsxs("div",{className:"flex items-center space-x-4",children:[l.jsxs("label",{className:"flex items-center space-x-2",children:[l.jsx("input",{type:"checkbox",checked:p,onChange:O=>v(O.target.checked),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),l.jsx("span",{className:"text-sm text-gray-700",children:"Zone Heatmap"})]}),l.jsxs("label",{className:"flex items-center space-x-2",children:[l.jsx("input",{type:"checkbox",checked:x,onChange:O=>j(O.target.checked),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),l.jsx("span",{className:"text-sm text-gray-700",children:"Evacuation Routes"})]}),l.jsxs("label",{className:"flex items-center space-x-2",children:[l.jsx("input",{type:"checkbox",checked:b,onChange:O=>S(O.target.checked),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),l.jsx("span",{className:"text-sm text-gray-700",children:"Flow Indicators"})]})]})]}),l.jsx("div",{className:"h-96",children:l.jsx(Ec,{zones:N,showHeatmap:p,showEvacuationRoutes:x,showFlowIndicators:b,selectedZone:m,onZoneClick:O=>g(O.id)})})]})});case"alerts":return l.jsx("div",{className:"space-y-6",children:l.jsx(_x,{alerts:r,zones:t,onAlertAcknowledge:s,user:e})});case"prediction":return l.jsx("div",{className:"space-y-6",children:l.jsx(Nx,{zones:N,selectedZone:m})});case"evacuation":return l.jsx("div",{className:"space-y-6",children:l.jsx(y3,{zones:N,user:e})});default:return null}};return l.jsxs("div",{className:"min-h-screen bg-gray-50",children:[l.jsx("header",{className:"bg-white shadow-sm border-b",children:l.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:l.jsxs("div",{className:"flex items-center justify-between h-16",children:[l.jsxs("div",{className:"flex items-center space-x-4",children:[l.jsx("div",{className:"bg-blue-600 p-2 rounded-lg",children:l.jsx(Kr,{className:"w-6 h-6 text-white"})}),l.jsxs("div",{children:[l.jsx("h1",{className:"text-xl font-semibold text-gray-900",children:"Police Dashboard - Divya Drishti (दिव्य  दृष्टि)"}),l.jsx("p",{className:"text-sm text-gray-600",children:"Law Enforcement & Crowd Control"})]})]}),l.jsxs("div",{className:"flex items-center space-x-4",children:[l.jsxs("button",{onClick:c,disabled:u,className:"flex items-center space-x-2 px-3 py-2 text-gray-600 hover:text-gray-900 transition-colors disabled:opacity-50",children:[l.jsx(Un,{className:`w-4 h-4 ${u?"animate-spin":""}`}),l.jsx("span",{children:"Refresh"})]}),e.permissions.canExportData&&l.jsxs("button",{onClick:d,className:"flex items-center space-x-2 px-3 py-2 text-gray-600 hover:text-gray-900 transition-colors",children:[l.jsx(Ni,{className:"w-4 h-4"}),l.jsx("span",{children:"Report"})]}),l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),l.jsx("span",{className:"text-sm text-gray-600",children:"On Duty"})]}),l.jsxs("div",{className:"text-sm text-gray-600",children:[l.jsx("div",{className:"font-medium",children:e.profile.name}),l.jsx("div",{className:"text-xs",children:e.profile.badgeNumber})]}),l.jsxs("button",{onClick:a,className:"flex items-center space-x-2 px-3 py-2 text-gray-600 hover:text-gray-900 transition-colors",children:[l.jsx(jc,{className:"w-4 h-4"}),l.jsx("span",{children:"End Shift"})]})]})]})})}),l.jsx("nav",{className:"bg-white border-b",children:l.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:l.jsx("div",{className:"flex space-x-8",children:[{id:"overview",label:"Duty Overview",icon:nt},{id:"map",label:"Tactical Map",icon:Sc},{id:"alerts",label:"Active Alerts",icon:Be},...e.permissions.canAccessPredictions?[{id:"prediction",label:"Predictions",icon:Or}]:[],...e.permissions.canControlEvacuation?[{id:"evacuation",label:"Evacuation Control",icon:Fr}]:[]].map(({id:O,label:D,icon:R})=>l.jsxs("button",{onClick:()=>f(O),className:`flex items-center space-x-2 px-4 py-3 border-b-2 font-medium text-sm transition-colors ${h===O?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[l.jsx(R,{className:"w-4 h-4"}),l.jsx("span",{children:D}),O==="alerts"&&w().length>0&&l.jsx("span",{className:"bg-red-500 text-white text-xs px-2 py-1 rounded-full",children:w().length})]},O))})})}),l.jsx("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:A()})]})},b3=({user:e,zones:t,alerts:r,crowdData:n,connectionStatus:i,onLogout:a,onAlertAcknowledge:s,onDetectionResult:o,onRefresh:c,onExportData:d,isLoading:u=!1})=>{const[h,f]=y.useState("overview"),[m,g]=y.useState(""),v=t.filter(S=>e.assigned_zones.includes(S.id)),x=()=>r.filter(S=>e.assigned_zones.includes(S.location_id)&&!S.acknowledged),j=()=>v.reduce((S,_)=>S+_.current_count,0),b=()=>{switch(h){case"overview":return l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[l.jsx("div",{className:"bg-white rounded-xl shadow-lg p-6",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-sm font-medium text-gray-600",children:"My Zones"}),l.jsx("p",{className:"text-2xl font-bold text-purple-900",children:v.length})]}),l.jsx("div",{className:"bg-purple-100 p-3 rounded-lg",children:l.jsx(nn,{className:"w-6 h-6 text-purple-600"})})]})}),l.jsx("div",{className:"bg-white rounded-xl shadow-lg p-6",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-sm font-medium text-gray-600",children:"People Count"}),l.jsx("p",{className:"text-2xl font-bold text-gray-900",children:j().toLocaleString()})]}),l.jsx("div",{className:"bg-green-100 p-3 rounded-lg",children:l.jsx(nt,{className:"w-6 h-6 text-green-600"})})]})}),l.jsx("div",{className:"bg-white rounded-xl shadow-lg p-6",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Alerts"}),l.jsx("p",{className:"text-2xl font-bold text-yellow-600",children:x().length})]}),l.jsx("div",{className:"bg-yellow-100 p-3 rounded-lg",children:l.jsx(Be,{className:"w-6 h-6 text-yellow-600"})})]})})]}),l.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[l.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Volunteer Information"}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[l.jsxs("div",{className:"bg-purple-50 rounded-lg p-4",children:[l.jsx("h4",{className:"font-medium text-purple-900 mb-2",children:"Personal Details"}),l.jsxs("div",{className:"space-y-1 text-sm text-purple-800",children:[l.jsxs("p",{children:[l.jsx("strong",{children:"Name:"})," ",e.profile.name]}),l.jsxs("p",{children:[l.jsx("strong",{children:"ID:"})," ",e.profile.badgeNumber]}),l.jsxs("p",{children:[l.jsx("strong",{children:"Department:"})," ",e.profile.department]}),l.jsxs("p",{children:[l.jsx("strong",{children:"Contact:"})," ",e.profile.contact]})]})]}),l.jsxs("div",{className:"bg-blue-50 rounded-lg p-4",children:[l.jsx("h4",{className:"font-medium text-blue-900 mb-2",children:"Shift Information"}),l.jsxs("div",{className:"space-y-1 text-sm text-blue-800",children:[l.jsxs("p",{children:[l.jsx("strong",{children:"Shift:"})," ",e.profile.shift]}),l.jsxs("p",{children:[l.jsx("strong",{children:"Status:"})," Active"]}),l.jsxs("p",{children:[l.jsx("strong",{children:"Started:"})," ",new Date().toLocaleTimeString()]}),l.jsxs("p",{children:[l.jsx("strong",{children:"Zones:"})," ",e.assigned_zones.length," assigned"]})]})]})]})]}),l.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[l.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"My Assigned Zones"}),v.length===0?l.jsxs("div",{className:"text-center py-8 text-gray-500",children:[l.jsx(nn,{className:"w-12 h-12 mx-auto mb-2 text-gray-400"}),l.jsx("p",{children:"No zones assigned"}),l.jsx("p",{className:"text-sm",children:"Contact your supervisor for zone assignments"})]}):l.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:v.map(S=>l.jsx(Ac,{zone:S,onClick:()=>g(S.id)},S.id))})]}),l.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[l.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Quick Actions"}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[l.jsxs("button",{className:"flex items-center space-x-3 p-4 bg-red-50 border border-red-200 rounded-lg hover:bg-red-100 transition-colors",children:[l.jsx(Eo,{className:"w-5 h-5 text-red-600"}),l.jsxs("div",{className:"text-left",children:[l.jsx("div",{className:"font-medium text-red-900",children:"Emergency"}),l.jsx("div",{className:"text-sm text-red-700",children:"Call 108"})]})]}),l.jsxs("button",{className:"flex items-center space-x-3 p-4 bg-blue-50 border border-blue-200 rounded-lg hover:bg-blue-100 transition-colors",children:[l.jsx(Eo,{className:"w-5 h-5 text-blue-600"}),l.jsxs("div",{className:"text-left",children:[l.jsx("div",{className:"font-medium text-blue-900",children:"Police"}),l.jsx("div",{className:"text-sm text-blue-700",children:"Call 100"})]})]}),l.jsxs("button",{className:"flex items-center space-x-3 p-4 bg-green-50 border border-green-200 rounded-lg hover:bg-green-100 transition-colors",children:[l.jsx(Eo,{className:"w-5 h-5 text-green-600"}),l.jsxs("div",{className:"text-left",children:[l.jsx("div",{className:"font-medium text-green-900",children:"Medical"}),l.jsx("div",{className:"text-sm text-green-700",children:"Call 102"})]})]})]})]}),v.length>0&&l.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[l.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Zone Activity"}),l.jsx(bc,{data:n.filter(S=>v.some(_=>_.id===S.location_id)),type:"line"})]})]});case"map":return l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"My Zone Map"}),l.jsxs("div",{className:"text-sm text-gray-600",children:["Showing ",v.length," assigned zones"]})]}),l.jsx("div",{className:"h-96",children:l.jsx(Ec,{zones:v,showHeatmap:!0,showEvacuationRoutes:!1,showFlowIndicators:!1,selectedZone:m,onZoneClick:S=>g(S.id)})})]}),m&&l.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[l.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Zone Details"}),(()=>{const S=v.find(_=>_.id===m);return S?l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[l.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[l.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:S.name}),l.jsxs("div",{className:"space-y-1 text-sm text-gray-600",children:[l.jsxs("p",{children:[l.jsx("strong",{children:"Current Count:"})," ",S.current_count]}),l.jsxs("p",{children:[l.jsx("strong",{children:"Capacity:"})," ",S.capacity]}),l.jsxs("p",{children:[l.jsx("strong",{children:"Status:"})," ",l.jsx("span",{className:`capitalize ${S.status==="safe"?"text-green-600":S.status==="moderate"?"text-yellow-600":"text-red-600"}`,children:S.status})]}),l.jsxs("p",{children:[l.jsx("strong",{children:"Last Updated:"})," ",new Date(S.last_updated).toLocaleTimeString()]})]})]}),l.jsxs("div",{className:"bg-blue-50 rounded-lg p-4",children:[l.jsx("h4",{className:"font-medium text-blue-900 mb-2",children:"Volunteer Tasks"}),l.jsxs("div",{className:"space-y-1 text-sm text-blue-800",children:[l.jsx("p",{children:"• Monitor crowd flow"}),l.jsx("p",{children:"• Assist pilgrims with directions"}),l.jsx("p",{children:"• Report any incidents"}),l.jsx("p",{children:"• Help maintain queue discipline"})]})]}),l.jsxs("div",{className:"bg-green-50 rounded-lg p-4",children:[l.jsx("h4",{className:"font-medium text-green-900 mb-2",children:"Emergency Contacts"}),l.jsxs("div",{className:"space-y-1 text-sm text-green-800",children:[l.jsxs("p",{children:[l.jsx("strong",{children:"Supervisor:"})," +91-9876543210"]}),l.jsxs("p",{children:[l.jsx("strong",{children:"Medical Team:"})," 102"]}),l.jsxs("p",{children:[l.jsx("strong",{children:"Security:"})," 100"]}),l.jsxs("p",{children:[l.jsx("strong",{children:"Control Room:"})," +91-9876543211"]})]})]})]}):null})()]})]});case"alerts":return l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[l.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Zone Alerts"}),x().length===0?l.jsxs("div",{className:"text-center py-8 text-gray-500",children:[l.jsx(Be,{className:"w-12 h-12 mx-auto mb-2 text-gray-400"}),l.jsx("p",{children:"No active alerts for your zones"}),l.jsx("p",{className:"text-sm",children:"All zones are operating normally"})]}):l.jsx("div",{className:"space-y-3",children:x().map(S=>l.jsx("div",{className:`p-4 rounded-lg border ${S.type==="critical"?"bg-red-50 border-red-200":S.type==="warning"?"bg-yellow-50 border-yellow-200":"bg-blue-50 border-blue-200"}`,children:l.jsxs("div",{className:"flex items-start space-x-3",children:[l.jsx(Be,{className:`w-5 h-5 mt-0.5 ${S.type==="critical"?"text-red-600":S.type==="warning"?"text-yellow-600":"text-blue-600"}`}),l.jsxs("div",{className:"flex-1",children:[l.jsx("p",{className:"font-medium text-gray-900",children:S.message}),l.jsxs("div",{className:"flex items-center space-x-4 mt-1",children:[l.jsx("span",{className:"text-xs text-gray-500",children:S.location_id}),l.jsx("span",{className:"text-xs text-gray-500",children:new Date(S.timestamp).toLocaleString()})]})]})]})},S.id))})]}),l.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[l.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Alert Response Instructions"}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:[l.jsx("h4",{className:"font-medium text-red-900 mb-2",children:"Critical Alerts"}),l.jsxs("ul",{className:"text-sm text-red-800 space-y-1",children:[l.jsx("li",{children:"• Immediately contact your supervisor"}),l.jsx("li",{children:"• Help guide people to safe areas"}),l.jsx("li",{children:"• Do not leave your assigned zone"}),l.jsx("li",{children:"• Follow evacuation procedures if instructed"})]})]}),l.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:[l.jsx("h4",{className:"font-medium text-yellow-900 mb-2",children:"Warning Alerts"}),l.jsxs("ul",{className:"text-sm text-yellow-800 space-y-1",children:[l.jsx("li",{children:"• Monitor the situation closely"}),l.jsx("li",{children:"• Be prepared to assist with crowd control"}),l.jsx("li",{children:"• Report any changes to control room"}),l.jsx("li",{children:"• Help maintain orderly movement"})]})]})]})]})]});default:return null}};return l.jsxs("div",{className:"min-h-screen bg-gray-50",children:[l.jsx("header",{className:"bg-white shadow-sm border-b",children:l.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:l.jsxs("div",{className:"flex items-center justify-between h-16",children:[l.jsxs("div",{className:"flex items-center space-x-4",children:[l.jsx("div",{className:"bg-purple-600 p-2 rounded-lg",children:l.jsx(Vx,{className:"w-6 h-6 text-white"})}),l.jsxs("div",{children:[l.jsx("h1",{className:"text-xl font-semibold text-gray-900",children:"Volunteer Dashboard - Divya Drishti (दिव्य  दृष्टि)"}),l.jsx("p",{className:"text-sm text-gray-600",children:"Seva & Crowd Assistance"})]})]}),l.jsxs("div",{className:"flex items-center space-x-4",children:[l.jsxs("button",{onClick:c,disabled:u,className:"flex items-center space-x-2 px-3 py-2 text-gray-600 hover:text-gray-900 transition-colors disabled:opacity-50",children:[l.jsx(Un,{className:`w-4 h-4 ${u?"animate-spin":""}`}),l.jsx("span",{children:"Refresh"})]}),l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),l.jsx("span",{className:"text-sm text-gray-600",children:"On Duty"})]}),l.jsxs("div",{className:"text-sm text-gray-600",children:[l.jsx("div",{className:"font-medium",children:e.profile.name}),l.jsx("div",{className:"text-xs",children:e.profile.badgeNumber})]}),l.jsxs("button",{onClick:a,className:"flex items-center space-x-2 px-3 py-2 text-gray-600 hover:text-gray-900 transition-colors",children:[l.jsx(jc,{className:"w-4 h-4"}),l.jsx("span",{children:"End Shift"})]})]})]})})}),l.jsx("nav",{className:"bg-white border-b",children:l.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:l.jsx("div",{className:"flex space-x-8",children:[{id:"overview",label:"My Dashboard",icon:nt},{id:"map",label:"Zone Map",icon:Sc},{id:"alerts",label:"Zone Alerts",icon:Be}].map(({id:S,label:_,icon:N})=>l.jsxs("button",{onClick:()=>f(S),className:`flex items-center space-x-2 px-4 py-3 border-b-2 font-medium text-sm transition-colors ${h===S?"border-purple-500 text-purple-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[l.jsx(N,{className:"w-4 h-4"}),l.jsx("span",{children:_}),S==="alerts"&&x().length>0&&l.jsx("span",{className:"bg-red-500 text-white text-xs px-2 py-1 rounded-full",children:x().length})]},S))})})}),l.jsx("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:b()})]})},w3=e=>{const{user:t}=e,[r,n]=y.useState(!1),[i,a]=y.useState(!1),[s,o]=y.useState(!1),c=async()=>{if(!s){o(!0),n(!0);try{await e.onRefresh()}finally{n(!1),o(!1)}}};y.useEffect(()=>{const u=()=>{a(window.innerWidth<768)};u(),window.addEventListener("resize",u);const h=()=>{console.log("Dashboard received emergency stop signal"),n(!1),o(!1)};return window.addEventListener("emergency-stop",h),()=>{window.removeEventListener("resize",u),window.removeEventListener("emergency-stop",h)}},[]);const d={...e,onRefresh:c,isLoading:r,isRefreshing:s,isMobile:i};switch(t.role){case"admin":return l.jsx(Lm,{...d});case"police":return l.jsx(x3,{...d});case"volunteer":return l.jsx(b3,{...d});default:return l.jsx(Lm,{...d})}},j3=({size:e="md",color:t="blue",text:r,className:n="",timeout:i=5e3,showProgress:a=!1,progress:s=0})=>{const[o,c]=ll.useState(!1);ll.useEffect(()=>{const h=setTimeout(()=>{c(!0)},i);return()=>clearTimeout(h)},[i]);const d={sm:"w-4 h-4",md:"w-8 h-8",lg:"w-12 h-12"},u={blue:"border-blue-600",green:"border-green-600",red:"border-red-600",yellow:"border-yellow-600",purple:"border-purple-600"};return l.jsxs("div",{className:`flex flex-col items-center justify-center space-y-2 ${n}`,children:[l.jsx("div",{className:`${d[e]} border-2 ${u[t]} border-t-transparent rounded-full animate-spin`}),r&&l.jsx("p",{className:"text-sm text-gray-600",children:r}),a&&l.jsxs("div",{className:"w-full max-w-xs mx-auto mt-3",children:[l.jsxs("div",{className:"flex justify-between text-xs text-gray-500 mb-1",children:[l.jsx("span",{children:"Loading..."}),l.jsxs("span",{children:[Math.round(s),"%"]})]}),l.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:l.jsx("div",{className:`h-2 rounded-full transition-all duration-300 ${u[t].replace("border-","bg-")}`,style:{width:`${Math.min(s,100)}%`}})})]}),o&&l.jsxs("div",{className:"text-center",children:[l.jsx("p",{className:"text-xs text-red-600 mb-2",children:"System may be overloaded..."}),l.jsx("button",{onClick:()=>{try{typeof window<"u"&&window.performanceOptimizer&&typeof window.performanceOptimizer.emergencyStop=="function"&&window.performanceOptimizer.emergencyStop()}catch(h){console.warn("Emergency stop failed:",h)}setTimeout(()=>window.location.reload(),500)},className:"px-3 py-1 bg-red-600 text-white rounded text-xs hover:bg-red-700",children:"Emergency Reload"})]})]})};function S3(){const[e,t]=y.useState(null),[r,n]=y.useState(!0),[i,a]=y.useState("Initializing Enhanced YOLOv11..."),[s,o]=y.useState([]),[c,d]=y.useState([]),[u,h]=y.useState([]),[f,m]=y.useState("disconnected"),[g,p]=y.useState(null),[v,x]=y.useState(!1);y.useEffect(()=>{(async()=>{try{a("Initializing Enhanced YOLOv8...");const A=localStorage.getItem("simhastha_user");if(A)try{t(JSON.parse(A))}catch(D){console.error("Error parsing stored user:",D),localStorage.removeItem("simhastha_user")}const O=[{id:"ram-ghat",name:"Ram Ghat",coordinates:[[23.177,75.789],[23.1775,75.7895],[23.178,75.789],[23.1775,75.7885]],current_count:Math.floor(Math.random()*200)+50,capacity:500,status:"safe",last_updated:new Date().toISOString()},{id:"mahakal-ghat",name:"Mahakal Ghat",coordinates:[[23.176,75.788],[23.1765,75.7885],[23.177,75.788],[23.1765,75.7875]],current_count:Math.floor(Math.random()*300)+200,capacity:800,status:"moderate",last_updated:new Date().toISOString()}];o(O),h([]),m("disconnected"),a("Enhanced YOLOv8 ONNX ready"),x(!0),n(!1)}catch(A){console.error("App initialization error:",A),p("Failed to initialize application"),n(!1)}})();const w=setTimeout(()=>{a("Enhanced YOLOv8 detection system ready"),x(!0)},2e3);return()=>clearTimeout(w)},[]);const j=E=>{t(E),localStorage.setItem("simhastha_user",JSON.stringify(E))},b=async()=>{t(null),localStorage.removeItem("simhastha_user")},S=async E=>{try{f==="connected"&&await Oi.acknowledgeAlert(E),d(w=>w.map(A=>A.id===E?{...A,acknowledged:!0}:A))}catch(w){console.error("Error acknowledging alert:",w)}},_=async E=>{console.log("Detection result received:",E),E.locationId&&o(w=>w.map(A=>A.id===E.locationId?{...A,current_count:E.count||A.current_count,last_updated:new Date().toISOString(),status:E.count>A.capacity*.9?"critical":E.count>A.capacity*.7?"moderate":"safe"}:A))},N=async()=>{console.log("Refresh requested")},P=()=>{try{const E={zones:s,alerts:c,crowdData:u,timestamp:new Date().toISOString(),user:e?.profile.name},w=new Blob([JSON.stringify(E,null,2)],{type:"application/json"}),A=URL.createObjectURL(w),O=document.createElement("a");O.href=A,O.download=`simhastha-data-${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(O),O.click(),document.body.removeChild(O),URL.revokeObjectURL(A)}catch(E){console.error("Export error:",E),alert("Export failed. Please try again.")}};return g?l.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-4",children:l.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-8 max-w-md w-full text-center",children:[l.jsx("div",{className:"text-6xl mb-4",children:"⚠️"}),l.jsx("h1",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Application Error"}),l.jsx("p",{className:"text-gray-600 mb-6",children:g}),l.jsx("button",{onClick:()=>window.location.reload(),className:"w-full px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Reload Application"})]})}):r?l.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:l.jsx("div",{className:"text-center",children:l.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-8 max-w-md w-full",children:[l.jsx(j3,{size:"lg",text:"Loading application...",timeout:5e3}),l.jsxs("div",{className:"mt-4 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[l.jsx("div",{className:"text-sm text-blue-800 font-medium mb-2",children:"System Status:"}),l.jsx("div",{className:"text-xs text-blue-700",children:i}),l.jsx("div",{className:"text-xs text-blue-600 mt-1",children:"Enhanced YOLOv8 with ONNX runtime"}),l.jsxs("div",{className:"text-xs text-blue-500 mt-1",children:["Model Status: ",v?"Ready":"Loading..."]})]})]})})}):e?l.jsx(cb,{children:l.jsx(w3,{user:e,zones:s,alerts:c,crowdData:u,connectionStatus:f,onLogout:b,onAlertAcknowledge:S,onDetectionResult:_,onRefresh:N,onExportData:P})}):l.jsx(k1,{onLogin:j})}Bm(document.getElementById("root")).render(l.jsx(y.StrictMode,{children:l.jsx(S3,{})}));
